(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+6XX":function(t,e,n){var r=n("y1pI");t.exports=function(t){return r(this.__data__,t)>-1}},"+c4W":function(t,e,n){var r=n("711d"),i=n("4/ic"),o=n("9ggG"),a=n("9Nap");t.exports=function(t){return o(t)?r(a(t)):i(t)}},"+oFf":function(t,e){t.exports=!1},"/8Fb":function(t,e,n){var r=n("XKFU"),i=n("UExd")(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},"/9aa":function(t,e,n){var r=n("NykK"),i=n("ExA7");t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},"03A+":function(t,e,n){var r=n("JTzB"),i=n("ExA7"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},"0Cz8":function(t,e,n){var r=n("Xi7e"),i=n("ebwN"),o=n("e4Nc");t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},"0hfp":function(t,e,n){"use strict";n.r(e);n("8+KV");var r=function(t){return t},i=function(t){if(null==t)return r;var e,n,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*i+a,c[1]=(n+=t[1])*o+s;u<l;)c[u]=t[u],++u;return c}},o=function(t){var e,n=i(t.transform),r=1/0,o=r,a=-r,s=-r;function u(t){(t=n(t))[0]<r&&(r=t[0]),t[0]>a&&(a=t[0]),t[1]<o&&(o=t[1]),t[1]>s&&(s=t[1])}function l(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"Point":u(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(u)}}for(e in t.arcs.forEach((function(t){for(var e,i=-1,u=t.length;++i<u;)(e=n(t[i],i))[0]<r&&(r=e[0]),e[0]>a&&(a=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1])})),t.objects)l(t.objects[e]);return[r,o,a,s]},a=(n("bWfx"),function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return s(t,e)}))}:s(t,e)});function s(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=u(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function u(t,e){var n=i(t.transform),r=t.arcs;function o(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function a(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)o(t[n],e);return e.length<2&&e.push(e[0]),e}function u(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(u)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=a(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(a);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}var l=function(t,e){var n={},r={},i={},o=[],a=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o},c=function(t){return u(t,h.apply(this,arguments))};function h(t,e,n){var r,i,o;if(arguments.length>1)r=f(t,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:l(t,r)}}function f(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":u(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(u)}(e.arcs)}}(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}n("0l/t");var d=function(t){return u(t,p.apply(this,arguments))};function p(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function a(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(u(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=l(t,i)).length)>1)for(var o,s,u=1,c=a(i[0]);u<r;++u)(o=a(i[u]))>c&&(s=i[0],i[0]=i[u],i[u]=s,c=o);return i})).filter((function(t){return t.length>0}))}}var m=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n},g=function(t){var e={},n=t.map((function(){return[]}));function r(t,n){t.forEach((function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]}))}function i(t,e){t.forEach((function(t){r(t,e)}))}var o={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach((function(t){i(t,e)}))}};for(var a in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in o&&o[e.type](e.arcs,n)})),e)for(var s=e[a],u=s.length,l=0;l<u;++l)for(var c=l+1;c<u;++c){var h,f=s[l],d=s[c];(h=n[f])[a=m(h,d)]!==d&&h.splice(a,0,d),(h=n[d])[a=m(h,f)]!==f&&h.splice(a,0,f)}return n},v=function(t){if(null==t)return r;var e,n,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,l=t.length,c=new Array(l),h=Math.round((t[0]-a)/i),f=Math.round((t[1]-s)/o);for(c[0]=h-e,e=h,c[1]=f-n,n=f;u<l;)c[u]=t[u],++u;return c}},_=function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)u=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be ≥2");var n,r=(u=t.bbox||o(t))[0],i=u[1],a=u[2],s=u[3];e={scale:[a-r?(a-r)/(n-1):1,s-i?(s-i)/(n-1):1],translate:[r,i]}}var u,l,c=v(e),h=t.objects,f={};function d(t){return c(t)}function p(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(p)};break;case"Point":e={type:"Point",coordinates:d(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(d)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(l in h)f[l]=p(h[l]);return{type:"Topology",bbox:u,transform:e,objects:f,arcs:t.arcs.map((function(t){var e,n=0,r=1,i=t.length,o=new Array(i);for(o[0]=c(t[0],0);++n<i;)((e=c(t[n],n))[0]||e[1])&&(o[r++]=e);return 1===r&&(o[r++]=[0,0]),o.length=r,o}))}};n.d(e,"bbox",(function(){return o})),n.d(e,"feature",(function(){return a})),n.d(e,"mesh",(function(){return c})),n.d(e,"meshArcs",(function(){return h})),n.d(e,"merge",(function(){return d})),n.d(e,"mergeArcs",(function(){return p})),n.d(e,"neighbors",(function(){return g})),n.d(e,"quantize",(function(){return _})),n.d(e,"transform",(function(){return i})),n.d(e,"untransform",(function(){return v}))},"0ycA":function(t,e){t.exports=function(){return[]}},"1hJj":function(t,e,n){var r=n("e4Nc"),i=n("ftKO"),o=n("3A9y");function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},"1sa7":function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},"284h":function(t,e,n){var r=n("cDf5");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}},"2gN3":function(t,e,n){var r=n("Kz5y")["__core-js_shared__"];t.exports=r},"2rMq":function(t,e,n){var r;!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},"3A9y":function(t,e){t.exports=function(t){return this.__data__.has(t)}},"3Fdi":function(t,e,n){n("a1Th"),n("h7Nl"),n("Btvt");var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},"4/ic":function(t,e,n){var r=n("ZWtO");t.exports=function(t){return function(e){return r(e,t)}}},"44Ds":function(t,e,n){var r=n("e4Nc");function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},"4R65":function(t,e,n){n("bWfx"),n("bHtr"),n("xfY5"),n("NO8f"),n("f3/d"),n("Vd3H"),n("0l/t"),n("Oyvg"),n("eM6i"),n("HAE/"),n("hLT2"),n("Z2Ku"),n("L9s1"),n("a1Th"),n("h7Nl"),n("Btvt"),n("LK8F"),n("V+eJ"),n("KKXr"),n("pIFo"),n("Tze0"),n("2Spj"),n("hHhE"),n("DW2E"),function(t){"use strict";var e=Object.freeze;function n(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}}function u(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function l(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function f(t){return h(t).split(/\s+/)}function d(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?r(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}var T=window.requestAnimationFrame||b("RequestAnimationFrame")||w,A=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function S(t,e,n){if(!n||T!==w)return T.call(window,i(t,e));t.call(e)}function E(t){t&&A.call(window,t)}var k=(Object.freeze||Object)({freeze:e,extend:n,create:r,bind:i,lastId:o,stamp:a,throttle:s,wrapNum:u,falseFn:l,formatNum:c,trim:h,splitWords:f,setOptions:d,getParamString:p,template:g,isArray:v,indexOf:_,emptyImageUrl:y,requestFn:T,cancelFn:A,requestAnimFrame:S,cancelAnimFrame:E});function M(){}M.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);for(var a in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(r(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},M.include=function(t){return n(this.prototype,t),this},M.mergeOptions=function(t){return n(this.prototype.options,t),this},M.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var O={on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=f(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=f(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=l,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=l;delete this._events[t]}},fire:function(t,e,r){if(!this.listens(t,r))return this;var i=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=i((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};O.addEventListener=O.on,O.removeEventListener=O.clearAllEventListeners=O.off,O.addOneTimeEventListener=O.once,O.fireEvent=O.fire,O.hasEventListeners=O.listens;var P=M.extend(O);function z(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var R=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function C(t,e,n){return t instanceof z?t:v(t)?new z(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new z(t.x,t.y):new z(t,e,n)}function j(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function I(t,e){return!t||t instanceof j?t:new j(t,e)}function N(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function D(t,e){return t instanceof N?t:new N(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function B(t,e,n){return t instanceof F?t:v(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(t){return this.clone()._add(C(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(C(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=R(this.x),this.y=R(this.y),this},distanceTo:function(t){var e=(t=C(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=C(t)).x===this.x&&t.y===this.y},contains:function(t){return t=C(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},j.prototype={extend:function(t){return t=C(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new z(this.min.x,this.max.y)},getTopRight:function(){return new z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof z?C(t):I(t))instanceof j?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=I(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=I(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},N.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof N))return t?this.extend(B(t)||D(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new N(new F(e.lat-r,e.lng-i),new F(n.lat+r,n.lng+i))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof F||"lat"in t?B(t):D(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof N?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=D(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=D(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=D(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=B(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,B(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return D([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var U,G={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new j(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new N(new F(o.lat-r,o.lng-i),new F(a.lat-r,a.lng-i))}},V=n({},G,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),Z={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new z(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(U=6378137*Math.PI,new j([-U,-U],[U,U]))};function W(t,e,n,r){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function q(t,e,n,r){return new W(t,e,n,r)}W.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new z((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var H=n({},V,{code:"EPSG:3857",projection:Z,transformation:function(){var t=.5/(Math.PI*Z.R);return q(t,.5,-t,.5)}()}),Y=n({},H,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){var n,r,i,o,a,s,u="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)u+=(r?"L":"M")+(s=a[r]).x+" "+s.y;u+=e?Mt?"z":"x":""}return u||"M0 0"}var K=document.documentElement.style,J="ActiveXObject"in window,Q=J&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=Pt("webkit"),nt=Pt("android"),rt=Pt("android 2")||Pt("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=nt&&Pt("Google")&&it<537&&!("AudioNode"in window),at=!!window.opera,st=Pt("chrome"),ut=Pt("gecko")&&!et&&!at&&!J,lt=!st&&Pt("safari"),ct=Pt("phantom"),ht="OTransition"in K,ft=0===navigator.platform.indexOf("Win"),dt=J&&"transition"in K,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,mt="MozPerspective"in K,gt=!window.L_DISABLE_3D&&(dt||pt||mt)&&!ht&&!ct,vt="undefined"!=typeof orientation||Pt("mobile"),_t=vt&&et,yt=vt&&pt,bt=!window.PointerEvent&&window.MSPointerEvent,xt=!(et||!window.PointerEvent&&!bt),wt=!window.L_NO_TOUCH&&(xt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Tt=vt&&at,At=vt&&ut,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Et=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(n){}return t},kt=!!document.createElement("canvas").getContext,Mt=!(!document.createElementNS||!X("svg").createSVGRect),Ot=!Mt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}();function Pt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var zt=(Object.freeze||Object)({ie:J,ielt9:Q,edge:tt,webkit:et,android:nt,android23:rt,androidStock:ot,opera:at,chrome:st,gecko:ut,safari:lt,phantom:ct,opera12:ht,win:ft,ie3d:dt,webkit3d:pt,gecko3d:mt,any3d:gt,mobile:vt,mobileWebkit:_t,mobileWebkit3d:yt,msPointer:bt,pointer:xt,touch:wt,mobileOpera:Tt,mobileGecko:At,retina:St,passiveEvents:Et,canvas:kt,svg:Mt,vml:Ot}),Rt=bt?"MSPointerDown":"pointerdown",Lt=bt?"MSPointerMove":"pointermove",Ct=bt?"MSPointerUp":"pointerup",jt=bt?"MSPointerCancel":"pointercancel",It=["INPUT","SELECT","OPTION"],Nt={},Dt=!1,Ft=0;function Bt(t,e,n,r){return"touchstart"===e?function(t,e,n){var r=i((function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(It.indexOf(t.target.tagName)<0))return;Ne(t)}Zt(t,e)}));t["_leaflet_touchstart"+n]=r,t.addEventListener(Rt,r,!1),Dt||(document.documentElement.addEventListener(Rt,Ut,!0),document.documentElement.addEventListener(Lt,Gt,!0),document.documentElement.addEventListener(Ct,Vt,!0),document.documentElement.addEventListener(jt,Vt,!0),Dt=!0)}(t,n,r):"touchmove"===e?function(t,e,n){var r=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Zt(t,e)};t["_leaflet_touchmove"+n]=r,t.addEventListener(Lt,r,!1)}(t,n,r):"touchend"===e&&function(t,e,n){var r=function(t){Zt(t,e)};t["_leaflet_touchend"+n]=r,t.addEventListener(Ct,r,!1),t.addEventListener(jt,r,!1)}(t,n,r),this}function Ut(t){Nt[t.pointerId]=t,Ft++}function Gt(t){Nt[t.pointerId]&&(Nt[t.pointerId]=t)}function Vt(t){delete Nt[t.pointerId],Ft--}function Zt(t,e){for(var n in t.touches=[],Nt)t.touches.push(Nt[n]);t.changedTouches=[t],e(t)}var Wt=bt?"MSPointerDown":xt?"pointerdown":"touchstart",qt=bt?"MSPointerUp":xt?"pointerup":"touchend",Ht="_leaflet_";function Yt(t,e,n){var r,i,o=!1;function a(t){var e;if(xt){if(!tt||"mouse"===t.pointerType)return;e=Ft}else e=t.touches.length;if(!(e>1)){var n=Date.now(),a=n-(r||n);i=t.touches?t.touches[0]:t,o=a>0&&a<=250,r=n}}function s(t){if(o&&!i.cancelBubble){if(xt){if(!tt||"mouse"===t.pointerType)return;var n,a,s={};for(a in i)n=i[a],s[a]=n&&n.bind?n.bind(i):n;i=s}i.type="dblclick",i.button=0,e(i),r=null}}return t[Ht+Wt+n]=a,t[Ht+qt+n]=s,t[Ht+"dblclick"+n]=e,t.addEventListener(Wt,a,!!Et&&{passive:!1}),t.addEventListener(qt,s,!!Et&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Xt(t,e){var n=t[Ht+Wt+e],r=t[Ht+qt+e],i=t[Ht+"dblclick"+e];return t.removeEventListener(Wt,n,!!Et&&{passive:!1}),t.removeEventListener(qt,r,!!Et&&{passive:!1}),tt||t.removeEventListener("dblclick",i,!1),this}var $t,Kt,Jt,Qt,te,ee=ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ne=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),re="webkitTransition"===ne||"OTransition"===ne?ne+"End":"transitionend";function ie(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function ae(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function ue(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=me(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function fe(t,e){if(void 0!==t.classList)for(var n=f(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!he(t,e)){var o=me(t);pe(t,(o?o+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):pe(t,h((" "+me(t)+" ").replace(" "+e+" "," ")))}function pe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function me(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ge(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function _e(t,e,n){var r=e||new z(0,0);t.style[ee]=(dt?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function ye(t,e){t._leaflet_pos=e,gt?_e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function be(t){return t._leaflet_pos||new z(0,0)}if("onselectstart"in document)$t=function(){Oe(window,"selectstart",Ne)},Kt=function(){ze(window,"selectstart",Ne)};else{var xe=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$t=function(){if(xe){var t=document.documentElement.style;Jt=t[xe],t[xe]="none"}},Kt=function(){xe&&(document.documentElement.style[xe]=Jt,Jt=void 0)}}function we(){Oe(window,"dragstart",Ne)}function Te(){ze(window,"dragstart",Ne)}function Ae(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Se(),Qt=t,te=t.style.outline,t.style.outline="none",Oe(window,"keydown",Se))}function Se(){Qt&&(Qt.style.outline=te,Qt=void 0,te=void 0,ze(window,"keydown",Se))}function Ee(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function ke(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Me=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ne,TRANSITION_END:re,get:ie,getStyle:oe,create:ae,remove:se,empty:ue,toFront:le,toBack:ce,hasClass:he,addClass:fe,removeClass:de,setClass:pe,getClass:me,setOpacity:ge,testProp:ve,setTransform:_e,setPosition:ye,getPosition:be,disableTextSelection:$t,enableTextSelection:Kt,disableImageDrag:we,enableImageDrag:Te,preventOutline:Ae,restoreOutline:Se,getSizedParentNode:Ee,getScale:ke});function Oe(t,e,n,r){if("object"==typeof e)for(var i in e)Re(t,i,e[i],n);else for(var o=0,a=(e=f(e)).length;o<a;o++)Re(t,e[o],n,r);return this}var Pe="_leaflet_events";function ze(t,e,n,r){if("object"==typeof e)for(var i in e)Le(t,i,e[i],n);else if(e)for(var o=0,a=(e=f(e)).length;o<a;o++)Le(t,e[o],n,r);else{for(var s in t[Pe])Le(t,s,t[Pe][s]);delete t[Pe]}return this}function Re(t,e,n,r){var i=e+a(n)+(r?"_"+a(r):"");if(t[Pe]&&t[Pe][i])return this;var o=function(e){return n.call(r||t,e||window.event)},s=o;xt&&0===e.indexOf("touch")?Bt(t,e,o,i):!wt||"dblclick"!==e||!Yt||xt&&st?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!!Et&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,qe(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&nt&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=Ge&&n-Ge;r&&r>100&&r<500||t.target._simulatedClick&&!t._simulated?De(t):(Ge=n,e(t))}(t,s)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):Yt(t,o,i),t[Pe]=t[Pe]||{},t[Pe][i]=o}function Le(t,e,n,r){var i=e+a(n)+(r?"_"+a(r):""),o=t[Pe]&&t[Pe][i];if(!o)return this;xt&&0===e.indexOf("touch")?function(t,e,n){var r=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Rt,r,!1):"touchmove"===e?t.removeEventListener(Lt,r,!1):"touchend"===e&&(t.removeEventListener(Ct,r,!1),t.removeEventListener(jt,r,!1))}(t,e,i):!wt||"dblclick"!==e||!Xt||xt&&st?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",o,!!Et&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o):Xt(t,i),t[Pe][i]=null}function Ce(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,We(t),this}function je(t){return Re(t,"mousewheel",Ce),this}function Ie(t){return Oe(t,"mousedown touchstart dblclick",Ce),Re(t,"click",Ze),this}function Ne(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function De(t){return Ne(t),Ce(t),this}function Fe(t,e){if(!e)return new z(t.clientX,t.clientY);var n=ke(e),r=n.boundingClientRect;return new z((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var Be=ft&&st?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function Ue(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Be:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ge,Ve={};function Ze(t){Ve[t.type]=!0}function We(t){var e=Ve[t.type];return Ve[t.type]=!1,e}function qe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(r){return!1}return n!==t}var He=(Object.freeze||Object)({on:Oe,off:ze,stopPropagation:Ce,disableScrollPropagation:je,disableClickPropagation:Ie,preventDefault:Ne,stop:De,getMousePosition:Fe,getWheelDelta:Ue,fakeStop:Ze,skipped:We,isExternalTarget:qe,addListener:Oe,removeListener:ze}),Ye=P.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=be(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ye(this._el,n),this.fire("step")},_complete:function(){E(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Xe=P.extend({options:{crs:H,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(B(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ne&&gt&&!Tt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Oe(this._proxy,re,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(B(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof z?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():D(t);var n=C(e.paddingTopLeft||e.padding||[0,0]),r=C(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=D(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=C(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ye,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){fe(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!gt)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=B(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),l=i.distanceTo(r)||1;function c(t){var e=(u*u-s*s+2.0164*(t?-1:1)*2.0164*l*l)/(2*(t?u:s)*2.0164*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var d=c(0);function p(t){return s*(f(d)*(h(e=d+1.42*t)/f(e))-h(d))/2.0164;var e}var m=Date.now(),g=(c(1)-d)/1.42,v=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-m)/v,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*g;o<=1?(this._flyToFrame=S(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(p(u)/l)),a),this.getScaleZoom(s/function(t){return s*(f(d)/f(d+1.42*t))}(u),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=D(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,D(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=C((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=C(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),o=this.project(i),a=this.project(t),s=this.getPixelBounds(),u=s.getSize().divideBy(2),l=I([s.min.add(n),s.max.subtract(r)]);if(!l.contains(a)){this._enforcingBounds=!0;var c=o.subtract(a),h=C(a.x+c.x,a.y+c.y);(a.x<l.min.x||a.x>l.max.x)&&(h.x=o.x-c.x,c.x>0?h.x+=u.x-n.x:h.x-=u.x-r.x),(a.y<l.min.y||a.y>l.max.y)&&(h.y=o.y-c.y,c.y>0?h.y+=u.y-n.y:h.y-=u.y-r.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=e.divideBy(2).round(),a=r.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new F(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(E(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ae("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new N(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=D(t),n=C(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=I(this.project(s,r),this.project(a,r)).getSize(),c=gt?this.options.zoomSnap:1,h=u.x/l.x,f=u.y/l.y,d=e?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(d,r),c&&(r=Math.round(r/(c/100))*(c/100),r=e?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new j(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(B(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(C(t),e)},layerPointToLatLng:function(t){var e=C(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(B(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(D(t))},distance:function(t,e){return this.options.crs.distance(B(t),B(e))},containerPointToLayerPoint:function(t){return C(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return C(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(C(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return Fe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Oe(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt,fe(t,"leaflet-container"+(wt?" leaflet-touch":"")+(St?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(lt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ye(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fe(t.markerPane,"leaflet-zoom-hide"),fe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ye(this._mapPane,new z(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return E(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ye(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?ze:Oe;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),gt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){E(this._resizeRequest),this._resizeRequest=S((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!qe(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||s||i||!qe(o,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!We(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ae(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if("click"===t.type){var i=n({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,e))).length){var o=r[0];"contextmenu"===e&&o.listens(e,!0)&&Ne(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<r.length;u++)if(r[u].fire(e,a,!0),a.originalEvent._stopped||!1===r[u].options.bubblingMouseEvents&&-1!==_(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return be(this._mapPane)||new z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return I([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new j(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new j(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=I(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new z(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=gt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=ee,n=this._proxy.style[e];_e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();_e(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i)||(S((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),S((function(){this._moveEnd(!0)}),this))}}),$e=M.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return fe(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ke=function(t){return new $e(t)};Xe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ae("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=ae("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Je=$e.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return $e.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):de(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ie(e),je(e);var r=this._section=ae("section",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Oe(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=ae("a",t+"-toggle",e);i.href="#",i.title="Layers",wt?(Oe(i,"click",De),Oe(i,"click",this.expand,this)):Oe(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ae("div",t+"-base",r),this._separator=ae("div",t+"-separator",r),this._overlaysList=ae("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ue(this._baseLayersList),ue(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+a(this),r),this._layerControlInputs.push(e),e.layerId=a(t.layer),Oe(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Qe=$e.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ae("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=ae("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Ie(o),Oe(o,"click",De),Oe(o,"click",i,this),Oe(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&fe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&fe(this._zoomInButton,e)}});Xe.mergeOptions({zoomControl:!0}),Xe.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Qe,this.addControl(this.zoomControl))}));var tn=$e.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ae("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ae("div",e,n)),t.imperial&&(this._iScale=ae("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),en=$e.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),Ie(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Xe.mergeOptions({attributionControl:!0}),Xe.addInitHook((function(){this.options.attributionControl&&(new en).addTo(this)})),$e.Layers=Je,$e.Zoom=Qe,$e.Scale=tn,$e.Attribution=en,Ke.layers=function(t,e,n){return new Je(t,e,n)},Ke.zoom=function(t){return new Qe(t)},Ke.scale=function(t){return new tn(t)},Ke.attribution=function(t){return new en(t)};var nn=M.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,e){return t.addHandler(e,this),this};var rn,on={Events:O},an=wt?"touchstart mousedown":"mousedown",sn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},un={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ln=P.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){d(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Oe(this._dragStartTarget,an,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ln._dragging===this&&this.finishDrag(),ze(this._dragStartTarget,an,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")&&!(ln._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(ln._dragging=this,this._preventOutline&&Ae(this._element),we(),$t(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ee(this._element);this._startPoint=new z(e.clientX,e.clientY),this._parentScale=ke(n),Oe(document,un[t.type],this._onMove,this),Oe(document,sn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new z(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ne(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=be(this._element).subtract(n),fe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,E(this._animRequest),this._lastEvent=t,this._animRequest=S(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ye(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),un)ze(document,un[t],this._onMove,this),ze(document,sn[t],this._onUp,this);Te(),Kt(),this._moved&&this._moving&&(E(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ln._dragging=!1}});function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,o){var a,s,u,l=0;for(s=i+1;s<=o-1;s++)(u=mn(e[s],e[i],e[o],!0))>l&&(a=s,l=u);l>r&&(n[a]=1,t(e,n,r,i,a),t(e,n,r,a,o))}(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)a=t[r],s=t[i],u=void 0,l=void 0,u=s.x-a.x,l=s.y-a.y,u*u+l*l>e&&(n.push(t[r]),i=r);var a,s,u,l;return i<o-1&&n.push(t[o-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(mn(t,e,n,!0))}function fn(t,e,n,r,i){var o,a,s,u=r?rn:pn(t,n),l=pn(e,n);for(rn=l;;){if(!(u|l))return[t,e];if(u&l)return!1;s=pn(a=dn(t,e,o=u||l,n,i),n),o===u?(t=a,u=s):(e=a,l=s)}}function dn(t,e,n,r,i){var o,a,s=e.x-t.x,u=e.y-t.y,l=r.min,c=r.max;return 8&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):4&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(o=c.x,a=t.y+u*(c.x-t.x)/s):1&n&&(o=l.x,a=t.y+u*(l.x-t.x)/s),new z(o,a,i)}function pn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function mn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return l>0&&((i=((t.x-o)*s+(t.y-a)*u)/l)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=u*i)),s=t.x-o,u=t.y-a,r?s*s+u*u:new z(o,a)}function gn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(t)}var _n=(Object.freeze||Object)({simplify:cn,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return mn(t,e,n)},clipSegment:fn,_getEdgeIntersection:dn,_getBitCode:pn,_sqClosestPointOnSegment:mn,isFlat:gn,_flat:vn});function yn(t,e,n){var r,i,o,a,s,u,l,c,h,f=[1,4,2,8];for(i=0,l=t.length;i<l;i++)t[i]._code=pn(t[i],e);for(a=0;a<4;a++){for(c=f[a],r=[],i=0,o=(l=t.length)-1;i<l;o=i++)s=t[i],u=t[o],s._code&c?u._code&c||((h=dn(u,s,c,e,n))._code=pn(h,e),r.push(h)):(u._code&c&&((h=dn(u,s,c,e,n))._code=pn(h,e),r.push(h)),r.push(s));t=r}return t}var bn=(Object.freeze||Object)({clipPolygon:yn}),xn={project:function(t){return new z(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new j([-180,-90],[180,90])},wn={R:6378137,R_MINOR:6356752.314245179,bounds:new j([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new z(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=l=Math.PI/2-2*Math.atan(a*e)-s;return new F(s*n,t.x*n/r)}},Tn=(Object.freeze||Object)({LonLat:xn,Mercator:wn,SphericalMercator:Z}),An=n({},V,{code:"EPSG:3395",projection:wn,transformation:function(){var t=.5/(Math.PI*wn.R);return q(t,.5,-t,.5)}()}),Sn=n({},V,{code:"EPSG:4326",projection:xn,transformation:q(1/180,1,-1/180,.5)}),En=n({},G,{projection:xn,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});G.Earth=V,G.EPSG3395=An,G.EPSG3857=H,G.EPSG900913=Y,G.EPSG4326=Sn,G.Simple=En;var kn=P.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Xe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mn=kn.extend({initialize:function(t,e){var n,r;if(d(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),On=Mn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Mn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Mn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new N;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Pn=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=C(r),o=C("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return St&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),zn=Pn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return zn.imagePath||(zn.imagePath=this._detectIconPath()),(this.options.imagePath||zn.imagePath)+Pn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Rn=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ln(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=be(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=I(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!u.contains(o)){var l=C((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(r);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),ye(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=S(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(E(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=be(e._icon),i=e._map.layerPointToLatLng(r);n&&ye(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){E(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=kn.extend({options:{icon:new zn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),fe(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(fe(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ye(this._icon,t),this._shadow&&ye(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Rn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Rn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ge(this._icon,t),this._shadow&&ge(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Cn=kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),jn=Cn.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Cn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new j(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),In=jn.extend({initialize:function(t,e,r){if("number"==typeof e&&(e=n({},r,{radius:e})),d(this,e),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new N(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Cn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===V.distance){var i=Math.PI/180,o=this._mRadius/V.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(l*i))/(Math.cos(e*i)*Math.cos(l*i)))/i;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),Nn=Cn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=mn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,c=u.length;l<c;l++){var h=o(t,e=u[l-1],n=u[l],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if(i=s[t],o=s[t+1],(r+=n=i.distanceTo(o))>e)return a=(r-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=B(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new N,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=gn(t),r=0,i=t.length;r<i;r++)n?(e[r]=B(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new j;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new z(t,t);this._pxBounds=new j([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof F,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,u=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=fn(s[n],s[n+1],t,n,!0))&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&hn(t,s[i],s[r])<=u)return!0;return!1}});Nn._flat=vn;var Dn=Nn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,u,l=this._rings[0],c=l.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)n=l[t],r=l[e],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return u=0===o?l[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=Nn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Nn.prototype._setLatLngs.call(this,t),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new z(e,e);if(t=new j(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=yn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(u=(e=this._parts[i]).length)-1;o<u;a=o++)n=e[o],r=e[a],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(l=!l);return l||Nn.prototype._containsPoint.call(this,t,!0)}}),Fn=On.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=v(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Bn(t,o);return a?(a.feature=Hn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Bn(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Gn;if(!s&&!a)return null;switch(a.type){case"Point":return Un(l,t,n=c(s),e);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=c(s[i]),u.push(Un(l,t,n,e));return new On(u);case"LineString":case"MultiLineString":return r=Vn(s,"LineString"===a.type?0:1,c),new Nn(r,e);case"Polygon":case"MultiPolygon":return r=Vn(s,"Polygon"===a.type?1:2,c),new Dn(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=Bn({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new On(u);default:throw new Error("Invalid GeoJSON object.")}}function Un(t,e,n,r){return t?t(e,n):new Ln(n,r&&r.markersInheritOptions&&r)}function Gn(t){return new F(t[1],t[0],t[2])}function Vn(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?Vn(t[o],e-1,n):(n||Gn)(t[o]),i.push(r);return i}function Zn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Wn(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?Wn(t[o],e-1,n,r):Zn(t[o],r));return!e&&n&&i.push(i[0]),i}function qn(t,e){return t.feature?n({},t.feature,{geometry:e}):Hn(e)}function Hn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Yn={toGeoJSON:function(t){return qn(this,{type:"Point",coordinates:Zn(this.getLatLng(),t)})}};function Xn(t,e){return new Fn(t,e)}Ln.include(Yn),In.include(Yn),jn.include(Yn),Nn.include({toGeoJSON:function(t){var e=!gn(this._latlngs);return qn(this,{type:(e?"Multi":"")+"LineString",coordinates:Wn(this._latlngs,e?1:0,!1,t)})}}),Dn.include({toGeoJSON:function(t){var e=!gn(this._latlngs),n=e&&!gn(this._latlngs[0]),r=Wn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),qn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Mn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),qn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=Hn(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?qn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var $n=Xn,Kn=kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=D(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=D(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;_e(this._image,n,e)},_reset:function(){var t=this._image,e=new j(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ye(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Jn=Kn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=ae("source");s.src=this._url[a],e.appendChild(s)}}}}),Qn=Kn.extend({_initImage:function(){var t=this._image=this._url;fe(t,"leaflet-image-layer"),this._zoomAnimated&&fe(t,"leaflet-zoom-animated"),this.options.className&&fe(t,this.options.className),t.onselectstart=l,t.onmousemove=l}}),tr=kn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ge(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ge(this._container,0),this._removeTimeout=setTimeout(i(se,void 0,this._container),200)):se(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof kn||(n=e,e=t),e instanceof On)for(var r in t._layers){e=t._layers[r];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=C(this.options.offset),n=this._getAnchor();this._zoomAnimated?ye(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),er=tr.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){tr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Cn||this._source.on("preclick",Ce))},onRemove:function(t){tr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Cn||this._source.off("preclick",Ce))},getEvents:function(){var t=tr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",n),Ie(n),je(this._contentNode),Oe(n,"contextmenu",Ce),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ae("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",Oe(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight;i&&r>i?(e.height=i+"px",fe(t,"leaflet-popup-scrolled")):de(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ye(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new z(this._containerLeft,-n-this._containerBottom);i._add(be(this._container));var o=t.layerPointToContainerPoint(i),a=C(this.options.autoPanPadding),s=C(this.options.autoPanPaddingTopLeft||a),u=C(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),c=0,h=0;o.x+r+u.x>l.x&&(c=o.x+r-l.x+u.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+u.y>l.y&&(h=o.y+n-l.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),De(t)},_getAnchor:function(){return C(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Xe.mergeOptions({closePopupOnClick:!0}),Xe.include({openPopup:function(t,e,n){return t instanceof er||(t=new er(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),kn.include({bindPopup:function(t,e){return t instanceof er?(d(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new er(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(De(t),e instanceof Cn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var nr=tr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){tr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){tr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=tr.prototype.getEvents.call(this);return wt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=C(this.options.offset),l=this._getAnchor();"top"===o?t=t.add(C(-a/2+u.x,-s+u.y+l.y,!0)):"bottom"===o?t=t.subtract(C(a/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(C(a/2+u.x,s/2-l.y+u.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",t=t.add(C(u.x+l.x,l.y-s/2+u.y,!0))):(o="left",t=t.subtract(C(a+l.x-u.x,s/2-l.y-u.y,!0))),de(n,"leaflet-tooltip-right"),de(n,"leaflet-tooltip-left"),de(n,"leaflet-tooltip-top"),de(n,"leaflet-tooltip-bottom"),fe(n,"leaflet-tooltip-"+o),ye(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ge(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return C(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Xe.include({openTooltip:function(t,e,n){return t instanceof nr||(t=new nr(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),kn.include({bindTooltip:function(t,e){return t instanceof nr?(d(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new nr(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),wt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var rr=Pn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ue(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=C(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Pn.Default=zn;var ir=kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof z?t:new z(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){ge(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);ge(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(E(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(se(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new z(+i,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new z(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();gt?_e(t.el,i,r):ye(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new j(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,u=new j(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new z(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var d=new z(f,h);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return D(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new N(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new z(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){fe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Q&&this.options.opacity<1&&ge(t,this.options.opacity),nt&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&S(i(this._tileReady,this,t,null,o)),ye(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(ge(n.el,0),E(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(fe(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new z(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new j(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),or=ir.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&St&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Oe(n,"load",i(this._tileOnLoad,this,e,n)),Oe(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:St?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=r),e["-y"]=r}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){Q?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=y,se(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return ot||e.el.setAttribute("src",y),ir.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return ir.prototype._tileReady.call(this,t,e,n)}});function ar(t,e){return new or(t,e)}var sr=or.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=n({},this.defaultWmsParams);for(var i in e)i in this.options||(r[i]=e[i]);var o=(e=d(this,e)).detectRetina&&St?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,or.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=I(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===Sn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=or.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});or.WMS=sr,ar.wms=function(t,e){return new sr(t,e)};var ur=kn.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=be(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);gt?_e(this._container,s,n):ye(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new j(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),lr=ur.extend({getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ur.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Oe(t,"mousemove",this._onMouseMove,this),Oe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Oe(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){E(this._redrawRequest),delete this._ctx,se(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=St?2:1;ye(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",St&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ur.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],u[r?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(Ze(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(fe(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function cr(t){return kt?new lr(t):null}var hr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),fr={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ur.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hr("shape");fe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=hr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=hr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){ce(t._container)}},dr=Ot?hr:X,pr=ur.extend({getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=dr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=dr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ye(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=dr("path");t.options.className&&fe(e,t.options.className),t.options.interactive&&fe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){ce(t._path)}});function mr(t){return Mt||Ot?new pr(t):null}Ot&&pr.include(fr),Xe.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&cr(t)||mr(t)}});var gr=Dn.extend({initialize:function(t,e){Dn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=D(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});pr.create=dr,pr.pointsToPath=$,Fn.geometryToLayer=Bn,Fn.coordsToLatLng=Gn,Fn.coordsToLatLngs=Vn,Fn.latLngToCoords=Zn,Fn.latLngsToCoords=Wn,Fn.getFeature=qn,Fn.asFeature=Hn,Xe.mergeOptions({boxZoom:!0});var vr=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),$t(),we(),this._startPoint=this._map.mouseEventToContainerPoint(t),Oe(document,{contextmenu:De,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new j(this._point,this._startPoint),n=e.getSize();ye(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(se(this._box),de(this._container,"leaflet-crosshair")),Kt(),Te(),ze(document,{contextmenu:De,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new N(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Xe.addInitHook("addHandler","boxZoom",vr),Xe.mergeOptions({doubleClickZoom:!0});var _r=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Xe.addInitHook("addHandler","doubleClickZoom",_r),Xe.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yr=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ln(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=D(this._map.options.maxBounds);this._offsetLimit=I(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),u=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=s.multiplyBy(l/u),h=l/(n.inertiaDeceleration*a),f=c.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),S((function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Xe.addInitHook("addHandler","dragging",yr),Xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var br=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Oe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=C(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}De(t)}}});Xe.addInitHook("addHandler","keyboard",br),Xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xr=nn.extend({addHooks:function(){Oe(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ue(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),De(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Xe.addInitHook("addHandler","scrollWheelZoom",xr),Xe.mergeOptions({tap:!0,tapTolerance:15});var wr=nn.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ne(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new z(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&fe(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Oe(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),ze(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new z(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});wt&&!xt&&Xe.addInitHook("addHandler","tap",wr),Xe.mergeOptions({touchZoom:wt&&!rt,bounceAtZoomLimits:!0});var Tr=nn.extend({addHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend",this._onTouchEnd,this),Ne(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),E(this._animRequest);var s=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=S(s,this,!0),Ne(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,E(this._animRequest),ze(document,"touchmove",this._onTouchMove),ze(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Xe.addInitHook("addHandler","touchZoom",Tr),Xe.BoxZoom=vr,Xe.DoubleClickZoom=_r,Xe.Drag=yr,Xe.Keyboard=br,Xe.ScrollWheelZoom=xr,Xe.Tap=wr,Xe.TouchZoom=Tr,Object.freeze=e,t.version="1.6.0",t.Control=$e,t.control=Ke,t.Browser=zt,t.Evented=P,t.Mixin=on,t.Util=k,t.Class=M,t.Handler=nn,t.extend=n,t.bind=i,t.stamp=a,t.setOptions=d,t.DomEvent=He,t.DomUtil=Me,t.PosAnimation=Ye,t.Draggable=ln,t.LineUtil=_n,t.PolyUtil=bn,t.Point=z,t.point=C,t.Bounds=j,t.bounds=I,t.Transformation=W,t.transformation=q,t.Projection=Tn,t.LatLng=F,t.latLng=B,t.LatLngBounds=N,t.latLngBounds=D,t.CRS=G,t.GeoJSON=Fn,t.geoJSON=Xn,t.geoJson=$n,t.Layer=kn,t.LayerGroup=Mn,t.layerGroup=function(t,e){return new Mn(t,e)},t.FeatureGroup=On,t.featureGroup=function(t){return new On(t)},t.ImageOverlay=Kn,t.imageOverlay=function(t,e,n){return new Kn(t,e,n)},t.VideoOverlay=Jn,t.videoOverlay=function(t,e,n){return new Jn(t,e,n)},t.SVGOverlay=Qn,t.svgOverlay=function(t,e,n){return new Qn(t,e,n)},t.DivOverlay=tr,t.Popup=er,t.popup=function(t,e){return new er(t,e)},t.Tooltip=nr,t.tooltip=function(t,e){return new nr(t,e)},t.Icon=Pn,t.icon=function(t){return new Pn(t)},t.DivIcon=rr,t.divIcon=function(t){return new rr(t)},t.Marker=Ln,t.marker=function(t,e){return new Ln(t,e)},t.TileLayer=or,t.tileLayer=ar,t.GridLayer=ir,t.gridLayer=function(t){return new ir(t)},t.SVG=pr,t.svg=mr,t.Renderer=ur,t.Canvas=lr,t.canvas=cr,t.Path=Cn,t.CircleMarker=jn,t.circleMarker=function(t,e){return new jn(t,e)},t.Circle=In,t.circle=function(t,e,n){return new In(t,e,n)},t.Polyline=Nn,t.polyline=function(t,e){return new Nn(t,e)},t.Polygon=Dn,t.polygon=function(t,e){return new Dn(t,e)},t.Rectangle=gr,t.rectangle=function(t,e){return new gr(t,e)},t.Map=Xe,t.map=function(t,e){return new Xe(t,e)};var Ar=window.L;t.noConflict=function(){return window.L=Ar,this},window.L=t}(e)},"4kuk":function(t,e,n){var r=n("SfRM"),i=n("Hvzi"),o=n("u8Dt"),a=n("ekgI"),s=n("JSQU");function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},"4sDh":function(t,e,n){var r=n("4uTw"),i=n("03A+"),o=n("Z0cm"),a=n("wJg7"),s=n("shjB"),u=n("9Nap");t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(f,c)&&(o(t)||i(t))}},"4uTw":function(t,e,n){var r=n("Z0cm"),i=n("9ggG"),o=n("GNiM"),a=n("dt0z");t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},"6VaU":function(t,e,n){"use strict";var r=n("XKFU"),i=n("xF/b"),o=n("S/j/"),a=n("ne8i"),s=n("2OiF"),u=n("zRwo");r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n("nGyu")("flatMap")},"6lFR":function(t,e,n){"use strict";n("HAE/"),Object.defineProperty(e,"__esModule",{value:!0}),e.deferAction=function(t){var e=window.setImmediate;void 0!==e?e(t):setTimeout(t,1)},e.inlineProp=void 0;e.inlineProp=function(t,e){var n={};return n[t]=e,n}},"6q8l":function(t,e,n){"use strict";function r(t,e){return"function"==typeof t?t(e):null!=t&&(t.current=e),t}n.r(e);var i=n("q1tI");function o(t,e){var n=Object(i.useState)((function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(t){var e=n.value;e!==t&&(n.value=t,n.callback(t,e))}}}}))[0];return n.callback=e,n.facade}function a(t){var e=null;return{get current(){return e},set current(n){var r=e;r!==n&&(e=n,t(n,r))}}}n("8+KV");function s(t){return a((function(e){return t.forEach((function(t){return r(t,e)}))}))}function u(t,e){return o(e,(function(e){return t.forEach((function(t){return r(t,e)}))}))}function l(t,e){return o(void 0,(function(n){return r(t,e(n))}))}function c(t,e){return a((function(n){return r(t,e(n))}))}n("rGqo"),n("yt8O"),n("Btvt"),n("XfO3"),n("EK0E");function h(t){return function(e){"function"==typeof t?t(e):null!=t&&(t.current=e)}}var f=new WeakMap;function d(t){return function(t){if(f.has(t))return f.get(t);var e=h(t);return f.set(t,e),e}(t)}n.d(e,"assignRef",(function(){return r})),n.d(e,"useCallbackRef",(function(){return o})),n.d(e,"createCallbackRef",(function(){return a})),n.d(e,"mergeRefs",(function(){return s})),n.d(e,"useMergeRefs",(function(){return u})),n.d(e,"useTransformRef",(function(){return l})),n.d(e,"transformRef",(function(){return c})),n.d(e,"refToCallback",(function(){return h})),n.d(e,"useRefToCallback",(function(){return d}))},"6sVZ":function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},"711d":function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},"77Zs":function(t,e,n){var r=n("Xi7e");t.exports=function(){this.__data__=new r,this.size=0}},"7DDg":function(t,e,n){"use strict";if(n("nh4g")){var r=n("LQAc"),i=n("dyZX"),o=n("eeVq"),a=n("XKFU"),s=n("D4iV"),u=n("7Qtz"),l=n("m0Pp"),c=n("9gX7"),h=n("RjD/"),f=n("Mukb"),d=n("3Lyj"),p=n("RYi7"),m=n("ne8i"),g=n("Cfrj"),v=n("d/Gc"),_=n("apmT"),y=n("aagx"),b=n("I8a+"),x=n("0/R4"),w=n("S/j/"),T=n("M6Qj"),A=n("Kuth"),S=n("OP3Y"),E=n("kJMx").f,k=n("J+6e"),M=n("ylqs"),O=n("K0xU"),P=n("CkkT"),z=n("w2a5"),R=n("69bn"),L=n("yt8O"),C=n("hPIQ"),j=n("XMVh"),I=n("elZq"),N=n("Nr18"),D=n("upKx"),F=n("hswa"),B=n("EemH"),U=F.f,G=B.f,V=i.RangeError,Z=i.TypeError,W=i.Uint8Array,q=Array.prototype,H=u.ArrayBuffer,Y=u.DataView,X=P(0),$=P(2),K=P(3),J=P(4),Q=P(5),tt=P(6),et=z(!0),nt=z(!1),rt=L.values,it=L.keys,ot=L.entries,at=q.lastIndexOf,st=q.reduce,ut=q.reduceRight,lt=q.join,ct=q.sort,ht=q.slice,ft=q.toString,dt=q.toLocaleString,pt=O("iterator"),mt=O("toStringTag"),gt=M("typed_constructor"),vt=M("def_constructor"),_t=s.CONSTR,yt=s.TYPED,bt=s.VIEW,xt=P(1,(function(t,e){return Et(R(t,t[vt]),e)})),wt=o((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),Tt=!!W&&!!W.prototype.set&&o((function(){new W(1).set({})})),At=function(t,e){var n=p(t);if(n<0||n%e)throw V("Wrong offset!");return n},St=function(t){if(x(t)&&yt in t)return t;throw Z(t+" is not a typed array!")},Et=function(t,e){if(!(x(t)&&gt in t))throw Z("It is not a typed array constructor!");return new t(e)},kt=function(t,e){return Mt(R(t,t[vt]),e)},Mt=function(t,e){for(var n=0,r=e.length,i=Et(t,r);r>n;)i[n]=e[n++];return i},Ot=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},Pt=function(t){var e,n,r,i,o,a,s=w(t),u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,f=k(s);if(null!=f&&!T(f)){for(a=f.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(h&&u>2&&(c=l(c,arguments[2],2)),e=0,n=m(s.length),i=Et(this,n);n>e;e++)i[e]=h?c(s[e],e):s[e];return i},zt=function(){for(var t=0,e=arguments.length,n=Et(this,e);e>t;)n[t]=arguments[t++];return n},Rt=!!W&&o((function(){dt.call(new W(1))})),Lt=function(){return dt.apply(Rt?ht.call(St(this)):St(this),arguments)},Ct={copyWithin:function(t,e){return D.call(St(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return J(St(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(St(this),arguments)},filter:function(t){return kt(this,$(St(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Q(St(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(St(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){X(St(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(St(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(St(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return lt.apply(St(this),arguments)},lastIndexOf:function(t){return at.apply(St(this),arguments)},map:function(t){return xt(St(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(St(this),arguments)},reduceRight:function(t){return ut.apply(St(this),arguments)},reverse:function(){for(var t,e=St(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return K(St(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ct.call(St(this),t)},subarray:function(t,e){var n=St(this),r=n.length,i=v(t,r);return new(R(n,n[vt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,m((void 0===e?r:v(e,r))-i))}},jt=function(t,e){return kt(this,ht.call(St(this),t,e))},It=function(t){St(this);var e=At(arguments[1],1),n=this.length,r=w(t),i=m(r.length),o=0;if(i+e>n)throw V("Wrong length!");for(;o<i;)this[e+o]=r[o++]},Nt={entries:function(){return ot.call(St(this))},keys:function(){return it.call(St(this))},values:function(){return rt.call(St(this))}},Dt=function(t,e){return x(t)&&t[yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ft=function(t,e){return Dt(t,e=_(e,!0))?h(2,t[e]):G(t,e)},Bt=function(t,e,n){return!(Dt(t,e=_(e,!0))&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};_t||(B.f=Ft,F.f=Bt),a(a.S+a.F*!_t,"Object",{getOwnPropertyDescriptor:Ft,defineProperty:Bt}),o((function(){ft.call({})}))&&(ft=dt=function(){return lt.call(this)});var Ut=d({},Ct);d(Ut,Nt),f(Ut,pt,Nt.values),d(Ut,{slice:jt,set:It,constructor:function(){},toString:ft,toLocaleString:Lt}),Ot(Ut,"buffer","b"),Ot(Ut,"byteOffset","o"),Ot(Ut,"byteLength","l"),Ot(Ut,"length","e"),U(Ut,mt,{get:function(){return this[yt]}}),t.exports=function(t,e,n,u){var l=t+((u=!!u)?"Clamped":"")+"Array",h="get"+t,d="set"+t,p=i[l],v=p||{},_=p&&S(p),y=!p||!s.ABV,w={},T=p&&p.prototype,k=function(t,n){U(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[h](n*e+r.o,wt)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*e+i.o,r,wt)}(this,n,t)},enumerable:!0})};y?(p=n((function(t,n,r,i){c(t,p,l,"_d");var o,a,s,u,h=0,d=0;if(x(n)){if(!(n instanceof H||"ArrayBuffer"==(u=b(n))||"SharedArrayBuffer"==u))return yt in n?Mt(p,n):Pt.call(p,n);o=n,d=At(r,e);var v=n.byteLength;if(void 0===i){if(v%e)throw V("Wrong length!");if((a=v-d)<0)throw V("Wrong length!")}else if((a=m(i)*e)+d>v)throw V("Wrong length!");s=a/e}else s=g(n),o=new H(a=s*e);for(f(t,"_d",{b:o,o:d,l:a,e:s,v:new Y(o)});h<s;)k(t,h++)})),T=p.prototype=A(Ut),f(T,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&j((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=n((function(t,n,r,i){var o;return c(t,p,l),x(n)?n instanceof H||"ArrayBuffer"==(o=b(n))||"SharedArrayBuffer"==o?void 0!==i?new v(n,At(r,e),i):void 0!==r?new v(n,At(r,e)):new v(n):yt in n?Mt(p,n):Pt.call(p,n):new v(g(n))})),X(_!==Function.prototype?E(v).concat(E(_)):E(v),(function(t){t in p||f(p,t,v[t])})),p.prototype=T,r||(T.constructor=p));var M=T[pt],O=!!M&&("values"==M.name||null==M.name),P=Nt.values;f(p,gt,!0),f(T,yt,l),f(T,bt,!0),f(T,vt,p),(u?new p(1)[mt]==l:mt in T)||U(T,mt,{get:function(){return l}}),w[l]=p,a(a.G+a.W+a.F*(p!=v),w),a(a.S,l,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o((function(){v.of.call(p,1)})),l,{from:Pt,of:zt}),"BYTES_PER_ELEMENT"in T||f(T,"BYTES_PER_ELEMENT",e),a(a.P,l,Ct),I(l),a(a.P+a.F*Tt,l,{set:It}),a(a.P+a.F*!O,l,Nt),r||T.toString==ft||(T.toString=ft),a(a.P+a.F*o((function(){new p(1).slice()})),l,{slice:jt}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){T.toLocaleString.call([1,2])}))),l,{toLocaleString:Lt}),C[l]=O?M:P,r||O||f(T,pt,P)}}else t.exports=function(){}},"7GkX":function(t,e,n){var r=n("b80T"),i=n("A90E"),o=n("MMmD");t.exports=function(t){return o(t)?r(t):i(t)}},"7Qtz":function(t,e,n){"use strict";var r=n("dyZX"),i=n("nh4g"),o=n("LQAc"),a=n("D4iV"),s=n("Mukb"),u=n("3Lyj"),l=n("eeVq"),c=n("9gX7"),h=n("RYi7"),f=n("ne8i"),d=n("Cfrj"),p=n("kJMx").f,m=n("hswa").f,g=n("Nr18"),v=n("fyDq"),_=r.ArrayBuffer,y=r.DataView,b=r.Math,x=r.RangeError,w=r.Infinity,T=_,A=b.abs,S=b.pow,E=b.floor,k=b.log,M=b.LN2,O=i?"_b":"buffer",P=i?"_l":"byteLength",z=i?"_o":"byteOffset";function R(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,l=u>>1,c=23===e?S(2,-24)-S(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=A(t))!=t||t===w?(i=t!=t?1:0,r=u):(r=E(k(t)/M),t*(o=S(2,-r))<1&&(r--,o*=2),(t+=r+l>=1?c/o:c*S(2,1-l))*o>=2&&(r++,o/=2),r+l>=u?(i=0,r=u):r+l>=1?(i=(t*o-1)*S(2,e),r+=l):(i=t*S(2,l-1)*S(2,e),r=0));e>=8;a[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function L(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,l=t[u--],c=127&l;for(l>>=7;s>0;c=256*c+t[u],u--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:l?-w:w;r+=S(2,e),c-=a}return(l?-1:1)*r*S(2,c-e)}function C(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function j(t){return[255&t]}function I(t){return[255&t,t>>8&255]}function N(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function D(t){return R(t,52,8)}function F(t){return R(t,23,4)}function B(t,e,n){m(t.prototype,e,{get:function(){return this[n]}})}function U(t,e,n,r){var i=d(+n);if(i+e>t[P])throw x("Wrong index!");var o=t[O]._b,a=i+t[z],s=o.slice(a,a+e);return r?s:s.reverse()}function G(t,e,n,r,i,o){var a=d(+n);if(a+e>t[P])throw x("Wrong index!");for(var s=t[O]._b,u=a+t[z],l=r(+i),c=0;c<e;c++)s[u+c]=l[o?c:e-c-1]}if(a.ABV){if(!l((function(){_(1)}))||!l((function(){new _(-1)}))||l((function(){return new _,new _(1.5),new _(NaN),"ArrayBuffer"!=_.name}))){for(var V,Z=(_=function(t){return c(this,_),new T(d(t))}).prototype=T.prototype,W=p(T),q=0;W.length>q;)(V=W[q++])in _||s(_,V,T[V]);o||(Z.constructor=_)}var H=new y(new _(2)),Y=y.prototype.setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),!H.getInt8(0)&&H.getInt8(1)||u(y.prototype,{setInt8:function(t,e){Y.call(this,t,e<<24>>24)},setUint8:function(t,e){Y.call(this,t,e<<24>>24)}},!0)}else _=function(t){c(this,_,"ArrayBuffer");var e=d(t);this._b=g.call(new Array(e),0),this[P]=e},y=function(t,e,n){c(this,y,"DataView"),c(t,_,"DataView");var r=t[P],i=h(e);if(i<0||i>r)throw x("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw x("Wrong length!");this[O]=t,this[z]=i,this[P]=n},i&&(B(_,"byteLength","_l"),B(y,"buffer","_b"),B(y,"byteLength","_l"),B(y,"byteOffset","_o")),u(y.prototype,{getInt8:function(t){return U(this,1,t)[0]<<24>>24},getUint8:function(t){return U(this,1,t)[0]},getInt16:function(t){var e=U(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=U(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return C(U(this,4,t,arguments[1]))},getUint32:function(t){return C(U(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return L(U(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return L(U(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){G(this,1,t,j,e)},setUint8:function(t,e){G(this,1,t,j,e)},setInt16:function(t,e){G(this,2,t,I,e,arguments[2])},setUint16:function(t,e){G(this,2,t,I,e,arguments[2])},setInt32:function(t,e){G(this,4,t,N,e,arguments[2])},setUint32:function(t,e){G(this,4,t,N,e,arguments[2])},setFloat32:function(t,e){G(this,4,t,F,e,arguments[2])},setFloat64:function(t,e){G(this,8,t,D,e,arguments[2])}});v(_,"ArrayBuffer"),v(y,"DataView"),s(y.prototype,a.VIEW,!0),e.ArrayBuffer=_,e.DataView=y},"7RsB":function(t,e,n){"use strict";n.r(e);n("rGqo"),n("rE2o"),n("VRzm"),n("Btvt"),n("HAE/"),n("ioFf"),n("V+eJ"),n("91GP"),n("hHhE"),n("/SS/");var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var i=n("q1tI"),o=(n("yt8O"),n("XfO3"),n("EK0E"),n("+oFf")),a={isNode:n.n(o).a,forceCache:!1},s=new WeakMap;function u(t,e){var n=e&&e.options||{};if(a.isNode&&!n.ssr)return[null,null];var r=a.forceCache||a.isNode&&!!n.ssr||!n.async,o=Object(i.useState)(r?function(){return s.get(t)}:void 0),u=o[0],l=o[1],c=Object(i.useState)(null),h=c[0],f=c[1];return Object(i.useEffect)((function(){u||t().then((function(n){var r,i=e?e.read():n.default||n;if(!i)throw console.error("Sidecar error: with importer",t),e?(console.error("Sidecar error: with medium",e),r=new Error("Sidecar medium was not found")):r=new Error("Sidecar was not found in exports"),f((function(){return r})),r;s.set(t,i),l((function(){return i}))}),(function(t){return f((function(){return t}))}))}),[]),[u,h]}function l(t,e){var n=function(){return e};return function(o){var a=u(t,o.sideCar),s=a[0];return a[1]&&e?n:s?i.createElement(s,r({},o)):null}}var c={onError:function(t){return console.error(t)}},h=function(t){Object.assign(c,t)};n("8+KV"),n("0l/t");function f(t){return t}function d(t,e){void 0===e&&(e=f);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(t){var i=e(t,r);return n.push(i),function(){n=n.filter((function(t){return t!==i}))}},assignSyncMedium:function(t){for(r=!0;n.length;){var e=n;n=[],e.forEach(t)}n={push:function(e){return t(e)},filter:function(){return n}}},assignMedium:function(t){r=!0;var e=[];if(n.length){var i=n;n=[],i.forEach(t),e=n}var o=function(){var n=e;e=[],n.forEach(t)},a=function(){return Promise.resolve().then(o)};a(),n={push:function(t){e.push(t),a()},filter:function(t){return e=e.filter(t),n}}}}}function p(t,e){return void 0===e&&(e=f),d(t,e)}function m(t){void 0===t&&(t={});var e=d(null);return e.options=r({async:!0,ssr:!1},t),e}function g(t,e,n){function o(e){var n=e.stateRef,o=e.props,a=Object(i.useCallback)((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(i.useLayoutEffect)((function(){n.current(t)})),null}),[]);return i.createElement(t,r({},o,{children:a}))}void 0===n&&(n={});var a=i.memo((function(t){var e=t.stateRef,n=t.defaultState,r=t.children,o=Object(i.useState)(n.current),a=o[0],s=o[1];return i.useEffect((function(){e.current=s}),[]),r.apply(void 0,a)}),(function(){return!0}));return function(t){var n=i.useRef(e(t)),r=i.useRef((function(t){return n.current=t}));return i.createElement(i.Fragment,null,i.createElement(o,{stateRef:r,props:t}),i.createElement(a,{stateRef:r,defaultState:n,children:t.children}))}}var v=function(t){var e=t.sideCar,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=e.read();if(!o)throw new Error("Sidecar medium not found");return i.createElement(o,r({},n))};function _(t,e){return t.useMedium(e),v}v.isSideCarExport=!0,n.d(e,"sidecar",(function(){return l})),n.d(e,"useSidecar",(function(){return u})),n.d(e,"setConfig",(function(){return h})),n.d(e,"createMedium",(function(){return p})),n.d(e,"createSidecarMedium",(function(){return m})),n.d(e,"renderCar",(function(){return g})),n.d(e,"exportSidecar",(function(){return _}))},"7fqy":function(t,e,n){n("8+KV"),t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},"9Nap":function(t,e,n){var r=n("/9aa");t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},"9ggG":function(t,e,n){var r=n("Z0cm"),i=n("/9aa"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},A90E:function(t,e,n){var r=n("6sVZ"),i=n("V6Ve"),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},AP2z:function(t,e,n){n("a1Th"),n("h7Nl"),n("Btvt");var r=n("nmnc"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},AphP:function(t,e,n){"use strict";var r=n("XKFU"),i=n("S/j/"),o=n("apmT");r(r.P+r.F*n("eeVq")((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},B8du:function(t,e){t.exports=function(){return!1}},"BJ/l":function(t,e,n){var r=n("XKFU");r(r.S,"Math",{log1p:n("1sa7")})},Bnag:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},CH3K:function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},CMye:function(t,e,n){var r=n("GoyQ");t.exports=function(t){return t==t&&!r(t)}},Cfrj:function(t,e,n){var r=n("RYi7"),i=n("ne8i");t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},Cwc5:function(t,e,n){var r=n("NKxu"),i=n("Npjl");t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},CyHz:function(t,e,n){var r=n("XKFU");r(r.S,"Math",{sign:n("lvtm")})},D4iV:function(t,e,n){for(var r,i=n("dyZX"),o=n("Mukb"),a=n("ylqs"),s=a("typed_array"),u=a("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},DSRE:function(t,e,n){(function(t){var r=n("Kz5y"),i=n("B8du"),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n("YuTi")(t))},DW2E:function(t,e,n){var r=n("0/R4"),i=n("Z6vF").onFreeze;n("Xtr8")("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},E2jh:function(t,e,n){n("rGqo"),n("yt8O"),n("Btvt");var r,i=n("2gN3"),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},EbDI:function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},EpBk:function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},ExA7:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},FLlr:function(t,e,n){var r=n("XKFU");r(r.P,"String",{repeat:n("l0Rn")})},Faw5:function(t,e,n){n("7DDg")("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},FlsD:function(t,e,n){var r=n("0/R4");n("Xtr8")("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},GDhZ:function(t,e,n){var r=n("wF/u"),i=n("mwIZ"),o=n("hgQt"),a=n("9ggG"),s=n("CMye"),u=n("IOzZ"),l=n("9Nap");t.exports=function(t,e){return a(t)&&s(e)?u(l(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},GNiM:function(t,e,n){n("pIFo");var r=n("I01J"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},GoyQ:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},GrlX:function(t,e,n){n("a1Th"),n("h7Nl"),n("Btvt"),n("SRfc");var r=n("T016"),i=n("JRS9"),o={};for(var a in r)r.hasOwnProperty(a)&&(o[r[a]]=a);var s=t.exports={to:{},get:{}};function u(t,e,n){return Math.min(Math.max(e,t),n)}function l(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}s.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=s.get.hsl(t),n="hsl";break;case"hwb":e=s.get.hwb(t),n="hwb";break;default:e=s.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},s.get.rgb=function(t){if(!t)return null;var e,n,i,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],n=0;n<3;n++){var a=2*n;o[n]=parseInt(e.slice(a,a+2),16)}i&&(o[3]=Math.round(parseInt(i,16)/255*100)/100)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],n=0;n<3;n++)o[n]=parseInt(e[n]+e[n],16);i&&(o[3]=Math.round(parseInt(i+i,16)/255*100)/100)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(e[n+1],0);e[4]&&(o[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(o=r[e[1]])?(o[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(o[3]=parseFloat(e[4]))}for(n=0;n<3;n++)o[n]=u(o[n],0,255);return o[3]=u(o[3],0,1),o},s.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(n)?1:n,0,1)]}return null},s.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(n)?1:n,0,1)]}return null},s.to.hex=function(){var t=i(arguments);return"#"+l(t[0])+l(t[1])+l(t[2])+(t[3]<1?l(Math.round(255*t[3])):"")},s.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},s.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},s.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},s.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},s.to.keyword=function(t){return o[t.slice(0,3)]}},H8j4:function(t,e,n){var r=n("QkVE");t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},HDyB:function(t,e,n){n("f3/d");var r=n("nmnc"),i=n("JHRd"),o=n("ljhN"),a=n("or5M"),s=n("7fqy"),u=n("rEGp"),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=s;case"[object Set]":var p=1&r;if(d||(d=u),t.size!=e.size&&!p)return!1;var m=f.get(t);if(m)return m==e;r|=2,f.set(t,e);var g=a(d(t),d(e),r,l,h,f);return f.delete(t),g;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},HOxn:function(t,e,n){var r=n("Cwc5")(n("Kz5y"),"Promise");t.exports=r},Hvzi:function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},I01J:function(t,e,n){var r=n("44Ds");t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},I5cv:function(t,e,n){var r=n("XKFU"),i=n("Kuth"),o=n("2OiF"),a=n("y3w9"),s=n("0/R4"),u=n("eeVq"),l=n("8MEG"),c=(n("dyZX").Reflect||{}).construct,h=u((function(){function t(){}return!(c((function(){}),[],t)instanceof t)})),f=!u((function(){c((function(){}))}));r(r.S+r.F*(h||f),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var u=n.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},INYr:function(t,e,n){"use strict";var r=n("XKFU"),i=n("CkkT")(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("nGyu")(o)},IOzZ:function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},Ijbi:function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},J4zp:function(t,e,n){var r=n("wTVA"),i=n("m0LI"),o=n("wkBT");t.exports=function(t,e){return r(t)||i(t,e)||o()}},JC6p:function(t,e,n){var r=n("cq/+"),i=n("7GkX");t.exports=function(t,e){return t&&r(t,e,i)}},JD84:function(t,e,n){var r=n("SKAX");t.exports=function(t,e,n,i){return r(t,(function(t,r,o){e(i,t,n(t),o)})),i}},JHRd:function(t,e,n){var r=n("Kz5y").Uint8Array;t.exports=r},JHgL:function(t,e,n){var r=n("QkVE");t.exports=function(t){return r(this,t).get(t)}},JRS9:function(t,e,n){"use strict";var r=n("uPr3"),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];r(s)?e=i.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},JSQU:function(t,e,n){var r=n("YESw");t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},JTzB:function(t,e,n){var r=n("NykK"),i=n("ExA7");t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},JX7q:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},"Ji/l":function(t,e,n){var r=n("XKFU");r(r.G+r.W+r.F*!n("D4iV").ABV,{DataView:n("7Qtz").DataView})},Juji:function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},KMkd:function(t,e){t.exports=function(){this.__data__=[],this.size=0}},KQm4:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return r}))},KfNM:function(t,e,n){n("a1Th"),n("h7Nl"),n("Btvt");var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},Kz5y:function(t,e,n){var r=n("WFqU"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},L8xA:function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},LVwc:function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},LXxW:function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},MMmD:function(t,e,n){var r=n("lSCD"),i=n("shjB");t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},MVZn:function(t,e,n){var r=n("lSNA");t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r(t,e,n[e])}))}return t}},MvSz:function(t,e,n){n("ioFf");var r=n("LXxW"),i=n("0ycA"),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},"N7A+":function(t,e,n){(function(e){var r;n("eM6i"),n("aqI/"),n("6VaU"),n("xpiv"),n("Z2Ku"),n("L9s1"),n("h/M4"),n("hhXQ"),n("x8ZO"),n("Tdpu"),n("hEkN"),n("jqX0"),n("AphP"),n("Faw5"),n("tuSo"),n("sFw1"),n("Y9lz"),n("nCnK"),n("xfY5"),n("knhD"),n("pp/T"),n("Zz4T"),n("bHtr"),n("dZ+Y"),n("DW2E"),n("INYr"),n("/8Fb"),n("Tze0"),n("FLlr"),n("NO8f"),n("r1bV"),n("SPin"),n("DNiP"),n("dE+T"),n("mGWK"),n("OG14"),n("25dN"),n("OEbY"),n("bWfx"),n("VRzm"),n("0l/t"),n("9AAn"),n("2Spj"),n("I5cv"),n("/SS/"),n("SRfc"),n("V+eJ"),n("XfO3"),n("HEwt"),n("LK8F"),n("mura"),n("FlsD"),n("Vd3H"),n("pIFo"),n("Oyvg"),n("8+KV"),n("rE2o"),n("91GP"),n("ioFf"),n("f3/d"),n("hHhE"),n("WLL4"),n("rGqo"),n("yt8O"),n("RW0V"),n("KKXr"),n("HAE/"),n("a1Th"),n("h7Nl"),n("Btvt"),r=function(){"use strict";var t,n,r={};function i(e,i){if(t)if(n){var o="var shared_chunk = {}; ("+t+")(shared_chunk); ("+n+")(shared_chunk);",a={};t(a),(r=i(a)).workerURL=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else n=i;else t=i}i(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=e((function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)})),r=(n.version,e((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}))),i=e((function(t){var e=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),o=0,a=Math.random(),s=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++o+a).toString(36))},u=e((function(t){var e=i("wks"),n=r.Symbol,o="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=o&&n[t]||(o?n:s)("Symbol."+t))}).store=e})),l=function(t){return"object"==typeof t?null!==t:"function"==typeof t},c=function(t){if(!l(t))throw TypeError(t+" is not an object!");return t},h=function(t){try{return!!t()}catch(t){return!0}},f=!h((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),d=r.document,p=l(d)&&l(d.createElement),m=function(t){return p?d.createElement(t):{}},g=!f&&!h((function(){return 7!=Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a})),v=function(t,e){if(!l(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!l(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!l(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!l(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},_=Object.defineProperty,y={f:f?Object.defineProperty:function(t,e,n){if(c(t),e=v(e,!0),c(n),g)try{return _(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},x=f?function(t,e,n){return y.f(t,e,b(1,n))}:function(t,e,n){return t[e]=n,t},w=u("unscopables"),T=Array.prototype;null==T[w]&&x(T,w,{});var A=function(t){T[w][t]=!0},S=function(t,e){return{value:e,done:!!t}},E={},k={}.toString,M=function(t){return k.call(t).slice(8,-1)},O=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==M(t)?t.split(""):Object(t)},P=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},z=function(t){return O(P(t))},R={}.hasOwnProperty,L=function(t,e){return R.call(t,e)},C=e((function(t){var e=s("src"),i=Function.toString,o=(""+i).split("toString");n.inspectSource=function(t){return i.call(t)},(t.exports=function(t,n,i,a){var s="function"==typeof i;s&&(L(i,"name")||x(i,"name",n)),t[n]!==i&&(s&&(L(i,e)||x(i,e,t[n]?""+t[n]:o.join(String(n)))),t===r?t[n]=i:a?t[n]?t[n]=i:x(t,n,i):(delete t[n],x(t,n,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[e]||i.call(this)}))})),j=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},I=function(t,e,n){if(j(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},N=function t(e,i,o){var a,s,u,l,c=e&t.F,h=e&t.G,f=e&t.P,d=e&t.B,p=h?r:e&t.S?r[i]||(r[i]={}):(r[i]||{}).prototype,m=h?n:n[i]||(n[i]={}),g=m.prototype||(m.prototype={});for(a in h&&(o=i),o)u=((s=!c&&p&&void 0!==p[a])?p:o)[a],l=d&&s?I(u,r):f&&"function"==typeof u?I(Function.call,u):u,p&&C(p,a,u,e&t.U),m[a]!=u&&x(m,a,l),f&&g[a]!=u&&(g[a]=u)};r.core=n,N.F=1,N.G=2,N.S=4,N.P=8,N.B=16,N.W=32,N.U=64,N.R=128;var D=N,F=Math.ceil,B=Math.floor,U=function(t){return isNaN(t=+t)?0:(t>0?B:F)(t)},G=Math.min,V=function(t){return t>0?G(U(t),9007199254740991):0},Z=Math.max,W=Math.min,q=function(t,e){return(t=U(t))<0?Z(t+e,0):W(t,e)},H=function(t){return function(e,n,r){var i,o=z(e),a=V(o.length),s=q(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Y=i("keys"),X=function(t){return Y[t]||(Y[t]=s(t))},$=H(!1),K=X("IE_PROTO"),J=function(t,e){var n,r=z(t),i=0,o=[];for(n in r)n!=K&&L(r,n)&&o.push(n);for(;e.length>i;)L(r,n=e[i++])&&(~$(o,n)||o.push(n));return o},Q="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return J(t,Q)},et=f?Object.defineProperties:function(t,e){c(t);for(var n,r=tt(e),i=r.length,o=0;i>o;)y.f(t,n=r[o++],e[n]);return t},nt=r.document,rt=nt&&nt.documentElement,it=X("IE_PROTO"),ot=function(){},at=function(){var t,e=m("iframe"),n=Q.length;for(e.style.display="none",rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),at=t.F;n--;)delete at.prototype[Q[n]];return at()},st=Object.create||function(t,e){var n;return null!==t?(ot.prototype=c(t),n=new ot,ot.prototype=null,n[it]=t):n=at(),void 0===e?n:et(n,e)},ut=y.f,lt=u("toStringTag"),ct=function(t,e,n){t&&!L(t=n?t:t.prototype,lt)&&ut(t,lt,{configurable:!0,value:e})},ht={};x(ht,u("iterator"),(function(){return this}));var ft=function(t){return Object(P(t))},dt=X("IE_PROTO"),pt=Object.prototype,mt=Object.getPrototypeOf||function(t){return t=ft(t),L(t,dt)?t[dt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?pt:null},gt=u("iterator"),vt=!([].keys&&"next"in[].keys()),_t=function(){return this},yt=function(t,e,n,r,i,o,a){!function(t,e,n){t.prototype=st(ht,{next:b(1,n)}),ct(t,e+" Iterator")}(n,e,r);var s,u,l,c=function(t){if(!vt&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f="values"==i,d=!1,p=t.prototype,m=p[gt]||p["@@iterator"]||i&&p[i],g=m||c(i),v=i?f?c("entries"):g:void 0,_="Array"==e&&p.entries||m;if(_&&(l=mt(_.call(new t)))!==Object.prototype&&l.next&&(ct(l,h,!0),"function"!=typeof l[gt]&&x(l,gt,_t)),f&&m&&"values"!==m.name&&(d=!0,g=function(){return m.call(this)}),(vt||d||!p[gt])&&x(p,gt,g),E[e]=g,E[h]=_t,i)if(s={values:f?g:c("values"),keys:o?g:c("keys"),entries:v},a)for(u in s)u in p||C(p,u,s[u]);else D(D.P+D.F*(vt||d),e,s);return s},bt=yt(Array,"Array",(function(t,e){this._t=z(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,S(1)):S(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");E.Arguments=E.Array,A("keys"),A("values"),A("entries");for(var xt=u("iterator"),wt=u("toStringTag"),Tt=E.Array,At={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},St=tt(At),Et=0;Et<St.length;Et++){var kt,Mt=St[Et],Ot=At[Mt],Pt=r[Mt],zt=Pt&&Pt.prototype;if(zt&&(zt[xt]||x(zt,xt,Tt),zt[wt]||x(zt,wt,Mt),E[Mt]=Tt,Ot))for(kt in bt)zt[kt]||C(zt,kt,bt[kt],!0)}var Rt={f:Object.getOwnPropertySymbols},Lt={f:{}.propertyIsEnumerable},Ct=Object.assign,jt=!Ct||h((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Ct({},t)[n]||Object.keys(Ct({},e)).join("")!=r}))?function(t,e){for(var n=ft(t),r=arguments.length,i=1,o=Rt.f,a=Lt.f;r>i;)for(var s,u=O(arguments[i++]),l=o?tt(u).concat(o(u)):tt(u),c=l.length,h=0;c>h;)a.call(u,s=l[h++])&&(n[s]=u[s]);return n}:Ct;D(D.S+D.F,"Object",{assign:jt});var It={};try{window instanceof Window&&window.document instanceof HTMLDocument&&(It.is_worker=!1,It.is_main=!0)}catch(t){It.is_worker=!0,It.is_main=!1,self.window={document:{}},self.document=self.window.document}var Nt=function(t){return function(e,n){var r,i,o=String(P(e)),a=U(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Dt=Nt(!0),Ft=function(t,e,n){return e+(n?Dt(t,e).length:1)},Bt=u("toStringTag"),Ut="Arguments"==M(function(){return arguments}()),Gt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Bt))?n:Ut?M(e):"Object"==(r=M(e))&&"function"==typeof e.callee?"Arguments":r},Vt=RegExp.prototype.exec,Zt=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Gt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Vt.call(t,e)},Wt=function(){var t=c(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},qt=RegExp.prototype.exec,Ht=String.prototype.replace,Yt=qt,Xt=function(){var t=/a/,e=/b*/g;return qt.call(t,"a"),qt.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),$t=void 0!==/()??/.exec("")[1];(Xt||$t)&&(Yt=function(t){var e,n,r,i,o=this;return $t&&(n=new RegExp("^"+o.source+"$(?!\\s)",Wt.call(o))),Xt&&(e=o.lastIndex),r=qt.call(o,t),Xt&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),$t&&r&&r.length>1&&Ht.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Kt=Yt;D({target:"RegExp",proto:!0,forced:Kt!==/./.exec},{exec:Kt});var Jt=u("species"),Qt=!h((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),te=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),ee=function(t,e,n){var r=u(t),i=!h((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),o=i?!h((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[Jt]=function(){return n}),n[r](""),!e})):void 0;if(!i||!o||"replace"===t&&!Qt||"split"===t&&!te){var a=/./[r],s=n(P,r,""[t],(function(t,e,n,r,o){return e.exec===Kt?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),l=s[0],c=s[1];C(String.prototype,t,l),x(RegExp.prototype,r,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}},ne=Math.max,re=Math.min,ie=Math.floor,oe=/\$([$&`']|\d\d?|<[^>]*>)/g,ae=/\$([$&`']|\d\d?)/g;ee("replace",2,(function(t,e,n,r){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var o=r(n,t,this,e);if(o.done)return o.value;var a=c(t),s=String(this),u="function"==typeof e;u||(e=String(e));var l=a.global;if(l){var h=a.unicode;a.lastIndex=0}for(var f=[];;){var d=Zt(a,s);if(null===d)break;if(f.push(d),!l)break;""===String(d[0])&&(a.lastIndex=Ft(s,V(a.lastIndex),h))}for(var p,m="",g=0,v=0;v<f.length;v++){d=f[v];for(var _=String(d[0]),y=ne(re(U(d.index),s.length),0),b=[],x=1;x<d.length;x++)b.push(void 0===(p=d[x])?p:String(p));var w=d.groups;if(u){var T=[_].concat(b,y,s);void 0!==w&&T.push(w);var A=String(e.apply(void 0,T))}else A=i(_,s,y,b,w,e);y>=g&&(m+=s.slice(g,y)+A,g=y+_.length)}return m+s.slice(g)}];function i(t,e,r,i,o,a){var s=r+t.length,u=i.length,l=ae;return void 0!==o&&(o=ft(o),l=oe),n.call(a,l,(function(n,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(s);case"<":l=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return n;if(c>u){var h=ie(c/10);return 0===h?n:h<=u?void 0===i[h-1]?a.charAt(1):i[h-1]+a.charAt(1):n}l=i[c-1]}return void 0===l?"":l}))}}));var se,ue=[].sort,le=[1,2,3];D(D.P+D.F*(h((function(){le.sort(void 0)}))||!h((function(){le.sort(null)}))||!((se=ue)&&h((function(){se.call(null)})))),"Array",{sort:function(t){return void 0===t?ue.call(ft(this)):ue.call(ft(this),j(t))}});var ce=e((function(t){var e=s("meta"),n=y.f,r=0,i=Object.isExtensible||function(){return!0},o=!h((function(){return i(Object.preventExtensions({}))})),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!l(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!L(t,e)){if(!i(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!L(t,e)){if(!i(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return o&&u.NEED&&i(t)&&!L(t,e)&&a(t),t}}})),he=(ce.KEY,ce.NEED,ce.fastKey,ce.getWeak,ce.onFreeze,Array.isArray||function(t){return"Array"==M(t)}),fe=Q.concat("length","prototype"),de={f:Object.getOwnPropertyNames||function(t){return J(t,fe)}},pe=Object.getOwnPropertyDescriptor,me={f:f?pe:function(t,e){if(t=z(t),e=v(e,!0),g)try{return pe(t,e)}catch(t){}if(L(t,e))return b(!Lt.f.call(t,e),t[e])}},ge=Nt(!0);yt(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=ge(e,n),this._i+=t.length,{value:t,done:!1})}));var ve,_e,ye,be=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},xe=function(t,e,n,r){try{return r?e(c(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&c(i.call(t)),e}},we=u("iterator"),Te=Array.prototype,Ae=function(t){return void 0!==t&&(E.Array===t||Te[we]===t)},Se=u("iterator"),Ee=n.getIteratorMethod=function(t){if(null!=t)return t[Se]||t["@@iterator"]||E[Gt(t)]},ke=e((function(t){var e={},n={},r=t.exports=function(t,r,i,o,a){var s,u,l,h,f=a?function(){return t}:Ee(t),d=I(i,o,r?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(Ae(f)){for(s=V(t.length);s>p;p++)if((h=r?d(c(u=t[p])[0],u[1]):d(t[p]))===e||h===n)return h}else for(l=f.call(t);!(u=l.next()).done;)if((h=xe(l,d,u.value,r))===e||h===n)return h};r.BREAK=e,r.RETURN=n})),Me=u("species"),Oe=function(t,e){var n,r=c(t).constructor;return void 0===r||null==(n=c(r)[Me])?e:j(n)},Pe=r.process,ze=r.setImmediate,Re=r.clearImmediate,Le=r.MessageChannel,Ce=r.Dispatch,je=0,Ie={},Ne=function(){var t=+this;if(Ie.hasOwnProperty(t)){var e=Ie[t];delete Ie[t],e()}},De=function(t){Ne.call(t.data)};ze&&Re||(ze=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Ie[++je]=function(){!function(t,e,n){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},ve(je),je},Re=function(t){delete Ie[t]},"process"==M(Pe)?ve=function(t){Pe.nextTick(I(Ne,t,1))}:Ce&&Ce.now?ve=function(t){Ce.now(I(Ne,t,1))}:Le?(ye=(_e=new Le).port2,_e.port1.onmessage=De,ve=I(ye.postMessage,ye,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts?(ve=function(t){r.postMessage(t+"","*")},r.addEventListener("message",De,!1)):ve="onreadystatechange"in m("script")?function(t){rt.appendChild(m("script")).onreadystatechange=function(){rt.removeChild(this),Ne.call(t)}}:function(t){setTimeout(I(Ne,t,1),0)});var Fe={set:ze,clear:Re},Be=Fe.set,Ue=r.MutationObserver||r.WebKitMutationObserver,Ge=r.process,Ve=r.Promise,Ze="process"==M(Ge);function We(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=j(e),this.reject=j(n)}var qe={f:function(t){return new We(t)}},He=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Ye=r.navigator,Xe=Ye&&Ye.userAgent||"",$e=function(t,e,n){for(var r in e)C(t,r,e[r],n);return t},Ke=u("species"),Je=function(t){var e=r[t];f&&e&&!e[Ke]&&y.f(e,Ke,{configurable:!0,get:function(){return this}})},Qe=u("iterator"),tn=!1;try{var en=[7][Qe]();en.return=function(){tn=!0},Array.from(en,(function(){throw 2}))}catch(t){}var nn,rn,on,an,sn=function(t,e){if(!e&&!tn)return!1;var n=!1;try{var r=[7],i=r[Qe]();i.next=function(){return{done:n=!0}},r[Qe]=function(){return i},t(r)}catch(t){}return n},un=Fe.set,ln=function(){var t,e,n,i=function(){var r,i;for(Ze&&(r=Ge.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(Ze)n=function(){Ge.nextTick(i)};else if(!Ue||r.navigator&&r.navigator.standalone)if(Ve&&Ve.resolve){var o=Ve.resolve(void 0);n=function(){o.then(i)}}else n=function(){Be.call(r,i)};else{var a=!0,s=document.createTextNode("");new Ue(i).observe(s,{characterData:!0}),n=function(){s.data=a=!a}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),cn=r.TypeError,hn=r.process,fn=hn&&hn.versions,dn=fn&&fn.v8||"",pn=r.Promise,mn="process"==Gt(hn),gn=function(){},vn=rn=qe.f,_n=!!function(){try{var t=pn.resolve(1),e=(t.constructor={})[u("species")]=function(t){t(gn,gn)};return(mn||"function"==typeof PromiseRejectionEvent)&&t.then(gn)instanceof e&&0!==dn.indexOf("6.6")&&-1===Xe.indexOf("Chrome/66")}catch(t){}}(),yn=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},bn=function(t,e){if(!t._n){t._n=!0;var n=t._c;ln((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&Tn(t),t._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===e.promise?l(cn("Promise-chain cycle")):(o=yn(n))?o.call(n,u,l):u(n)):l(r)}catch(t){c&&!a&&c.exit(),l(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&xn(t)}))}},xn=function(t){un.call(r,(function(){var e,n,i,o=t._v,a=wn(t);if(a&&(e=He((function(){mn?hn.emit("unhandledRejection",o,t):(n=r.onunhandledrejection)?n({promise:t,reason:o}):(i=r.console)&&i.error&&i.error("Unhandled promise rejection",o)})),t._h=mn||wn(t)?2:1),t._a=void 0,a&&e.e)throw e.v}))},wn=function(t){return 1!==t._h&&0===(t._a||t._c).length},Tn=function(t){un.call(r,(function(){var e;mn?hn.emit("rejectionHandled",t):(e=r.onrejectionhandled)&&e({promise:t,reason:t._v})}))},An=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),bn(e,!0))},Sn=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw cn("Promise can't be resolved itself");(n=yn(e))?ln((function(){var i={_w:r,_d:!1};try{n.call(e,I(t,i,1),I(An,i,1))}catch(e){An.call(i,e)}})):(r._v=e,r._s=1,bn(r,!1))}catch(e){An.call({_w:r,_d:!1},e)}}};_n||(pn=function(t){be(this,pn,"Promise","_h"),j(t),nn.call(this);try{t(I(Sn,this,1),I(An,this,1))}catch(t){An.call(this,t)}},(nn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=$e(pn.prototype,{then:function(t,e){var n=vn(Oe(this,pn));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=mn?hn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&bn(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),on=function(){var t=new nn;this.promise=t,this.resolve=I(Sn,t,1),this.reject=I(An,t,1)},qe.f=vn=function(t){return t===pn||t===an?new on(t):rn(t)}),D(D.G+D.W+D.F*!_n,{Promise:pn}),ct(pn,"Promise"),Je("Promise"),an=n.Promise,D(D.S+D.F*!_n,"Promise",{reject:function(t){var e=vn(this);return(0,e.reject)(t),e.promise}}),D(D.S+D.F*!_n,"Promise",{resolve:function(t){return function(t,e){if(c(t),l(e)&&e.constructor===t)return e;var n=qe.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),D(D.S+D.F*!(_n&&sn((function(t){pn.all(t).catch(gn)}))),"Promise",{all:function(t){var e=this,n=vn(e),r=n.resolve,i=n.reject,o=He((function(){var n=[],o=0,a=1;ke(t,!1,(function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=vn(e),r=n.reject,i=He((function(){ke(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}});var En=y.f,kn=Function.prototype,Mn=/^\s*function ([^ (]*)/;"name"in kn||f&&En(kn,"name",{configurable:!0,get:function(){try{return(""+this).match(Mn)[1]}catch(t){return""}}});var On=function(t,e){var r=(n.Object||{})[t]||Object[t],i={};i[t]=e(r),D(D.S+D.F*h((function(){r(1)})),"Object",i)};function Pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zn(t,e,n){return e&&Pn(t.prototype,e),n&&Pn(t,n),t}function Rn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cn(t,e){return(Cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jn(t,e,n){return(jn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Cn(i,n.prototype),i}).apply(null,arguments)}function In(t){var e="function"==typeof Map?new Map:void 0;return(In=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return jn(t,arguments,Ln(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Cn(r,t)})(t)}On("keys",(function(){return function(t){return tt(ft(t))}}));var Nn,Dn="v0.20.0",Fn=u("match"),Bn=function(t){var e;return l(t)&&(void 0!==(e=t[Fn])?!!e:"RegExp"==M(t))},Un=Math.min,Gn=[].push,Vn=!h((function(){RegExp(4294967295,"y")}));ee("split",2,(function(t,e,n,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!Bn(t))return n.call(r,t,e);for(var i,o,a,s=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,c=void 0===e?4294967295:e>>>0,h=new RegExp(t.source,u+"g");(i=Kt.call(h,r))&&!((o=h.lastIndex)>l&&(s.push(r.slice(l,i.index)),i.length>1&&i.index<r.length&&Gn.apply(s,i.slice(1)),a=i[0].length,l=o,s.length>=c));)h.lastIndex===i.index&&h.lastIndex++;return l===r.length?!a&&h.test("")||s.push(""):s.push(r.slice(l)),s.length>c?s.slice(0,c):s}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,r):i.call(String(o),n,r)},function(t,e){var o=r(i,t,this,e,i!==n);if(o.done)return o.value;var a=c(t),s=String(this),u=Oe(a,RegExp),l=a.unicode,h=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Vn?"y":"g"),f=new u(Vn?a:"^(?:"+a.source+")",h),d=void 0===e?4294967295:e>>>0;if(0===d)return[];if(0===s.length)return null===Zt(f,s)?[s]:[];for(var p=0,m=0,g=[];m<s.length;){f.lastIndex=Vn?m:0;var v,_=Zt(f,Vn?s:s.slice(m));if(null===_||(v=Un(V(f.lastIndex+(Vn?0:m)),s.length))===p)m=Ft(s,m,l);else{if(g.push(s.slice(p,m)),g.length===d)return g;for(var y=1;y<=_.length-1;y++)if(g.push(_[y]),g.length===d)return g;m=p=v}}return g.push(s.slice(p)),g}]}));var Zn=Nn={},Wn=0,qn={};function Hn(t){var e=[];"string"==typeof t&&(e=t.split("."),t=e.pop());for(var n=Nn.targets,r=0;r<e.length;r++){if(!n[e[r]])return[];n=n[e[r]]}return[t,n]}function Yn(t){Array.isArray(t)&&t.filter((function(t){return t.parent&&t.property})).forEach((function(t){return delete t.parent[t.property]}))}Nn.targets={},Nn.addTarget=function(t,e){Nn.targets[t]=e},Nn.removeTarget=function(t){t&&delete Nn.targets[t]},Nn.withTransferables=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!(this instanceof Nn.withTransferables))return jn(Nn.withTransferables,e);this.value=e,this.transferables=function t(e,n,r,i){if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=[]),!e)return i;if(Array.isArray(e))e.forEach((function(n,r){return t(n,e,r,i)}));else if("object"==typeof e)if(e instanceof ArrayBuffer)i.push({object:e,parent:n,property:r});else if(e.buffer instanceof ArrayBuffer)i.push({object:e.buffer,parent:n,property:r});else for(var o in e)t(e[o],e,o,i);return i}(this.value)},It.is_main&&(Nn.postMessage=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(Array.isArray(t))return Promise.all(t.map((function(t){var n;return(n=Nn).postMessage.apply(n,[t,e].concat(r))})));var o={};"object"==typeof e&&(o=e,e=e.method);var a,s=new Promise((function(t,n){qn[Wn]={method:e,message:r,resolve:t,reject:n}})),u=[];return r&&1===r.length&&r[0]instanceof Nn.withTransferables&&(u=r[0].transferables,r=r[0].value),a={type:"main_send",message_id:Wn,method:e,message:r},o.stringify&&(a=JSON.stringify(a)),t.postMessage(a,u.map((function(t){return t.object}))),Yn(u),u.length>0&&Jn("trace","'"+e+"' transferred "+u.length+" objects to worker thread"),Wn++,s},Nn.addWorker=function(t){if(!(t instanceof Worker))throw Error("Worker broker could not add non-Worker object",t);t.addEventListener("message",(function(e){var n="string"==typeof e.data?JSON.parse(e.data):e.data,r=n.message_id;if("worker_reply"===n.type)qn[r]&&(n.error?qn[r].reject(n.error):qn[r].resolve(n.message),delete qn[r]);else if("worker_send"===n.type&&null!=r){var i,o,a,s,u;try{var l=Hn(n.method);if(s=l[0],!(a=l[1]))throw Error("Worker broker could not dispatch message type "+n.method+" on target "+n.target+" because no object with that name is registered on main thread");if(!(u="function"==typeof a[s]&&a[s]))throw Error("Worker broker could not dispatch message type "+n.method+" on target "+n.target+" because object has no method with that name");i=u.apply(a,n.message)}catch(t){o=t}var c,h=[];i instanceof Promise?i.then((function(e){e instanceof Nn.withTransferables&&(h=e.transferables,e=e.value[0]),c={type:"main_reply",message_id:r,message:e},t.postMessage(c,h.map((function(t){return t.object}))),Yn(h),h.length>0&&Jn("trace","'"+s+"' transferred "+h.length+" objects to worker thread")}),(function(e){t.postMessage({type:"main_reply",message_id:r,error:e instanceof Error?e.message+": "+e.stack:e})})):(i instanceof Nn.withTransferables&&(h=i.transferables,i=i.value[0]),c={type:"main_reply",message_id:r,message:i,error:o instanceof Error?o.message+": "+o.stack:o},t.postMessage(c,h.map((function(t){return t.object}))),Yn(h),h.length>0&&Jn("trace","'"+s+"' transferred "+h.length+" objects to worker thread"))}}))},Nn.getMessages=function(){return qn},Nn.getMessageId=function(){return Wn}),It.is_worker&&(Nn.postMessage=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};"object"==typeof t&&(i=t,t=t.method);var o,a=new Promise((function(e,r){qn[Wn]={method:t,message:n,resolve:e,reject:r}})),s=[];return n&&1===n.length&&n[0]instanceof Nn.withTransferables&&(s=n[0].transferables,n=n[0].value),o={type:"worker_send",message_id:Wn,method:t,message:n},i.stringify&&(o=JSON.stringify(o)),self.postMessage(o,s.map((function(t){return t.object}))),Yn(s),s.length>0&&Jn("trace","'"+t+"' transferred "+s.length+" objects to main thread"),Wn++,a},self.addEventListener("message",(function(t){var e="string"==typeof t.data?JSON.parse(t.data):t.data,n=e.message_id;if("main_reply"===e.type)qn[n]&&(e.error?qn[n].reject(e.error):qn[n].resolve(e.message),delete qn[n]);else if("main_send"===e.type&&null!=n){var r,i,o,a,s;try{var u=Hn(e.method);if(a=u[0],!(o=u[1]))throw Error("Worker broker could not dispatch message type "+e.method+" on target "+e.target+" because no object with that name is registered on main thread");if(!(s="function"==typeof o[a]&&o[a]))throw Error("Worker broker could not dispatch message type "+e.method+" because worker has no method with that name");r=s.apply(o,e.message)}catch(t){i=t}var l,c=[];r instanceof Promise?r.then((function(t){t instanceof Nn.withTransferables&&(c=t.transferables,t=t.value[0]),l={type:"worker_reply",message_id:n,message:t},self.postMessage(l,c.map((function(t){return t.object}))),Yn(c),c.length>0&&Jn("trace","'"+a+"' transferred "+c.length+" objects to main thread")}),(function(t){self.postMessage({type:"worker_reply",message_id:n,error:t instanceof Error?t.message+": "+t.stack:t})})):(r instanceof Nn.withTransferables&&(c=r.transferables,r=r.value[0]),l={type:"worker_reply",message_id:n,message:r,error:i instanceof Error?i.message+": "+i.stack:i},self.postMessage(l,c.map((function(t){return t.object}))),Yn(c),c.length>0&&Jn("trace","'"+a+"' transferred "+c.length+" objects to main thread"))}})));var Xn={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},$n={},Kn={};function Jn(t){var e="object"==typeof t?t.level:t;if(Xn[e]<=Xn[Jn.level]){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(It.is_worker)return Zn.postMessage.apply(Zn,[{method:"_logProxy",stringify:!0},t].concat(r));if("object"==typeof t&&!0===t.once){if(Kn[JSON.stringify(r)])return Promise.resolve(!1);Kn[JSON.stringify(r)]=!0}var o=function(t){if(It.is_main)return $n[t]=$n[t]||(console[t]?console[t]:console.log).bind(console),$n[t]}(e);return r.length>1?o.apply(void 0,["Tangram "+Dn+" ["+e+"]: "+r[0]].concat(r.slice(1))):o("Tangram "+Dn+" ["+e+"]: "+r[0]),Promise.resolve(!0)}return Promise.resolve(!1)}Jn.level="info",Jn.workers=null,Jn.setLevel=function(t){Jn.level=t,It.is_main&&Array.isArray(Jn.workers)&&Zn.postMessage(Jn.workers,"_logSetLevelProxy",t)},It.is_main&&(Jn.setWorkers=function(t){Jn.workers=t},Jn.reset=function(){Kn={}}),Zn.addTarget("_logProxy",Jn),Zn.addTarget("_logSetLevelProxy",Jn.setLevel),f&&"g"!=/./g.flags&&y.f(RegExp.prototype,"flags",{configurable:!0,get:Wt});var Qn=/./.toString,tr=function(t){C(RegExp.prototype,"toString",t,!0)};h((function(){return"/a/b"!=Qn.call({source:"a",flags:"b"})}))?tr((function(){var t=c(this);return"/".concat(t.source,"/","flags"in t?t.flags:!f&&t instanceof RegExp?Wt.call(t):void 0)})):"toString"!=Qn.name&&tr((function(){return Qn.call(this)}));var er,nr={};Zn.addTarget("Utils",nr),nr.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},nr.isMicrosoft=function(){return/(Trident\/7.0|Edge[ \/](\d+[.\d]+))/i.test(navigator.userAgent)},nr._requests={},nr._proxy_requests={},nr.io=function(t,e,n,r,i,o,a){if(void 0===e&&(e=6e4),void 0===n&&(n="text"),void 0===r&&(r="GET"),void 0===i&&(i={}),void 0===o&&(o=null),void 0===a&&(a=!1),It.is_worker&&nr.isMicrosoft())return Jn("debug","Proxying request for URL to worker",t),o&&(nr._proxy_requests[o]=!0),Zn.postMessage("Utils.io",t,e,n,r,i,o,!0);var s=new XMLHttpRequest,u=new Promise((function(o,a){if(s.open(r,t,!0),s.timeout=e,s.responseType=n,i&&"object"==typeof i)for(var u in i)s.setRequestHeader(u,i[u]);s.onload=function(){200===s.status?["text","json"].indexOf(s.responseType)>-1?o({body:s.responseText,status:s.status}):o({body:s.response,status:s.status}):204===s.status?o({body:null,status:s.status}):a(Error("Request error with a status of "+s.statusText))},s.onerror=function(t){a(Error("There was a network error"+t.toString()))},s.ontimeout=function(t){a(Error("timeout "+t.toString()))},s.send()}));return u=u.then((function(t){return o&&delete nr._requests[o],a?Zn.withTransferables(t):t})),o&&(nr._requests[o]=s),u},nr.cancelRequest=function(t){if(It.is_worker&&nr._proxy_requests[t])return Zn.postMessage("Utils.cancelRequest",t);nr._requests[t]?(Jn("trace","Cancelling network request key '"+t+"'"),nr._requests[t].abort(),delete nr._requests[t]):Jn("trace","Could not find network request key '"+t+"'")},nr.serializeWithFunctions=function(t){return"function"==typeof t?t.toString():JSON.stringify(t,(function(t,e){return"function"==typeof e?e.toString():e}))},nr.use_high_density_display=!0,nr.updateDevicePixelRatio=function(){var t=nr.device_pixel_ratio;return nr.device_pixel_ratio=nr.use_high_density_display&&window.devicePixelRatio||1,nr.device_pixel_ratio!==t},It.is_main&&nr.updateDevicePixelRatio(),nr.isPowerOf2=function(t){return 0==(t&t-1)},nr.interpolate=function(t,e,n){if(!Array.isArray(e)||!Array.isArray(e[0]))return e;if(e.length<1)return e;var r,i,o,a,s;if(t<=e[0][0])a=e[0][1],"function"==typeof n&&(a=n(a));else if(t>=e[e.length-1][0])a=e[e.length-1][1],"function"==typeof n&&(a=n(a));else for(var u=0;u<e.length-1;u++)if(t>=e[u][0]&&t<e[u+1][0]){if(r=e[u][0],i=e[u+1][0],Array.isArray(e[u][1])){a=[];for(var l=0;l<e[u][1].length;l++)"function"==typeof n?(s=n(e[u][1][l]),o=n(e[u+1][1][l])-s,a[l]=o*(t-r)/(i-r)+s):(o=e[u+1][1][l]-e[u][1][l],a[l]=o*(t-r)/(i-r)+e[u][1][l])}else"function"==typeof n?(s=n(e[u][1]),a=(o=n(e[u+1][1])-s)*(t-r)/(i-r)+s):a=(o=e[u+1][1]-e[u][1])*(t-r)/(i-r)+e[u][1];break}return a},nr.toCSSColor=function(t){return 1===t[3]?"rgb("+t.slice(0,3).map((function(t){return Math.round(255*t)})).join(", ")+")":"rgba("+t.map((function(t,e){return e<3&&Math.round(255*t)||t})).join(", ")+")"};var rr=er={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_label_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1},ir=function(t,e){if(c(t),!l(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},or=Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=I(Function.call,me.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return ir(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),ar=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&l(r)&&or&&or(t,r),t},sr=y.f,ur=de.f,lr=r.RegExp,cr=lr,hr=lr.prototype,fr=/a/g,dr=/a/g,pr=new lr(fr)!==fr;if(f&&(!pr||h((function(){return dr[u("match")]=!1,lr(fr)!=fr||lr(dr)==dr||"/a/i"!=lr(fr,"i")})))){lr=function(t,e){var n=this instanceof lr,r=Bn(t),i=void 0===e;return!n&&r&&t.constructor===lr&&i?t:ar(pr?new cr(r&&!i?t.source:t,e):cr((r=t instanceof lr)?t.source:t,r&&i?Wt.call(t):e),n?this:hr,lr)};for(var mr=function(t){t in lr||sr(lr,t,{configurable:!0,get:function(){return cr[t]},set:function(e){cr[t]=e}})},gr=ur(cr),vr=0;gr.length>vr;)mr(gr[vr++]);hr.constructor=lr,lr.prototype=hr,C(r,"RegExp",lr)}Je("RegExp");var _r,yr=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};function br(t){if("string"==typeof t&&-1===t.search(/^(data|blob):/)){var e=t.indexOf("?");e>-1&&(t=t.substr(0,e));var n=t.indexOf("#");return n>-1&&(t=t.substr(0,n)),t.substr(0,t.lastIndexOf("/")+1)||""}return""}function xr(t){if("string"==typeof t)return!(t.search(/^(http|https|data|blob):/)>-1||"//"===t.substr(0,2))}function wr(t,e){t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}ee("search",1,(function(t,e,n,r){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=r(n,t,this);if(e.done)return e.value;var i=c(t),o=String(this),a=i.lastIndex;yr(a,0)||(i.lastIndex=0);var s=Zt(i,o);return yr(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var Tr={id:0,queue:[],max_time:20,start_time:null,state:{},add:function(t){t.id=Tr.id++,t.max_time=t.max_time||Tr.max_time,t.pause_factor=t.pause_factor||1;var e=new Promise((function(e,n){t.resolve=e,t.reject=n}));return t.promise=e,t.elapsed=0,t.total_elapsed=0,t.stats={calls:0},this.queue.push(t),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,(this.elapsed<Tr.max_time||t.immediate)&&this.process(t),t.promise},remove:function(t){var e=this.queue.indexOf(t);e>-1&&this.queue.splice(e,1)},process:function(t){if(!this.state.user_moving_view||!1!==t.user_moving_view)return t.pause?(t.pause--,!0):(t.stats.calls++,t.start_time=performance.now(),t.run(t))},processAll:function(){this.start_time=this.start_time||performance.now();for(var t=0;t<this.queue.length;t++){var e=this.queue[t];if(!0!==this.process(e)&&(e.pause||(e.pause=e.elapsed>e.max_time?e.pause_factor:0),e.total_elapsed+=e.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=Tr.max_time){this.start_time=null;break}}},finish:function(t,e){return t.elapsed=performance.now()-t.start_time,t.total_elapsed+=t.elapsed,this.remove(t),t.resolve(e),t.promise},cancel:function(t){var e;t.cancel instanceof Function&&(e=t.cancel(t)),t.resolve(e)},shouldContinue:function(t){return t.elapsed=performance.now()-t.start_time,this.elapsed=performance.now()-this.start_time,t.elapsed<t.max_time&&this.elapsed<Tr.max_time},removeForTile:function(t){for(var e=this.queue.length-1;e>=0;e--)this.queue[e].tile_id===t&&(this.cancel(this.queue[e]),this.queue.splice(e,1))},setState:function(t){this.state=t}};function Ar(t){var e=[];return Object.assign(t,{subscribe:function(t){-1===e.indexOf(t)&&e.push(t)},unsubscribe:function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},unsubscribeAll:function(){e=[]},trigger:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.forEach((function(e){if("function"==typeof e[t])try{e[t].apply(e,r)}catch(e){Jn("warn","Caught exception in listener for event '"+t+"':",e)}}))},hasSubscribersFor:function(t){var n=!1;return e.forEach((function(e){"function"==typeof e[t]&&(n=!0)})),n}})}function Sr(t,e){var n={};return e.forEach((function(e){return n[e]=t[e]})),n}D(D.P,"String",{repeat:function(t){var e=String(P(this)),n="",r=U(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});for(var Er,kr=s("typed_array"),Mr=s("view"),Or=!(!r.ArrayBuffer||!r.DataView),Pr=Or,zr=0,Rr="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");zr<9;)(Er=r[Rr[zr++]])?(x(Er.prototype,kr,!0),x(Er.prototype,Mr,!0)):Pr=!1;var Lr={ABV:Or,CONSTR:Pr,TYPED:kr,VIEW:Mr},Cr=function(t){if(void 0===t)return 0;var e=U(t),n=V(e);if(e!==n)throw RangeError("Wrong length!");return n},jr=function(t){for(var e=ft(this),n=V(e.length),r=arguments.length,i=q(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:q(o,n);a>i;)e[i++]=t;return e},Ir=e((function(t,e){var n=de.f,i=y.f,o="prototype",a="Wrong index!",s=r.ArrayBuffer,u=r.DataView,l=r.Math,c=r.RangeError,d=r.Infinity,p=s,m=l.abs,g=l.pow,v=l.floor,_=l.log,b=l.LN2,w=f?"_b":"buffer",T=f?"_l":"byteLength",A=f?"_o":"byteOffset";function S(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,l=u>>1,c=23===e?g(2,-24)-g(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=m(t))!=t||t===d?(i=t!=t?1:0,r=u):(r=v(_(t)/b),t*(o=g(2,-r))<1&&(r--,o*=2),(t+=r+l>=1?c/o:c*g(2,1-l))*o>=2&&(r++,o/=2),r+l>=u?(i=0,r=u):r+l>=1?(i=(t*o-1)*g(2,e),r+=l):(i=t*g(2,l-1)*g(2,e),r=0));e>=8;a[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function E(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,l=t[u--],c=127&l;for(l>>=7;s>0;c=256*c+t[u],u--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:l?-d:d;r+=g(2,e),c-=a}return(l?-1:1)*r*g(2,c-e)}function k(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function M(t){return[255&t]}function O(t){return[255&t,t>>8&255]}function P(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return S(t,52,8)}function R(t){return S(t,23,4)}function L(t,e,n){i(t[o],e,{get:function(){return this[n]}})}function C(t,e,n,r){var i=Cr(+n);if(i+e>t[T])throw c(a);var o=t[w]._b,s=i+t[A],u=o.slice(s,s+e);return r?u:u.reverse()}function j(t,e,n,r,i,o){var s=Cr(+n);if(s+e>t[T])throw c(a);for(var u=t[w]._b,l=s+t[A],h=r(+i),f=0;f<e;f++)u[l+f]=h[o?f:e-f-1]}if(Lr.ABV){if(!h((function(){s(1)}))||!h((function(){new s(-1)}))||h((function(){return new s,new s(1.5),new s(NaN),"ArrayBuffer"!=s.name}))){for(var I,N=(s=function(t){return be(this,s),new p(Cr(t))})[o]=p[o],D=n(p),F=0;D.length>F;)(I=D[F++])in s||x(s,I,p[I]);N.constructor=s}var B=new u(new s(2)),G=u[o].setInt8;B.setInt8(0,2147483648),B.setInt8(1,2147483649),!B.getInt8(0)&&B.getInt8(1)||$e(u[o],{setInt8:function(t,e){G.call(this,t,e<<24>>24)},setUint8:function(t,e){G.call(this,t,e<<24>>24)}},!0)}else s=function(t){be(this,s,"ArrayBuffer");var e=Cr(t);this._b=jr.call(new Array(e),0),this[T]=e},u=function(t,e,n){be(this,u,"DataView"),be(t,s,"DataView");var r=t[T],i=U(e);if(i<0||i>r)throw c("Wrong offset!");if(i+(n=void 0===n?r-i:V(n))>r)throw c("Wrong length!");this[w]=t,this[A]=i,this[T]=n},f&&(L(s,"byteLength","_l"),L(u,"buffer","_b"),L(u,"byteLength","_l"),L(u,"byteOffset","_o")),$e(u[o],{getInt8:function(t){return C(this,1,t)[0]<<24>>24},getUint8:function(t){return C(this,1,t)[0]},getInt16:function(t){var e=C(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=C(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return k(C(this,4,t,arguments[1]))},getUint32:function(t){return k(C(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return E(C(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return E(C(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){j(this,1,t,M,e)},setUint8:function(t,e){j(this,1,t,M,e)},setInt16:function(t,e){j(this,2,t,O,e,arguments[2])},setUint16:function(t,e){j(this,2,t,O,e,arguments[2])},setInt32:function(t,e){j(this,4,t,P,e,arguments[2])},setUint32:function(t,e){j(this,4,t,P,e,arguments[2])},setFloat32:function(t,e){j(this,4,t,R,e,arguments[2])},setFloat64:function(t,e){j(this,8,t,z,e,arguments[2])}});ct(s,"ArrayBuffer"),ct(u,"DataView"),x(u[o],Lr.VIEW,!0),e.ArrayBuffer=s,e.DataView=u})),Nr=u("species"),Dr=function(t,e){return new(function(t){var e;return he(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!he(e.prototype)||(e=void 0),l(e)&&null===(e=e[Nr])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Fr=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||Dr;return function(e,l,c){for(var h,f,d=ft(e),p=O(d),m=I(l,c,3),g=V(p.length),v=0,_=n?u(e,g):r?u(e,0):void 0;g>v;v++)if((s||v in p)&&(f=m(h=p[v],v,d),t))if(n)_[v]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:_.push(h)}else if(o)return!1;return a?-1:i||o?o:_}},Br=[].copyWithin||function(t,e){var n=ft(this),r=V(n.length),i=q(t,r),o=q(e,r),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?r:q(a,r))-o,r-i),u=1;for(o<i&&i<o+s&&(u=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=u,o+=u;return n},Ur=e((function(t){if(f){var e=r,n=h,i=D,o=Lr,a=Ir,c=I,d=be,p=b,m=x,g=$e,_=U,w=V,T=Cr,A=q,S=v,k=L,M=Gt,O=l,P=ft,z=Ae,R=st,C=mt,j=de.f,N=Ee,F=s,B=u,G=Fr,Z=H,W=Oe,Y=bt,X=E,$=sn,K=Je,J=jr,Q=Br,tt=y,et=me,nt=tt.f,rt=et.f,it=e.RangeError,ot=e.TypeError,at=e.Uint8Array,ut=Array.prototype,lt=a.ArrayBuffer,ct=a.DataView,ht=G(0),dt=G(2),pt=G(3),gt=G(4),vt=G(5),_t=G(6),yt=Z(!0),xt=Z(!1),wt=Y.values,Tt=Y.keys,At=Y.entries,St=ut.lastIndexOf,Et=ut.reduce,kt=ut.reduceRight,Mt=ut.join,Ot=ut.sort,Pt=ut.slice,zt=ut.toString,Rt=ut.toLocaleString,Lt=B("iterator"),Ct=B("toStringTag"),jt=F("typed_constructor"),It=F("def_constructor"),Nt=o.CONSTR,Dt=o.TYPED,Ft=o.VIEW,Bt=G(1,(function(t,e){return qt(W(t,t[It]),e)})),Ut=n((function(){return 1===new at(new Uint16Array([1]).buffer)[0]})),Vt=!!at&&!!at.prototype.set&&n((function(){new at(1).set({})})),Zt=function(t,e){var n=_(t);if(n<0||n%e)throw it("Wrong offset!");return n},Wt=function(t){if(O(t)&&Dt in t)return t;throw ot(t+" is not a typed array!")},qt=function(t,e){if(!(O(t)&&jt in t))throw ot("It is not a typed array constructor!");return new t(e)},Ht=function(t,e){return Yt(W(t,t[It]),e)},Yt=function(t,e){for(var n=0,r=e.length,i=qt(t,r);r>n;)i[n]=e[n++];return i},Xt=function(t,e,n){nt(t,e,{get:function(){return this._d[n]}})},$t=function(t){var e,n,r,i,o,a,s=P(t),u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,f=N(s);if(null!=f&&!z(f)){for(a=f.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(h&&u>2&&(l=c(l,arguments[2],2)),e=0,n=w(s.length),i=qt(this,n);n>e;e++)i[e]=h?l(s[e],e):s[e];return i},Kt=function(){for(var t=0,e=arguments.length,n=qt(this,e);e>t;)n[t]=arguments[t++];return n},Jt=!!at&&n((function(){Rt.call(new at(1))})),Qt=function(){return Rt.apply(Jt?Pt.call(Wt(this)):Wt(this),arguments)},te={copyWithin:function(t,e){return Q.call(Wt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return gt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return J.apply(Wt(this),arguments)},filter:function(t){return Ht(this,dt(Wt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return vt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return _t(Wt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){ht(Wt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return xt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return yt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return Mt.apply(Wt(this),arguments)},lastIndexOf:function(t){return St.apply(Wt(this),arguments)},map:function(t){return Bt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return Et.apply(Wt(this),arguments)},reduceRight:function(t){return kt.apply(Wt(this),arguments)},reverse:function(){for(var t,e=Wt(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return pt(Wt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Ot.call(Wt(this),t)},subarray:function(t,e){var n=Wt(this),r=n.length,i=A(t,r);return new(W(n,n[It]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,w((void 0===e?r:A(e,r))-i))}},ee=function(t,e){return Ht(this,Pt.call(Wt(this),t,e))},ne=function(t){Wt(this);var e=Zt(arguments[1],1),n=this.length,r=P(t),i=w(r.length),o=0;if(i+e>n)throw it("Wrong length!");for(;o<i;)this[e+o]=r[o++]},re={entries:function(){return At.call(Wt(this))},keys:function(){return Tt.call(Wt(this))},values:function(){return wt.call(Wt(this))}},ie=function(t,e){return O(t)&&t[Dt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},oe=function(t,e){return ie(t,e=S(e,!0))?p(2,t[e]):rt(t,e)},ae=function(t,e,n){return!(ie(t,e=S(e,!0))&&O(n)&&k(n,"value"))||k(n,"get")||k(n,"set")||n.configurable||k(n,"writable")&&!n.writable||k(n,"enumerable")&&!n.enumerable?nt(t,e,n):(t[e]=n.value,t)};Nt||(et.f=oe,tt.f=ae),i(i.S+i.F*!Nt,"Object",{getOwnPropertyDescriptor:oe,defineProperty:ae}),n((function(){zt.call({})}))&&(zt=Rt=function(){return Mt.call(this)});var se=g({},te);g(se,re),m(se,Lt,re.values),g(se,{slice:ee,set:ne,constructor:function(){},toString:zt,toLocaleString:Qt}),Xt(se,"buffer","b"),Xt(se,"byteOffset","o"),Xt(se,"byteLength","l"),Xt(se,"length","e"),nt(se,Ct,{get:function(){return this[Dt]}}),t.exports=function(t,r,a,s){var u=t+((s=!!s)?"Clamped":"")+"Array",l="get"+t,c="set"+t,h=e[u],f=h||{},p=h&&C(h),g=!h||!o.ABV,v={},_=h&&h.prototype,y=function(t,e){nt(t,e,{get:function(){return function(t,e){var n=t._d;return n.v[l](e*r+n.o,Ut)}(this,e)},set:function(t){return function(t,e,n){var i=t._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[c](e*r+i.o,n,Ut)}(this,e,t)},enumerable:!0})};g?(h=a((function(t,e,n,i){d(t,h,u,"_d");var o,a,s,l,c=0,f=0;if(O(e)){if(!(e instanceof lt||"ArrayBuffer"==(l=M(e))||"SharedArrayBuffer"==l))return Dt in e?Yt(h,e):$t.call(h,e);o=e,f=Zt(n,r);var p=e.byteLength;if(void 0===i){if(p%r)throw it("Wrong length!");if((a=p-f)<0)throw it("Wrong length!")}else if((a=w(i)*r)+f>p)throw it("Wrong length!");s=a/r}else s=T(e),o=new lt(a=s*r);for(m(t,"_d",{b:o,o:f,l:a,e:s,v:new ct(o)});c<s;)y(t,c++)})),_=h.prototype=R(se),m(_,"constructor",h)):n((function(){h(1)}))&&n((function(){new h(-1)}))&&$((function(t){new h,new h(null),new h(1.5),new h(t)}),!0)||(h=a((function(t,e,n,i){var o;return d(t,h,u),O(e)?e instanceof lt||"ArrayBuffer"==(o=M(e))||"SharedArrayBuffer"==o?void 0!==i?new f(e,Zt(n,r),i):void 0!==n?new f(e,Zt(n,r)):new f(e):Dt in e?Yt(h,e):$t.call(h,e):new f(T(e))})),ht(p!==Function.prototype?j(f).concat(j(p)):j(f),(function(t){t in h||m(h,t,f[t])})),h.prototype=_,_.constructor=h);var b=_[Lt],x=!!b&&("values"==b.name||null==b.name),A=re.values;m(h,jt,!0),m(_,Dt,u),m(_,Ft,!0),m(_,It,h),(s?new h(1)[Ct]==u:Ct in _)||nt(_,Ct,{get:function(){return u}}),v[u]=h,i(i.G+i.W+i.F*(h!=f),v),i(i.S,u,{BYTES_PER_ELEMENT:r}),i(i.S+i.F*n((function(){f.of.call(h,1)})),u,{from:$t,of:Kt}),"BYTES_PER_ELEMENT"in _||m(_,"BYTES_PER_ELEMENT",r),i(i.P,u,te),K(u),i(i.P+i.F*Vt,u,{set:ne}),i(i.P+i.F*!x,u,re),_.toString!=zt&&(_.toString=zt),i(i.P+i.F*n((function(){new h(1).slice()})),u,{slice:ee}),i(i.P+i.F*(n((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!n((function(){_.toLocaleString.call([1,2])}))),u,{toLocaleString:Qt}),X[u]=x?b:A,x||m(_,Lt,A)}}else t.exports=function(){}}));Ur("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Gr=function(){function t(e,n,r){void 0===r&&(r={}),r=t.sliceOptions(r),this.gl=e,this.texture=e.createTexture(),this.texture&&(this.valid=!0),this.bind(),this.name=n,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=r.filtering,this.density=r.density||1,this.sprites=r.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,t.textures[this.name]&&(this.retain_count=t.textures[this.name].retain_count,t.textures[this.name].retain_count=0,t.textures[this.name].destroy()),t.textures[this.name]=this,t.texture_configs[this.name]=JSON.stringify(Object.assign({name:n},r)),this.load(r),Jn("trace","creating Texture "+this.name)}var e=t.prototype;return e.destroy=function(e){var n=(void 0===e?{}:e).force;this.retain_count>0&&!n?Jn("error","Texture '"+this.name+"': destroying texture with retain count of '"+this.retain_count+"'"):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,t.textures[this.name]===this&&(delete t.textures[this.name],delete t.texture_configs[this.name]),this.valid=!1,Jn("trace","destroying Texture "+this.name))},e.retain=function(){this.retain_count++},e.release=function(){this.retain_count<=0&&Jn("error","Texture '"+this.name+"': releasing texture with retain count of '"+this.retain_count+"'"),this.retain_count--,this.retain_count<=0&&this.destroy()},e.bind=function(e){void 0===e&&(e=0),this.valid&&(t.activeUnit!==e&&(this.gl.activeTexture(this.gl.TEXTURE0+e),t.activeUnit=e,t.boundTexture=null),t.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),t.boundTexture=this.texture))},e.load=function(t){var e=this;return t?(this.loading=null,"string"==typeof t.url?(this.config_type="url",this.setUrl(t.url,t)):t.element?(this.config_type="element",this.setElement(t.element,t)):t.data&&t.width&&t.height&&(this.config_type="data",this.setData(t.width,t.height,t.data,t)),this.loading=this.loading&&this.loading.then((function(){return e.calculateSprites(),e}))||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)},e.setUrl=function(e,n){var r=this;if(void 0===n&&(n={}),this.valid)return this.url=e,this.loading=new Promise((function(e){var i=new Image;i.onload=function(){try{if("data:"===r.url.slice(0,5)){var o=document.createElement("canvas"),a=o.getContext("2d");o.width=i.width,o.height=i.height,a.drawImage(i,0,0),r.setElement(o,n)}else r.setElement(i,n)}catch(e){r.loaded=!1,Jn("warn","Texture '"+r.name+"': failed to load url: '"+r.url+"'",e,n),t.trigger("warning",{message:"Failed to load texture from "+r.url,error:e,texture:n})}r.loaded=!0,e(r)},i.onerror=function(i){r.loaded=!1,Jn("warn","Texture '"+r.name+"': failed to load url: '"+r.url+"'",i,n),t.trigger("warning",{message:"Failed to load texture from "+r.url,error:i,texture:n}),e(r)},nr.isSafari()&&"data:"===r.url.slice(0,5)||(i.crossOrigin="anonymous"),i.src=r.url})),this.loading},e.setData=function(t,e,n,r){return void 0===r&&(r={}),this.width=t,this.height=e,Array.isArray(n)&&(n=new Uint8Array(n)),this.update(n,r),this.setFiltering(r),this.loaded=!0,this.loading=Promise.resolve(this),this.loading},e.setElement=function(e,n){var r=e;if("string"==typeof e&&(e=document.querySelector(e)),e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof HTMLVideoElement)this.update(e,n),this.setFiltering(n);else{this.loaded=!1;var i="the 'element' parameter (`element: "+JSON.stringify(r)+"`) must be a CSS ";i+="selector string, or a <canvas>, <image> or <video> object",Jn("warn","Texture '"+this.name+"': "+i,n),t.trigger("warning",{message:"Failed to load texture because "+i,texture:n})}return this.loaded=!0,this.loading=Promise.resolve(this),this.loading},e.update=function(e,n){void 0===n&&(n={}),this.valid&&(this.bind(),e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof HTMLImageElement&&e.complete?(this.width=e.width,this.height=e.height,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==n.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)):(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,null),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,null),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)),t.trigger("update",this))},e.setFiltering=function(e){if(void 0===e&&(e={}),this.valid){e.filtering=e.filtering||"linear";var n=this.gl;this.bind(),nr.isPowerOf2(this.width)&&nr.isPowerOf2(this.height)?(this.power_of_2=!0,n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e.TEXTURE_WRAP_S||e.repeat&&n.REPEAT||n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e.TEXTURE_WRAP_T||e.repeat&&n.REPEAT||n.CLAMP_TO_EDGE),"mipmap"===e.filtering?(this.filtering="mipmap",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.generateMipmap(n.TEXTURE_2D)):"linear"===e.filtering?(this.filtering="linear",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):"nearest"===e.filtering&&(this.filtering="nearest",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST))):(this.power_of_2=!1,n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),"nearest"===e.filtering?(this.filtering="nearest",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)):(this.filtering="linear",n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR))),t.trigger("update",this)}},e.calculateSprites=function(){if(this.sprites)for(var e in this.sprites){var n=this.sprites[e];this.texcoords[e]=t.getTexcoordsForSprite([n[0],n[1]],[n[2],n[3]],[this.width,this.height]),this.sizes[e]=[n[2],n[3]],this.css_sizes[e]=[n[2]/this.density,n[3]/this.density],this.aspects[e]=n[2]/n[3]}},e.byteSize=function(){return Math.round(this.width*this.height*4*("mipmap"==this.filtering?1.33:1))},t}();Gr.create=function(t,e,n){return new Gr(t,e,n)},Gr.retain=function(t){Gr.textures[t]&&Gr.textures[t].retain()},Gr.release=function(t){Gr.textures[t]&&Gr.textures[t].release()},Gr.destroy=function(t){Object.keys(Gr.textures).forEach((function(e){var n=Gr.textures[e];n.gl===t&&n.destroy({force:!0})}))},Gr.getSpriteInfo=function(t,e){var n=Gr.textures[t];return n&&{size:n.sizes[e],css_size:n.css_sizes[e],aspect:n.aspects[e],texcoords:n.texcoords[e]}},Gr.getTexcoordsForSprite=function(t,e,n){var r=n[1]-t[1]-e[1];return[t[0]/n[0],r/n[1],(e[0]+t[0])/n[0],(e[1]+r)/n[1]]},Gr.createFromObject=function(t,e){var n=[];if(e)for(var r in e){var i=e[r];if(!i.skip_create&&Gr.changed(r,i)){var o=Gr.create(t,r,i);n.push(o.loading)}}return Promise.all(n)},Gr.default="__default",Gr.createDefault=function(t){return Gr.create(t,Gr.default)},Gr.sliceOptions=function(t){return{filtering:t.filtering,sprites:t.sprites,url:t.url,element:t.element,data:t.data,width:t.width,height:t.height,density:t.density,repeat:t.repeat,TEXTURE_WRAP_S:t.TEXTURE_WRAP_S,TEXTURE_WRAP_T:t.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:t.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:t.UNPACK_PREMULTIPLY_ALPHA_WEBGL}},Gr.changed=function(t,e){var n=Gr.textures[t];if(n){if("element"===n.config_type||null!=e.element)return!0;if(e=Gr.sliceOptions(e),Gr.texture_configs[t]===JSON.stringify(Object.assign({name:t},e)))return!1}return!0},Gr.getInfo=function(t){if(t||(t=Object.keys(Gr.textures)),Array.isArray(t))return Promise.all(t.map((function(t){return Gr.getInfo(t)})));var e=Gr.textures[t];return e?(e.loading||Promise.resolve(e)).then((function(){return{name:e.name,width:e.width,height:e.height,density:e.density,css_size:[e.width/e.density,e.height/e.density],aspect:e.width/e.height,sprites:e.sprites,texcoords:e.texcoords,sizes:e.sizes,css_sizes:e.css_sizes,aspects:e.aspects,filtering:e.filtering,power_of_2:e.power_of_2,valid:e.valid}})):Promise.resolve(null)},Gr.syncTexturesToWorker=function(t){return Zn.postMessage("Texture.getInfo",t).then((function(t){return t&&t.filter((function(t){return t})).forEach((function(t){return Gr.textures[t.name]=t})),Gr.textures}))},Gr.getMaxTextureSize=function(t){return t.getParameter(t.MAX_TEXTURE_SIZE)},Gr.textures={},Gr.texture_configs={},Gr.boundTexture=null,Gr.activeUnit=null,Zn.addTarget("Texture",Gr),Ar(Gr);var Vr=Lt.f,Zr=function(t){return function(e){for(var n,r=z(e),i=tt(r),o=i.length,a=0,s=[];o>a;)Vr.call(r,n=i[a++])&&s.push(t?[n,r[n]]:r[n]);return s}},Wr=Zr(!0);D(D.S,"Object",{entries:function(t){return Wr(t)}}),ee("match",1,(function(t,e,n,r){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=r(n,t,this);if(e.done)return e.value;var i=c(t),o=String(this);if(!i.global)return Zt(i,o);var a=i.unicode;i.lastIndex=0;for(var s,u=[],l=0;null!==(s=Zt(i,o));){var h=String(s[0]);u[l]=h,""===h&&(i.lastIndex=Ft(o,V(i.lastIndex),a)),l++}return 0===l?null:u}]}));var qr={parseUniforms:function(t){var e=[];for(var n in t){var r,i=n,o=t[n];if("number"==typeof o)e.push({type:"float",method:"1f",name:n,value:o,key:i,uniforms:t});else if(Array.isArray(o)){if("number"==typeof o[0])o.length>=2&&o.length<=4?e.push({type:"vec"+o.length,method:o.length+"fv",name:n,value:o,key:i,uniforms:t}):o.length>4&&e.push({type:"float[]",method:"1fv",name:n+"[0]",value:o,key:i,uniforms:t});else if("string"==typeof o[0])for(r=0;r<o.length;r++)e.push({type:"sampler2D",method:"1i",name:n+"["+r+"]",value:o[r],key:r,uniforms:o});else if(Array.isArray(o[0])&&"number"==typeof o[0][0]&&o[0].length>=2&&o[0].length<=4)for(r=0;r<o.length;r++)e.push({type:"vec"+o[0].length,method:o[0].length+"fv",name:n+"["+r+"]",value:o[r],key:r,uniforms:o})}else"boolean"==typeof o?e.push({type:"bool",method:"1i",name:n,value:o,key:i,uniforms:t}):"string"==typeof o&&e.push({type:"sampler2D",method:"1i",name:n,value:o,key:i,uniforms:t})}return e},defineVariable:function(t,e){var n,r;if("number"==typeof e)n="float";else if(Array.isArray(e))"number"==typeof e[0]?e.length>=2&&e.length<=4?n="vec"+e.length:(n="float",r=e.length):"string"==typeof e[0]?(n="sampler2D",r=e.length):Array.isArray(e[0])&&"number"==typeof e[0][0]&&e[0].length>=2&&e[0].length<=4&&(n="vec"+e[0].length,r=e.length);else if("boolean"==typeof e)n="bool";else{if("string"!=typeof e)return;n="sampler2D"}var i="";return i+=n+" "+t,r&&(i+="["+r+"]"),i+";\n"},defineUniform:function(t,e){var n=qr.defineVariable(t,e);if(n)return"uniform "+n},expandVec3:function(t,e){var n;if(void 0===e&&(e=1),Array.isArray(t)){if(2!==t.length)return t;n=[].concat(t,[e]).map(parseFloat)}else n=[t,t,t].map(parseFloat);if(n&&n.every((function(t){return"number"==typeof t&&!isNaN(t)})))return n},expandVec4:function(t,e){var n;if(void 0===e&&(e=1),Array.isArray(t)){if(3!==t.length)return t;n=[].concat(t,[e]).map(parseFloat)}else n=[t,t,t,e].map(parseFloat);if(n&&n.every((function(t){return"number"==typeof t&&!isNaN(t)})))return n}},Hr=[];function Yr(t,e){var n=Hr.filter((function(e){return e[0]===t}))[0];return(n=n&&n[1])||(Hr.push([t,{}]),n=Hr[Hr.length-1][1]),n[e]||(n[e]=t.getExtension(e)),n[e]}function Xr(t){var e,n,r=0;if(0===t.length)return r;for(e=0,n=t.length;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r}var $r=/^\s*#pragma.*$/gm,Kr=/\\\s*\n/gm,Jr=function(){function t(e,n,r,i){i=i||{},this.gl=e,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,this.defines=Object.assign({},i.defines||{}),this.blocks=Object.assign({},i.blocks||{}),this.block_scopes=Object.assign({},i.block_scopes||{}),this.extensions=i.extensions||[],this.dependent_uniforms=i.uniforms,this.uniforms={},this.attribs={},this.vertex_source=n,this.fragment_source=r,this.id=t.id++,this.name=i.name}var e=t.prototype;return e.destroy=function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1},e.use=function(){this.compiled&&(t.current!==this&&this.gl.useProgram(this.program),t.current=this)},e.compile=function(){var e=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for "+this.id+" ("+this.name+") because already compiling");this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var n,r=this.checkExtensions(),i=this.buildDefineList(),o=this.buildShaderBlockList();for(var a in o){var s=o[a];if(s&&(!Array.isArray(s)||0!==s.length)){n=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+a+"\\s*$","m");var u=this.computed_vertex_source.match(n),l=this.computed_fragment_source.match(n);if(null!=u||null!=l){var c="";s.forEach((function(t){var e=t.scope+", "+t.key+", "+t.num;c+="\n// tangram-block-start: "+e+"\n",c+=t.source,c+="\n// tangram-block-end: "+e+"\n"})),null!=u&&(this.computed_vertex_source=this.computed_vertex_source.replace(n,c)),null!=l&&(this.computed_fragment_source=this.computed_fragment_source.replace(n,c)),i["TANGRAM_BLOCK_"+a.replace(/[\s-]+/g,"_").toUpperCase()]=!0}}}this.computed_vertex_source=this.computed_vertex_source.replace($r,""),this.computed_fragment_source=this.computed_fragment_source.replace($r,""),this.ensureUniforms(this.dependent_uniforms);var h,f=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT);h=f&&f.precision>0?"precision highp float;\n":"precision mediump float;\n",i.TANGRAM_VERTEX_SHADER=!0,i.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=h+t.buildDefineString(i)+this.computed_vertex_source,i.TANGRAM_VERTEX_SHADER=!1,i.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=t.buildExtensionString(r)+h+t.buildDefineString(i)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(Kr,""),this.computed_fragment_source=this.computed_fragment_source.replace(Kr,"");try{this.program=t.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(t){throw this.program=null,this.compiled=!1,this.compiling=!1,this.error=t,this.error.vertex_shader_source=this.computed_vertex_source,this.error.fragment_shader_source=this.computed_fragment_source,"vertex"!==t.type&&"fragment"!==t.type||(this.shader_errors=t.errors,this.shader_errors.forEach((function(r){r.type=t.type,r.block=e.block(t.type,r.line),r.line=e.block(t.type,r.line)})),this.error.shader_errors=this.shader_errors),t}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()},e.buildDefineList=function(){var e,n={};for(e in t.defines)n[e]=t.defines[e];for(e in this.defines)n[e]=this.defines[e];return n},e.buildShaderBlockList=function(){var e,n={};for(e in t.blocks){var r;n[e]=[],Array.isArray(t.blocks[e])?(r=n[e]).push.apply(r,t.blocks[e].map((function(t,n){return{key:e,source:t,num:n,scope:"ShaderProgram"}}))):n[e]=[{key:e,source:t.blocks[e],num:0,scope:"ShaderProgram"}]}for(e in this.blocks)if(n[e]=n[e]||[],Array.isArray(this.blocks[e]))for(var i=this.block_scopes&&this.block_scopes[e]||[],o=null,a=0,s=0;s<this.blocks[e].length;s++)i[s]!==o&&(o=i[s],a=0),n[e].push({key:e,source:this.blocks[e][s],num:a,scope:o||this.name}),a++;else n[e].push({key:e,source:this.blocks[e],num:0,scope:this.name});return n},e.ensureUniforms=function(t){if(t){var e=Object.entries(t).map((function(t){var e=t[0],n=t[1];return qr.defineUniform(e,n)})).filter((function(t){return t}));this.computed_vertex_source=e.join("\n")+this.computed_vertex_source,this.computed_fragment_source=e.join("\n")+this.computed_fragment_source}},e.setUniforms=function(t,e){if(void 0===e&&(e=!0),this.compiled){e&&(this.texture_unit=0);for(var n=qr.parseUniforms(t),r=0;r<n.length;r++){var i=n[r];"sampler2D"===i.type?this.setTextureUniform(i.name,i.value):this.uniform(i.method,i.name,i.value)}}},e.saveUniforms=function(t){var e=t||this.uniforms;for(var n in e){var r=this.uniforms[n];r&&(r.saved_value=r.value)}this.saved_texture_unit=this.texture_unit||0},e.restoreUniforms=function(t){var e=t||this.uniforms;for(var n in e){var r=this.uniforms[n];r&&r.saved_value&&(r.value=r.saved_value,this.updateUniform(r))}this.texture_unit=this.saved_texture_unit||0},e.setTextureUniform=function(t,e){var n=Gr.textures[e];null!=n?(n.bind(this.texture_unit),this.uniform("1i",t,this.texture_unit),this.texture_unit++):Jn("warn","Cannot find texture '"+e+"'")},e.uniform=function(t,e,n){if(this.compiled){this.uniforms[e]=this.uniforms[e]||{};var r=this.uniforms[e];r.name=e,void 0===r.location&&(r.location=this.gl.getUniformLocation(this.program,e)),r.method=t,r.value=n,this.updateUniform(r)}},e.updateUniform=function(t){this.compiled&&t&&null!=t.location&&(this.use(),this.commitUniform(t))},e.commitUniform=function(t){var e=t.location,n=t.value;switch(t.method){case"1i":this.gl.uniform1i(e,n);break;case"1f":this.gl.uniform1f(e,n);break;case"2f":this.gl.uniform2f(e,n[0],n[1]);break;case"3f":this.gl.uniform3f(e,n[0],n[1],n[2]);break;case"4f":this.gl.uniform4f(e,n[0],n[1],n[2],n[3]);break;case"1iv":this.gl.uniform1iv(e,n);break;case"3iv":this.gl.uniform3iv(e,n);break;case"1fv":this.gl.uniform1fv(e,n);break;case"2fv":this.gl.uniform2fv(e,n);break;case"3fv":this.gl.uniform3fv(e,n);break;case"4fv":this.gl.uniform4fv(e,n);break;case"Matrix3fv":this.gl.uniformMatrix3fv(e,!1,n);break;case"Matrix4fv":this.gl.uniformMatrix4fv(e,!1,n)}},e.refreshUniforms=function(){if(this.compiled)for(var t in this.uniforms){var e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,t),this.updateUniform(e)}},e.refreshAttributes=function(){this.attribs={}},e.attribute=function(t){if(this.compiled){var e=this.attribs[t]=this.attribs[t]||{};return null!=e.location?e:(e.name=t,e.location=this.gl.getAttribLocation(this.program,t),e)}},e.source=function(t){return"vertex"===t?this.computed_vertex_source:"fragment"===t?this.computed_fragment_source:void 0},e.lines=function(t){var e=this.source(t);return e?e.split("\n"):[]},e.line=function(t,e){var n=this.lines(t);if(n)return n[e]},e.block=function(t,e){for(var n,r=this.lines(t),i=0;i<e&&i<r.length;i++){var o=r[i],a=o.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);a&&a.length>1?n={scope:a[1],name:a[2],num:a[3]}:(a=o.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&a.length>1&&(n=null),n&&(n.line=null==n.line?-1:n.line+1,n.source=o)}return n},e.checkExtensions=function(){var t=this,e=[];return this.extensions.forEach((function(n){var r=Yr(t.gl,n),i="TANGRAM_EXTENSION_"+n;t.defines[i]=null!=r,r?e.push(n):Jn("debug","Could not enable extension '"+n+"'")})),e},t}();Jr.id=0,Jr.current=null,Jr.defines={},Jr.blocks={},Jr.reset=function(){Jr.programs_by_source={},Jr.shaders_by_source={}},Jr.reset(),Jr.buildDefineString=function(t){var e="";for(var n in t)null!=t[n]&&!1!==t[n]&&("boolean"==typeof t[n]&&!0===t[n]?e+="#define "+n+"\n":"number"==typeof t[n]&&Math.floor(t[n])===t[n]?e+="#define "+n+" "+t[n].toFixed(1)+"\n":e+="#define "+n+" "+t[n]+"\n");return e},Jr.buildExtensionString=function(t){var e="";return(t=t||[]).forEach((function(t){e+="#ifdef GL_"+t+"\n#extension GL_"+t+" : enable\n#endif\n"})),e},Jr.addBlock=function(t){var e;Jr.blocks[t]=Jr.blocks[t]||[];for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=Jr.blocks[t]).push.apply(e,r)},Jr.removeBlock=function(t){Jr.blocks[t]=[]},Jr.replaceBlock=function(t){Jr.removeBlock(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Jr.addBlock.apply(Jr,[t].concat(n))},Jr.updateProgram=function(t,e,n,r){var i=Xr(t._tangram_id+"::"+n+"::"+r);if(Jr.programs_by_source[i])return Jn("trace","Reusing identical source GL program object"),Jr.programs_by_source[i];var o=Jr.createShader(t,n,t.VERTEX_SHADER),a=Jr.createShader(t,r,t.FRAGMENT_SHADER);if(t.useProgram(null),null!=e)for(var s=t.getAttachedShaders(e),u=0;u<s.length;u++)t.detachShader(e,s[u]);else e=t.createProgram();if(null==o||null==a)return e;if(t.attachShader(e,o),t.attachShader(e,a),t.bindAttribLocation(e,0,"a_position"),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS)){var l=new Error("WebGL program error:\n            VALIDATE_STATUS: "+t.getProgramParameter(e,t.VALIDATE_STATUS)+"\n            ERROR: "+t.getError()+"\n            --- Vertex Shader ---\n            "+n+"\n            --- Fragment Shader ---\n            "+r);throw Object.assign(new Error(l),{type:"program"})}return Jr.programs_by_source[i]=e,e},Jr.createShader=function(t,e,n){var r=Xr(t._tangram_id+"::"+e);if(Jr.shaders_by_source[r])return Jn("trace","Reusing identical source GL shader object"),Jr.shaders_by_source[r];var i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var o=n===t.VERTEX_SHADER?"vertex":"fragment",a=t.getShaderInfoLog(i),s=function(t){t=String(t);for(var e,n=[];e=t.match(/ERROR\:([^\n]+)/);){t=t.slice(e.index+1);var r=(a=e[1].trim()).split(":"),i=r.slice(2).join(":").trim(),o=parseInt(r[0],10),a=parseInt(r[1],10);n.push({message:i,file:o,line:a})}return n}(a);throw Object.assign(new Error(a),{type:o,errors:s})}return Jr.shaders_by_source[r]=i,i};var Qr={disabled:!1,bound_vao:[],init:function(t){var e;!0!==this.disabled&&(e=Yr(t,"OES_vertex_array_object")),null!=e?Jn("info","Vertex Array Object extension available"):!0!==this.disabled?Jn("warn","Vertex Array Object extension NOT available"):Jn("warn","Vertex Array Object extension force disabled")},getExtension:function(t,e){if(!0!==this.disabled)return Yr(t,e)},create:function(t,e,n){var r={};r.setup=e,r.teardown=n;var i=this.getExtension(t,"OES_vertex_array_object");return null!=i&&(r._vao=i.createVertexArrayOES(),i.bindVertexArrayOES(r._vao)),r.setup(),r},getCurrentBinding:function(t){var e=this.bound_vao.filter((function(e){return e[0]===t}))[0];return e&&e[1]},setCurrentBinding:function(t,e){var n=this.bound_vao,r=n.filter((function(e){return e[0]===t}))[0];null==r?n.push([t,e]):r[1]=e},bind:function(t,e){var n=this.getExtension(t,"OES_vertex_array_object");if(null!=e)null!=n&&null!=e._vao?(n.bindVertexArrayOES(e._vao),this.setCurrentBinding(t,e)):e.setup();else{var r=this.getCurrentBinding(t);null!=n?n.bindVertexArrayOES(null):null!=r&&"function"==typeof r.teardown&&r.teardown(),this.setCurrentBinding(t,null)}},destroy:function(t,e){var n=this.getExtension(t,"OES_vertex_array_object");null!=n&&null!=e&&null!=e._vao&&(n.deleteVertexArrayOES(e._vao),e._vao=null)}},ti=Zr(!1);D(D.S,"Object",{values:function(t){return ti(t)}});var ei,ni=Fr(6),ri="findIndex",ii=!0;function oi(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var n=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(n)for(var r in n){var i=n[r];null===i||"object"!=typeof i||Array.isArray(i)?void 0!==i&&(t[r]=i):null===t[r]||"object"!=typeof t[r]||Array.isArray(t[r])?t[r]=oi({},i):t[r]=oi(t[r],i)}}return t}ri in[]&&Array(1)[ri]((function(){ii=!1})),D(D.P+D.F*ii,"Array",{findIndex:function(t){return ni(this,t,arguments.length>1?arguments[1]:void 0)}}),A(ri);var ai=ei={};ei.default_source_max_zoom=18,ei.default_view_max_zoom=20,ei.max_style_zoom=25,ei.tile_size=256,ei.half_circumference_meters=20037508.342789244,ei.circumference_meters=2*ei.half_circumference_meters,ei.min_zoom_meters_per_pixel=ei.circumference_meters/ei.tile_size;var si=[];ei.metersPerPixel=function(t){return si[t]=si[t]||ei.min_zoom_meters_per_pixel/Math.pow(2,t),si[t]};var ui=[];ei.metersPerTile=function(t){return ui[t]=ui[t]||ei.circumference_meters/Math.pow(2,t),ui[t]},ei.tile_scale=4096,ei.units_per_pixel=ei.tile_scale/ei.tile_size,ei.height_scale=16;var li=[];ei.unitsPerMeter=function(t){return li[t]=li[t]||ei.tile_scale/(ei.tile_size*ei.metersPerPixel(t)),li[t]},ei.metersForTile=function(t){return{x:t.x*ei.circumference_meters/Math.pow(2,t.z)-ei.half_circumference_meters,y:-(t.y*ei.circumference_meters/Math.pow(2,t.z)-ei.half_circumference_meters)}},ei.tileForMeters=function(t,e){var n=t[0],r=t[1];return{x:Math.floor((n+ei.half_circumference_meters)/(ei.circumference_meters/Math.pow(2,e))),y:Math.floor((-r+ei.half_circumference_meters)/(ei.circumference_meters/Math.pow(2,e))),z:e}},ei.wrapTile=function(t,e){var n=t.x,r=t.y,i=t.z;void 0===e&&(e={x:!0,y:!1});var o=(1<<i)-1;return e.x&&(n&=o),e.y&&(r&=o),{x:n,y:r,z:i}},ei.metersToLatLng=function(t){return t[0]/=ei.half_circumference_meters,t[1]/=ei.half_circumference_meters,t[1]=(2*Math.atan(Math.exp(t[1]*Math.PI))-Math.PI/2)/Math.PI,t[0]*=180,t[1]*=180,t},ei.latLngToMeters=function(t){return t[1]=Math.log(Math.tan(t[1]*Math.PI/360+Math.PI/4))/Math.PI,t[1]*=ei.half_circumference_meters,t[0]*=ei.half_circumference_meters/180,t},ei.tileSpaceToLatlng=function(t,e,n){var r=ei.unitsPerMeter(e);return ei.transformGeometry(t,(function(t){t[0]=t[0]/r+n.x,t[1]=t[1]/r+n.y,ei.metersToLatLng(t)})),t},ei.copyGeometry=function(t){if(null!=t){var e={type:t.type};return"Point"===t.type?e.coordinates=[t.coordinates[0],t.coordinates[1]]:"LineString"===t.type||"MultiPoint"===t.type?e.coordinates=t.coordinates.map((function(t){return[t[0],t[1]]})):"Polygon"===t.type||"MultiLineString"===t.type?e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return[t[0],t[1]]}))})):"MultiPolygon"===t.type&&(e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return t.map((function(t){return[t[0],t[1]]}))}))}))),e}},ei.transformGeometry=function(t,e){null!=t&&("Point"===t.type?e(t.coordinates):"LineString"===t.type||"MultiPoint"===t.type?t.coordinates.forEach(e):"Polygon"===t.type||"MultiLineString"===t.type?t.coordinates.forEach((function(t){return t.forEach(e)})):"MultiPolygon"===t.type&&t.coordinates.forEach((function(t){t.forEach((function(t){return t.forEach(e)}))})))},ei.boxIntersect=function(t,e){return!(e.sw.x>t.ne.x||e.ne.x<t.sw.x||e.sw.y>t.ne.y||e.ne.y<t.sw.y)},ei.findBoundingBox=function(t){for(var e=1/0,n=-1/0,r=1/0,i=-1/0,o=t[0].length,a=0;a<o;a++){var s=t[0][a];s[0]<e&&(e=s[0]),s[1]<r&&(r=s[1]),s[0]>n&&(n=s[0]),s[1]>i&&(i=s[1])}return[e,r,n,i]},ei.geometryType=function(t){return"Polygon"===t||"MultiPolygon"===t?"polygon":"LineString"===t||"MultiLineString"===t?"line":"Point"===t||"MultiPoint"===t?"point":void 0},ei.centroid=function(t,e){if(void 0===e&&(e=!0),t&&0!==t.length){var n,r=0,i=0,o=0,a=t[0],s=a.length;e&&(n=a[0],a=a.map((function(t){return[t[0]-n[0],t[1]-n[1]]})));for(var u=0,l=s-1;u<s;l=u,u++){var c=a[u],h=a[l],f=c[1]*h[0]-h[1]*c[0];r+=(c[0]+h[0])*f,i+=(c[1]+h[1])*f,o+=3*f}if(o){var d=[r/o,i/o];return e&&(d[0]+=n[0],d[1]+=n[1]),d}}},ei.multiCentroid=function(t){for(var e=0,n=null,r=0;r<t.length;r++){var i=ei.centroid(t[r]);i&&((n=n||[0,0])[0]+=i[0],n[1]+=i[1],e++)}return e>0&&(n[0]/=e,n[1]/=e),n},ei.signedPolygonRingAreaSum=function(t){for(var e=0,n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e+=i[0]*o[1]-o[0]*i[1]}return e+(t[n-1][0]*t[0][1]-t[0][0]*t[n-1][1])},ei.polygonRingArea=function(t){return Math.abs(ei.signedPolygonRingAreaSum(t))/2},ei.polygonArea=function(t){if(t)return ei.polygonRingArea(t[0])},ei.multiPolygonArea=function(t){for(var e=0,n=0;n<t.length;n++)e+=ei.polygonArea(t[n]);return e},ei.ringWinding=function(t){var e=ei.signedPolygonRingAreaSum(t);return e>0?"CW":e<0?"CCW":void 0};var ci="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",hi="["+ci+"]",fi=RegExp("^"+hi+hi+"*"),di=RegExp(hi+hi+"*$"),pi=function(t,e,n){var r={},i=h((function(){return!!ci[t]()||"​"!="​"[t]()})),o=r[t]=i?e(mi):ci[t];n&&(r[n]=o),D(D.P+D.F*i,"String",r)},mi=pi.trim=function(t,e){return t=String(P(t)),1&e&&(t=t.replace(fi,"")),2&e&&(t=t.replace(di,"")),t},gi=pi,vi=de.f,_i=me.f,yi=y.f,bi=gi.trim,xi=r.Number,wi=xi,Ti=xi.prototype,Ai="Number"==M(st(Ti)),Si="trim"in String.prototype,Ei=function(t){var e=v(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=Si?e.trim():bi(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),u=0,l=s.length;u<l;u++)if((a=s.charCodeAt(u))<48||a>i)return NaN;return parseInt(s,r)}}return+e};if(!xi(" 0o1")||!xi("0b1")||xi("+0x1")){xi=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof xi&&(Ai?h((function(){Ti.valueOf.call(n)})):"Number"!=M(n))?ar(new wi(Ei(e)),n,xi):Ei(e)};for(var ki,Mi=f?vi(wi):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Oi=0;Mi.length>Oi;Oi++)L(wi,ki=Mi[Oi])&&!L(xi,ki)&&yi(xi,ki,_i(wi,ki));xi.prototype=Ti,Ti.constructor=xi,C(r,"Number",xi)}D(D.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});var Pi=ce.onFreeze;On("freeze",(function(t){return function(e){return t&&l(e)?t(Pi(e)):e}}));var zi={functions:{},num_functions:0,num_cached:0};function Ri(t,e){if("string"==typeof t)t=Li(t,e);else if(null!=t&&"object"==typeof t)for(var n in t)t[n]=Ri(t[n],e);return t}function Li(t,e){var n="string"==typeof t&&t.match(/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m);if(n&&n.length>2)try{var r=n[2],i="function"==typeof e?e(r):r,o=Xr(i);if(void 0===zi.functions[o]){var a=n[1].length>0&&n[1].split(",").map((function(t){return t.trim()})).filter((function(t){return t}));a=a.length>0?a:["context"],zi.functions[o]=new Function(a.toString(),i),zi.functions[o].source=r,zi.num_functions++}else zi.num_cached++;return zi.functions[o]}catch(e){return t}return t}var Ci=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var c=i.substr(0,u),h=i.substr(u+1,l-(u+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,p=a(h[1]),m=a(h[2]),g=m<=.5?m*(p+1):m+p-m*p,v=2*m-g;return[r(255*s(v,g,d+1/3)),r(255*s(v,g,d)),r(255*s(v,g,d-1/3)),f];default:return null}}return null}}catch(t){}})),ji=(Ci.parseCSSColor,{}),Ii=function(t){return Math.max(t,0)},Ni=function(t){return isNaN(t)?0:t},Di=function(t){return Array.isArray(t)?t.map(parseFloat).map(Ni):Ni(parseFloat(t))},Fi=function(t){return Array.isArray(t)?t.map(Di).map(Ii):Ii(Di(t))};Object.assign(ji,{clampPositive:Ii,noNaN:Ni,parseNumber:Di,parsePositiveNumber:Fi}),ji.wrapFunction=function(t){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n        var $id = context.id;\n\n        var val = (function(){ "+t+" }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    "},ji.zeroPair=Object.freeze([0,0]),ji.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},ji.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},ji.getFeatureParseContext=function(t,e,n){return{feature:t,id:t.id,tile:e,global:n,zoom:e.style_z,geometry:ai.geometryType(t.geometry.type),meters_per_pixel:e.meters_per_pixel,meters_per_pixel_sq:e.meters_per_pixel_sq,units_per_meter_overzoom:e.units_per_meter_overzoom}};var Bi={STATIC:0,DYNAMIC:1,ZOOM:2};ji.CACHE_TYPE=Bi,ji.createPropertyCache=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),null!=t){if(t.value)return{value:t.value,zoom:t.zoom?{}:null,type:t.type};var r={value:t,type:Bi.STATIC};return Array.isArray(r.value)&&Array.isArray(r.value[0])?(r.zoom={},r.type=Bi.ZOOM):"function"==typeof r.value&&(r.type=Bi.DYNAMIC,r.dynamic_transform="function"==typeof n?n:null),"function"==typeof e&&(r.zoom?r.value=r.value.map((function(t,n){return[t[0],e(t[1],n)]})):"function"!=typeof r.value&&(r.value=e(r.value,0))),r}},ji.createColorPropertyCache=function(t){return ji.createPropertyCache(t,(function(t){return"Style.color.pseudoRandomColor"===t?Li(ji.wrapFunction(ji.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===t?ji.macros["Style.color.randomColor"]:t}))};var Ui=function(t){return"string"==typeof t&&"%"===t[t.length-1]},Gi=function(t){return"auto"===t},Vi=function(t){return Ui(t)||Gi(t)},Zi="'size' can specify either width or height as derived from aspect ratio, but not both";function Wi(t,e){return ji.createPropertyCache(t.value,(function(n,r){return Array.isArray(n)?(n=n.map((function(e,n){return t.has_ratio[r][n]?e:Fi(e)})).map((function(n,i){return t.has_pct[r][i]?e.css_size[i]*n/100:n})),t.has_ratio[r][0]?n[0]=n[1]*e.aspect:t.has_ratio[r][1]&&(n[1]=n[0]/e.aspect)):(n=Fi(n),n=t.has_pct[r]?e.css_size.map((function(t){return t*n/100})):[n,n]),n}))}function qi(t,e){try{return t(e)}catch(n){Jn("warn","Property function in layer '"+e.layers[e.layers.length-1]+"' failed with\n","error "+n.stack+"\n","function '"+t.source+"'\n",e.feature,e)}}ji.createPointSizePropertyCache=function(t,e){var n=null,r=null;if(Ui(t))n=[!0];else if(Array.isArray(t)){if(Array.isArray(t[0])){if(t.some((function(t){return Array.isArray(t[1])?t[1].some((function(t){return Vi(t)})):Ui(t[1])}))&&(n=t.map((function(t){return Array.isArray(t[1])?t[1].map((function(t){return Ui(t)})):Ui(t[1])})),(r=t.map((function(t){return Array.isArray(t[1])&&t[1].map((function(t){return Gi(t)}))}))).some((function(t){return Array.isArray(t)&&t.every((function(t){return t}))}))))throw Zi}else if(t.some(Vi)&&(n=[t.map(Ui)],(r=[t.map(Gi)])[0].every((function(t){return t}))))throw Zi}else if(Gi(t))throw"this value only allowed as half of an array, eg [16px, auto]:";if(n||r){if(!e)throw"% or 'auto' keywords can only be used to specify point size when a texture is defined";(t={value:t}).has_pct=n,t.has_ratio=r,t.sprites={}}else t=ji.createPropertyCache(t,Fi);return t},ji.evalCachedPointSizeProperty=function(t,e,n,r){return t.has_pct||t.has_ratio?e?(t.sprites[e.sprite]||(t.sprites[e.sprite]=Wi(t,e)),ji.evalCachedProperty(t.sprites[e.sprite],r)):(t.texture=t.texture||Wi(t,n),ji.evalCachedProperty(t.texture,r)):ji.evalCachedProperty(t,r)},ji.evalCachedProperty=function(t,e){return null==t?void 0:t.dynamic?qi(t.dynamic,e):t.static?t.static:t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"==typeof t.value?(t.dynamic_transform?t.dynamic=function(e){return t.dynamic_transform(t.value(e))}:t.dynamic=t.value,qi(t.dynamic,e)):Array.isArray(t.value)&&Array.isArray(t.value[0])?(t.zoom=t.zoom||{},t.zoom[e.zoom]=nr.interpolate(e.zoom,t.value),t.zoom[e.zoom]):(t.static=t.value,t.static)},ji.convertUnits=function(t,e){if(null!=t.val)return"px"===t.units?t.val*ai.metersPerPixel(e.zoom):t.val;if("string"==typeof t)"px"===t.trim().slice(-2)?(t=Di(t),t*=ai.metersPerPixel(e.zoom)):t=Di(t);else if(Array.isArray(t))return Array.isArray(t[0])?t.map((function(t){return[t[0],ji.convertUnits(t[1],e)]})):t.map((function(t){return ji.convertUnits(t,e)}));return t},ji.parseUnits=function(t){var e={val:Di(t)};return 0!==e.val&&"string"==typeof t&&"px"===t.trim().slice(-2)&&(e.units="px"),e},ji.evalCachedDistanceProperty=function(t,e){return null==t?void 0:t.dynamic?qi(t.dynamic,e):t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"==typeof t.value?(t.dynamic=t.value,qi(t.dynamic,e)):t.zoom?(t.zoom[e.zoom]=nr.interpolate(e.zoom,t.value,(function(t){return ji.convertUnits(t,e)})),t.zoom[e.zoom]):ji.convertUnits(t.value,e)},ji.string_colors={},ji.colorForString=function(t){if(ji.string_colors[t])return ji.string_colors[t];var e=Ci.parseCSSColor(t);return e&&4===e.length?(e[0]/=255,e[1]/=255,e[2]/=255):e=ji.defaults.color,ji.string_colors[t]=e,e},ji.evalCachedColorProperty=function(t,e){if(void 0===e&&(e={}),t.dynamic){var n=qi(t.dynamic,e);return"string"==typeof n&&(n=ji.colorForString(n)),n&&null==n[3]&&(n[3]=1),n}if(t.static)return t.static;if(t.zoom&&t.zoom[e.zoom])return t.zoom[e.zoom];if("function"==typeof t.value){t.dynamic=t.value;var r=qi(t.dynamic,e);return"string"==typeof r&&(r=ji.colorForString(r)),r&&null==r[3]&&(r[3]=1),r}if("string"==typeof t.value)return t.static=ji.colorForString(t.value),t.static;if(t.zoom){if(!t.zoom_preprocessed){for(var i=0;i<t.value.length;i++){var o=t.value[i];o&&"string"==typeof o[1]&&(o[1]=ji.colorForString(o[1]))}t.zoom_preprocessed=!0}return t.zoom[e.zoom]=nr.interpolate(e.zoom,t.value),t.zoom[e.zoom][3]=t.zoom[e.zoom][3]||1,t.zoom[e.zoom]}return t.static=t.value.map((function(t){return t})),t.static&&null==t.static[3]&&(t.static[3]=1),t.static},ji.parseColor=function(t,e){if(void 0===e&&(e={}),"function"==typeof t&&(t=qi(t,e)),"string"==typeof t)t=ji.colorForString(t);else if(Array.isArray(t)&&Array.isArray(t[0])){for(var n=0;n<t.length;n++){var r=t[n];"string"==typeof r[1]&&(r[1]=ji.colorForString(r[1]))}e.zoom&&(t=nr.interpolate(e.zoom,t))}return Array.isArray(t)?null==(t=t.map((function(t){return t})))[3]&&(t[3]=1):t=[0,0,0,1],t},ji.calculateOrder=function(t,e){return"function"==typeof t?t=qi(t,e):"string"==typeof t&&(t=e.feature.properties[t]?e.feature.properties[t]:Fi(t)),t},ji.evalProperty=function(t,e){return"function"==typeof t?qi(t,e):t},D(D.P,"Array",{fill:jr}),A("fill");var Hi,Yi=function(){function t(t,e,n){this.gl=t,this.workers=e,this._lock_fn="function"==typeof n&&n,this.init()}var e=t.prototype;return e.init=function(){this.requests={},this.feature=null,this.read_delay=0,this.read_delay_timer=null,this.pixels=null,this.fbo=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbo),this.fbo_size={width:256,height:256};var t=Gr.create(this.gl,"__selection_fbo",{filtering:"nearest"});t.setData(this.fbo_size.width,this.fbo_size.height,null,{filtering:"nearest"}),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,t.texture,0);var e=this.gl.createRenderbuffer();this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,e),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.fbo_size.width,this.fbo_size.height),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,e),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)},e.destroy=function(){this.gl&&this.fbo&&(this.gl.deleteFramebuffer(this.fbo),this.fbo=null,this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null))},e.bind=function(){var e;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbo),this.gl.viewport(0,0,this.fbo_size.width,this.fbo_size.height),(e=this.gl).clearColor.apply(e,t.defaultColor)},e.getFeatureAt=function(t,e){var n=this,r=e.radius;return!t||t.x<0||t.y<0||t.x>1||t.y>1?Promise.resolve({feature:null,changed:!1}):new Promise((function(e,i){n.selection_request_id=n.selection_request_id+1||0,n.requests[n.selection_request_id]={id:n.selection_request_id,point:t,radius:r,resolve:e,reject:i}}))},e.pendingRequests=function(){return Object.keys(this.requests).length?this.requests:null},e.hasPendingRequests=function(){return null!=this.pendingRequests()},e.clearPendingRequests=function(){for(var t in this.requests){var e=this.requests[t];e.sent||(e.reject({request:e}),delete this.requests[t])}},e.read=function(){var t=this;null!=this.read_delay_timer&&clearTimeout(this.read_delay_timer),this.read_delay_timer=setTimeout((function(){if(!t.locked){var e=t.gl;for(var n in e.bindFramebuffer(e.FRAMEBUFFER,t.fbo),t.requests){var r=t.requests[n];if(!r.sent){var i=void 0,o=255,a=r.point,s=r.radius,u=void 0;if(s){var l=Math.min(t.fbo_size.width,t.fbo_size.height);u={x:Math.min(Math.ceil(2*s.x*t.fbo_size.width),l),y:Math.min(Math.ceil(2*s.y*t.fbo_size.height),l)}}else s={x:0,y:0},u={x:1,y:1};if((null==t.pixels||t.pixels.byteLength<u.x*u.y*4)&&(t.pixels=new Uint8Array(u.x*u.y*4)),t.pixels.fill instanceof Function)t.pixels.fill(0);else for(var c=0;c<t.pixels.length;c++)t.pixels[c]=0;e.readPixels(Math.round((a.x-s.x)*t.fbo_size.width),Math.round((1-a.y-s.y)*t.fbo_size.height),u.x,u.y,e.RGBA,e.UNSIGNED_BYTE,t.pixels);var h=4*(Math.round(u.y/2)*u.x+Math.round(u.x/2)),f=t.pixels[h]+(t.pixels[h+1]<<8)+(t.pixels[h+2]<<16);if(f>0)i=f+(t.pixels[h+3]<<24)>>>0,o=t.pixels[h+3];else{var d=-1>>>0;h=0;for(var p=0;p<u.y;p++)for(var m=0;m<u.x;m++,h+=4)if((f=t.pixels[h]+(t.pixels[h+1]<<8)+(t.pixels[h+2]<<16))>0){var g=(m-u.x/2)*(m-u.x/2)+(p-u.y/2)*(p-u.y/2);g<=d&&(i=f+(t.pixels[h+3]<<24)>>>0,o=t.pixels[h+3],d=g)}}255!==o?null!=t.workers[o]&&Zn.postMessage(t.workers[o],"self.getFeatureSelection",{id:r.id,key:i}).then((function(e){t.finishRead(e)})):t.finishRead({id:r.id}),r.sent=!0}}e.bindFramebuffer(e.FRAMEBUFFER,null)}}),this.read_delay)},e.finishRead=function(t){var e=this.requests[t.id];if(e){var n=t.feature,r=!1;(null!=n&&null==this.feature||null==n&&null!=this.feature||null!=n&&null!=this.feature&&JSON.stringify(n)!==JSON.stringify(this.feature))&&(r=!0),this.feature=n,e.resolve({feature:n,changed:r,request:e}),delete this.requests[t.id]}else Jn("error","FeatureSelection.finishRead(): could not find message",t)},t.makeEntry=function(t){this.map_entry++;var e=255&this.map_entry,n=this.map_entry>>8&255,r=this.map_entry>>16&255,i=this.map_prefix,o=e/255,a=n/255,s=r/255,u=i/255,l=e+(n<<8)+(r<<16)+(i<<24)>>>0;return this.map[l]={color:[o,a,s,u]},this.map_size++,this.tiles[t.key]||(this.tiles[t.key]={entries:[],tile:{key:t.key,coords:t.coords,style_z:t.style_z,source:t.source,generation:t.generation}}),this.tiles[t.key].entries.push(l),this.map[l]},t.makeColor=function(t,e,n){var r=this.makeEntry(e);return r.feature={id:t.id,properties:t.properties,source_name:n.source,source_layer:n.layer,layers:n.layers,tile:this.tiles[e.key].tile},r.color},t.reset=function(t){var e=this;Array.isArray(t)?t.forEach((function(t){return e.clearSource(t)})):(this.tiles={},this.map={},this.map_size=0,this.map_entry=0)},t.clearSource=function(t){for(var e in this.tiles)this.tiles[e].tile.source===t&&this.clearTile(e)},t.clearTile=function(t){var e=this;this.tiles[t]&&(this.tiles[t].entries.forEach((function(t){return delete e.map[t]})),this.map_size-=this.tiles[t].entries.length,delete this.tiles[t])},t.getMapSize=function(){return this.map_size},t.setPrefix=function(t){this.map_prefix=t},zn(t,[{key:"locked",get:function(){return this._lock_fn&&this._lock_fn()||!1}}]),t}();Yi.map={},Yi.tiles={},Yi.map_size=0,Yi.map_entry=0,Yi.map_prefix=0,Yi.defaultColor=[0,0,0,1];var Xi=Hi={};Hi.BYTE=5120,Hi.UNSIGNED_BYTE=5121,Hi.SHORT=5122,Hi.UNSIGNED_SHORT=5123,Hi.INT=5124,Hi.UNSIGNED_INT=5125,Hi.FLOAT=5126,Ur("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}));var $i,Ki=function(){function t(t,e,n,r,i){i=i||{},this.gl=t,this.vertex_data=e,this.element_data=n,this.vertex_layout=r,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=i.draw_mode||this.gl.TRIANGLES,this.data_usage=i.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=i.uniforms,this.textures=i.textures,this.retain=i.retain||!1,this.created_at=+new Date,this.fade_in_time=i.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}var e=t.prototype;return e.render=function(t){if(void 0===t&&(t={}),!this.valid)return!1;var e=t.program||Jr.current;e.use(),this.uniforms&&(e.saveUniforms(this.uniforms),e.setUniforms(this.uniforms,!1));var n=(+new Date-this.created_at)/1e3;return e.uniform("1f","u_visible_time",n),this.bind(e),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),Qr.bind(this.gl,null),this.uniforms&&e.restoreUniforms(this.uniforms),n<this.fade_in_time},e.bind=function(t){var e=this,n=this.vaos[t.id];n?Qr.bind(this.gl,n):this.vaos[t.id]=Qr.create(this.gl,(function(){e.gl.bindBuffer(e.gl.ARRAY_BUFFER,e.vertex_buffer),e.toggle_element_array&&e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,e.element_buffer),e.vertex_layout.enableDynamicAttributes(e.gl,t)})),this.vertex_layout.enableStaticAttributes(this.gl,t)},e.upload=function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)},e.destroy=function(){if(!this.valid)return!1;for(var t in this.valid=!1,this.vaos)Qr.destroy(this.gl,this.vaos[t]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach((function(t){return Gr.release(t)})),!0},t}(),Ji=["emission","ambient","diffuse","specular"],Qi=function(){function t(t){var e=this;t=t||{},Ji.forEach((function(n){var r=t[n];null!=r&&(r.texture?e[n]={texture:r.texture,mapping:r.mapping||"spheremap",scale:qr.expandVec3(null!=r.scale?r.scale:1),amount:qr.expandVec4(null!=r.amount?r.amount:1)}:"number"==typeof r||Array.isArray(r)?e[n]={amount:qr.expandVec4(r)}:e[n]="string"==typeof r?{amount:ji.parseColor(r)}:r)})),this.specular&&(this.specular.shininess=t.shininess?parseFloat(t.shininess):.2),null!=t.normal&&(this.normal={texture:t.normal.texture,mapping:t.normal.mapping||"triplanar",scale:qr.expandVec3(null!=t.normal.scale?t.normal.scale:1),amount:null!=t.normal.amount?t.normal.amount:1})}t.isValid=function(t){return null!=t&&(null!=t.emission||null!=t.ambient||null!=t.diffuse||null!=t.specular)};var e=t.prototype;return e.inject=function(e){var n=this;Ji.forEach((function(t){var r="TANGRAM_MATERIAL_"+t.toUpperCase(),i=r+"_TEXTURE";e.defines[r]=null!=n[t],n[t]&&n[t].texture&&(e.defines[i]=!0,e.defines[i+"_"+n[t].mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_"+n[t].mapping.toUpperCase()]=!0,e.texcoords=e.texcoords||"uv"===n[t].mapping)})),this.normal&&this.normal.texture&&(e.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,e.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,e.texcoords=e.texcoords||"uv"===this.normal.mapping),e.replaceShaderBlock(t.block,"/*\n\nDefines globals:\nmaterial\nlight_accumulator_*\n\n*/\n\n\n// MATERIALS\n//\nstruct Material {\n    #ifdef TANGRAM_MATERIAL_EMISSION\n        vec4 emission;\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n            vec3 emissionScale;\n        #endif\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_AMBIENT\n        vec4 ambient;\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n            vec3 ambientScale;\n        #endif\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_DIFFUSE\n        vec4 diffuse;\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n            vec3 diffuseScale;\n        #endif\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_SPECULAR\n        vec4 specular;\n        float shininess;\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n            vec3 specularScale;\n        #endif\n    #endif\n\n\n    #ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\n        vec3 normalScale;\n        float normalAmount;\n    #endif\n};\n\n// Note: uniform is copied to a global instance to allow modification\nuniform Material u_material;\nMaterial material;\n\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\n\n// Global light accumulators for each property\nvec4 light_accumulator_ambient = vec4(vec3(0.0), 1.);\nvec4 light_accumulator_diffuse = vec4(vec3(0.0), 1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\n    vec4 light_accumulator_specular = vec4(vec3(0.0), 1.);\n#endif\n\n\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap (in sampler2D _tex, in vec3 _eyeToPoint, in vec3 _normal, in vec2 _skew) {\n    // Normalized vector from camera to surface\n    vec3 eye = normalize(_eyeToPoint);\n\n    // Adjust for camera skew\n    eye.xy -= _skew;\n    eye = normalize(eye);\n\n    // Reflection of eye off of surface normal\n    vec3 r = reflect(eye, _normal);\n\n    // Map reflected vector onto the surface of a sphere\n    r.z += 1.0;\n    float m = 2. * length(r);\n\n    // Adjust xy to account for spherical shape, and center in middle of texture\n    vec2 uv = r.xy / m + .5;\n\n    // Sample the environment map\n    return texture2D(_tex, uv);\n}\n#endif\n\n\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend (in vec3 _normal) {\n    vec3 blending = abs(_normal);\n    blending = normalize(max(blending, 0.00001));\n    float b = (blending.x + blending.y + blending.z);\n    return blending / b;\n}\n\nvec4 getTriPlanar (in sampler2D _tex, in vec3 _pos, in vec3 _normal, in vec3 _scale) {\n    vec3 blending = getTriPlanarBlend(_normal);\n    vec4 xaxis = texture2D(_tex, fract(_pos.yz * _scale.x));\n    vec4 yaxis = texture2D(_tex, fract(_pos.xz * _scale.y));\n    vec4 zaxis = texture2D(_tex, fract(_pos.xy * _scale.z));\n    return  xaxis * blending.x + yaxis * blending.y + zaxis * blending.z;\n}\n#endif\n\n\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar (in sampler2D _tex, in vec3 _pos, in vec2 _scale) {\n    return texture2D( _tex, fract(_pos.xy * _scale.x) );\n}\n#endif\n\n\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal (inout vec3 _normal) {\n    // Get NORMALMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n    _normal += texture2D(u_material_normal_texture, fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\n    vec3 normalTex = getPlanar(u_material_normal_texture, v_world_position.xyz, material.normalScale.xy).rgb*2.0-1.0;\n    _normal += normalTex;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\n    vec3 normalTex = getTriPlanar(u_material_normal_texture, v_world_position.xyz, _normal, material.normalScale).rgb*2.0-1.0;\n    _normal += normalTex;\n    #endif\n\n    _normal = normalize(_normal);\n}\n#endif\n\nvoid calculateMaterial (in vec3 _eyeToPoint, inout vec3 _normal) {\n    // get EMISSION TEXTUREMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\n        material.emission *= texture2D(u_material_emission_texture,v_texcoord);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\n        material.emission *= getPlanar(u_material_emission_texture, v_world_position.xyz, material.emissionScale.xy);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\n        material.emission *= getTriPlanar(u_material_emission_texture, v_world_position.xyz, _normal, material.emissionScale);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\n        material.emission *= getSphereMap(u_material_emission_texture, _eyeToPoint, _normal, u_vanishing_point);\n        #endif\n    #endif\n\n    // get AMBIENT TEXTUREMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\n        material.ambient *= texture2D(u_material_ambient_texture,v_texcoord);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\n        material.ambient *= getPlanar(u_material_ambient_texture, v_world_position.xyz, material.ambientScale.xy);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\n        material.ambient *= getTriPlanar(u_material_ambient_texture, v_world_position.xyz, _normal, material.ambientScale);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\n        material.ambient *= getSphereMap(u_material_ambient_texture, _eyeToPoint, _normal, u_vanishing_point);\n        #endif\n    #endif\n\n    // get DIFFUSE TEXTUREMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\n        material.diffuse *= texture2D(u_material_diffuse_texture,v_texcoord);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\n        material.diffuse *= getPlanar(u_material_diffuse_texture, v_world_position.xyz, material.diffuseScale.xy);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\n        material.diffuse *= getTriPlanar(u_material_diffuse_texture, v_world_position.xyz, _normal, material.diffuseScale);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\n        material.diffuse *= getSphereMap(u_material_diffuse_texture, _eyeToPoint, _normal, u_vanishing_point);\n        #endif\n    #endif\n\n    // get SPECULAR TEXTUREMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\n        material.specular *= texture2D(u_material_specular_texture,v_texcoord);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\n        material.specular *= getPlanar(u_material_specular_texture, v_world_position.xyz, material.specularScale.xy);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\n        material.specular *= getTriPlanar(u_material_specular_texture, v_world_position.xyz, _normal, material.specularScale);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\n        material.specular *= getSphereMap(u_material_specular_texture, _eyeToPoint, _normal, u_vanishing_point);\n        #endif\n    #endif\n}\n","Material"),e.addShaderBlock("setup","\nmaterial = u_material;\n","Material")},e.setupProgram=function(t){var e=this;Ji.forEach((function(n){e[n]&&(e[n].texture?(t.setTextureUniform("u_material_"+n+"_texture",e[n].texture),t.uniform("3fv","u_material."+n+"Scale",e[n].scale),t.uniform("4fv","u_material."+n,e[n].amount)):e[n].amount&&t.uniform("4fv","u_material."+n,e[n].amount))})),this.specular&&t.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(t.setTextureUniform("u_material_normal_texture",this.normal.texture),t.uniform("3fv","u_material.normalScale",this.normal.scale),t.uniform("1f","u_material.normalAmount",this.normal.amount))},t}();Qi.block="material";var to=$i={};$i.copy=function(t){for(var e=[],n=t.length,r=0;r<n;r++)e[r]=t[r];return e},$i.neg=function(t){for(var e=[],n=t.length,r=0;r<n;r++)e[r]=-t[r];return e},$i.add=function(t,e){for(var n=[],r=Math.min(t.length,e.length),i=0;i<r;i++)n[i]=t[i]+e[i];return n},$i.sub=function(t,e){for(var n=[],r=Math.min(t.length,e.length),i=0;i<r;i++)n[i]=t[i]-e[i];return n},$i.signed_area=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},$i.mult=function(t,e){var n,r=[],i=t.length;if("number"==typeof e)for(n=0;n<i;n++)r[n]=t[n]*e;else for(i=Math.min(t.length,e.length),n=0;n<i;n++)r[n]=t[n]*e[n];return r},$i.div=function(t,e){var n,r=[];if("number"==typeof e)for(n=0;n<t.length;n++)r[n]=t[n]/e;else{var i=Math.min(t.length,e.length);for(n=0;n<i;n++)r[n]=t[n]/e[n]}return r},$i.perp=function(t,e){return[e[1]-t[1],t[0]-e[0]]},$i.rot=function(t,e){var n=Math.cos(e),r=Math.sin(e);return[t[0]*n-t[1]*r,t[0]*r+t[1]*n]},$i.angle=function(t){var e=t[0],n=t[1];return Math.atan2(n,e)},$i.angleBetween=function(t,e){var n=$i.dot($i.normalize($i.copy(t)),$i.normalize($i.copy(e)));return n>1&&(n=1),Math.acos(n)},$i.isEqual=function(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0},$i.lengthSq=function(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t.length>=3?t[0]*t[0]+t[1]*t[1]+t[2]*t[2]:0},$i.length=function(t){return Math.sqrt($i.lengthSq(t))},$i.normalize=function(t){var e;if(2===t.length){if(1==(e=t[0]*t[0]+t[1]*t[1]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e):(t[0]=0,t[1]=0)}else if(t.length>=3){if(1==(e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0)}return t},$i.cross=function(t,e){return 2===t.length?t[0]*e[1]-t[1]*e[0]:3===t.length?[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]:void 0},$i.dot=function(t,e){for(var n=0,r=Math.min(t.length,e.length),i=0;i<r;i++)n+=t[i]*e[i];return n};var eo=function(){function t(t,e){this.name=e.name,this.view=t,null==e.ambient||"number"==typeof e.ambient?this.ambient=qr.expandVec3(e.ambient||0):this.ambient=ji.parseColor(e.ambient).slice(0,3),null==e.diffuse||"number"==typeof e.diffuse?this.diffuse=qr.expandVec3(null!=e.diffuse?e.diffuse:1):this.diffuse=ji.parseColor(e.diffuse).slice(0,3),null==e.specular||"number"==typeof e.specular?this.specular=qr.expandVec3(e.specular||0):this.specular=ji.parseColor(e.specular).slice(0,3)}t.create=function(e,n){if(t.types[n.type])return new t.types[n.type](e,n)},t.setMode=function(e,n){!0===e&&(e="fragment"),e=t.enabled&&(null!=e?e:"fragment"),n.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===e,n.defines.TANGRAM_LIGHTING_VERTEX="vertex"===e},t.inject=function(e){if(Jr.removeBlock(t.block),t.enabled){var n="";if(e&&Object.keys(e).length>0){var r={};for(var i in e)r[e[i].type]=!0;for(var o in r)t.types[o].inject();for(var a in e)e[a].inject(),n+="calculateLight("+a+", _eyeToPoint, _normal);\n"}var s="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                "+n+"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }";Jr.addBlock(t.block,s)}};var e=t.prototype;return e.inject=function(){var e="\n            uniform "+this.struct_name+" u_"+this.name+";\n            "+this.struct_name+" "+this.name+";\n            ",n="\n            "+this.name+" = u_"+this.name+";\n\n        ";Jr.addBlock(t.block,e),Jr.addBlock("setup",n)},e.update=function(){},e.setupProgram=function(t){t.uniform("3fv","u_"+this.name+".ambient",this.ambient),t.uniform("3fv","u_"+this.name+".diffuse",this.diffuse),t.uniform("3fv","u_"+this.name+".specular",this.specular)},t}();eo.types={},eo.block="lighting",eo.enabled=!0;var no=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).type="ambient",r.struct_name="AmbientLight",r}return Rn(e,t),e.inject=function(){Jr.addBlock(eo.block,"/*\n\nExpected globals:\nlight_accumulator_*\n\n*/\n\nstruct AmbientLight {\n    vec3 ambient;\n};\n\nvoid calculateLight(in AmbientLight _light, in vec3 _eyeToPoint, in vec3 _normal) {\n    light_accumulator_ambient.rgb += _light.ambient;\n}\n")},e.prototype.setupProgram=function(t){t.uniform("3fv","u_"+this.name+".ambient",this.ambient)},e}(eo);eo.types.ambient=no;var ro=function(t){function e(e,n){var r;if((r=t.call(this,e,n)||this).type="directional",r.struct_name="DirectionalLight",n.direction)r._direction=n.direction;else{var i=Math.sin(60*Math.PI/180);r._direction=[Math.cos(135*Math.PI/180)*i,Math.sin(135*Math.PI/180)*i,-.5],null==n.ambient&&(r.ambient=qr.expandVec3(.5))}return r.direction=r._direction.map(parseFloat),r}return Rn(e,t),e.inject=function(){Jr.addBlock(eo.block,"/*\n\nExpected globals:\nmaterial\nlight_accumulator_*\n\n*/\n\nstruct DirectionalLight {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n    vec3 direction;\n};\n\nvoid calculateLight(in DirectionalLight _light, in vec3 _eyeToPoint, in vec3 _normal) {\n\n    light_accumulator_ambient.rgb += _light.ambient;\n\n    float nDotVP = clamp(dot(_normal, -_light.direction), 0.0, 1.0);\n\n    #ifdef TANGRAM_MATERIAL_DIFFUSE\n        light_accumulator_diffuse.rgb += _light.diffuse * nDotVP;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_SPECULAR\n        float pf = 0.0;\n        if (nDotVP > 0.0) {\n            vec3 reflectVector = reflect(_light.direction, _normal);\n            float eyeDotR = max(dot(normalize(_eyeToPoint), reflectVector), 0.0);\n            pf = pow(eyeDotR, material.shininess);\n        }\n        light_accumulator_specular.rgb += _light.specular * pf;\n    #endif\n}\n")},e.prototype.setupProgram=function(e){t.prototype.setupProgram.call(this,e),e.uniform("3fv","u_"+this.name+".direction",this.direction)},zn(e,[{key:"direction",get:function(){return this._direction},set:function(t){this._direction=to.normalize(to.copy(t))}}]),e}(eo);eo.types.directional=ro;var io=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).type="point",r.struct_name="PointLight",r.position=n.position||[0,0,"100px"],r.position_eye=[],r.origin=n.origin||"ground",r.attenuation=isNaN(parseFloat(n.attenuation))?0:parseFloat(n.attenuation),n.radius?Array.isArray(n.radius)&&2===n.radius.length?r.radius=n.radius:r.radius=[null,n.radius]:r.radius=null,r}Rn(e,t),e.inject=function(){Jr.addBlock(eo.block,"/*\n\nExpected globals:\nmaterial\nlight_accumulator_*\n\n*/\n\nstruct PointLight {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n    vec4 position;\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\n    float attenuationExponent;\n#endif\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n    float innerRadius;\n#endif\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n    float outerRadius;\n#endif\n};\n\nvoid calculateLight(in PointLight _light, in vec3 _eyeToPoint, in vec3 _normal) {\n\n    float dist = length(_light.position.xyz - _eyeToPoint);\n\n    // Compute vector from surface to light position\n    vec3 VP = (_light.position.xyz - _eyeToPoint) / dist;\n\n    // Normalize the vector from surface to light position\n    float nDotVP = clamp(dot(VP, _normal), 0.0, 1.0);\n\n    // Attenuation defaults\n    float attenuation = 1.0;\n    #ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\n        float Rin = 1.0;\n        float e = _light.attenuationExponent;\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n            Rin = _light.innerRadius;\n        #endif\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n            float Rdiff = _light.outerRadius-Rin;\n            float d = clamp(max(0.0,dist-Rin)/Rdiff, 0.0, 1.0);\n            attenuation = 1.0-(pow(d,e));\n        #else\n            // If no outer is provide behaves like:\n            // https://imdoingitwrong.wordpress.com/2011/01/31/light-attenuation/\n            float d = max(0.0,dist-Rin)/Rin+1.0;\n            attenuation = clamp(1.0/(pow(d,e)), 0.0, 1.0);\n        #endif\n    #else\n        float Rin = 0.0;\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n            Rin = _light.innerRadius;\n            #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n                float Rdiff = _light.outerRadius-Rin;\n                float d = clamp(max(0.0,dist-Rin)/Rdiff, 0.0, 1.0);\n                attenuation = 1.0-d*d;\n            #else\n                // If no outer is provide behaves like:\n                // https://imdoingitwrong.wordpress.com/2011/01/31/light-attenuation/\n                float d = max(0.0,dist-Rin)/Rin+1.0;\n                attenuation = clamp(1.0/d, 0.0, 1.0);\n            #endif\n        #else\n            #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n                float d = clamp(dist/_light.outerRadius, 0.0, 1.0);\n                attenuation = 1.0-d*d;\n            #else\n                attenuation = 1.0;\n            #endif\n        #endif\n    #endif\n\n    // Computer accumulators\n    light_accumulator_ambient.rgb += _light.ambient * attenuation;\n\n    #ifdef TANGRAM_MATERIAL_DIFFUSE\n        light_accumulator_diffuse.rgb += _light.diffuse * nDotVP * attenuation;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_SPECULAR\n        float pf = 0.0; // power factor for shiny speculars\n        if (nDotVP > 0.0) {\n            vec3 reflectVector = reflect(-VP, _normal);\n            float eyeDotR = max(0.0, dot(-normalize(_eyeToPoint), reflectVector));\n            pf = pow(eyeDotR, material.shininess);\n        }\n\n        light_accumulator_specular.rgb += _light.specular * pf * attenuation;\n    #endif\n}\n")};var n=e.prototype;return n.inject=function(){t.prototype.inject.call(this),Jr.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,Jr.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],Jr.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius},n.update=function(){this.updateEyePosition()},n.updateEyePosition=function(){if("world"===this.origin){var t=ai.latLngToMeters([].concat(this.position));this.position_eye[0]=t[0]-this.view.camera.position_meters[0],this.position_eye[1]=t[1]-this.view.camera.position_meters[1],this.position_eye[2]=ji.convertUnits(this.position[2],{zoom:this.view.zoom,meters_per_pixel:ai.metersPerPixel(this.view.zoom)}),this.position_eye[2]=this.position_eye[2]-this.view.camera.position_meters[2]}else"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=ji.convertUnits(this.position,{zoom:this.view.zoom,meters_per_pixel:ai.metersPerPixel(this.view.zoom)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.camera.position_meters[2]));this.position_eye[3]=1},n.setupProgram=function(e){t.prototype.setupProgram.call(this,e),e.uniform("4fv","u_"+this.name+".position",this.position_eye),Jr.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&e.uniform("1f","u_"+this.name+".attenuationExponent",this.attenuation),Jr.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&e.uniform("1f","u_"+this.name+".innerRadius",ji.convertUnits(this.radius[0],{zoom:this.view.zoom,meters_per_pixel:ai.metersPerPixel(this.view.zoom)})),Jr.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&e.uniform("1f","u_"+this.name+".outerRadius",ji.convertUnits(this.radius[1],{zoom:this.view.zoom,meters_per_pixel:ai.metersPerPixel(this.view.zoom)}))},e}(eo);eo.types.point=io;var oo=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).type="spotlight",r.struct_name="SpotLight",r.direction=r._direction=(n.direction||[0,0,-1]).map(parseFloat),r.exponent=n.exponent?parseFloat(n.exponent):.2,r.angle=n.angle?parseFloat(n.angle):20,r}return Rn(e,t),e.inject=function(){Jr.addBlock(eo.block,"/*\n\nExpected globals:\nmaterial\nlight_accumulator_*\n\n*/\n\nstruct SpotLight {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n    vec4 position;\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\n    float attenuationExponent;\n#endif\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n    float innerRadius;\n#endif\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n    float outerRadius;\n#endif\n\n    vec3 direction;\n    float spotCosCutoff;\n    float spotExponent;\n};\n\nvoid calculateLight(in SpotLight _light, in vec3 _eyeToPoint, in vec3 _normal) {\n\n    float dist = length(_light.position.xyz - _eyeToPoint);\n\n    // Compute vector from surface to light position\n    vec3 VP = (_light.position.xyz - _eyeToPoint) / dist;\n\n    // normal . light direction\n    float nDotVP = clamp(dot(_normal, VP), 0.0, 1.0);\n\n    // Attenuation defaults\n    float attenuation = 1.0;\n    #ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\n        float Rin = 1.0;\n        float e = _light.attenuationExponent;\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n            Rin = _light.innerRadius;\n        #endif\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n            float Rdiff = _light.outerRadius-Rin;\n            float d = clamp(max(0.0,dist-Rin)/Rdiff, 0.0, 1.0);\n            attenuation = 1.0-(pow(d,e));\n        #else\n            // If no outer is provide behaves like:\n            // https://imdoingitwrong.wordpress.com/2011/01/31/light-attenuation/\n            float d = max(0.0,dist-Rin)/Rin+1.0;\n            attenuation = clamp(1.0/(pow(d,e)), 0.0, 1.0);\n        #endif\n    #else\n        float Rin = 0.0;\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n            Rin = _light.innerRadius;\n            #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n                float Rdiff = _light.outerRadius-Rin;\n                float d = clamp(max(0.0,dist-Rin)/Rdiff, 0.0, 1.0);\n                attenuation = 1.0-d*d;\n            #else\n                // If no outer is provide behaves like:\n                // https://imdoingitwrong.wordpress.com/2011/01/31/light-attenuation/\n                float d = max(0.0,dist-Rin)/Rin+1.0;\n                attenuation = clamp(1.0/d, 0.0, 1.0);\n            #endif\n        #else\n            #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n                float d = clamp(dist/_light.outerRadius, 0.0, 1.0);\n                attenuation = 1.0-d*d;\n            #else\n                attenuation = 1.0;\n            #endif\n        #endif\n    #endif\n\n    // spotlight attenuation factor\n    float spotAttenuation = 0.0;\n\n    // See if point on surface is inside cone of illumination\n    float spotDot = clamp(dot(-VP, _light.direction), 0.0, 1.0);\n\n    if (spotDot >= _light.spotCosCutoff) {\n        spotAttenuation = pow(spotDot, _light.spotExponent);\n    }\n\n    light_accumulator_ambient.rgb += _light.ambient * attenuation * spotAttenuation;\n\n    #ifdef TANGRAM_MATERIAL_DIFFUSE\n        light_accumulator_diffuse.rgb += _light.diffuse * nDotVP * attenuation * spotAttenuation;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_SPECULAR\n        // Power factor for shiny speculars\n        float pf = 0.0;\n        if (nDotVP > 0.0) {\n            vec3 reflectVector = reflect(-VP, _normal);\n            float eyeDotR = max(dot(-normalize(_eyeToPoint), reflectVector), 0.0);\n            pf = pow(eyeDotR, material.shininess);\n        }\n        light_accumulator_specular.rgb += _light.specular * pf * attenuation * spotAttenuation;\n    #endif\n}\n")},e.prototype.setupProgram=function(e){t.prototype.setupProgram.call(this,e),e.uniform("3fv","u_"+this.name+".direction",this.direction),e.uniform("1f","u_"+this.name+".spotCosCutoff",Math.cos(3.14159*this.angle/180)),e.uniform("1f","u_"+this.name+".spotExponent",this.exponent)},zn(e,[{key:"direction",get:function(){return this._direction},set:function(t){this._direction=to.normalize(to.copy(t))}}]),e}(io);eo.types.spotlight=oo,D(D.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}});var ao=function(t){function e(e){var n;return(n=t.call(this)||this).name="MethodNotImplemented",n.message="Method "+e+" must be implemented in subclass",n}return Rn(e,t),e}(In(Error)),so=function(){function t(t,e){var n=this;this.validate(t),this.config=t,this.sources=e,this.id=t.id,this.name=t.name,this.pad_scale=t.pad_scale||1e-5,this.default_winding=null,this.rasters=[],Array.isArray(t.rasters)&&t.rasters.forEach((function(t){-1===n.rasters.indexOf(t)&&n.rasters.push(t)})),this.preprocess=t.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=t.transform,"function"==typeof this.transform&&this.transform.bind(this),this.extra_data=t.extra_data,this.scripts=t.scripts,this.setZooms(t),this.zoom_offset=null!=t.zoom_offset?t.zoom_offset:0,this.zoom_offset<0&&(Jn({level:"warn",once:!0},"Data source '"+this.name+"' zoom_offset must not be negative – setting to 0."),this.zoom_offset=0),this.setTileSize(t.tile_size),this.min_display_zoom=Math.max(t.min_display_zoom||0,this.zooms[0]),this.max_display_zoom=null!=t.max_display_zoom?t.max_display_zoom:null}t.register=function(e,n){e&&n&&(t.types[e]=n)},t.create=function(e,n){if("function"==typeof t.types[e.type]){var r=t.types[e.type](e);if(r)return new r(e,n)}},t.tileLayoutChanged=function(t,e){if(!t||!e)return!0;var n=["max_zoom","zooms","min_display_zoom","max_display_zoom","bounds","tile_size","zoom_offset"],r=Sr(t.config,n),i=Sr(e.config,n);return JSON.stringify(r)!==JSON.stringify(i)},t.projectData=function(t){var e=+new Date;for(var n in t.layers)for(var r=t.layers[n].features.length,i=0;i<r;i++){var o=t.layers[n].features[i];ai.transformGeometry(o.geometry,this.projectCoord)}void 0!==t.debug&&(t.debug.projection=+new Date-e)},t.projectCoord=function(t){ai.latLngToMeters(t)},t.scaleData=function(t,e){var n=e.coords.z,r=e.min,i=ai.unitsPerMeter(n);for(var o in t.layers)for(var a=t.layers[o].features.length,s=0;s<a;s++){var u=t.layers[o].features[s];ai.transformGeometry(u.geometry,(function(t){t[0]=(t[0]-r.x)*i,t[1]=(t[1]-r.y)*i*-1}))}};var e=t.prototype;return e.load=function(t){var e=this;return t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=[].concat(this.rasters),this._load(t).then((function(t){for(var n in t.source_data.layers){var r=t.source_data.layers[n];r&&r.features&&r.features.forEach((function(t){ai.transformGeometry(t.geometry,(function(t){t[1]=-t[1],e.pad_scale&&(t[0]=Math.round(t[0]*(1+e.pad_scale)-ai.tile_scale*e.pad_scale/2),t[1]=Math.round(t[1]*(1+e.pad_scale)-ai.tile_scale*e.pad_scale/2))})),e.updateDefaultWinding(t.geometry)}))}return t.default_winding=e.default_winding||"CCW",t}))},e._load=function(){throw new ao("_load")},e.copyTileData=function(t,e){return Jn("trace","Copy tile data from "+t.key+" to "+e.key),e.source_data={layers:t.source_data.layers},e.rasters=[].concat(t.rasters),e.pad_scale=t.pad_scale,e.default_winding=t.default_winding,e},e.setZooms=function(t){var e=t.max_zoom,n=t.zooms;if(this.max_zoom=null!=e?e:ai.default_source_max_zoom,Array.isArray(n))this.zooms=n,this.max_zoom=this.zooms[this.zooms.length-1];else{this.zooms=[];for(var r=0;r<=this.max_zoom;r++)this.zooms[r]=r}},e.setTileSize=function(t){this.tile_size=t||256,("number"!=typeof this.tile_size||this.tile_size<256||!nr.isPowerOf2(this.tile_size))&&(Jn({level:"warn",once:!0},"Data source '"+this.name+"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '"+t+"'"),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8+this.zoom_offset},e.updateDefaultWinding=function(t){return null==this.default_winding&&("Polygon"===t.type?this.default_winding=ai.ringWinding(t.coordinates[0]):"MultiPolygon"===t.type&&(this.default_winding=ai.ringWinding(t.coordinates[0][0]))),this.default_winding},e.includesTile=function(t,e){if(t.z<this.min_display_zoom||null!=this.max_display_zoom&&e>this.max_display_zoom)return!1;for(var n=0;n<this.rasters.length;n++){var r=this.rasters[n];if(this.sources[r]&&this.sources[r]!==this&&!this.sources[r].includesTile(t,t.z))return!1}return!0},e.validate=function(){},t}();so.types={};var uo=0,lo=function(t){function e(e,n){var r;(r=t.call(this,e,n)||this).response_type="";var i=function(t,e){if(!e||0===Object.keys(e).length)return[t,[]];var n=t.indexOf("?"),r=t.indexOf("#"),i="";r>-1&&(i=t.slice(r),t=t.slice(0,r)),-1===n&&(n=t.length,t+="?"),n++;var o="",a=[];for(var s in e)""===wr(s,t)?o+=s+"="+e[s]+"&":a.push([s,e[s]]);return[t=t.slice(0,n)+o+t.slice(n)+i,a]}(e.url,e.url_params),o=i[0],a=i[1];return r.url=o,a.forEach((function(t){var n=t[0],i=t[1];Jn({level:"warn",once:!0},"Data source '"+r.name+"': parameter '"+n+"' already present in URL '"+e.url+"', skipping value '"+n+"="+i+"' specified in 'url_params'")})),e.request_headers&&"object"==typeof e.request_headers&&(r.request_headers=e.request_headers),r}Rn(e,t);var n=e.prototype;return n._load=function(t){var e=this,n=this.formatURL(this.url,t),r=t.source_data;return r.url=n,t.debug=t.debug||{},t.debug.network=+new Date,new Promise((function(i){var o=uo+++"-"+n,a=nr.io(n,6e4,e.response_type,"GET",e.request_headers,o);r.request_id=o,r.error=null,a.then((function(n){var o=n.body;t.debug.response_size=o&&(o.length||o.byteLength),t.debug.network=+new Date-t.debug.network,t.debug.parsing=+new Date,null!=o&&"function"==typeof e.preprocess&&(o=e.preprocess(o)),(o=o instanceof Promise?o:Promise.resolve(o)).then((function(n){null!=n?e.parseSourceData(t,r,n):r.layers={},t.debug.parsing=+new Date-t.debug.parsing,i(t)}))})).catch((function(e){r.error=e.stack,i(t)}))}))},n.validate=function(t){if("string"!=typeof t.url)throw Error("Network data source must provide a string `url` property")},n.formatURL=function(){throw new ao("formatURL")},n.parseSourceData=function(){throw new ao("parseSourceData")},e}(so),co=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).tiled=!0,r.bounds=r.parseBounds(e),r.builds_geometry_tiles=!1,r.tms=!0===e.tms,r.url&&r.url.search("{s}")>-1&&(Array.isArray(e.url_subdomains)&&e.url_subdomains.length>0?(r.url_subdomains=e.url_subdomains,r.next_url_subdomain=0):Jn({level:"warn",once:!0},"Data source '"+r.name+"': source URL includes '{s}' subdomain marker ('"+r.url+"'), but no subdomains were specified in 'url_subdomains' parameter")),r.url&&r.url.search("{r}")>-1&&(Array.isArray(e.url_density_scales)&&e.url_density_scales.length>0?r.url_density_scales=e.url_density_scales:r.url_density_scales=[1,2]),r}Rn(e,t);var n=e.prototype;return n.parseBounds=function(t){if(Array.isArray(t.bounds)&&4===t.bounds.length){var e=t.bounds,n=e[0],r=e[1],i=e[2],o=e[3];return{latlng:[].concat(t.bounds),meters:{min:ai.latLngToMeters([n,o]),max:ai.latLngToMeters([i,r])},tiles:{min:{},max:{}}}}},n.checkBounds=function(t,e){if(e){t=ai.wrapTile(t);var n=e.tiles.min[t.z];n||(n=e.tiles.min[t.z]=ai.tileForMeters(e.meters.min,t.z));var r=e.tiles.max[t.z];if(r||(r=e.tiles.max[t.z]=ai.tileForMeters(e.meters.max,t.z)),t.y<n.y||t.y>r.y)return!1;if(n.x<=r.x){if(t.x<n.x||t.x>r.x)return!1}else if(t.x>r.x&&t.x<n.x)return!1}return!0},n.includesTile=function(e,n){return!!t.prototype.includesTile.call(this,e,n)&&!!this.checkBounds(e,this.bounds)},n.formatURL=function(t,e){var n=ai.wrapTile(e.coords,{x:!0});this.tms&&(n.y=Math.pow(2,n.z)-1-n.y);var r=t.replace("{x}",n.x).replace("{y}",n.y).replace("{z}",n.z).replace("{r}",this.getDensityModifier()).replace("{q}",this.toQuadKey(n));return null!=this.url_subdomains&&(r=r.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),r},n.getDensityModifier=function(){if(this.url_density_scales){var t=nr.device_pixel_ratio,e=this.url_density_scales.filter((function(e){return t>=e})).reverse()[0];if((e=null!=e?e:this.url_density_scales[0])>1)return"@"+e+"x"}return""},n.toQuadKey=function(t){for(var e=t.x,n=t.y,r="",i=t.z;i>0;i--){var o=0,a=1<<i-1;0!=(e&a)&&o++,0!=(n&a)&&(o+=2),r+=o.toString()}return r},e.urlHasTilePattern=function(t){return t&&(t.search("{x}")>-1&&t.search("{y}")>-1&&t.search("{z}")>-1||t.search("{q}")>-1)},e}(lo),ho={coord:function(t){return{x:t.x,y:t.y,z:t.z,key:this.coordKey(t)}},coordKey:function(t){return t.x+"/"+t.y+"/"+t.z},key:function(t,e,n){if(!(t.y<0||t.y>=1<<t.z||t.z<0))return[e.name,t.x,t.y,t.z,n].join("/")},normalizedKey:function(t,e,n){return this.key(this.normalizedCoord(t,e),e,n)},normalizedCoord:function(t,e){return e.zoom_bias&&(t=this.coordAtZoom(t,Math.max(t.z-e.zoom_bias,e.zooms[0]))),this.coordForTileZooms(t,e.zooms)},coordAtZoom:function(t,e){var n=t.x,r=t.y,i=t.z;if(i!==(e=Math.max(0,e))){var o=Math.pow(2,i-e);n=Math.floor(n/o),r=Math.floor(r/o),i=e}return this.coord({x:n,y:r,z:i})},coordForTileZooms:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.findZoomInRange(i,e);return o!==i?this.coordAtZoom({x:n,y:r,z:i},o):this.coord({x:n,y:r,z:i})},findZoomInRange:function(t,e){return e.filter((function(e){return t>=e})).reverse()[0]||e[0]},isDescendant:function(t,e){if(e.z>t.z){var n=this.coordAtZoom(e,t.z),r=n.x,i=n.y;return t.x===r&&t.y===i}return!1},parent:function(t){var e=t.coords,n=t.source,r=t.style_z;if(r>0){r--;var i=Math.max(r-n.zoom_bias,n.zooms[0]),o=this.coordForTileZooms(this.coordAtZoom(e,i),n.zooms);return o.z>r?null:{key:this.key(o,n,r),coords:o,style_z:r,source:n}}},children:function(t,e){var n=t.coords,r=t.source,i=t.style_z;void 0===e&&(e={}),i++;var o=this.coordForTileZooms(this.coordAtZoom(n,i-r.zoom_bias),r.zooms);if(o.z===n.z)return[{key:this.key(o,r,i),coords:o,style_z:i,source:r}];var a=this.key(o,r,i);if(e[r.id]=e[r.id]||{},null==e[r.id][a]){for(var s=Math.pow(2,o.z-n.z),u=n.x*s,l=n.y*s,c=[],h=u;h<u+s;h++)for(var f=l;f<l+s;f++){var d=this.coord({x:h,y:f,z:o.z});c.push({key:this.key(d,r,i),coords:d,style_z:i,source:r})}e[r.id][a]=c}return e[r.id][a]}},fo=function(t){function e(e,n){var r;return-1===(r=t.call(this,e,n)||this).rasters.indexOf(r.name)&&r.rasters.unshift(r.name),r.filtering=e.filtering,r.textures={},r}Rn(e,t);var n=e.prototype;return n.load=function(t){return new Promise(function(e,n){t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=[].concat(this.rasters);var r=ai.tile_scale;return t.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[r,0],[r,-r],[0,-r],[0,0]]]},properties:{}}]}},t.default_winding="CW",e(t)}.bind(this))},n.tileTexture=function(t){return new Promise(function(e,n){var r=this.adjustRasterTileZoom(t),i=r.key;if(!this.textures[i]){var o=this.formatURL(this.url,{coords:r});this.textures[i]={name:o,url:o,filtering:this.filtering,coords:r}}return e(this.textures[i])}.bind(this))},n.adjustRasterTileZoom=function(t){var e=t.coords,n=this.sources[t.source];if(n!==this){var r=this.zoom_bias-n.zoom_bias;r>0?e=ho.normalizedCoord(t.coords,{zoom_bias:r,zooms:this.zooms}):(r<0&&Jn({level:"warn",once:!0},"Raster source '"+this.name+"' supports higher zoom detail than source '"+n.name+"' it's attached to. Downsampling this source "+-r+" extra zoom levels to match."),e=ho.coordForTileZooms(e,this.zooms))}return e},e}(co),po=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).load_image={},r.alpha=null!=e.alpha?Math.max(Math.min(e.alpha,1),0):null,r.mask_alpha=!0,r.preserve_tiles_within_zoom=0,r.max_display_density=e.max_display_density,Array.isArray(e.composite)?r.images=e.composite.map((function(t){return{url:t.url,bounds:r.parseBounds(t),alpha:null!=t.alpha?Math.max(Math.min(t.alpha,1),0):null}})):r.images=[{url:r.url,bounds:r.bounds,alpha:r.alpha}],r}Rn(e,t);var n=e.prototype;return n.tileTexture=function(t,e){return new Promise(function(n,r){var i,o,a,s,u,l,c,h,f,d;return i=this,o=e.blend,a=e.generation,s=this.adjustRasterTileZoom(t),u="opaque"!==o,l="raster-"+this.name+"-"+s.key+"-"+(u?"alpha":"opaque")+"-"+a,Gr.textures[l]?n({name:l,coords:s,skip_create:!0}):(c=nr.device_pixel_ratio,this.max_display_density&&(c=Math.min(c,this.max_display_density)),c*=2,h=document.createElement("canvas"),f=h.getContext("2d"),h.width=this.tile_size*c,h.height=this.tile_size*c,f.imageSmoothingEnabled="nearest"!==this.filtering,d=this.images.filter((function(e){return i.checkBounds(t.coords,e.bounds)})),Promise.resolve(Promise.all(d.map((function(e){var n=u?null!=e.alpha?e.alpha:i.alpha:1;return i.drawImage(e.url,e.bounds,n,t,c,f)})))).then(function(t){try{return n({name:l,element:h,filtering:this.filtering,coords:s})}catch(t){return r(t)}}.bind(this),r))}.bind(this))},n.drawImage=function(t,e,n,r,i,o){return new Promise(function(a,s){var u,l,c,h,f,d,p;return u=Xr(t),this.load_image[u]=this.load_image[u]||this.loadImage(t),Promise.resolve(this.load_image[u]).then(function(t){try{return l=t,c=ai.metersPerPixel(r.coords.z)/i/(this.tile_size/ai.tile_size),h=(e.meters.min[0]-r.min.x)/c,f=-(e.meters.min[1]-r.min.y)/c,d=(e.meters.max[0]-e.meters.min[0])/c,p=-(e.meters.max[1]-e.meters.min[1])/c,o.globalAlpha=null!=n?n:1,o.drawImage(l,h,f,d,p),a()}catch(t){return s(t)}}.bind(this),s)}.bind(this))},n.loadImage=function(t){var e=this;return new Promise((function(n){var r=new Image;r.onload=function(){return n(r)},r.onerror=function(r){Jn("warn","Raster source '"+e.name+"': failed to load url: '"+t+"'",r),n(null)},nr.isSafari()&&"data:"===t.slice(0,5)||(r.crossOrigin="anonymous"),r.src=t}))},n.includesTile=function(t,e){var n=this;return!!so.prototype.includesTile.call(this,t,e)&&this.images.some((function(e){return n.checkBounds(t,e.bounds)}))},n.validate=function(t){var e="Raster data source must provide a string `url` parameter, or an array of `composite` raster ";e+="image objects that each have a `url` parameter";var n="Raster data source must provide a `bounds` parameter, or an array of `composite` raster ";if(n+="image objects that each have a `bounds` parameter",Array.isArray(t.composite)){if(t.composite.some((function(t){return"string"!=typeof t.url})))throw Error(e);if(t.composite.some((function(t){return!(Array.isArray(t.bounds)&&4===t.bounds.length)})))throw Error(n);if(null!=t.url||null!=t.bounds)throw Error("Raster data source must have *either* a single image specified as `url` and `bounds `parameters, or an array of `composite` raster image objects, each with `url` and `bounds`.")}else{if("string"!=typeof t.url)throw Error(e);if(!Array.isArray(t.bounds)||4!==t.bounds.length)throw Error(n)}},e}(fo);so.register("Raster",(function(t){return fo.urlHasTilePattern(t.url)?fo:po}));var mo={init:function(t){var e=void 0===t?{}:t,n=e.generation,r=e.styles,i=e.sources,o=void 0===i?{}:i,a=e.introspection;this.setGeneration(n),this.styles=r,this.sources=o,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=a||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.stencil_proxy_tiles=!0,this.variants={},this.vertex_layouts={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque","opaque"!==this.blend?null==this.blend_order&&(this.blend_order=this.default_blend_orders[this.blend]):this.blend_order=this.default_blend_orders[this.blend],this.defines["TANGRAM_BLEND_"+this.blend.toUpperCase()]=!0,this.removeShaderBlock("setup"),this.material instanceof Qi||(Qi.isValid(this.material)||(this.material=ji.defaults.material),this.material=new Qi(this.material)),this.material.inject(this),eo.setMode(this.lighting,this),this.setupRasters(),this.setupCustomAttributes(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),Zn.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(t){this.generation=t,this.main_thread_target=["Style",this.name,this.generation].join("_"),It.is_main&&Zn.addTarget(this.main_thread_target,this)},startData:function(t){this.tile_data[t.id]=this.tile_data[t.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(t){return new Promise(function(e,n){var r=this.tile_data[t.id];if(this.tile_data[t.id]=null,r&&Object.keys(r.meshes).length>0){for(var i in r.meshes){var o=r.meshes[i];0!==o.vertex_data.vertex_count?(o.vertex_data.end(),o.vertex_elements=o.vertex_data.element_buffer,o.vertex_data=o.vertex_data.vertex_buffer):delete r.meshes[i]}return e(this.buildRasterTextures(t,r))}return e(null)}.bind(this))},hasDataForTile:function(t){return null!=this.tile_data[t.id]},getTileMesh:function(t,e){var n=this.tile_data[t.id].meshes;if(null==n[e.key]){var r=this.vertexLayoutForMeshVariant(e);n[e.key]={variant:e,vertex_data:r.createVertexData()}}return n[e.key]},vertexLayoutForMeshVariant:function(){},meshVariantTypeForDraw:function(){},addFeature:function(t,e,n){var r=n.tile;if(r.generation===this.generation){this.tile_data[r.id]||this.startData(r);var i=this.parseFeature(t,e,n);i&&this.buildGeometry(t.geometry,i,n)>0&&(t.generation=this.generation)}},buildGeometry:function(t,e,n){var r,i=this;if("Polygon"===t.type?r=this.buildPolygons([t.coordinates],e,n):"MultiPolygon"===t.type?r=this.buildPolygons(t.coordinates,e,n):"LineString"===t.type?r=this.buildLines([t.coordinates],e,n):"MultiLineString"===t.type?r=this.buildLines(t.coordinates,e,n):"Point"===t.type?r=this.buildPoints([t.coordinates],e,n):"MultiPoint"===t.type&&(r=this.buildPoints(t.coordinates,e,n)),r>0&&rr.layer_stats){var o=n.tile;o.debug.layers=o.debug.layers||{list:{},tree:{}};var a=o.debug.layers.list,s=o.debug.layers.tree,u={};n.layers.forEach((function(t){var e,n;go(a,t,1,r,((e={})[i.name]=r,e),((n={})[i.baseStyle()]=r,n));for(var o=s,l=u,c=t.split(":"),h=0;h<c.length;h++){var f,d,p=c[h];o[p]=o[p]||{features:0,geoms:0,styles:{},base:{}},null==l[p]&&(l[p]={},go(o,p,1,r,((f={})[i.name]=r,f),((d={})[i.baseStyle()]=r,d))),h<c.length-1&&(o[p].layers=o[p].layers||{}),o=o[p].layers,l=l[p]}}))}return r},parseFeature:function(t,e,n){try{var r=this.feature_style;if(r.order=this.parseOrder(e.order,n),null==r.order&&"overlay"!==this.blend){var i="Layer '"+e.layers.join(", ")+"', draw group '"+e.group+"': ";return i+="'order' parameter is required unless blend mode is 'overlay'",null!=e.order&&(i+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",i+="or JS function), but evaluated to null for one or more features"),void Jn({level:"warn",once:!0},i)}if(!(r=this._parseFeature(t,e,n)))return;if(this.shaders.attributes)for(var o in r.attributes=r.attributes||{},this.shaders.attributes)r.attributes[o]=ji.evalCachedProperty(e.attributes&&e.attributes[o],n),"number"!=typeof r.attributes[o]&&(r.attributes[o]=0);return this.selection?r.interactive=ji.evalProperty(e.interactive,n):r.interactive=!1,!0===r.interactive?r.selection_color=Yi.makeColor(t,n.tile,n):r.selection_color=Yi.defaultColor,r=this._parseFeature(t,e,n)}catch(e){Jn("error","Style.parseFeature: style parsing error",t,r,e.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(t){if(!t.preprocessed){if(this.draw)for(var e in this.draw){var n=this.draw[e];"object"!=typeof n||Array.isArray(n)?null==t[e]&&(t[e]=n):t[e]=oi({},n,t[e])}if(this.selection?this.introspection&&(t.interactive=!0):t.interactive=!1,!(t=this._preprocess(t)))return;if(this.shaders.attributes)for(var r in t.attributes=t.attributes||{},this.shaders.attributes)t.attributes[r]=ji.createPropertyCache(null!=t.attributes[r]?t.attributes[r]:0);t.preprocessed=!0}return t},_preprocess:function(t){return t},parseOrder:function(t,e){return"number"!=typeof t?ji.calculateOrder(t,e):t},scaleOrder:function(t){return 2*t},parseColor:function(t,e){return t?ji.evalCachedColorProperty(t,e):this.shaders.blocks.color||this.shaders.blocks.filter?ji.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(t){this.gl=t,this.max_texture_size=Gr.getMaxTextureSize(this.gl)},makeMesh:function(t,e,n){void 0===n&&(n={});var r=this.vertexLayoutForMeshVariant(n.variant);return new Ki(this.gl,t,e,r,n)},render:function(t){return t.render()},getProgram:function(t){void 0===t&&(t="program"),this.compileSetup();var e=this[t];if(e&&!e.error){if(!e.compiled){Jn("debug","Compiling style '"+this.name+"', program key '"+t+"'");try{e.compile()}catch(e){throw Jn("error","Style: error compiling program for style '"+this.name+"' (program key '"+t+"')",this,e.stack,e.type,e.shader_errors),e}}return e}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for "+this.name+" because no GL context");var t=this.buildDefineList();if(this.selection){var e=Object.assign({},t);e.TANGRAM_FEATURE_SELECTION=!0}var n=this.shaders&&this.shaders.blocks,r=this.shaders&&this.shaders.block_scopes,i=Object.assign({},this.shaders&&this.shaders.uniforms);for(var o in i)null==i[o]&&Jn({level:"warn",once:!0},"Style '"+this.name+"' has invalid uniform '"+o+"': uniform values must be non-null");var a=this.shaders&&this.shaders.extensions;"string"==typeof a&&(a=[a]),this.program=new Jr(this.gl,this.vertex_shader_src,this.fragment_shader_src,{name:this.name,defines:t,uniforms:i,blocks:n,block_scopes:r,extensions:a}),this.selection?this.selection_program=new Jr(this.gl,this.vertex_shader_src,"// Fragment shader for feature selection passes\n// Renders in silhouette according to selection (picking) color, or black if none defined\n\n#ifdef TANGRAM_FEATURE_SELECTION\n    varying vec4 v_selection_color;\n#endif\n\nvoid main (void) {\n    #ifdef TANGRAM_FEATURE_SELECTION\n        gl_FragColor = v_selection_color;\n    #else\n        gl_FragColor = vec4(0., 0., 0., 1.);\n    #endif\n}\n",{name:this.name+" (selection)",defines:e,uniforms:i,blocks:n,block_scopes:r,extensions:a}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(t,e,n){void 0===n&&(n=null),this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[t]=this.shaders.blocks[t]||[],this.shaders.blocks[t].push(e),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[t]=this.shaders.block_scopes[t]||[],this.shaders.block_scopes[t].push(n)},removeShaderBlock:function(t){this.shaders.blocks&&(this.shaders.blocks[t]=null),this.shaders.block_scopes&&(this.shaders.block_scopes[t]=null)},replaceShaderBlock:function(t,e,n){void 0===n&&(n=null),this.removeShaderBlock(t),this.addShaderBlock(t,e,n)},buildDefineList:function(){var t={};if(null!=this.defines)for(var e in this.defines)t[e]=this.defines[e];if(null!=this.shaders&&null!=this.shaders.defines)for(e in this.shaders.defines)t[e]=this.shaders.defines[e];return t},hasRasters:function(){return["color","normal","custom"].indexOf(this.raster)>-1},setupRasters:function(){var t=this;if(this.hasRasters()){"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var e=Object.keys(this.sources).filter((function(e){return t.sources[e]instanceof fo})).length;if(this.defines.TANGRAM_NUM_RASTER_SOURCES=""+e,e>0){var n=Object.keys(this.sources).filter((function(e){return t.sources[e].mask_alpha})).length;this.defines.TANGRAM_HAS_MASKED_RASTERS=n>0,this.defines.TANGRAM_ALL_MASKED_RASTERS=n===e,this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster","// Uniforms defining raster textures and macros for accessing them\n\n#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_rasters[TANGRAM_NUM_RASTER_SOURCES];    // raster tile texture samplers\nuniform vec2 u_raster_sizes[TANGRAM_NUM_RASTER_SOURCES];    // raster tile texture sizes (width/height in pixels)\nuniform vec3 u_raster_offsets[TANGRAM_NUM_RASTER_SOURCES];  // raster tile texture UV starting offset for tile\n\n// Raster sources can optionally mask by the alpha channel (render with only full or no alpha, based on a threshold),\n// which is used for handling transparency outside the raster image when rendering with opaque blending\n#if defined(TANGRAM_HAS_MASKED_RASTERS) && !defined(TANGRAM_ALL_MASKED_RASTERS) // only add uniform if we need it\nuniform bool u_raster_mask_alpha;\n#endif\n\n// Note: the raster accessors below are #defines rather than functions to\n// avoid issues with constant integer expressions for array indices\n\n// Adjusts UVs in model space to account for raster tile texture overzooming\n// (applies scale and offset adjustments)\n#define adjustRasterUV(raster_index, uv) \\\n    ((uv) * u_raster_offsets[raster_index].z + u_raster_offsets[raster_index].xy)\n\n// Returns the UVs of the current model position for a raster sampler\n#define currentRasterUV(raster_index) \\\n    (adjustRasterUV(raster_index, v_modelpos_base_zoom.xy))\n\n// Returns pixel location in raster tile texture at current model position\n#define currentRasterPixel(raster_index) \\\n    (currentRasterUV(raster_index) * rasterPixelSize(raster_index))\n\n// Samples a raster tile texture for the current model position\n#define sampleRaster(raster_index) \\\n    (texture2D(u_rasters[raster_index], currentRasterUV(raster_index)))\n\n// Samples a raster tile texture for a given pixel\n#define sampleRasterAtPixel(raster_index, pixel) \\\n    (texture2D(u_rasters[raster_index], (pixel) / rasterPixelSize(raster_index)))\n\n// Returns size of raster sampler in pixels\n#define rasterPixelSize(raster_index) \\\n    (u_raster_sizes[raster_index])\n\n#endif\n","Raster")}}},buildRasterTextures:function(t,e){return new Promise(function(n,r){var i,o,a,s;if(!this.hasRasters())return n(e);if(0===t.rasters.length)return n(e);var u=function(){try{return!i||i.length<1?n(e):i.some((function(t){return!t.loaded}))?n(null):(e.uniforms.u_raster_mask_alpha=!0===this.sources[t.rasters[0]].mask_alpha,o=e.uniforms.u_rasters=[],a=e.uniforms.u_raster_sizes=[],s=e.uniforms.u_raster_offsets=[],i.forEach((function(n){var r=n.index;if(o[r]=n.name,e.textures.push(n.name),a[r]=[n.width,n.height],t.coords.z>n.coords.z){var i=t.coords.z-n.coords.z,u=Math.pow(2,i);s[r]=[(t.coords.x%u+u)%u/u,(u-1-t.coords.y%u)/u,1/u]}else s[r]=[0,0,1]})),n(e))}catch(t){return r(t)}}.bind(this),l=function(t){try{return n(e)}catch(t){return r(t)}};try{return Promise.resolve(Zn.postMessage(this.main_thread_target+".loadTextures",{coords:t.coords,source:t.source,rasters:t.rasters,min:t.min,max:t.max})).then((function(t){try{return i=t,u()}catch(t){return l()}}),l)}catch(t){l()}}.bind(this))},loadTextures:function(t){return new Promise(function(e,n){var r,i,o,a,s;return r=this,i={},o={},a=[],t.rasters.map((function(t){return r.sources[t]})).filter((function(t){return t})).forEach((function(e,n){e instanceof fo&&a.push(e.tileTexture(t,r).then((function(t){i[t.name]=t,o[t.name]=n})))})),Promise.resolve(Promise.all(a)).then(function(t){try{return Promise.resolve(Gr.createFromObject(this.gl,i)).then((function(t){try{return Promise.resolve(Promise.all(Object.keys(i).map((function(t){return Gr.textures[t]&&Gr.textures[t].load()})).filter((function(t){return t})))).then((function(t){try{return(s=t).forEach((function(t){return t.retain()})),e(s.map((function(t){return{name:t.name,width:t.width,height:t.height,loaded:t.loaded,index:o[t.name],coords:i[t.name].coords}})))}catch(t){return n(t)}}),n)}catch(t){return n(t)}}),n)}catch(t){return n(t)}}.bind(this),n)}.bind(this))},setupCustomAttributes:function(){if(this.shaders.attributes)for(var t=Object.entries(this.shaders.attributes),e=0;e<t.length;e++){var n=t[e],r=n[0],i=n[1];"float"===i.type&&(!1!==i.varying?(this.addShaderBlock("attributes","\n                            #ifdef TANGRAM_VERTEX_SHADER\n                                attribute float a_"+r+";\n                                varying float v_"+r+";\n                                #define "+r+" a_"+r+"\n                            #else\n                                varying float v_"+r+";\n                                #define "+r+" v_"+r+"\n                            #endif\n                        "),this.addShaderBlock("setup","#ifdef TANGRAM_VERTEX_SHADER\nv_"+r+" = a_"+r+";\n#endif")):this.addShaderBlock("attributes","\n                            #ifdef TANGRAM_VERTEX_SHADER\n                                attribute float a_"+r+";\n                                #define "+r+" a_"+r+"\n                            #endif\n                        "))}},addCustomAttributesToAttributeList:function(t){if(this.shaders.attributes)for(var e=Object.entries(this.shaders.attributes),n=0;n<e.length;n++){var r=e[n],i=r[0];"float"===r[1].type&&t.push({name:"a_"+i,size:1,type:Xi.FLOAT,normalized:!1})}return t},addCustomAttributesToVertexTemplate:function(t,e){if(this.shaders.attributes)for(var n in this.shaders.attributes)this.vertex_template[e++]=null!=t.attributes[n]?t.attributes[n]:0},setup:function(){this.setUniforms(),this.material.setupProgram(Jr.current)},setUniforms:function(){var t=Jr.current;t&&t.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:Number.MIN_SAFE_INTEGER,add:1,multiply:2,inlay:3,translucent:4,overlay:5},getBlendOrderForDraw:function(t){return"opaque"!==this.blend&&null!=t.blend_order?t.blend_order:this.blend_order}};function go(t,e,n,r,i,o){for(var a in t[e]=t[e]||{features:0,geoms:0,styles:{},base:{}},t[e].features+=n,t[e].geoms+=r,i)t[e].styles[a]=t[e].styles[a]||0,t[e].styles[a]+=i[a];for(var s in o)t[e].base[s]=t[e].base[s]||0,t[e].base[s]+=o[s]}Ur("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ur("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ur("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ur("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ur("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}));var vo,_o=Math.pow(2,16)-1,yo=!1,bo=function(){function t(){this.array=[],this.has_overflown=!1}var e=t.prototype;return e.push=function(t){this.has_overflown&&!yo||t>_o&&(this.has_overflown=!0,!yo)||this.array.push(t)},e.end=function(){if(this.array.length){var t=(e=this.array,new(this.has_overflown&&yo?Uint32Array:Uint16Array)(e));return this.array=[],this.has_overflown=!1,t}return!1;var e},t}();bo.setElementIndexUint=function(t){yo=t};var xo=((vo={})[Xi.FLOAT]=Float32Array,vo[Xi.BYTE]=Int8Array,vo[Xi.UNSIGNED_BYTE]=Uint8Array,vo[Xi.INT]=Int32Array,vo[Xi.UNSIGNED_INT]=Uint32Array,vo[Xi.SHORT]=Int16Array,vo[Xi.UNSIGNED_SHORT]=Uint16Array,vo),wo=function(){function t(e,n){var r=(void 0===n?{}:n).prealloc,i=void 0===r?500:r;this.vertex_layout=e,this.vertex_elements=new bo,this.stride=this.vertex_layout.stride,t.array_pool.length>0?(this.vertex_buffer=t.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),Jn("trace","VertexData: reused buffer of bytes "+this.byte_length+", "+this.size+" vertices")):(this.size=i,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}var e=t.prototype;return e.setBufferViews=function(){var t=this;this.views={},this.views[Xi.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach((function(e){if(null==t.views[e.type]){var n=xo[e.type];t.views[e.type]=new n(t.vertex_buffer.buffer)}}))},e.checkBufferSize=function(){if(this.offset+this.stride>this.byte_length){this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size;var e=new Uint8Array(this.byte_length);e.set(this.vertex_buffer),t.array_pool.push(this.vertex_buffer),this.vertex_buffer=e,this.setBufferViews(),this.realloc_count++}},e.setAddVertexFunction=function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()},e.addVertex=function(t){this.checkBufferSize(),this.vertexLayoutAddVertex(t,this.views,this.offset),this.offset+=this.stride,this.vertex_count++},e.end=function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),Jn("trace","VertexData: "+this.size+" vertices total, realloc count "+this.realloc_count),this},t}();wo.array_pool=[];var To=function(){function t(t){this.attribs=t,this.dynamic_attribs=this.attribs.filter((function(t){return null==t.static})),this.static_attribs=this.attribs.filter((function(t){return null!=t.static})),this.components=[],this.index={},this.offset={},this.stride=0;for(var e=0,n=0,r=0;r<this.attribs.length;r++){var i=this.attribs[r];if(null==i.static){i.offset=this.stride,i.byte_size=i.size;var o=0;switch(i.type){case Xi.FLOAT:case Xi.INT:case Xi.UNSIGNED_INT:i.byte_size*=4,o=2;break;case Xi.SHORT:case Xi.UNSIGNED_SHORT:i.byte_size*=2,o=1}3&i.byte_size&&(i.byte_size+=4-(3&i.byte_size)),this.stride+=i.byte_size;for(var a=i.offset>>o,s=0;s<i.size;s++)this.components.push({type:i.type,shift:o,offset:a++,index:n++});this.index[i.name]=e,e+=i.size,this.offset[i.name]=i.offset}else i.static=Array.isArray(i.static)?i.static:[i.static],i.method="vertexAttrib"+i.static.length+"fv"}}var e=t.prototype;return e.enableDynamicAttributes=function(e,n){var r=this;for(var i in t.enabled_attribs)e.disableVertexAttribArray(i);t.enabled_attribs={},this.dynamic_attribs.forEach((function(i){var o=n.attribute(i.name).location;-1!==o&&(e.enableVertexAttribArray(o),e.vertexAttribPointer(o,i.size,i.type,i.normalized,r.stride,i.offset),t.enabled_attribs[o]=n)}))},e.enableStaticAttributes=function(t,e){this.static_attribs.forEach((function(n){var r=e.attribute(n.name).location;-1!==r&&t[n.method]instanceof Function&&(t.enableVertexAttribArray(r),t[n.method](r,n.static),t.disableVertexAttribArray(r))}))},e.createVertexData=function(){return new wo(this)},e.getAddVertexFunction=function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex},e.createAddVertexFunction=function(){var e=Xr(JSON.stringify(this.attribs));if(null==t.add_vertex_funcs[e]){var n,r=["var t, o;"],i=[].concat(this.components);i.sort((function(t,e){return t.type!==e.type?t.type-e.type:t.index-e.index}));for(var o=0;o<i.length;o++){var a=i[o];n!==a.type&&(r.push("t = vs["+a.type+"];"),r.push("o = off"+(a.shift?" >> "+a.shift:"")+";"),n=a.type),r.push("t[o + "+a.offset+"] = v["+a.index+"];")}r=r.join("\n");var s=new Function("v","vs","off",r);t.add_vertex_funcs[e]=s}this.addVertex=t.add_vertex_funcs[e]},t}();To.enabled_attribs={},To.add_vertex_funcs={};var Ao=[{x:0,y:0},{x:ai.tile_scale,y:-ai.tile_scale}],So=[0,0,1,1];function Eo(t,e,n){var r=Ao[0],i=Ao[1];return t[0]<=r.x+n&&e[0]<=r.x+n||t[0]>=i.x-n&&e[0]>=i.x-n||t[1]>=r.y-n&&e[1]>=r.y-n||t[1]<=i.y+n&&e[1]<=i.y+n}function ko(t,e){e=e||0;var n=Ao[0],r=Ao[1];return t[0]<=n.x+e||t[0]>=r.x-e||t[1]>=n.y-e||t[1]<=r.y+e}var Mo=Oo;function Oo(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=Po(t,0,h,n,!0),d=[];if(!f)return d;if(c&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Po(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Bo(a));for(s.sort(No),i=0;i<s.length;i++)Do(s[i],n),n=zo(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var p=n;p<h;p+=n)(s=t[p])<r&&(r=s),(u=t[p+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=Math.max(o-r,a-i)}return Ro(f,d,n,r,i,l),d}function Po(t,e,n,r,i){var o,a;if(i===Ko(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Yo(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Yo(o,t[o],t[o+1],a);return a&&Zo(a,a.next)&&(Xo(a),a=a.next),a}function zo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Zo(r,r.next)&&0!==Vo(r.prev,r,r.next))r=r.next;else{if(Xo(r),(r=e=r.prev)===r.next)return null;n=!0}}while(n||r!==e);return e}function Ro(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Fo(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0===s?(i=r,r=r.nextZ,u--):0!==u&&r?n.z<=r.z?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--):(i=n,n=n.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Co(t,r,i,o):Lo(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Xo(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Ro(t=jo(t,e,n),e,n,r,i,o,2):2===a&&Io(t,e,n,r,i,o):Ro(zo(t),e,n,r,i,o,1);break}}}function Lo(t){var e=t.prev,n=t,r=t.next;if(Vo(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Uo(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Vo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Co(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Vo(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Fo(s,u,e,n,r),f=Fo(l,c,e,n,r),d=t.nextZ;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Uo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Vo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Uo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Vo(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function jo(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Zo(i,o)&&Wo(i,r,r.next,o)&&qo(i,o)&&qo(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Xo(r),Xo(r.next),r=t=o),r=r.next}while(r!==t);return r}function Io(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Go(a,s)){var u=Ho(a,s);return a=zo(a,a.next),u=zo(u,u.next),Ro(a,e,n,r,i,o),void Ro(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function No(t,e){return t.x-e.x}function Do(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&Uo(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&qo(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=Ho(e,t);zo(n,n.next)}}function Fo(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Bo(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Uo(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Go(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Wo(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&qo(t,e)&&qo(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Vo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Zo(t,e){return t.x===e.x&&t.y===e.y}function Wo(t,e,n,r){return!!(Zo(t,e)&&Zo(n,r)||Zo(t,r)&&Zo(n,e))||Vo(t,e,n)>0!=Vo(t,e,r)>0&&Vo(n,r,t)>0!=Vo(n,r,e)>0}function qo(t,e){return Vo(t.prev,t,t.next)<0?Vo(t,e,t.next)>=0&&Vo(t,t.prev,e)>=0:Vo(t,e,t.prev)<0||Vo(t,t.next,e)<0}function Ho(t,e){var n=new $o(t.i,t.x,t.y),r=new $o(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Yo(t,e,n,r){var i=new $o(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Xo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function $o(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ko(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}Oo.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Ko(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(Ko(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Oo.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var Jo=[0,0,1];function Qo(t,e,n,r){var i,o,a,s,u,l,c,h,f,d=r.texcoord_index,p=r.texcoord_scale,m=r.texcoord_normalize,g=e.vertex_elements,v=t.length,_=0;if(d){m=m||1;var y=p||So;i=y[0],o=y[1],a=y[2],s=y[3]}for(var b=0;b<v;b++){var x=t[b],w=e.vertex_count,T=(f=Mo.flatten(x),Mo(f.vertices,f.holes,f.dimensions)),A=T.length;if(A){var S;d&&(u=(S=ai.findBoundingBox(x))[0],l=S[1],c=(a-i)/(S[2]-u),h=(s-o)/(S[3]-l));for(var E=0;E<x.length;E++)for(var k=x[E],M=0;M<k.length;M++){var O=k[M];n[0]=O[0],n[1]=O[1],d&&(n[d+0]=((O[0]-u)*c+i)*m,n[d+1]=((O[1]-l)*h+o)*m),e.addVertex(n)}for(var P=0;P<A;P++)g.push(w+T[P]);_+=A/3}}return _}var ta='uniform vec2 u_resolution;\nuniform float u_time;\nuniform vec3 u_map_position;\nuniform vec4 u_tile_origin;\nuniform float u_tile_proxy_order_offset;\nuniform float u_meters_per_pixel;\nuniform float u_device_pixel_ratio;\n\nuniform mat4 u_model;\nuniform mat4 u_modelView;\nuniform mat3 u_normalMatrix;\nuniform mat3 u_inverseNormalMatrix;\n\nattribute vec4 a_position;\nattribute vec4 a_color;\n\n// Optional normal attribute, otherwise default to up\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\n    attribute vec3 a_normal;\n    #define TANGRAM_NORMAL a_normal\n#else\n    #define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n\n// Optional dynamic line extrusion\n#ifdef TANGRAM_EXTRUDE_LINES\n    attribute vec2 a_extrude; // extrusion direction in xy plane\n    attribute vec2 a_offset;  // offset direction in xy plane\n\n    // Polygon and line styles have slightly different VBO layouts, saving memory by optimizing vertex packing.\n    // All lines have a width scaling factor, but only some have a height (position.z) or offset.\n    // The vertex height is stored in different attributes to account for this.\n    attribute vec2 a_z_and_offset_scale; // stores vertex height in x, and offset scaling factor in y\n    #define TANGRAM_POSITION_Z a_z_and_offset_scale.x // vertex height is stored in separate line-specific attrib\n    #define TANGRAM_OFFSET_SCALING a_z_and_offset_scale.y // zoom scaling factor for line offset\n    #define TANGRAM_WIDTH_SCALING a_position.z // zoom scaling factor for line width (stored in position attrib)\n\n    uniform float u_v_scale_adjust; // scales texture UVs for line dash patterns w/fractional pixel width\n#else\n    #define TANGRAM_POSITION_Z a_position.z // vertex height\n#endif\n\nvarying vec4 v_position;\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvarying vec4 v_world_position;\n\n// Optional texture UVs\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\n    attribute vec2 a_texcoord;\n    varying vec2 v_texcoord;\n#endif\n\n// Optional model position varying for tile coordinate zoom\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\n    varying vec4 v_modelpos_base_zoom;\n#endif\n\n#if defined(TANGRAM_LIGHTING_VERTEX)\n    varying vec4 v_lighting;\n#endif\n\n#define TANGRAM_UNPACK_SCALING(x) (x / 1024.)\n\n#pragma tangram: attributes\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n\nvoid main() {\n    // Initialize globals\n    #pragma tangram: setup\n\n    // Texture UVs\n    #ifdef TANGRAM_TEXTURE_COORDS\n        v_texcoord = a_texcoord;\n        #ifdef TANGRAM_EXTRUDE_LINES\n            v_texcoord.y *= u_v_scale_adjust;\n        #endif\n    #endif\n\n    // Pass model position to fragment shader\n    #ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\n        v_modelpos_base_zoom = modelPositionBaseZoom();\n    #endif\n\n    // Position\n    vec4 position = vec4(a_position.xy, TANGRAM_POSITION_Z / TANGRAM_HEIGHT_SCALE, 1.); // convert height back to meters\n\n    #ifdef TANGRAM_EXTRUDE_LINES\n        vec2 _extrude = a_extrude.xy;\n        vec2 _offset = a_offset.xy;\n\n        // Adjust line width based on zoom level, to prevent proxied lines\n        // from being either too small or too big.\n        // "Flattens" the zoom between 1-2 to peg it to 1 (keeps lines from\n        // prematurely shrinking), then interpolate and clamp to 4 (keeps lines\n        // from becoming too small when far away).\n        float _dz = clamp(u_map_position.z - u_tile_origin.z, 0., 4.);\n        _dz += step(1., _dz) * (1. - _dz) + mix(0., 2., clamp((_dz - 2.) / 2., 0., 1.));\n\n        // Interpolate line width between zooms\n        float _mdz = (_dz - 0.5) * 2.; // zoom from mid-point\n        _extrude -= _extrude * TANGRAM_UNPACK_SCALING(TANGRAM_WIDTH_SCALING) * _mdz;\n\n        // Interpolate line offset between zooms\n        // Scales from the larger value to the smaller one\n        float _dwdz = TANGRAM_UNPACK_SCALING(TANGRAM_OFFSET_SCALING);\n        float _sdwdz = sign(step(0., _dwdz) - 0.5); // sign indicates "direction" of scaling\n        _offset -= _offset * abs(_dwdz) * ((1.-step(0., _sdwdz)) - (_dz * -_sdwdz)); // scale "up" or "down"\n\n        // Scale line width and offset to be consistent in screen space\n        float _ssz = exp2(-_dz - (u_tile_origin.z - u_tile_origin.w));\n        _extrude *= _ssz;\n        _offset *= _ssz;\n\n        // Modify line width before extrusion\n        #ifdef TANGRAM_BLOCK_WIDTH\n            float width = 1.;\n            #pragma tangram: width\n            _extrude *= width;\n        #endif\n\n        position.xy += _extrude + _offset;\n    #endif\n\n    // World coordinates for 3d procedural textures\n    v_world_position = wrapWorldPosition(u_model * position);\n\n    // Adjust for tile and view position\n    position = u_modelView * position;\n\n    // Modify position before camera projection\n    #pragma tangram: position\n\n    // Setup varyings\n    v_position = position;\n    v_normal = normalize(u_normalMatrix * TANGRAM_NORMAL);\n    v_color = a_color;\n\n    #if defined(TANGRAM_LIGHTING_VERTEX)\n        // Vertex lighting\n        vec3 normal = v_normal;\n\n        // Modify normal before lighting\n        #pragma tangram: normal\n\n        // Pass lighting intensity to fragment shader\n        v_lighting = calculateLighting(position.xyz - u_eye, normal, vec4(1.));\n    #endif\n\n    // Camera\n    cameraProjection(position);\n\n    // +1 is to keep all layers including proxies > 0\n    applyLayerOrder(a_position.w + u_tile_proxy_order_offset + 1., position);\n\n    gl_Position = position;\n}\n',ea="uniform vec2 u_resolution;\nuniform float u_time;\nuniform vec3 u_map_position;\nuniform vec4 u_tile_origin;\nuniform float u_meters_per_pixel;\nuniform float u_device_pixel_ratio;\n\nuniform mat3 u_normalMatrix;\nuniform mat3 u_inverseNormalMatrix;\n\nvarying vec4 v_position;\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvarying vec4 v_world_position;\n\n#ifdef TANGRAM_EXTRUDE_LINES\n    uniform bool u_has_line_texture;\n    uniform sampler2D u_texture;\n    uniform float u_texture_ratio;\n    uniform vec4 u_dash_background_color;\n#endif\n\n#define TANGRAM_NORMAL v_normal\n\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\n    varying vec2 v_texcoord;\n#endif\n\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\n    varying vec4 v_modelpos_base_zoom;\n#endif\n\n#if defined(TANGRAM_LIGHTING_VERTEX)\n    varying vec4 v_lighting;\n#endif\n\n#pragma tangram: attributes\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n\nvoid main (void) {\n    // Initialize globals\n    #pragma tangram: setup\n\n    vec4 color = v_color;\n    vec3 normal = TANGRAM_NORMAL;\n\n    // Apply raster to vertex color\n    #ifdef TANGRAM_RASTER_TEXTURE_COLOR\n        vec4 _raster_color = sampleRaster(0);\n\n        #if defined(TANGRAM_BLEND_OPAQUE) || defined(TANGRAM_BLEND_TRANSLUCENT) || defined(TANGRAM_BLEND_MULTIPLY)\n            // Raster sources can optionally mask by the alpha channel, which will render with only full or no alpha.\n            // This is used for handling transparency outside the raster image in some blend modes,\n            // which either don't support alpha, or would cause transparent pixels to write to the depth buffer,\n            // obscuring geometry underneath.\n            #ifdef TANGRAM_HAS_MASKED_RASTERS   // skip masking logic if no masked raster sources\n            #ifndef TANGRAM_ALL_MASKED_RASTERS  // skip conditional if *only* masked raster sources (always true)\n            if (u_raster_mask_alpha) {\n            #else\n            {\n            #endif\n                #if defined(TANGRAM_BLEND_TRANSLUCENT) || defined(TANGRAM_BLEND_MULTIPLY)\n                if (_raster_color.a < TANGRAM_EPSILON) {\n                    discard;\n                }\n                #else // TANGRAM_BLEND_OPAQUE\n                if (_raster_color.a < 1. - TANGRAM_EPSILON) {\n                    discard;\n                }\n                // only allow full alpha in opaque blend mode (avoids artifacts blending w/canvas tile background)\n                _raster_color.a = 1.;\n                #endif\n            }\n            #endif\n        #endif\n\n        color *= _raster_color; // multiplied to tint texture color\n    #endif\n\n    // Apply line texture\n    #ifdef TANGRAM_EXTRUDE_LINES\n    { // enclose in scope to avoid leakage of internal variables\n        if (u_has_line_texture) {\n            vec2 _line_st = vec2(v_texcoord.x, fract(v_texcoord.y / u_texture_ratio));\n            vec4 _line_color = texture2D(u_texture, _line_st);\n\n            if (_line_color.a < TANGRAM_ALPHA_TEST) {\n                #if defined(TANGRAM_BLEND_OPAQUE)\n                    // use discard when alpha blending is unavailable\n                    if (u_dash_background_color.a < 1. - TANGRAM_EPSILON) {\n                        discard;\n                    }\n                    color = vec4(u_dash_background_color.rgb, 1.); // only allow full alpha in opaque blend mode\n                #else\n                    // use alpha channel when blending is available\n                    color = vec4(u_dash_background_color.rgb, color.a * step(TANGRAM_EPSILON, u_dash_background_color.a));\n                #endif\n            }\n            else {\n                color *= _line_color;\n            }\n        }\n    }\n    #endif\n\n    // First, get normal from raster tile (if applicable)\n    #ifdef TANGRAM_RASTER_TEXTURE_NORMAL\n        normal = normalize(sampleRaster(0).rgb * 2. - 1.);\n    #endif\n\n    // Second, alter normal with normal map texture (if applicable)\n    #if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\n        calculateNormal(normal);\n    #endif\n\n    // Normal modification applied here for fragment lighting or no lighting,\n    // and in vertex shader for vertex lighting\n    #if !defined(TANGRAM_LIGHTING_VERTEX)\n        #pragma tangram: normal\n    #endif\n\n    // Color modification before lighting is applied\n    #pragma tangram: color\n\n    #if defined(TANGRAM_LIGHTING_FRAGMENT)\n        // Calculate per-fragment lighting\n        color = calculateLighting(v_position.xyz - u_eye, normal, color);\n    #elif defined(TANGRAM_LIGHTING_VERTEX)\n        // Apply lighting intensity interpolated from vertex shader\n        color *= v_lighting;\n    #endif\n\n    // Post-processing effects (modify color after lighting)\n    #pragma tangram: filter\n\n    gl_FragColor = color;\n}\n",na=Object.create(mo);Object.assign(na,{name:"polygons",built_in:!0,vertex_shader_src:ta,fragment_shader_src:ea,selection:!0,init:function(){mo.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_TEXTURE_COORDS=this.texcoords},_parseFeature:function(t,e,n){var r=this.feature_style;return r.color=this.parseColor(e.color,n),r.color?(r.alpha=ji.evalCachedProperty(e.alpha,n),r.variant=e.variant,r.z=ji.evalCachedDistanceProperty(e.z,n)||ji.defaults.z,r.z*=ai.height_scale,r.extrude=ji.evalProperty(e.extrude,n),r.extrude&&(!0===r.extrude?(r.height=t.properties.height||ji.defaults.height,r.min_height=t.properties.min_height||ji.defaults.min_height):"number"==typeof r.extrude?(r.height=r.extrude,r.min_height=0):Array.isArray(r.extrude)&&(r.min_height=r.extrude[0],r.height=r.extrude[1]),r.height*=ai.height_scale,r.min_height*=ai.height_scale),r.tile_edges=e.tile_edges,r):null},_preprocess:function(t){return t.color=ji.createColorPropertyCache(t.color),t.alpha=ji.createPropertyCache(t.alpha),t.z=ji.createPropertyCache(t.z,ji.parseUnits),this.computeVariant(t),t},computeVariant:function(t){var e=t.interactive?1:0,n=null!=t.extrude?1:0,r=this.texcoords?1:0,i=this.getBlendOrderForDraw(t),o=[e,n,r,i].join("/");t.variant=o,null==this.variants[o]&&(this.variants[o]={key:o,blend_order:i,mesh_order:0,selection:e,normal:n,texcoords:r})},vertexLayoutForMeshVariant:function(t){if(null==this.vertex_layouts[t.key]){var e=[{name:"a_position",size:4,type:Xi.SHORT,normalized:!1},{name:"a_normal",size:3,type:Xi.BYTE,normalized:!0,static:t.normal?null:[0,0,1]},{name:"a_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0,static:t.selection?null:[0,0,0,0]},{name:"a_texcoord",size:2,type:Xi.UNSIGNED_SHORT,normalized:!0,static:t.texcoords?null:[0,0]}];this.addCustomAttributesToAttributeList(e),this.vertex_layouts[t.key]=new To(e)}return this.vertex_layouts[t.key]},meshVariantTypeForDraw:function(t){return this.variants[t.variant]},makeVertexTemplate:function(t,e){var n=0;return this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=t.z||0,this.vertex_template[n++]=this.scaleOrder(t.order),e.variant.normal&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=127),this.vertex_template[n++]=255*t.color[0],this.vertex_template[n++]=255*t.color[1],this.vertex_template[n++]=255*t.color[2],this.vertex_template[n++]=255*(null!=t.alpha?t.alpha:t.color[3]),e.variant.selection&&(this.vertex_template[n++]=255*t.selection_color[0],this.vertex_template[n++]=255*t.selection_color[1],this.vertex_template[n++]=255*t.selection_color[2],this.vertex_template[n++]=255*t.selection_color[3]),e.variant.texcoords&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.addCustomAttributesToVertexTemplate(t,n),this.vertex_template},buildPolygons:function(t,e,n){var r=this.getTileMesh(n.tile,this.meshVariantTypeForDraw(e)),i=r.vertex_data,o=i.vertex_layout,a=this.makeVertexTemplate(e,r),s={texcoord_index:o.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!e.tile_edges,tile_edge_tolerance:ai.tile_scale*n.tile.pad_scale*4,winding:n.winding};return e.extrude&&e.height?function(t,e,n,r,i,o,a,s,u){var l=u.remove_tile_edges,c=u.tile_edge_tolerance,h=u.texcoord_index,f=u.texcoord_scale,d=u.texcoord_normalize,p=u.winding,m=e+(r||0),g=e+n;o[2]=g;var v=Qo(t,i,o,{texcoord_index:h,texcoord_scale:f,texcoord_normalize:d}),_=i.vertex_elements,y=i.vertex_count;if(h){d=d||1;var b=f||So,x=b[0],w=b[1],T=b[2],A=b[3],S=[[x,A],[x,w],[T,w],[T,A]]}for(var E=t.length,k=0;k<E;k++)for(var M=t[k],O=0;O<M.length;O++)for(var P=M[O],z=0;z<P.length-1;z++)if(!l||!Eo(P[z],P[z+1],c)){var R=void 0,L=void 0;"CCW"===p?(R=z,L=z+1):(R=z+1,L=z);var C=[[P[L][0],P[L][1],g],[P[L][0],P[L][1],m],[P[R][0],P[R][1],m],[P[R][0],P[R][1],g]],j=to.normalize([P[L][0]-P[R][0],P[L][1]-P[R][1],0]),I=to.cross(Jo,j);o[a+0]=127*I[0],o[a+1]=127*I[1],o[a+2]=127*I[2];for(var N=0;N<C.length;N++)o[0]=C[N][0],o[1]=C[N][1],o[2]=C[N][2],h&&(o[h+0]=S[N][0]*d,o[h+1]=S[N][1]*d),i.addVertex(o);_.push(y+0),_.push(y+1),_.push(y+2),_.push(y+2),_.push(y+3),_.push(y+0),y+=4,v+=2}return v}(t,e.z,e.height,e.min_height,i,a,o.index.a_normal,0,s):Qo(t,i,a,s)}});var ra=/"/g,ia=function(t,e,n,r){var i=String(P(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(ra,"&quot;")+'"'),o+">"+i+"</"+e+">"},oa=function(t,e){var n={};n[t]=e(ia),D(D.P+D.F*h((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)};oa("sub",(function(t){return function(){return t(this,"sub","","")}}));var aa=[0,0],sa={butt:0,square:1,round:2},ua={miter:0,bevel:1,round:2},la=ai.tile_scale,ca=[0,0],ha=[1,0],fa=[.5,0];function da(t,e){if(!(t.length<2)){var n,r,i,o,a=e.join_type,s=e.cap_type,u=e.closed_polygon,l=e.remove_tile_edges,c=e.tile_edge_tolerance,h=e.v_scale,f=e.miter_len_sq,d=null!=e.texcoord_index,p=0;if(u&&a===ua.miter){var m=function(t){if(ko(t[0]))return 0;for(var e=0;e<t.length;e++)if(ko(t[t.length-1-e]))return t.length-1-e;return 0}(t);if(0!==m){var g=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=(r+e)%t.length;0!==i&&n.push(t[i])}return n.push(n[0]),n}(t,m);return e.extra_lines=e.extra_lines||[],void e.extra_lines.push(g)}}var v=0,_=t.length-1,y=0;for(n=t[v],r=t[v+1];to.isEqual(n,r);)if(n=r,r=t[++v+1],y++,v===t.length-1)return;for(;to.isEqual(t[_],t[_-1]);)if(y++,0==--_)return;if(!(t.length<2+y))if(o=to.normalize(to.perp(n,r)),l&&Eo(n,r,c)){var b=pa(t,v,c);b&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(b))}else{u?function(t,e,n,r,i){void 0===r||ko(t)?(ya(t,n,n,1,0,i,1),ya(t,n,n,0,0,i,-1)):r===ua.miter?ga(0,t,e,n,i.miter_len_sq,!0,i):va(r,0,t,e,n,!0,i)}(n,i=to.normalize(to.perp(t[_-1],n)),o,a,e):(ko(n)||(wa(n,p,o,s,!0,e),d&&s!==sa.butt&&(p+=.5*h*e.texcoord_width)),ya(n,o,o,1,p,e,1),ya(n,o,o,0,p,e,-1)),d&&(p+=h*to.length(to.sub(r,n)));for(var x=v+1;x<_;x++){var w=x,T=x+1;if(n=t[w],r=t[T],!to.isEqual(n,r)){if(l&&Eo(n,r,c)){ya(n,o,o,1,p,e,1),ya(n,o,o,0,p,e,-1),_a(1,e);var A=pa(t,w+1,c);return void(A&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(A)))}i=o,o=to.normalize(to.perp(n,r)),a===ua.miter?ga(p,n,i,o,f,!1,e):va(a,p,n,i,o,!1,e),d&&(p+=h*to.length(to.sub(r,n)))}}n=r,i=o,u?function(t,e,n,r,i,o){if(ko(t))ya(t,e,e,1,i,o,1),ya(t,e,e,0,i,o,-1),_a(1,o);else{var a=ma(e,n);r===ua.miter&&to.lengthSq(a)>o.miter_len_sq&&(r=ua.bevel),r===ua.miter?(ya(t,a,e,1,i,o,1),ya(t,a,e,0,i,o,-1),_a(1,o)):(ya(t,e,e,1,i,o,1),ya(t,e,e,0,i,o,-1),_a(1,o))}}(n,i,o=to.normalize(to.perp(n,t[1])),a,p,e):(ya(n,i,o,1,p,e,1),ya(n,i,o,0,p,e,-1),_a(1,e),ko(n)||wa(n,p,i,s,!1,e))}}}function pa(t,e,n){for(var r=e;t[r+1]&&Eo(t[r],t[r+1],n);)r++;return t.length-r>=2&&t.slice(r)}function ma(t,e){var n=to.normalize(to.add(t,e)),r=2/(1+Math.abs(to.dot(t,n)));return to.mult(n,r*r)}function ga(t,e,n,r,i,o,a){var s=ma(n,r);to.lengthSq(s)>i?va(ua.bevel,t,e,n,r,o,a):(ya(e,s,s,1,t,a,1),ya(e,s,s,0,t,a,-1),o||_a(1,a))}function va(t,e,n,r,i,o,a){var s=ma(r,i),u=i[0]*r[1]-i[1]*r[0]>0;null!=a.texcoord_index&&(ca[1]=e,ha[1]=e),u?(ya(n,s,s,1,e,a,1),ya(n,r,s,0,e,a,-1),o||_a(1,a),xa(n,to.neg(r),s,to.neg(i),s,ca,ha,ca,!1,t===ua.bevel,a),ya(n,s,s,1,e,a,1),ya(n,i,s,0,e,a,-1)):(ya(n,r,s,1,e,a,1),ya(n,s,s,0,e,a,-1),o||_a(1,a),xa(n,r,to.neg(s),i,s,ha,ca,ha,!1,t===ua.bevel,a),ya(n,i,s,1,e,a,1),ya(n,s,s,0,e,a,-1))}function _a(t,e){for(var n=e.vertex_data.vertex_elements,r=e.vertex_data.vertex_count-2*t-2,i=0;i<t;i++)n.push(r+2*i+2),n.push(r+2*i+1),n.push(r+2*i+0),n.push(r+2*i+2),n.push(r+2*i+3),n.push(r+2*i+1),e.geom_count+=2}function ya(t,e,n,r,i,o,a){var s=o.vertex_template,u=o.vertex_data;s[0]=t[0],s[1]=t[1];var l=o.half_width*a;s[o.extrude_index+0]=e[0]*l,s[o.extrude_index+1]=e[1]*l,o.offset&&(s[o.offset_index+0]=n[0]*o.offset,s[o.offset_index+1]=n[1]*o.offset),null!=o.texcoord_index&&(s[o.texcoord_index+0]=65535*r,s[o.texcoord_index+1]=65535*i),u.addVertex(s)}var ba=[0,0];function xa(t,e,n,r,i,o,a,s,u,l,c){for(var h=e[0]*r[1]-e[1]*r[0],f=to.dot(e,r),d=Math.atan2(h,f);d>=Math.PI;)d-=2*Math.PI;if(l)p=1;else{var p=function(t,e){t<0&&(t=-t);var n=e>10?Math.log2(e/5):1;return Math.ceil(t/Math.PI*n)}(d,c.half_width);if(p<1)return}var m=c.vertex_data.vertex_count,g=c.vertex_data.vertex_elements;ya(t,n,i,a[0],a[1],c,1),ya(t,e,i,o[0],o[1],c,1);var v=e,_=null!=c.texcoord_index;if(_)if(u)var y=to.sub(o,a);else{ba=to.copy(o);var b=to.div(to.sub(s,o),p)}var x,w,T=d/p,A=d<0?-1:1;h>0?(x=2,w=1):(x=1,w=2);for(var S=0;S<p;S++)0===S&&d<0&&(v=to.neg(v)),v=to.rot(v,T),_&&(u?(y=to.rot(y,T),ba[0]=y[0]+a[0],ba[1]=y[1]*c.texcoord_width*c.v_scale+a[1]):ba=to.add(ba,b)),ya(t,v,i,ba[0],ba[1],c,A),g.push(m+S+x),g.push(m),g.push(m+S+w)}function wa(t,e,n,r,i,o){var a=to.neg(n),s=null!=o.texcoord_index;switch(r){case sa.square:var u;i?(u=[n[1],-n[0]],ya(t,to.add(n,u),n,1,e,o,1),ya(t,to.add(a,u),n,0,e,o,1),s&&(e+=.5*o.texcoord_width*o.v_scale),ya(t,n,n,1,e,o,1),ya(t,a,n,0,e,o,1)):(u=[-n[1],n[0]],ya(t,n,n,1,e,o,1),ya(t,a,n,0,e,o,1),s&&(e+=.5*o.texcoord_width*o.v_scale),ya(t,to.add(n,u),n,1,e,o,1),ya(t,to.add(a,u),n,0,e,o,1)),_a(1,o);break;case sa.round:var l,c,h=ca,f=ha,d=fa;i?(l=n,c=a,s&&(e+=.5*o.texcoord_width*o.v_scale,h=ha,f=ca,d=fa)):(l=a,c=n),s&&(ca[1]=e,ha[1]=e,fa[1]=e),xa(t,l,aa,c,n,h,d,f,!0,!1,o);break;case sa.butt:return}}var Ta=[255,255,255,255],Aa=[0,0,0,0],Sa=Object.create(mo);Object.assign(Sa,{name:"lines",built_in:!0,vertex_shader_src:ta,fragment_shader_src:ea,selection:!0,init:function(){mo.init.apply(this,arguments),this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style,this.dash_textures={}},calcDistance:function(t,e){return ji.evalCachedDistanceProperty(t,e)||0},calcDistanceNextZoom:function(t,e){e.zoom++;var n=this.calcDistance(t,e);return e.zoom--,n},calcWidth:function(t,e,n){var r=this.calcDistance(t.width,n);if(!(r<0)){var i;if(i=t.next_width?this.calcDistanceNextZoom(t.next_width,n):r/2,0===r&&0===i||i<0)return!1;if(e.width_unscaled=r,e.next_width_unscaled=i,t.next_width){var o=.5*(r+(i*=2));e.width=o*n.units_per_meter_overzoom,e.width_scale=1-i/o}else e.width=r*n.units_per_meter_overzoom,e.width_scale=0;return t.texcoords&&(t.inline_texcoord_width?e.texcoord_width=t.inline_texcoord_width:e.texcoord_width=(e.width_unscaled||e.next_width_unscaled)*n.units_per_meter_overzoom/n.tile.overzoom2),!0}},calcOffset:function(t,e,n){if(t.offset_precalc)e.offset=t.offset_precalc,e.offset_scale=t.offset_scale_precalc;else if(t.offset){var r=this.calcDistance(t.offset,n);if(t.next_offset){var i=2*this.calcDistanceNextZoom(t.next_offset,n);Math.abs(r)>=Math.abs(i)?(e.offset=r*n.units_per_meter_overzoom,e.offset_scale=0!==r?1-i/r:0):(e.offset=i*n.units_per_meter_overzoom,e.offset_scale=0!==i?-1*(1-r/i):0)}else e.offset=r*n.units_per_meter_overzoom,e.offset_scale=0}else e.offset=0,e.offset_scale=0},_parseFeature:function(t,e,n){var r=this.feature_style;if(!1!==this.calcWidth(e,r,n)&&(this.calcOffset(e,r,n),r.color=this.parseColor(e.color,n),r.color)){if(r.alpha=ji.evalCachedProperty(e.alpha,n),r.variant=e.variant,r.z=ji.evalCachedDistanceProperty(e.z,n)||ji.defaults.z,r.height=t.properties.height||ji.defaults.height,r.extrude=ji.evalProperty(e.extrude,n),r.extrude&&("number"==typeof r.extrude?r.height=r.extrude:Array.isArray(r.extrude)&&(r.height=r.extrude[1])),r.extrude&&r.height&&(r.z+=r.height),r.z*=ai.height_scale,r.cap=e.cap,r.join=e.join,r.miter_limit=e.miter_limit,r.tile_edges=e.tile_edges,r.outline=r.outline||{width:{},next_width:{},preprocessed:!0},e.outline&&!1!==e.outline.visible&&e.outline.color&&e.outline.width){var i=2*this.calcDistance(e.outline.width,n),o=2*this.calcDistanceNextZoom(e.outline.next_width,n);0===i&&0===o||i<0||o<0?(r.outline.width.value=null,r.outline.next_width.value=null,r.outline.color=null,r.outline.inline_texcoord_width=null,r.outline.texcoords=!1):(r.outline.width.value=i+r.width_unscaled,r.outline.next_width.value=o+r.next_width_unscaled,r.outline.inline_texcoord_width=r.texcoord_width,r.outline.offset_precalc=r.offset,r.outline.offset_scale_precalc=r.offset_scale,r.outline.color=e.outline.color,r.outline.alpha=e.outline.alpha,r.outline.interactive=e.outline.interactive,r.outline.cap=e.outline.cap,r.outline.join=e.outline.join,r.outline.miter_limit=e.outline.miter_limit,r.outline.texcoords=e.outline.texcoords,r.outline.style=e.outline.style,r.outline.variant=e.outline.variant,e.outline.order?r.outline.order=this.parseOrder(e.outline.order,n):r.outline.order=r.order,r.outline.order>r.order&&(r.outline.order=r.order),r.outline.order-=.5)}else r.outline.width.value=null,r.outline.next_width.value=null,r.outline.color=null,r.outline.inline_texcoord_width=null;return r}},_preprocess:function(t){if(t.color=ji.createColorPropertyCache(t.color),t.alpha=ji.createPropertyCache(t.alpha),t.width=ji.createPropertyCache(t.width,ji.parseUnits),t.width&&t.width.type!==ji.CACHE_TYPE.STATIC&&(t.next_width=ji.createPropertyCache(t.width,ji.parseUnits)),t.offset=t.offset&&ji.createPropertyCache(t.offset,ji.parseUnits),t.offset&&t.offset.type!==ji.CACHE_TYPE.STATIC&&(t.next_offset=ji.createPropertyCache(t.offset,ji.parseUnits)),t.z=ji.createPropertyCache(t.z,ji.parseUnits),t.dash=void 0!==t.dash?t.dash:this.dash,t.dash_key=t.dash&&this.dashTextureKey(t.dash),t.dash_background_color=void 0!==t.dash_background_color?t.dash_background_color:this.dash_background_color,t.dash_background_color=t.dash_background_color&&ji.parseColor(t.dash_background_color),t.texture_merged=t.dash_key||(void 0!==t.texture?t.texture:this.texture),t.texcoords=this.texcoords||t.texture_merged?1:0,this.computeVariant(t),t.outline){t.outline.is_outline=!0,t.outline.style=t.outline.style||this.name,t.outline.color=ji.createColorPropertyCache(t.outline.color),t.outline.alpha=ji.createPropertyCache(t.outline.alpha),t.outline.width=ji.createPropertyCache(t.outline.width,ji.parseUnits),t.outline.next_width=ji.createPropertyCache(t.outline.width,ji.parseUnits),t.outline.interactive=null!=t.outline.interactive?t.outline.interactive:t.interactive,t.outline.cap=t.outline.cap||t.cap,t.outline.join=t.outline.join||t.join,t.outline.miter_limit=null!=t.outline.miter_limit?t.outline.miter_limit:t.miter_limit,t.outline.offset=t.offset;var e=this.styles[t.outline.style];e?(t.outline.dash=void 0!==t.outline.dash?t.outline.dash:e.dash,t.outline.texture=void 0!==t.outline.texture?t.outline.texture:e.texture,null!=t.outline.dash?(t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash),t.outline.texture_merged=t.outline.dash_key):null===t.outline.dash?(t.outline.dash_key=null,t.outline.texture_merged=t.outline.texture):null!=t.outline.texture?(t.outline.dash_key=null,t.outline.texture_merged=t.outline.texture):(t.outline.dash=t.dash,t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash),t.outline.texture_merged=t.outline.dash_key),t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:e.dash_background_color,t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:t.dash_background_color,t.outline.dash_background_color=t.outline.dash_background_color&&ji.parseColor(t.outline.dash_background_color),t.outline.texcoords=e.texcoords||t.outline.texture_merged?1:0,void 0===t.outline.blend_order&&null!=t.blend_order&&(t.outline.blend_order=t.blend_order),e.computeVariant(t.outline)):(Jn({level:"warn",once:!0},"Layer group '"+t.layers.join(", ")+"': line 'outline' specifies non-existent draw style '"+t.outline.style+"' (or maybe the style is defined but is missing a 'base' or has another error), skipping outlines for features matching this layer group"),t.outline=null)}return t},dashTextureKey:function(t){return"__dash_"+JSON.stringify(t)},getDashTexture:function(t){var e=this.dashTextureKey(t);if(null==this.dash_textures[e]){this.dash_textures[e]=!0;var n=function(t,e){void 0===e&&(e={});var n=e.dash_color||Ta,r=e.background_color||Aa,i=t,o=e.scale||1;i.length%2==1&&Array.prototype.push.apply(i,i);for(var a=!0,s=[],u=0;u<i.length;u++){for(var l=Math.floor(i[u]*o),c=0;c<l;c++)Array.prototype.push.apply(s,a?n:r);a=!a}return s.reverse(),{pixels:s=new Uint8Array(s),length:s.length/4}}(t,{scale:20});Gr.create(this.gl,e,{data:n.pixels,height:n.length,width:1,filtering:"nearest"})}},endData:function(t){return new Promise(function(e,n){var r,i,o,a;return r=this,Promise.resolve(mo.endData.call(this,t)).then(function(t){try{var s=function(){return e(i)};if(i=t){var u=function t(){return d.length?(h=d.shift(),Promise.resolve(a(h)).then((function(e){try{return t}catch(e){return n(e)}}),n)):[1]},l=function(){return Promise.resolve(Promise.all(o)).then(function(t){try{return s.call(this)}catch(t){return n(t)}}.bind(this),n)};i.uniforms.u_has_line_texture=!1,i.uniforms.u_texture=Gr.default,i.uniforms.u_v_scale_adjust=ai.tile_scale,o=[],a=function(t){return new Promise((function(e,n){var a,s,u;if((a=i.meshes[t].variant).texture){var l=function(){return null==Gr.textures[a.texture]?o.push(Gr.syncTexturesToWorker([a.texture]).then((function(t){var e=t[a.texture];e&&(s.u_texture_ratio=e.height/e.width)}))):(u=Gr.textures[a.texture],s.u_texture_ratio=u.height/u.width),f.call(this)};if((s=i.meshes[t].uniforms=i.meshes[t].uniforms||{}).u_has_line_texture=!0,s.u_texture=a.texture,s.u_texture_ratio=1,a.dash&&(s.u_v_scale_adjust=20*ai.tile_scale,s.u_dash_background_color=a.dash_background_color||[0,0,0,0]),a.dash_key&&null==r.dash_textures[a.dash_key]){r.dash_textures[a.dash_key]=!0;var c=function(){try{return l.call(this)}catch(t){return n(t)}}.bind(this),h=function(t){try{return Jn("trace",r.name+": line dash texture create failed because style no longer on main thread"),c()}catch(t){return n(t)}};try{return Promise.resolve(Zn.postMessage(r.main_thread_target+".getDashTexture",a.dash)).then((function(t){try{return c()}catch(t){return h()}}),h)}catch(t){h()}}return l.call(this)}function f(){return e()}return f.call(this)}))};var c,h,f,d=[];for(c in i.meshes)d.push(c);return(f=function(t){for(;t;){if(t.then)return void t.then(f,n);try{if(t.pop){if(t.length)return t.pop()?l.call(this):t;t=u}else t=t.call(this)}catch(t){return n(t)}}}.bind(this))(u)}return s.call(this)}catch(t){return n(t)}}.bind(this),n)}.bind(this))},computeVariant:function(t){var e=t.offset?1:0;e+="/"+t.texcoords,e+="/"+(t.interactive?1:0),e+="/"+(t.extrude||t.z?1:0),e+="/"+t.is_outline,t.dash_key&&(e+=t.dash_key,t.dash_background_color&&(e+=t.dash_background_color)),t.texture_merged&&(e+=t.texture_merged);var n=this.getBlendOrderForDraw(t);e=Xr(e+="/"+n),t.variant=e,null==this.variants[e]&&(this.variants[e]={key:e,blend_order:n,mesh_order:t.is_outline?0:1,selection:t.interactive?1:0,offset:t.offset?1:0,z_or_offset:t.offset||t.extrude||t.z?1:0,texcoords:t.texcoords,texture:t.texture_merged,dash:t.dash,dash_key:t.dash_key,dash_background_color:t.dash_background_color})},vertexLayoutForMeshVariant:function(t){if(null==this.vertex_layouts[t.key]){var e=[{name:"a_position",size:4,type:Xi.SHORT,normalized:!1},{name:"a_extrude",size:2,type:Xi.SHORT,normalized:!1},{name:"a_offset",size:2,type:Xi.SHORT,normalized:!1,static:t.offset?null:[0,0]},{name:"a_z_and_offset_scale",size:2,type:Xi.SHORT,normalized:!1,static:t.z_or_offset?null:[0,0]},{name:"a_texcoord",size:2,type:Xi.UNSIGNED_SHORT,normalized:!0,static:t.texcoords?null:[0,0]},{name:"a_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0,static:t.selection?null:[0,0,0,0]}];this.addCustomAttributesToAttributeList(e),this.vertex_layouts[t.key]=new To(e)}return this.vertex_layouts[t.key]},meshVariantTypeForDraw:function(t){return this.variants[t.variant]},makeVertexTemplate:function(t,e){var n=0;return this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=1024*t.width_scale,this.vertex_template[n++]=this.scaleOrder(t.order),this.vertex_template[n++]=0,this.vertex_template[n++]=0,e.variant.offset&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),e.variant.z_or_offset&&(this.vertex_template[n++]=t.z||0,this.vertex_template[n++]=1024*t.offset_scale),e.variant.texcoords&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.vertex_template[n++]=255*t.color[0],this.vertex_template[n++]=255*t.color[1],this.vertex_template[n++]=255*t.color[2],this.vertex_template[n++]=255*(null!=t.alpha?t.alpha:t.color[3]),e.variant.selection&&(this.vertex_template[n++]=255*t.selection_color[0],this.vertex_template[n++]=255*t.selection_color[1],this.vertex_template[n++]=255*t.selection_color[2],this.vertex_template[n++]=255*t.selection_color[3]),this.addCustomAttributesToVertexTemplate(t,n),this.vertex_template},buildLines:function(t,e,n,r){if(this.feature_style=this.outline_feature_style,e.outline&&null!=e.outline.color&&null!=e.outline.width.value){var i=this.styles[e.outline.style];i&&i.addFeature(n.feature,e.outline,n)}this.feature_style=this.inline_feature_style;var o=this.getTileMesh(n.tile,this.meshVariantTypeForDraw(e)),a=o.vertex_data,s=a.vertex_layout;return function(t,e,n,r,i,o,a,s){var u,l=e.cap?sa[e.cap]:sa.butt,c=e.join?ua[e.join]:ua.miter;if(c===ua.miter)var h=e.miter_limit||3,f=h*h;i.a_texcoord&&(u=1/(e.texcoord_width*la));for(var d={closed_polygon:o,remove_tile_edges:a,tile_edge_tolerance:s,miter_len_sq:f,join_type:c,cap_type:l,vertex_data:n,vertex_template:r,half_width:e.width/2,extrude_index:i.a_extrude,offset_index:i.a_offset,v_scale:u,texcoord_index:i.a_texcoord,texcoord_width:e.texcoord_width,offset:e.offset,geom_count:0},p=0;p<t.length;p++)da(t[p],d);if(d.extra_lines)for(var m=0;m<d.extra_lines.length;m++)da(d.extra_lines[m],d);return d.geom_count}(t,e,a,this.makeVertexTemplate(e,o),s.index,r&&r.closed_polygon,!e.tile_edges&&r&&r.remove_tile_edges,ai.tile_scale*n.tile.pad_scale*2)},buildPolygons:function(t,e,n){for(var r=0,i=0;i<t.length;i++)r+=this.buildLines(t[i],e,n,{closed_polygon:!0,remove_tile_edges:!0});return r}}),D(D.P+D.F*h((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=ft(this),n=v(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}}),oa("anchor",(function(t){return function(e){return t(this,"a","name",e)}}));var Ea=128/Math.PI,ka=16384/Math.PI,Ma=[0,2,2,0],Oa=[1,1,3,3],Pa=new Array(4),za=["left","top-left","bottom-left"],Ra=["right","top-right","bottom-right"],La=["top","top-left","top-right"],Ca=["bottom","bottom-left","bottom-right"],ja={computeOffset:function(t,e,n,r){if(void 0===r&&(r=null),!n||"center"===n)return t;var i=[t[0],t[1]];return r=r||this.default_buffer,this.isLeftAnchor(n)?(i[0]-=e[0]/2,"left"===n&&(i[0]-=r[0])):this.isRightAnchor(n)&&(i[0]+=e[0]/2,"right"===n&&(i[0]+=r[1])),this.isTopAnchor(n)?(i[1]-=e[1]/2,"top"===n&&(i[1]-=r[2])):this.isBottomAnchor(n)&&(i[1]+=e[1]/2,"bottom"===n&&(i[1]+=r[3])),i},alignForAnchor:function(t){if(t&&"center"!==t){if(this.isLeftAnchor(t))return"right";if(this.isRightAnchor(t))return"left"}return"center"},isLeftAnchor:function(t){return za.indexOf(t)>-1},isRightAnchor:function(t){return Ra.indexOf(t)>-1},isTopAnchor:function(t){return La.indexOf(t)>-1},isBottomAnchor:function(t){return Ca.indexOf(t)>-1},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function Ia(t,e){return!(t[2]<e[0]||t[0]>e[2]||t[3]<e[1]||t[1]>e[3])}var Na,Da,Fa,Ba,Ua=[[1,0],[0,1]],Ga=[],Va=[],Za=function(){function t(t,e,n,r,i){this.dimension=[r/2,i/2],this.angle=n,this.centroid=[t,e],this.quad=null,this.axis_0=null,this.axis_1=null,this.update()}var e=t.prototype;return e.toJSON=function(){return{x:this.centroid[0],y:this.centroid[1],a:this.angle,w:this.dimension[0],h:this.dimension[1]}},e.getExtent=function(){return 0===this.angle?[this.quad[0],this.quad[1],this.quad[4],this.quad[5]]:[Math.min(this.quad[0],this.quad[2],this.quad[4],this.quad[6]),Math.min(this.quad[1],this.quad[3],this.quad[5],this.quad[7]),Math.max(this.quad[0],this.quad[2],this.quad[4],this.quad[6]),Math.max(this.quad[1],this.quad[3],this.quad[5],this.quad[7])]},e.updateAxes=function(){this.axis_0=to.normalize([this.quad[4]-this.quad[6],this.quad[5]-this.quad[7]]),this.axis_1=to.normalize([this.quad[4]-this.quad[2],this.quad[5]-this.quad[3]])},e.update=function(){var t=this.centroid,e=this.dimension[0],n=this.dimension[1];if(0===this.angle)this.quad=[t[0]-e,t[1]-n,t[0]+e,t[1]-n,t[0]+e,t[1]+n,t[0]-e,t[1]+n],this.axis_0=Ua[0],this.axis_1=Ua[1];else{var r=Math.cos(this.angle)*e,i=Math.sin(this.angle)*e,o=-Math.sin(this.angle)*n,a=Math.cos(this.angle)*n;this.quad=[t[0]-r-o,t[1]-i-a,t[0]+r-o,t[1]+i-a,t[0]+r+o,t[1]+i+a,t[0]-r+o,t[1]-i+a],this.updateAxes()}},t.projectToAxis=function(t,e,n){var r=t.quad;return Na=r[0]*e[0]+r[1]*e[1],Da=r[2]*e[0]+r[3]*e[1],Fa=r[4]*e[0]+r[5]*e[1],Ba=r[6]*e[0]+r[7]*e[1],n[0]=Math.min(Na,Da,Fa,Ba),n[1]=Math.max(Na,Da,Fa,Ba),n},t.axisCollide=function(e,n,r,i){return t.projectToAxis(e,r,Ga),t.projectToAxis(n,r,Va),!(Va[0]>Ga[1]||Va[1]<Ga[0]||(t.projectToAxis(e,i,Ga),t.projectToAxis(n,i,Va),Va[0]>Ga[1]||Va[1]<Ga[0]))},t.intersect=function(e,n){return t.axisCollide(e,n,e.axis_0,e.axis_1)&&t.axisCollide(e,n,n.axis_0,n.axis_1)},t}(),Wa=function(){function t(e,n){void 0===n&&(n={}),this.id=t.nextLabelId(),this.type="",this.size=e,this.layout=n,this.position=null,this.angle=0,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.offset=n.offset,this.unit_scale=this.layout.units_per_pixel,this.aabb=null,this.obb=null,this.align="center",this.throw_away=!1}var e=t.prototype;return e.toJSON=function(){return{id:this.id,type:this.type,obb:this.obb.toJSON(),position:this.position,angle:this.angle,size:this.size,offset:this.offset,breach:this.breach,may_repeat_across_tiles:this.may_repeat_across_tiles,layout:qa(this.layout)}},e.update=function(){this.align=this.layout.align||ja.alignForAnchor(this.anchor)},e.occluded=function(t,e){var n=this;void 0===e&&(e=null);var r=!1,i=t.aabb,o=t.obb;return i.length>0&&function(t,e,n){for(var r=0;r<e.length&&(!Ia(t,e[r])||null==n(r));r++);}(this.aabb,i,(function(t){if(!e||i[t]!==e.aabb)return 0===n.obb.angle&&0===o[t].angle?(r=!0,!0):Za.intersect(n.obb,o[t])?(r=!0,!0):void 0})),r},e.inTileBounds=function(){return this.aabb[0]>=0&&this.aabb[1]>-ai.tile_scale&&this.aabb[0]<ai.tile_scale&&this.aabb[1]<=0||this.aabb[2]>=0&&this.aabb[3]>-ai.tile_scale&&this.aabb[2]<ai.tile_scale&&this.aabb[3]<=0},e.mayRepeatAcrossTiles=function(){if(this.layout.collide)return!0;var t=this.layout.repeat_distance;return 0!==t&&(Math.abs(this.position[0])<t||Math.abs(this.position[0]-ai.tile_scale)<t||Math.abs(this.position[1])<t||Math.abs(-(this.position[1]-ai.tile_scale))<t)},e.discard=function(t,e){return void 0===e&&(e=null),!!this.throw_away||this.occluded(t,e)},t}();function qa(t){return{priority:t.priority,collide:t.collide,repeat_distance:t.repeat_distance,repeat_group:t.repeat_group,buffer:t.buffer,italic:t.italic}}Wa.add=function(t,e){if(t.placed=!0,t.aabb&&(e.aabb.push(t.aabb),e.obb.push(t.obb)),t.aabbs)for(var n=0;n<t.aabbs.length;n++)e.aabb.push(t.aabbs[n]),e.obb.push(t.obbs[n])},Wa.id=0,Wa.id_prefix=0,Wa.id_multiplier=0,Wa.nextLabelId=function(){return Wa.id_prefix+Wa.id++*Wa.id_multiplier},Wa.epsilon=.9999;var Ha=function(){function t(t,e){this.key=t,this.repeat_dist=e,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}var e=t.prototype;return e.check=function(t){for(var e=t.position,n=0;n<this.positions.length;n++){var r=this.positions[n],i=e[0]-r[0],o=e[1]-r[1];if(i*i+o*o<this.repeat_dist_sq)return!0}},e.add=function(t){t&&t.position&&this.positions.push(t.position)},t.clear=function(t){this.groups[t]={}},t.check=function(t,e,n){if(e.repeat_distance&&e.repeat_group&&this.groups[n][e.repeat_group])return this.groups[n][e.repeat_group].check(t)},t.add=function(e,n,r){n.repeat_distance&&n.repeat_group&&(null==this.groups[r][n.repeat_group]&&(this.groups[r][n.repeat_group]=new t(n.repeat_group,n.repeat_distance*n.repeat_scale)),this.groups[r][n.repeat_group].add(e))},t}();Ha.groups={};var Ya=function(){function t(t,e){this.anchor=t,this.span=e,this.cells={}}var e=t.prototype;return e.addLabel=function(t){var e=this;t.aabb&&this.addLabelBboxes(t,t.aabb),t.aabbs&&t.aabbs.forEach((function(n){return e.addLabelBboxes(t,n)}))},e.addLabelBboxes=function(t,e){var n=[Math.max(Math.floor((e[0]-this.anchor.x)/this.span),0),Math.max(Math.floor(-(e[1]-this.anchor.y)/this.span),0),Math.max(Math.floor((e[2]-this.anchor.x)/this.span),0),Math.max(Math.floor(-(e[3]-this.anchor.y)/this.span),0)];t.cells=[];for(var r=n[1];r<=n[3];r++){this.cells[r]=this.cells[r]||{};for(var i=n[0];i<=n[2];i++)this.cells[r][i]=this.cells[r][i]||{aabb:[],obb:[]},t.cells.push(this.cells[r][i])}},t}(),Xa={tiles:{},grid:null,initGrid:function(t){this.grid=null==t?null:new Ya(t.anchor,t.span)},startTile:function(t,e){var n=void 0===e?{}:e,r=n.apply_repeat_groups,i=void 0===r||r,o=n.return_hidden,a=void 0!==o&&o,s=this.tiles[t]={bboxes:{aabb:[],obb:[]},objects:{},labels:{},styles:{},repeat:i,return_hidden:a};null==s.complete&&(s.complete=new Promise((function(t,e){s.resolve=t,s.reject=e})))},resetTile:function(t){delete this.tiles[t]},abortTile:function(t){this.tiles[t]&&this.tiles[t].resolve&&this.tiles[t].resolve([]),this.resetTile(t)},addStyle:function(t,e){this.tiles[e].styles[t]=!0},collide:function(t,e,n){var r=this.tiles[n];if(!r)return Jn("trace","Collision.collide() called with null tile",n,this.tiles,e,t),Promise.resolve([]);for(var i=r.objects,o=0;o<t.length;o++){var a=t[o],s=a.label.layout.priority;i[s]=i[s]||{},i[s][e]=i[s][e]||[],i[s][e].push(a)}return delete r.styles[e],0===Object.keys(r.styles).length&&this.endTile(n),r.complete.then((function(){return r.resolve=null,r.labels[e]||[]}))},endTile:function(t){var e=this.tiles[t],n=e.labels;this.grid&&this.addLabelsToGrid(t),e.repeat&&Ha.clear(t);for(var r=Object.keys(e.objects).sort((function(t,e){return t-e})),i=0;i<r.length;i++){var o=e.objects[r[i]];if(o)for(var a in o){var s=o[a];n[a]=n[a]||[];for(var u=0;u<s.length;u++){var l=s[u];this.canBePlaced(l,t,l.linked,e)?l.linked?this.canBePlaced(l.linked,t,l,e)?(l.show=!0,(l.label.breach||l.linked.label.breach)&&(l.label.breach=!0,l.linked.label.breach=!0),(l.label.may_repeat_across_tiles||l.linked.label.may_repeat_across_tiles)&&(l.label.may_repeat_across_tiles=!0,l.linked.label.may_repeat_across_tiles=!0),n[a].push(l),this.place(l,t,e),this.place(l.linked,t,e)):e.return_hidden&&(l.show=!1,n[a].push(l)):(l.show=!0,n[a].push(l),this.place(l,t,e)):e.return_hidden&&(l.show=!1,n[a].push(l))}}}delete this.tiles[t],e.resolve()},addLabelsToGrid:function(t){var e=this,n=this.tiles[t];for(var r in n.objects){var i=n.objects[r];if(i)for(var o in i)i[o].forEach((function(t){return e.grid.addLabel(t.label)}))}},canBePlaced:function(t,e,n,r){void 0===n&&(n=null);var i=(void 0===r?{}:r).repeat,o=void 0===i||i,a=t.label,s=t.label.layout;if(null!=a.placed)return a.placed;var u=!s.collide;if(u||(u=this.grid&&a.cells?a.cells.reduce((function(t,e){return t&&a.discard(e,n&&n.label)&&(t=!1),t}),!0):!a.discard(this.tiles[e].bboxes,n&&n.label)),u){if(!o||!Ha.check(a,s,e))return!0;a.placed=!1}else s.collide&&(a.placed=!1);return a.placed},place:function(t,e,n){var r=t.label,i=n.repeat,o=void 0===i||i;null==r.placed&&(o&&Ha.add(r,r.layout,e),this.grid&&r.cells?r.cells.forEach((function(t){return Wa.add(r,t)})):Wa.add(r,this.tiles[e].bboxes))}},$a=function(t){function e(e,n,r,i){var o;return void 0===i&&(i=0),(o=t.call(this,n,r)||this).type="point",o.position=[e[0],e[1]],o.angle=i,o.parent=o.layout.parent,o.update(),o.start_anchor_index=1,o.degenerate=!(o.size[0]||o.size[1]||o.layout.buffer[0]||o.layout.buffer[1]),o.throw_away=!1,o}Rn(e,t);var n=e.prototype;return n.update=function(){t.prototype.update.call(this),this.computeOffset(),this.updateBBoxes()},n.computeOffset=function(){if(this.offset=[this.layout.offset[0],this.layout.offset[1]],this.parent){var t=this.parent;this.offset=ja.computeOffset(this.offset,t.size,t.anchor,ja.zero_buffer),this.offset=ja.computeOffset(this.offset,t.size,this.anchor,ja.zero_buffer),t.offset!==ji.zeroPair&&(this.offset===ji.zeroPair?this.offset=t.offset:(this.offset[0]+=t.offset[0],this.offset[1]+=t.offset[1]))}this.offset=ja.computeOffset(this.offset,this.size,this.anchor)},n.updateBBoxes=function(){var t=(this.size[0]+2*this.layout.buffer[0])*this.unit_scale*Wa.epsilon,e=(this.size[1]+2*this.layout.buffer[1])*this.unit_scale*Wa.epsilon;this.layout.italic&&(t+=5*this.unit_scale),this.obb=new Za(this.position[0]+this.offset[0]*this.unit_scale,this.position[1]-this.offset[1]*this.unit_scale,-this.angle,t,e),this.aabb=this.obb.getExtent(),this.inTileBounds&&(this.breach=!this.inTileBounds()),this.mayRepeatAcrossTiles&&(this.may_repeat_across_tiles=this.mayRepeatAcrossTiles())},n.discard=function(e,n){if(void 0===n&&(n=null),this.degenerate)return!1;if(t.prototype.discard.call(this,e,n)){if(Array.isArray(this.layout.anchor))for(var r=this.start_anchor_index;r<this.layout.anchor.length;r++)if(this.anchor=this.layout.anchor[r],this.update(),!t.prototype.discard.call(this,e,n))return!1;return!0}return!1},e}(Wa);$a.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var Ka=$a.PLACEMENT;function Ja(t,e,n){var r=[],i=n.placement,o=Math.max(e[0],e[1])*n.placement_min_length_ratio*n.units_per_pixel;if(i===Ka.SPACED){var a=function(t,e,n){var r=n.units_per_pixel,i=(n.placement_spacing||80)*r,o=function(t){for(var e=0,n=0;n<t.length-1;n++)e+=ts(t[n],t[n+1]);return e}(t);if(o<=e)return!1;for(var a=Math.max(Math.floor(o/i),1),s=[],u=[],l=.5*(o-(a-1)*i),c=0;c<a;c++){var h=es(t,l,e,n),f=h.position,d=h.angle;null!=f&&null!=d&&(s.push(f),u.push(d)),l+=i}return{positions:s,angles:u}}(t,o,n);if(!a)return[];for(var s=a.positions,u=a.angles,l=0;l<s.length;l++){var c=s[l],h=u[l];!0!==n.tile_edges&&ko(c)||r.push(new $a(c,e,n,h))}}else if(i===Ka.VERTEX){for(var f,d,p=0;p<t.length-1;p++)if(f=t[p],d=t[p+1],!0===n.tile_edges||!ko(f)){var m=Qa(f,d,n.angle);r.push(new $a(f,e,n,m))}var g=Qa(f,d,n.angle);r.push(new $a(d,e,n,g))}else if(i===Ka.MIDPOINT)for(var v=0;v<t.length-1;v++){var _=t[v],y=t[v+1],b=[.5*(_[0]+y[0]),.5*(_[1]+y[1])];if((!0===n.tile_edges||!ko(b))&&(!o||ts(_,y)>o)){var x=Qa(_,y,n.angle);r.push(new $a(b,e,n,x))}}return r}function Qa(t,e,n){return void 0===n&&(n=0),"auto"===n?Math.atan2(e[0]-t[0],e[1]-t[1]):n}function ts(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function es(t,e,n,r){for(var i,o,a=0,s=0;s<t.length-1;s++){var u=t[s],l=t[s+1],c=ts(u,l);if(!(c<=n)&&(a+=c)>e){i=ns(u,l,a-e),o=Qa(u,l,r.angle);break}}return{position:i,angle:o}}function ns(t,e,n){var r=n/ts(t,e);return[r*t[0]+(1-r)*e[0],r*t[1]+(1-r)*e[1]]}var rs={key:function(t){return[t.style,t.weight,t.family,t.px_size,t.fill,t.stroke,t.stroke_width,t.transform,t.text_wrap,t.max_lines,t.supersample,nr.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",fill_array:[1,1,1,1],text_wrap:15,max_lines:5,align:"center"},compute:function(t,e,n){var r={};e.font=e.font||this.defaults,r.can_articulate=e.can_articulate,r.fill=e.font.fill&&ji.evalCachedColorProperty(e.font.fill,n);var i=ji.evalCachedProperty(e.font.alpha,n);if(null!=i&&(r.fill=[].concat(r.fill?r.fill:this.defaults.fill_array),r.fill[3]=i),r.fill=r.fill&&nr.toCSSColor(r.fill)||this.defaults.fill,r.style=e.font.style||this.defaults.style,r.weight=e.font.weight||this.defaults.weight,e.font.family?(r.family=e.font.family,r.family!==this.defaults.family&&(r.family+=", "+this.defaults.family)):r.family=this.defaults.family,r.transform=e.font.transform,r.supersample=e.supersample_text?1.5:1,r.px_size=ji.evalCachedProperty(e.font.px_size,n)*r.supersample,e.font.stroke&&e.font.stroke.color){if(r.stroke=ji.evalCachedColorProperty(e.font.stroke.color,n),r.stroke){var o=ji.evalCachedProperty(e.font.stroke.alpha,n);null!=o&&(r.stroke=[].concat(r.stroke),r.stroke[3]=o),r.stroke=nr.toCSSColor(r.stroke)}r.stroke_width=ji.evalCachedProperty(e.font.stroke.width,n)}r.font_css=this.fontCSS(r);var a=e.text_wrap;return null==a&&"line"!==ai.geometryType(t.geometry.type)&&(a=!0),!0===a&&(a=this.defaults.text_wrap),r.text_wrap=a,r.max_lines=e.max_lines||this.defaults.max_lines,r},fontCSS:function(t){return[t.style,t.weight,t.px_size+"px",t.family].filter((function(t){return t})).join(" ")}},is=e((function(t){!function(){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function n(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function i(t){var e=t.a.offsetWidth,n=e+100;return t.f.style.width=n+"px",t.c.scrollLeft=n,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function o(t,n){function r(){var t=o;i(t)&&t.a.parentNode&&n(t.g)}var o=t;e(t.b,r),e(t.c,r),i(t)}function a(t,e){var n=e||{};this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var s=null,u=null,l=null,c=null;function h(){if(null===l){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}l=""!==t.style.font}return l}function f(t,e){return[t.style,t.weight,h()?t.stretch:"","100px",e].join(" ")}a.prototype.load=function(t,e){var i=this,a=t||"BESbswy",l=0,h=e||3e3,d=(new Date).getTime();return new Promise((function(t,e){var p;if(null===c&&(c=!!document.fonts),(p=c)&&(null===u&&(u=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),p=!u),p){p=new Promise((function(t,e){!function n(){(new Date).getTime()-d>=h?e():document.fonts.load(f(i,'"'+i.family+'"'),a).then((function(e){1<=e.length?t():setTimeout(n,25)}),(function(){e()}))}()}));var m=new Promise((function(t,e){l=setTimeout(e,h)}));Promise.race([m,p]).then((function(){clearTimeout(l),t(i)}),(function(){e(i)}))}else!function(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e),t()})):document.attachEvent("onreadystatechange",(function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())}))}((function(){function u(){var e;(e=-1!=g&&-1!=v||-1!=g&&-1!=_||-1!=v&&-1!=_)&&((e=g!=v&&g!=_&&v!=_)||(null===s&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=s&&(g==y&&v==y&&_==y||g==b&&v==b&&_==b||g==x&&v==x&&_==x)),e=!e),e&&(w.parentNode&&w.parentNode.removeChild(w),clearTimeout(l),t(i))}var c=new n(a),p=new n(a),m=new n(a),g=-1,v=-1,_=-1,y=-1,b=-1,x=-1,w=document.createElement("div");w.dir="ltr",r(c,f(i,"sans-serif")),r(p,f(i,"serif")),r(m,f(i,"monospace")),w.appendChild(c.a),w.appendChild(p.a),w.appendChild(m.a),document.body.appendChild(w),y=c.a.offsetWidth,b=p.a.offsetWidth,x=m.a.offsetWidth,function t(){if((new Date).getTime()-d>=h)w.parentNode&&w.parentNode.removeChild(w),e(i);else{var n=document.hidden;!0!==n&&void 0!==n||(g=c.a.offsetWidth,v=p.a.offsetWidth,_=m.a.offsetWidth,u()),l=setTimeout(t,50)}}(),o(c,(function(t){g=t,u()})),r(c,f(i,'"'+i.family+'",sans-serif')),o(p,(function(t){v=t,u()})),r(p,f(i,'"'+i.family+'",serif')),o(m,(function(t){_=t,u()})),r(m,f(i,'"'+i.family+'",monospace'))}))}))},t.exports=a}()})),os={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(t){var e=this,n=JSON.stringify(t)===this.last_loaded;return t&&!n&&function(){var n=[],r=function(r){Array.isArray(t[r])?t[r].forEach((function(t){return n.push(e.loadFontFace(r,t))})):n.push(e.loadFontFace(r,t[r]))};for(var i in t)r(i);e.last_loaded=JSON.stringify(t),e.fonts_loaded=Promise.all(n.filter((function(t){return t})))}(),this.fonts_loaded},loadFontFace:function(t,e){return new Promise(function(n,r){var i,o;if(null==e||"object"!=typeof e&&"external"!==e)return n();if(i={family:t},"object"==typeof e){var a=function(){return s.call(this)};return Object.assign(i,e),"string"==typeof e.url?Promise.resolve(this.injectFontFace(i)).then(function(t){try{return a.call(this)}catch(t){return r(t)}}.bind(this),r):a.call(this)}function s(){var e=function(){try{return n()}catch(t){return r(t)}},a=function(n){try{return Jn("debug","Font face '"+t+"' is NOT available",i),e()}catch(t){return r(t)}};try{return o=new is(t,i),Promise.resolve(o.load()).then((function(n){try{return Jn("debug","Font face '"+t+"' is available",i),e()}catch(t){return a()}}),a)}catch(t){a()}}return s.call(this)}.bind(this))},injectFontFace:function(t){return new Promise(function(e,n){var r,i,o,a,s,u,l,c,h,f,d;if(r=t.family,i=t.url,o=t.weight,a=t.style,void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace),s=i,"blob:"===i.slice(0,5))return Promise.resolve(nr.io(i,6e4,"arraybuffer")).then(function(t){try{if(s=t.body,u=new Uint8Array(s),this.supports_native_font_loading)s=u;else{for(l="",c=0;c<u.length;c++)l+=String.fromCharCode(u[c]);s="data:font/opentype;base64,"+btoa(l)}return p.call(this)}catch(t){return n(t)}}.bind(this),n);function p(){return this.supports_native_font_loading?("string"==typeof s?h=new FontFace(r,"url("+encodeURI(s)+")",{weight:o,style:a}):s instanceof Uint8Array&&(h=new FontFace(r,s,{weight:o,style:a})),document.fonts.add(h),Jn("trace","Adding FontFace to document.fonts:",h)):(f="\n                @font-face {\n                    font-family: '"+r+"';\n                    font-weight: "+(o||"normal")+";\n                    font-style: "+(a||"normal")+";\n                    src: url("+encodeURI(s)+");\n                }",(d=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(d),d.sheet.insertRule(f,0),Jn("trace","Injecting CSS font face:",f)),e()}return p.call(this)}.bind(this))}},as=new RegExp("[֑-߿‏‫‮יִ-﷽ﹰ-ﻼ]");function ss(t){return as.test(t)}var us="\0-/:-@[-`{-¿×÷ʹ-˿ -⯿‐-\u2029‬ -⯿",ls=new RegExp("["+us+"]+");function cs(t){return ls.test(t)}var hs=new RegExp("^["+us+"؀-ۿ]+"),fs=new RegExp("["+us+"آ-إاد-زوٱ-ٷڈ-ڙۄ-ۋۏےۓۮۯ]"),ds=new RegExp("^[ؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ۭ]+"),ps="[̀-֑ͯ-ׇֽֿׁׂׅׄަ-ްऀ-ःऺ-ौॎॏ॑-ॗॢॣঁ-ঃ়া-ৌৗৢৣਁ-ਃ਼-ੌੑઁ-ઃ઼ા-ૌૢૣଁ-ଃ଼ା-ୌୖୗୢୣஂா-்ௗఀ-ఃా-ౌౕౖౢౣಁ-ಃ಼ಾ-ೌೕೖೢೣഁ-ഃാ-ൌൎൗൢൣංඃ්-ෟෲෳัิ-ฺ็-๎ັິ-ຼ່-ໍ༹༘༙༵༷༾༿ཱ-ྃ྆྇ྍ-ྼ࿆ါ-း်-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ឴-៑៓ᩕ-ᩞᩡ-᩼᷀-᷿⃐-⃿]",ms=new RegExp("^.(?:"+ps+"+)?([्্੍્୍్್്྄္្᩠᩿]\\W(?:"+ps+"+)?)*"),gs={Mongolian:"᠀-᢯"},vs=Object.keys(gs).map((function(t){return gs[t]})).join(""),_s=new RegExp("["+vs+"]");function ys(t,e,n){var r=e?1:2;if(t.length<r)return[t];var i=t;if(n.segment[i])return n.stats.segment_hits++,n.segment[i];var o=[];if(hs.exec(t)){o=t.split(fs);for(var a=-1,s=0;s<o.length-1;s++){if(s>0){var u=ds.exec(o[s]);u&&(o[s]=o[s].substring(u[0].length),o[s-1]+=u[0],a+=u[0].length)}a+=1+o[s].length,o[s]+=t.slice(a,a+1)}t=""}for(;t.length;){for(var l="",c=t,h=0;h<r&&c.length;h++){var f=(ms.exec(c)||c)[0];l+=f,c=c.substring(f.length)}o.push(l),t=t.substring(l.length)}return e&&o.reverse(),n.stats.segment_misses++,n.segment[i]=o,o}var bs=function(){function t(t,e,n){void 0===e&&(e=1/0),void 0===n&&(n=1/0),this.width=0,this.height=0,this.lines=[],this.max_lines=e,this.text_wrap=n,this.context=t}var e=t.prototype;return e.createLine=function(t){return this.lines.length<this.max_lines&&new xs(t,this.text_wrap)},e.push=function(t){if(this.lines.length<this.max_lines){var e=this.context.measureText(t.text).width;return t.width=e,e>this.width&&(this.width=Math.ceil(e)),this.lines.push(t),this.height+=t.height,!0}return this.addEllipsis(),!1},e.advance=function(t,e){return!!this.push(t)&&this.createLine(e)},e.addEllipsis=function(){var e=this.lines[this.lines.length-1],n=Math.ceil(this.context.measureText(t.ellipsis).width);e.append(t.ellipsis),e.width+=n,e.width>this.width&&(this.width=e.width)},e.finish=function(t){t?this.push(t):this.addEllipsis()},t.parse=function(e,n,r,i,o){var a;a="number"==typeof n?e.split(" "):[e];for(var s=new t(o,r,n),u=s.createLine(i),l=0;l<a.length;l++){for(var c=a[l].split("\n"),h=0===l,f=0;f<c.length&&u;f++){var d=c[f];ss(d)&&cs(d[d.length-1])&&(d+="‏");var p=h?d:" "+d;if(n&&l>0&&u.exceedsTextwrap(p)){if(!(u=s.advance(u,i)))break;u.append(d),h=!0}else u.append(p);f<c.length-1&&(u=s.advance(u,i),h=!0)}l===a.length-1&&s.finish(u)}return s},t}();bs.ellipsis="...";var xs=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.chars=0,this.text="",this.height=Math.ceil(t),this.text_wrap=e}var e=t.prototype;return e.append=function(t){this.chars+=t.length,this.text+=t},e.exceedsTextwrap=function(t){return t.length+this.chars>this.text_wrap},t}(),ws=function(){function t(){this.createCanvas(),this.vertical_text_buffer=8,this.horizontal_text_buffer=4}var e=t.prototype;return e.createCanvas=function(){this.canvas=document.createElement("canvas"),this.canvas.style.backgroundColor="transparent",this.context=this.canvas.getContext("2d")},e.resize=function(t,e){this.canvas.width=t,this.canvas.height=e,this.context.clearRect(0,0,t,e)},e.setFont=function(t){var e=t.font_css,n=t.fill,r=t.stroke,i=t.stroke_width,o=t.px_size,a=t.supersample;this.px_size=o;var s=this.context,u=nr.device_pixel_ratio*a;r&&i>0&&(s.strokeStyle=r,s.lineWidth=i*u),s.fillStyle=n,s.font=e,s.miterLimit=2},e.textSizes=function(t,e){return new Promise(function(n,r){return Promise.resolve(os.loadFonts()).then(function(i){try{return n(Tr.add({type:"textSizes",run:this.processTextSizesTask.bind(this),texts:e,tile_id:t,cursor:{styles:Object.keys(e),texts:null,style_idx:null,text_idx:null}}))}catch(t){return r(t)}}.bind(this),r)}.bind(this))},e.processTextSizesTask=function(e){var n,r=e.cursor,i=e.texts;for(r.style_idx=r.style_idx||0;r.style_idx<r.styles.length;){var o=r.styles[r.style_idx];null==r.text_idx&&(r.text_idx=0,r.texts=Object.keys(i[o]));for(var a=i[o],s=!0;r.text_idx<r.texts.length;){var u=r.texts[r.text_idx],l=a[u],c=l.text_settings;if(s&&(this.setFont(c),s=!1),l.size=this.textSize(o,u,c).size,c.can_articulate){var h=!1,f=!1;if(ss(u)&&(cs(u)?h=!0:f=!0),l.isRTL=h,l.no_curving=f||(n=u,_s.test(n)),l.vertical_buffer=this.vertical_text_buffer,l.segment_sizes=[],!l.no_curving){var d=ys(u,h,t.cache);l.segments=d;for(var p=0;p<d.length;p++)l.segment_sizes.push(this.textSize(o,d[p],c).size)}}if(r.text_idx++,!Tr.shouldContinue(e))return!1}r.text_idx=null,r.style_idx++}return Tr.finish(e,i),!0},e.textSize=function(e,n,r){var i=r.transform,o=r.text_wrap,a=r.max_lines,s=r.stroke_width,u=void 0===s?0:s,l=r.supersample;if(t.cache.text[e]=t.cache.text[e]||{},t.cache.text[e][n])return t.cache.stats.text_hits++,t.cache.text[e][n];t.cache.stats.text_misses++,t.cache.text_count++;var c=nr.device_pixel_ratio*l,h=this.applyTextTransform(n,i),f=this.context,d=this.vertical_text_buffer*c,p=c*(u+this.horizontal_text_buffer),m=2*c,g=this.px_size+m,v=bs.parse(h,o,a,g,f),_=v.height,y=v.width,b=v.lines,x=[y/c,_/c],w=[y+2*p,_+2*d],T=[w[0]/c,w[1]/c];return t.cache.text[e][n]={lines:b,size:{collision_size:x,texture_size:w,logical_size:T,line_height:g}},t.cache.text[e][n]},e.drawTextMultiLine=function(t,e,n,r,i){for(var o=e[0],a=e[1],s=r.stroke,u=r.stroke_width,l=void 0===u?0:u,c=r.transform,h=r.align,f=r.supersample,d=n.line_height,p=a,m=0;m<t.length;m++){var g=t[m];this.drawTextLine(g,[o,p],n,{stroke:s,stroke_width:l,transform:c,align:h,supersample:f},i),p+=d}if(rr.draw_label_collision_boxes){this.context.save();var v=nr.device_pixel_ratio*f,_=v*(this.horizontal_text_buffer+l),y=v*this.vertical_text_buffer,b=n.collision_size;this.context.strokeStyle="blue",this.context.lineWidth=2,this.context.strokeRect(o+_,a+y,v*b[0],v*b[1]),"curved"===i&&this.context.strokeRect(o+n.texture_size[0]+_,a+y,v*b[0],v*b[1]),this.context.restore()}if(rr.draw_label_texture_boxes){this.context.save();var x=n.texture_size;this.context.strokeStyle="green",this.context.lineWidth=2,this.context.strokeRect(o+2,a+2,x[0]-4,x[1]-4),"curved"===i&&this.context.strokeRect(o+2+n.texture_size[0],a+2,x[0]-4,x[1]-4),this.context.restore()}},e.drawTextLine=function(t,e,n,r,i){var o=e[0],a=e[1],s=r.stroke,u=r.stroke_width,l=void 0===u?0:u,c=r.transform,h=r.align,f=r.supersample,d=nr.device_pixel_ratio*f;h=h||"center";var p,m=this.vertical_text_buffer*d,g=n.texture_size,v=n.line_height,_=d*(l+this.horizontal_text_buffer),y=this.applyTextTransform(t.text,c);"left"===h?p=o+_:"center"===h?p=o+g[0]/2-t.width/2:"right"===h&&(p=o+g[0]-t.width-_);var b=a+.75*m+v;if(s&&l>0){var x="curved"===i?g[0]:0;this.context.strokeText(y,p+x,b)}this.context.fillText(y,p,b)},e.rasterize=function(t,e,n,r,i){return Tr.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:this.cancelRasterizeTask.bind(this),pause_factor:2,user_moving_view:!1,texts:t,textures:e,texture_prefix:r,gl:i,tile_id:n,cursor:{styles:Object.keys(t),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_resize:!0,texture_names:[]}})},e.processRasterizeTask=function(t){for(var e,n=t.cursor,r=t.texts,i=t.textures;n.texture_idx<t.textures.length;){for(e=i[n.texture_idx],n.texture_resize&&(n.texture_resize=!1,this.resize.apply(this,e.texture_size));n.style_idx<n.styles.length;){var o=n.styles[n.style_idx];null==n.text_idx&&(n.text_idx=0,n.texts=Object.keys(r[o]));for(var a=r[o],s=!0;n.text_idx<n.texts.length;){var u=n.texts[n.text_idx],l=a[u],c=l.text_settings;if(s&&(this.setFont(c),s=!1),c.can_articulate){l.texcoords=l.texcoords||{};for(var h=0;h<l.type.length;h++){var f=l.type[h];if("straight"===f){if(l.textures[h]!==n.texture_idx)continue;var d=l.isRTL?u.split().reverse().join():u,p=e.texcoord_cache[o][d],m=void 0;if(p.texcoord)m=p.texcoord;else{var g=p.texture_position,v=this.textSize(o,d,c),_=v.size,y=v.lines;this.drawTextMultiLine(y,g,_,c,f),m=Gr.getTexcoordsForSprite(g,_.texture_size,e.texture_size),p.texcoord=m}l.texcoords[f]={texcoord:m,texture_id:p.texture_id}}else if("curved"===f){var b=l.segments;l.texcoords.curved=l.texcoords.curved||[],l.texcoords_stroke=l.texcoords_stroke||[];for(var x=0;x<b.length;x++)if(l.textures[h][x]===n.texture_idx){var w=b[x],T=e.texcoord_cache[o][w],A=void 0,S=void 0;if(T.texcoord)A=T.texcoord,S=T.texcoord_stroke,l.texcoords_stroke.push(S);else{var E=T.texture_position,k=this.textSize(o,w,c),M=k.size,O=k.lines;this.drawTextMultiLine(O,E,M,c,f),A=Gr.getTexcoordsForSprite(E,M.texture_size,e.texture_size);var P=[E[0]+M.texture_size[0],E[1]];S=Gr.getTexcoordsForSprite(P,M.texture_size,e.texture_size),T.texcoord=A,T.texcoord_stroke=S,l.texcoords_stroke.push(S)}l.texcoords.curved.push({texcoord:A,texture_id:T.texture_id})}}}}else{var z=this.textSize(o,u,c).lines;for(var R in l.align)l.align[R].texture_id===n.texture_idx&&(this.drawTextMultiLine(z,l.align[R].texture_position,l.size,{stroke:c.stroke,stroke_width:c.stroke_width,transform:c.transform,supersample:c.supersample,align:R}),l.align[R].texcoords=Gr.getTexcoordsForSprite(l.align[R].texture_position,l.size.texture_size,e.texture_size))}if(n.text_idx++,!Tr.shouldContinue(t))return!1}n.text_idx=null,n.style_idx++}var L=t.texture_prefix+n.texture_idx;Gr.create(t.gl,L,{element:this.canvas,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),Gr.retain(L),n.texture_names.push(L),n.texture_idx++,n.texture_resize=!0,n.style_idx=0}return Tr.finish(t,n.texture_names),!0},e.cancelRasterizeTask=function(t){Jn("trace","RasterizeTask: release textures ["+t.cursor.texture_names.join(", ")+"]"),t.cursor.texture_names.forEach((function(t){return Gr.release(t)}))},e.setTextureTextPositions=function(t,e){var n={cx:0,cy:0,width:0,height:0,column_width:0,texture_id:0,texcoord_cache:{}},r=[];for(var i in t){var o=t[i];for(var a in o){var s=o[a],u=void 0;if(s.text_settings.can_articulate){s.textures=[],n.texcoord_cache[i]=n.texcoord_cache[i]||{};for(var l=0;l<s.type.length;l++){var c=s.type[l];if("straight"===c){var h=s.isRTL?a.split().reverse().join():a;if(!n.texcoord_cache[i][h]){var f=s.size.texture_size;u=this.placeText(f[0],f[1],i,n,r,e),n.texcoord_cache[i][h]={texture_id:n.texture_id,texture_position:u}}s.textures[l]=n.texture_id}else if("curved"===c){s.textures[l]=[];for(var d=0;d<s.segment_sizes.length;d++){var p=s.segments[d];if(!n.texcoord_cache[i][p]){var m=s.segment_sizes[d].texture_size,g=2*m[0];u=this.placeText(g,m[1],i,n,r,e),n.texcoord_cache[i][p]={texture_id:n.texture_id,texture_position:u}}s.textures[l].push(n.texture_id)}}}}else{var v=s.size.texture_size;for(var _ in s.align)u=this.placeText(v[0],v[1],i,n,r,e),s.align[_].texture_id=n.texture_id,s.align[_].texture_position=u}}}return n.column_width>0&&n.height>0&&(r[n.texture_id]={texture_size:[n.width,n.height],texcoord_cache:n.texcoord_cache}),r},e.placeText=function(t,e,n,r,i,o){var a;return r.cy+e>o?(r.cx+=r.column_width,r.cy=0,r.column_width=t):r.column_width=Math.max(r.column_width,t),r.cx+r.column_width<=o?(a=[r.cx,r.cy],r.cy+=e,r.height=Math.max(r.height,r.cy),r.width=Math.max(r.width,r.cx+r.column_width)):(i[r.texture_id]={texture_size:[r.width,r.height],texcoord_cache:r.texcoord_cache},r.texcoord_cache={},r.texcoord_cache[n]={},r.texture_id++,r.cx=0,r.cy=e,r.column_width=t,r.width=t,r.height=e,a=[0,0]),a},e.applyTextTransform=function(t,e){return"capitalize"===e?t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1)})):"uppercase"===e?t.toUpperCase():"lowercase"===e?t.toLowerCase():t},t.fontPixelSize=function(e){if(null!=e){var n=(e="string"==typeof e?e:String(e)).match(t.font_size_re)||[],r=n[1],i=n[2];return"em"===(i=i||"px")?r*=16:"pt"===i?r/=.75:"%"===i&&(r/=6.25),(r=ji.parsePositiveNumber(r))*nr.device_pixel_ratio}},t.pruneTextCache=function(){t.cache.text_count>t.cache.text_count_max&&(t.cache.text={},t.cache.text_count=0,Jn("debug","TextCanvas: pruning text cache")),Object.keys(t.cache.segment).length>t.cache.segment_count_max&&(t.cache.segment={},Jn("debug","TextCanvas: pruning segment cache"))},t}();ws.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,ws.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}};var Ts=0,As={resetText:function(){It.is_main?this.canvas=new ws:It.is_worker&&(this.texts={})},freeText:function(t){delete this.texts[t.id]},parseTextFeature:function(t,e,n,r){var i=this.parseTextSource(t,e,n);if(null!=i&&""!==i){var o=rs.compute(t,e,n),a=rs.key(o);this.texts[r.id]=this.texts[r.id]||{};var s=this.texts[r.id][a]=this.texts[r.id][a]||{};if(i instanceof Object){var u=[],l=i.left+"-"+i.right;for(var c in i){var h=i[c];if(h){var f=this.computeTextLayout({},t,e,n,r,h,o,l,c);s[h]||(s[h]={text_settings:o,ref:0}),u.push({draw:e,text:h,text_settings_key:a,layout:f})}}return u.length>0&&u}var d=this.computeTextLayout({},t,e,n,r,i,o);return s[i]||(s[i]={text_settings:o,ref:0}),{draw:e,text:i,text_settings_key:a,layout:d}}},parseTextSource:function(t,e,n){var r,i=e.text_source||"name";if(null==i||Array.isArray(i)||"object"!=typeof i)r=this.parseTextSourceValue(i,t,n);else for(var o in r={},i)r[o]=this.parseTextSourceValue(i[o],t,n);return r},parseTextSourceValue:function(t,e,n){var r;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("string"==typeof t[i]?r=e.properties[t[i]]:"function"==typeof t[i]&&(r=t[i](n)),r)return r}else"string"==typeof t?r=e.properties[t]:t instanceof Function&&(r=t(n));return r},prepareTextLabels:function(t,e){return new Promise(function(n,r){var i;if(0===Object.keys(this.texts[t.id]||{}).length)return n([]);var o=function(e){try{return Xa.abortTile(t.id),n([])}catch(t){return r(t)}};try{return Promise.resolve(Zn.postMessage(this.main_thread_target+".calcTextSizes",t.id,this.texts[t.id])).then(function(r){try{return i=r,t.canceled?(Jn("trace","Style "+this.name+": stop tile build because tile was canceled: "+t.key+", post-calcTextSizes()"),n([])):(this.texts[t.id]=i||[],i?n(this.buildTextLabels(t,e)):(Xa.abortTile(t.id),n([])))}catch(t){return o()}}.bind(this),o)}catch(t){o()}}.bind(this))},collideAndRenderTextLabels:function(t,e,n){return new Promise(function(r,i){var o,a,s;return Promise.resolve(this.prepareTextLabels(t,n)).then(function(n){try{return 0===(o=n).length?(Xa.collide([],e,t.id),r({})):Promise.resolve(Xa.collide(o,e,t.id)).then(function(e){try{if(o=e,t.canceled)return Jn("trace","stop tile build because tile was canceled: "+t.key+", post-collide()"),r({});if(null==(a=this.texts[t.id])||0===o.length)return r({});this.cullTextStyles(a,o),o.forEach((function(t){var e=t.text_settings_key,n=a[e]&&a[e][t.text];n.text_settings.can_articulate?(n.type||(n.type=[]),-1===n.type.indexOf(t.label.type)&&n.type.push(t.label.type)):(n.align=n.align||{},n.align[t.label.align]={})}));var n=function(t){try{return r({})}catch(t){return i(t)}};try{return Promise.resolve(Zn.postMessage(this.main_thread_target+".rasterizeTexts",t.id,t.key,a)).then((function(e){try{return s=e,t.canceled?(Jn("trace","stop tile build because tile was canceled: "+t.key+", post-rasterizeTexts()"),r({})):r(Object.assign({labels:o},s))}catch(t){return n()}}),n)}catch(t){n()}}catch(t){return i(t)}}.bind(this),i)}catch(t){return i(t)}}.bind(this),i)}.bind(this))},cullTextStyles:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t[r.text_settings_key][r.text].ref++}for(var i in t)for(var o in t[i])t[i][o].ref<1&&delete t[i][o];for(var a in t)0===Object.keys(t[a]).length&&delete t[a]},calcTextSizes:function(t,e){return this.canvas.textSizes(t,e)},rasterizeTexts:function(t,e,n){return new Promise(function(r,i){var o,a,s,u;return o=new ws,a=Math.min(this.max_texture_size,2048),s=o.setTextureTextPositions(n,a),u=["labels",this.name,e,t,Ts,""].join("-"),Ts++,Promise.resolve(o.rasterize(n,s,t,u,this.gl)).then((function(t){try{return r((s=t)?{texts:n,textures:s}:{})}catch(t){return i(t)}}),i)}.bind(this))},preprocessText:function(t){if(t&&t.font&&"object"==typeof t.font)return t.font.fill=ji.createPropertyCache(t.font.fill),t.font.alpha=ji.createPropertyCache(t.font.alpha),t.font.stroke&&(t.font.stroke.color=ji.createPropertyCache(t.font.stroke.color),t.font.stroke.alpha=ji.createPropertyCache(t.font.stroke.alpha)),t.font.px_size=ji.createPropertyCache(t.font.size||rs.defaults.size,ws.fontPixelSize,ws.fontPixelSize),t.font.stroke&&null!=t.font.stroke.width&&(t.font.stroke.width=ji.createPropertyCache(t.font.stroke.width,ji.parsePositiveNumber)),t.offset=ji.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(ji.parseNumber)})),t.buffer=ji.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(ji.parsePositiveNumber)})),t.repeat_distance=ji.createPropertyCache(t.repeat_distance,ji.parsePositiveNumber),t},computeTextLayout:function(t,e,n,r,i,o,a,s,u){var l=t||{};return l=this.computeLayout(l,e,n,r,i),null==n.repeat_distance&&(l.repeat_distance="point"===r.geometry?0:ai.tile_size,l.repeat_distance&&(l.repeat_distance*=l.units_per_pixel,l.repeat_scale=1,"function"==typeof n.repeat_group?l.repeat_group=n.repeat_group(r):l.repeat_group=n.repeat_group)),l.repeat_distance&&(s&&(l.repeat_group+="/"+s),l.repeat_group+="/"+o),l.subdiv=i.overzoom2,l.align=n.align,l.italic="normal"!==a.style,"right"===u?l.orientation=1:"left"===u&&(l.orientation=-1),l}};Ur("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Ss=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Es=function(t,e,n){var r=new Float64Array(3);return r[0]=t,r[1]=e,r[2]=n,r},ks=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],v=e[15],_=n*s-r*a,y=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,T=i*l-o*u,A=c*m-h*p,S=c*g-f*p,E=c*v-d*p,k=h*g-f*m,M=h*v-d*m,O=f*v-d*g,P=_*O-y*M+b*k+x*E-w*S+T*A;return P?(P=1/P,t[0]=(s*O-u*M+l*k)*P,t[1]=(u*E-a*O-l*S)*P,t[2]=(a*M-s*E+l*A)*P,t[3]=(i*M-r*O-o*k)*P,t[4]=(n*O-i*E+o*S)*P,t[5]=(r*E-n*M-o*A)*P,t[6]=(m*T-g*w+v*x)*P,t[7]=(g*b-p*T-v*y)*P,t[8]=(p*w-m*b+v*_)*P,t):null},Ms=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=c*a-s*l,f=-c*o+s*u,d=l*o-a*u,p=n*h+r*f+i*d;return p?(p=1/p,t[0]=h*p,t[1]=(-c*r+i*l)*p,t[2]=(s*r-i*a)*p,t[3]=f*p,t[4]=(c*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=d*p,t[7]=(-l*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null},Os=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],g=e[13],v=e[14],_=e[15],y=n[0],b=n[1],x=n[2],w=n[3];return t[0]=y*r+b*s+x*h+w*m,t[1]=y*i+b*u+x*f+w*g,t[2]=y*o+b*l+x*d+w*v,t[3]=y*a+b*c+x*p+w*_,y=n[4],b=n[5],x=n[6],w=n[7],t[4]=y*r+b*s+x*h+w*m,t[5]=y*i+b*u+x*f+w*g,t[6]=y*o+b*l+x*d+w*v,t[7]=y*a+b*c+x*p+w*_,y=n[8],b=n[9],x=n[10],w=n[11],t[8]=y*r+b*s+x*h+w*m,t[9]=y*i+b*u+x*f+w*g,t[10]=y*o+b*l+x*d+w*v,t[11]=y*a+b*c+x*p+w*_,y=n[12],b=n[13],x=n[14],w=n[15],t[12]=y*r+b*s+x*h+w*m,t[13]=y*i+b*u+x*f+w*g,t[14]=y*o+b*l+x*d+w*v,t[15]=y*a+b*c+x*p+w*_,t},Ps=function(t,e,n){var r,i,o,a,s,u,l,c,h,f,d,p,m=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*m+s*g+h*v+e[12],t[13]=i*m+u*g+f*v+e[13],t[14]=o*m+l*g+d*v+e[14],t[15]=a*m+c*g+p*v+e[15]),t},zs=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Rs=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},Ls=function(t,e,n,r){var i,o,a,s,u,l,c,h,f,d,p=e[0],m=e[1],g=e[2],v=r[0],_=r[1],y=r[2],b=n[0],x=n[1],w=n[2];return Math.abs(p-b)<1e-6&&Math.abs(m-x)<1e-6&&Math.abs(g-w)<1e-6?Ss(t):(c=p-b,h=m-x,f=g-w,i=_*(f*=d=1/Math.sqrt(c*c+h*h+f*f))-y*(h*=d),o=y*(c*=d)-v*f,a=v*h-_*c,(d=Math.sqrt(i*i+o*o+a*a))?(i*=d=1/d,o*=d,a*=d):(i=0,o=0,a=0),s=h*a-f*o,u=f*i-c*a,l=c*o-h*i,(d=Math.sqrt(s*s+u*u+l*l))?(s*=d=1/d,u*=d,l*=d):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=l,t[10]=f,t[11]=0,t[12]=-(i*p+o*m+a*g),t[13]=-(s*p+u*m+l*g),t[14]=-(c*p+h*m+f*g),t[15]=1,t)},Cs=Ss,js=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Is=function(){function t(t,e,n){void 0===n&&(n={}),this.view=e,this.position=n.position,this.zoom=n.zoom}t.create=function(t,e,n){switch(n.type){case"isometric":return new Ds(t,e,n);case"flat":return new Fs(t,e,n);case"perspective":default:return new Ns(t,e,n)}};var e=t.prototype;return e.update=function(){},e.setupProgram=function(){},e.updateView=function(){if(this.position||this.zoom){var t={};this.position&&(t={lng:this.position[0],lat:this.position[1],zoom:this.position[2]}),this.zoom&&(t.zoom=this.zoom),this.view.setView(t)}},e.setupMatrices=function(t,e){Os(t.model_view32,this.view_matrix,t.model),e.uniform("Matrix4fv","u_modelView",t.model_view32),ks(t.normal32,t.model_view32),Ms(t.inverse_normal32,t.normal32),e.uniform("Matrix3fv","u_normalMatrix",t.normal32),e.uniform("Matrix3fv","u_inverseNormalMatrix",t.inverse_normal32)},t}(),Ns=function(t){function e(e,n,r){var i;return void 0===r&&(r={}),(i=t.call(this,e,n,r)||this).type="perspective",i.focal_length=r.focal_length,i.fov=r.fov,i.focal_length||i.fov||(i.focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]]),i.vanishing_point=r.vanishing_point||[0,0],i.vanishing_point=i.vanishing_point.map(parseFloat),i.vanishing_point_skew=[],i.position_meters=null,i.view_matrix=new Float64Array(16),i.projection_matrix=new Float32Array(16),Jr.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_vanishing_point;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }"),i}Rn(e,t);var n=e.prototype;return n.constrainCamera=function(t){var e=t.view_height,n=t.height,r=t.focal_length,i=t.fov;return n?(r=2*n/e,i=2*Math.atan(1/r)):(r?i=2*Math.atan(1/r):i&&(i=i*Math.PI/180,r=1/Math.tan(i/2)),n=e/2*r),{view_height:e,height:n,focal_length:r,fov:i}},n.updateMatrices=function(){var t=this.view.size.css.height*this.view.meters_per_pixel,e=this.constrainCamera({view_height:t,focal_length:nr.interpolate(this.view.zoom,this.focal_length),fov:nr.interpolate(this.view.zoom,this.fov)}),n=e.height,r=e.fov,i=[this.view.center.meters.x,this.view.center.meters.y,n];this.position_meters=i,Ls(this.view_matrix,Es(i[0],i[1],0),Es(i[0],i[1],-1),Es(0,1,0)),Rs(this.projection_matrix,r,this.view.aspect,1,2*n),this.vanishing_point_skew[0]=this.vanishing_point[0]/this.view.size.css.width,this.vanishing_point_skew[1]=this.vanishing_point[1]/this.view.size.css.height,this.projection_matrix[8]=2*-this.vanishing_point_skew[0],this.projection_matrix[9]=2*-this.vanishing_point_skew[1],Ps(this.projection_matrix,this.projection_matrix,Es(t/2*this.view.aspect*(2*-this.vanishing_point_skew[0]),t/2*(2*-this.vanishing_point_skew[1]),0)),Ps(this.projection_matrix,this.projection_matrix,Es(0,0,-n))},n.update=function(){t.prototype.update.call(this),this.updateMatrices()},n.setupProgram=function(t){t.uniform("Matrix4fv","u_projection",this.projection_matrix),t.uniform("3f","u_eye",[0,0,this.position_meters[2]]),t.uniform("2fv","u_vanishing_point",this.vanishing_point_skew)},e}(Is),Ds=function(t){function e(e,n,r){var i;return void 0===r&&(r={}),(i=t.call(this,e,n,r)||this).type="isometric",i.axis=r.axis||{x:0,y:1},2===i.axis.length&&(i.axis={x:i.axis[0],y:i.axis[1]}),i.position_meters=null,i.viewport_height=null,i.view_matrix=new Float64Array(16),i.projection_matrix=new Float32Array(16),Jr.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_vanishing_point;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n                // position.xy += position.z * u_isometric_axis;\n\n                // Reverse z for depth buffer so up is negative,\n                // and scale down values so objects higher than one screen height will not get clipped\n                // pull forward slightly to avoid going past far clipping plane\n                position.z = -position.z / 100. + 1. - 0.001;\n            }"),i}Rn(e,t);var n=e.prototype;return n.update=function(){t.prototype.update.call(this),this.viewport_height=this.view.size.css.height*this.view.meters_per_pixel;var e=[this.view.center.meters.x,this.view.center.meters.y,this.viewport_height];this.position_meters=e,Cs(this.view_matrix),Ps(this.view_matrix,this.view_matrix,Es(-e[0],-e[1],0)),Cs(this.projection_matrix),this.projection_matrix[8]=this.axis.x/this.view.aspect,this.projection_matrix[9]=this.axis.y,zs(this.projection_matrix,this.projection_matrix,Es(2/this.view.size.meters.x,2/this.view.size.meters.y,2/this.view.size.meters.y))},n.setupProgram=function(t){t.uniform("Matrix4fv","u_projection",this.projection_matrix),t.uniform("3fv","u_eye",[0,0,this.viewport_height]),t.uniform("2fv","u_vanishing_point",[0,0])},e}(Is),Fs=function(t){function e(e,n,r){var i;return void 0===r&&(r={}),(i=t.call(this,e,n,r)||this).type="flat",i}return Rn(e,t),e.prototype.update=function(){this.axis.x=0,this.axis.y=0,t.prototype.update.call(this)},e}(Ds),Bs=function(){function t(t,e){Ar(this),this.scene=t,this.createMatrices(),this.zoom=null,this.center=null,this.bounds=null,this.meters_per_pixel=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.zoom_direction=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={css:{},device:{},meters:{}},this.aspect=null,this.buffer=0,this.continuous_zoom="boolean"!=typeof e.continuousZoom||e.continuousZoom,this.wrap=!1!==e.wrapView,this.preserve_tiles_within_zoom=1,this.reset()}var e=t.prototype;return e.reset=function(){this.createCamera()},e.createCamera=function(){var t=this.getActiveCamera();t&&(this.camera=Is.create(t,this,this.scene.config.cameras[t]),this.camera.updateView())},e.getActiveCamera=function(){if(this.scene.config&&this.scene.config.cameras){for(var t in this.scene.config.cameras)if(this.scene.config.cameras[t].active)return t;var e=Object.keys(this.scene.config.cameras);return e.length&&e[0]}},e.setActiveCamera=function(t){var e=this.getActiveCamera();return e===t?t:(this.scene.config.cameras[t]&&(this.scene.config.cameras[t].active=!0,e&&this.scene.config.cameras[e]&&delete this.scene.config.cameras[e].active),this.scene.updateConfig({rebuild:!1,normalize:!1}),this.getActiveCamera())},e.update=function(){null!=this.camera&&this.ready()&&this.camera.update(),this.pan_snap_timer=(+new Date-this.panning_stop_at)/1e3,this.user_input_active=+new Date-this.user_input_at<this.user_input_timeout},e.setViewportSize=function(t,e){this.size.css={width:t,height:e},this.size.device={width:Math.round(this.size.css.width*nr.device_pixel_ratio),height:Math.round(this.size.css.height*nr.device_pixel_ratio)},this.aspect=this.size.css.width/this.size.css.height,this.updateBounds()},e.setView=function(t){var e=void 0===t?{}:t,n=e.lng,r=e.lat,i=e.zoom,o=!1;return"number"==typeof n&&"number"==typeof r&&(this.center&&n===this.center.lng&&r===this.center.lat||(o=!0,this.center={lng:n,lat:r})),"number"==typeof i&&i!==this.zoom&&(o=!0,this.setZoom(i)),o&&this.updateBounds(),o},e.setZoom=function(t){var e=this.tile_zoom,n=this.baseZoom(t);this.continuous_zoom||(t=n),n!==e&&(this.zoom_direction=n>e?1:-1),this.zoom=t,this.tile_zoom=n,this.updateBounds(),this.scene.requestRedraw()},e.baseZoom=function(t){return Math.floor(t)},e.setPanning=function(t){this.panning=t,this.panning||(this.panning_stop_at=+new Date)},e.markUserInput=function(){this.user_input_at=+new Date},e.ready=function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height&&null!=this.center&&"number"==typeof this.zoom},e.updateBounds=function(){if(this.ready()){this.meters_per_pixel=ai.metersPerPixel(this.zoom),this.size.meters={x:this.size.css.width*this.meters_per_pixel,y:this.size.css.height*this.meters_per_pixel};var t=ai.latLngToMeters([this.center.lng,this.center.lat]);this.center.meters={x:t[0],y:t[1]},this.center.tile=ai.tileForMeters([this.center.meters.x,this.center.meters.y],this.tile_zoom),this.bounds={sw:{x:this.center.meters.x-this.size.meters.x/2,y:this.center.meters.y-this.size.meters.y/2},ne:{x:this.center.meters.x+this.size.meters.x/2,y:this.center.meters.y+this.size.meters.y/2}},this.scene.tile_manager.updateTilesForView(),this.trigger("move"),this.scene.requestRedraw()}},e.findVisibleTileCoordinates=function(){if(!this.bounds)return[];var t=this.tile_zoom,e=ai.tileForMeters([this.bounds.sw.x,this.bounds.sw.y],t),n=ai.tileForMeters([this.bounds.ne.x,this.bounds.ne.y],t),r=[e.x-this.buffer,n.x+this.buffer,n.y-this.buffer,e.y+this.buffer];if(!1===this.wrap){var i=(1<<t)-1;r=r.map((function(t){return Math.min(Math.max(0,t),i)}))}for(var o=[],a=r[0];a<=r[1];a++)for(var s=r[2];s<=r[3];s++)o.push(ho.coord({x:a,y:s,z:t}));return o},e.pruneTilesForView=function(){var t=this;this.ready()&&this.scene.tile_manager.removeTiles((function(e){if(e.visible||e.isProxy())return!1;if(e.loading&&e.style_z!==t.tile_zoom)return!0;if(Math.abs(e.style_z-t.tile_zoom)>(null!=e.preserve_tiles_within_zoom?e.preserve_tiles_within_zoom:t.preserve_tiles_within_zoom))return!0;var n=t.meters_per_pixel*ai.tile_size,r=ho.coordAtZoom(ai.tileForMeters([t.center.meters.x-t.size.meters.x/2-n,t.center.meters.y+t.size.meters.y/2+n],t.tile_zoom),e.coords.z),i=ho.coordAtZoom(ai.tileForMeters([t.center.meters.x+t.size.meters.x/2+n,t.center.meters.y-t.size.meters.y/2-n],t.tile_zoom),e.coords.z);return(e.coords.x<r.x||e.coords.x>i.x||e.coords.y<r.y||e.coords.y>i.y)&&(Jn("trace","View: remove tile "+e.key+" (as "+e.coords.key+") for being too far out of visible area ("+r.key+", "+i.key+")"),!0)}))},e.createMatrices=function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)},e.setupTile=function(t,e){t.setupProgram(this.matrices,e),this.camera.setupMatrices(this.matrices,e)},e.setupProgram=function(t){t.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),t.uniform("3fv","u_map_position",[this.center.meters.x,this.center.meters.y,this.zoom]),t.uniform("1f","u_meters_per_pixel",this.meters_per_pixel),t.uniform("1f","u_device_pixel_ratio",nr.device_pixel_ratio),t.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),t.uniform("1i","u_view_panning",this.panning),this.camera.setupProgram(t)},e.isAnimating=function(){return this.pan_snap_timer<=.5},t}(),Us=$a.PLACEMENT,Gs=Object.create(mo);Object.assign(Gs,As),Object.assign(Gs,{name:"points",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;\nuniform float u_time;\nuniform vec3 u_map_position;\nuniform vec4 u_tile_origin;\nuniform float u_tile_proxy_order_offset;\nuniform bool u_tile_fade_in;\nuniform float u_meters_per_pixel;\nuniform float u_device_pixel_ratio;\nuniform float u_visible_time;\nuniform bool u_view_panning;\nuniform float u_view_pan_snap_timer;\n\nuniform mat4 u_model;\nuniform mat4 u_modelView;\nuniform mat3 u_normalMatrix;\nuniform mat3 u_inverseNormalMatrix;\n\nattribute vec4 a_position;\nattribute vec4 a_shape;\nattribute vec4 a_color;\nattribute vec2 a_texcoord;\nattribute vec2 a_offset;\n\nuniform float u_point_type;\n\n#ifdef TANGRAM_CURVED_LABEL\n    attribute vec4 a_offsets;\n    attribute vec4 a_pre_angles;\n    attribute vec4 a_angles;\n#endif\n\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying vec4 v_world_position;\nvarying float v_alpha_factor;\n\n#ifdef TANGRAM_HAS_SHADER_POINTS\n    attribute float a_outline_edge;\n    attribute vec4 a_outline_color;\n\n    varying float v_outline_edge;\n    varying vec4 v_outline_color;\n    varying float v_aa_offset;\n#endif\n\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\n    varying float v_label_hidden;\n#endif\n\n#define TANGRAM_PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n\n#pragma tangram: attributes\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n\nvec2 rotate2D(vec2 _st, float _angle) {\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle)) * _st;\n}\n\n#ifdef TANGRAM_CURVED_LABEL\n    // Assumes stops are [0, 0.33, 0.66, 0.99];\n    float mix4linear(vec4 v, float x) {\n        x = clamp(x, 0., 1.);\n        return mix(mix(v[0], v[1], 3. * x),\n                   mix(v[1],\n                       mix(v[2], v[3], 3. * (max(x, .66) - .66)),\n                       3. * (clamp(x, .33, .66) - .33)),\n                   step(0.33, x)\n                );\n    }\n#endif\n\nvoid main() {\n    // Initialize globals\n    #pragma tangram: setup\n\n    // discard hidden labels by collapsing into degenerate triangle\n    #ifndef TANGRAM_SHOW_HIDDEN_LABELS\n        if (a_shape.w == 0.) {\n            gl_Position = vec4(0., 0., 0., 1.);\n            return;\n        }\n    #else\n        // highlight hidden label in fragment shader for debugging\n        if (a_shape.w == 0.) {\n            v_label_hidden = 1.; // label debug testing\n        }\n        else {\n            v_label_hidden = 0.;\n        }\n    #endif\n\n    v_alpha_factor = 1.0;\n    v_color = a_color;\n    v_texcoord = a_texcoord; // UV from vertex attribute\n\n    #ifdef TANGRAM_HAS_SHADER_POINTS\n        v_outline_color = a_outline_color;\n        v_outline_edge = a_outline_edge;\n\n        if (u_point_type == TANGRAM_POINT_TYPE_SHADER) { // shader point\n            // use point dimensions for UVs instead (ignore attribute), add antialiasing info for fragment shader\n            float _size = abs(a_shape.x / 128.); // radius in pixels\n            v_texcoord = sign(a_shape.xy) * (_size + 1.) / _size;\n            _size += 2.;\n            v_aa_offset = 2. / _size;\n        }\n    #endif\n\n    // Position\n    vec4 position = u_modelView * vec4(a_position.xyz, 1.);\n\n    // Apply positioning and scaling in screen space\n    vec2 _shape = a_shape.xy / 256.;                 // values have an 8-bit fraction\n    vec2 _offset = vec2(a_offset.x, -a_offset.y);    // flip y to make it point down\n    float _theta = a_shape.z / 4096.;\n\n    #ifdef TANGRAM_CURVED_LABEL\n        //TODO: potential bug? null is passed in for non-curved labels, otherwise the first offset will be 0\n        if (a_offsets[0] != 0.){\n            vec4 _angles_scaled = (TANGRAM_PI / 16384.) * a_angles;\n            vec4 _pre_angles_scaled = (TANGRAM_PI / 128.) * a_pre_angles;\n            vec4 _offsets_scaled = (1. / 64.) * a_offsets;\n\n            float _zoom = clamp(u_map_position.z - u_tile_origin.z, 0., 1.); //fract(u_map_position.z);\n            float _pre_angle = mix4linear(_pre_angles_scaled, _zoom);\n            float _angle = mix4linear(_angles_scaled, _zoom);\n            float _offset_curve = mix4linear(_offsets_scaled, _zoom);\n\n            _shape = rotate2D(_shape, _pre_angle); // rotate in place\n            _shape.x += _offset_curve;            // offset for curved label segment\n            _shape = rotate2D(_shape, _angle);     // rotate relative to curved label anchor\n            _shape += rotate2D(_offset, _theta);   // offset if specified in the scene file\n        }\n        else {\n            _shape = rotate2D(_shape + _offset, _theta);\n        }\n    #else\n        _shape = rotate2D(_shape + _offset, _theta);\n    #endif\n\n    // Fade in (if requested) based on time mesh has been visible.\n    // Value passed to fragment shader in the v_alpha_factor varying\n    #ifdef TANGRAM_FADE_IN_RATE\n        if (u_tile_fade_in) {\n            v_alpha_factor *= clamp(u_visible_time * TANGRAM_FADE_IN_RATE, 0., 1.);\n        }\n    #endif\n\n    // World coordinates for 3d procedural textures\n    v_world_position = u_model * position;\n    v_world_position.xy += _shape * u_meters_per_pixel;\n    v_world_position = wrapWorldPosition(v_world_position);\n\n    // Modify position before camera projection\n    #pragma tangram: position\n\n    cameraProjection(position);\n\n    #ifdef TANGRAM_LAYER_ORDER\n        // +1 is to keep all layers including proxies > 0\n        applyLayerOrder(a_position.w + u_tile_proxy_order_offset + 1., position);\n    #endif\n\n    // Apply pixel offset in screen-space\n    // Multiply by 2 is because screen is 2 units wide Normalized Device Coords (and u_resolution device pixels wide)\n    // Device pixel ratio adjustment is because shape is in logical pixels\n    position.xy += _shape * position.w * 2. * u_device_pixel_ratio / u_resolution;\n    #ifdef TANGRAM_HAS_SHADER_POINTS\n        if (u_point_type == TANGRAM_POINT_TYPE_SHADER) { // shader point\n            // enlarge by 1px to catch missed MSAA fragments\n            position.xy += sign(_shape) * position.w * u_device_pixel_ratio / u_resolution;\n        }\n    #endif\n\n    // Snap to pixel grid\n    // Only applied to fully upright sprites/labels (not shader-drawn points), while panning is not active\n    #ifdef TANGRAM_HAS_SHADER_POINTS\n    if (!u_view_panning && (abs(_theta) < TANGRAM_EPSILON) && u_point_type != TANGRAM_POINT_TYPE_SHADER) {\n    #else\n    if (!u_view_panning && (abs(_theta) < TANGRAM_EPSILON)) {\n    #endif\n        vec2 _position_fract = fract((((position.xy / position.w) + 1.) * .5) * u_resolution);\n        vec2 _position_snap = position.xy + ((step(0.5, _position_fract) - _position_fract) * position.w * 2. / u_resolution);\n\n        // Animate the snapping to smooth the transition and make it less noticeable\n        #ifdef TANGRAM_VIEW_PAN_SNAP_RATE\n            position.xy = mix(position.xy, _position_snap, clamp(u_view_pan_snap_timer * TANGRAM_VIEW_PAN_SNAP_RATE, 0., 1.));\n        #else\n            position.xy = _position_snap;\n        #endif\n    }\n\n    gl_Position = position;\n}\n",fragment_shader_src:"uniform vec2 u_resolution;\nuniform float u_time;\nuniform vec3 u_map_position;\nuniform vec4 u_tile_origin;\nuniform float u_meters_per_pixel;\nuniform float u_device_pixel_ratio;\nuniform float u_visible_time;\n\nuniform mat3 u_normalMatrix;\nuniform mat3 u_inverseNormalMatrix;\n\nuniform sampler2D u_texture;\nuniform float u_point_type;\nuniform bool u_apply_color_blocks;\n\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying vec4 v_world_position;\nvarying float v_alpha_factor;\n\n#ifdef TANGRAM_HAS_SHADER_POINTS\n    varying vec4 v_outline_color;\n    varying float v_outline_edge;\n    varying float v_aa_offset;\n#endif\n\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\n    varying float v_label_hidden;\n#endif\n\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n\n#pragma tangram: attributes\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n\n#ifdef TANGRAM_HAS_SHADER_POINTS\n    //l is the distance from the center to the fragment, R is the radius of the drawn point\n    float _tangram_antialias(float l, float R){\n        float low  = R - v_aa_offset;\n        float high = R + v_aa_offset;\n        return 1. - smoothstep(low, high, l);\n    }\n#endif\n\nvoid main (void) {\n    // Initialize globals\n    #pragma tangram: setup\n\n    vec4 color = v_color;\n\n    #ifdef TANGRAM_HAS_SHADER_POINTS\n        // Only apply shader blocks to point, not to attached text (N.B.: for compatibility with ES)\n        if (u_point_type == TANGRAM_POINT_TYPE_TEXTURE) { // sprite texture\n            color *= texture2D(u_texture, v_texcoord);\n        }\n        else if (u_point_type == TANGRAM_POINT_TYPE_LABEL) { // label texture\n            color = texture2D(u_texture, v_texcoord);\n            color.rgb /= max(color.a, 0.001); // un-multiply canvas texture\n        }\n        else if (u_point_type == TANGRAM_POINT_TYPE_SHADER) { // shader point\n            // Mask of outermost circle, either outline or point boundary\n            float _d = length(v_texcoord); // distance to this fragment from the point center\n            float _outer_alpha = _tangram_antialias(_d, 1.);\n            float _fill_alpha = _tangram_antialias(_d, 1. - (v_outline_edge * 0.5)) * color.a;\n            float _stroke_alpha = (_outer_alpha - _tangram_antialias(_d, 1. - v_outline_edge)) * v_outline_color.a;\n\n            // Apply alpha compositing with stroke 'over' fill.\n            #ifdef TANGRAM_BLEND_ADD\n                color.a = _stroke_alpha + _fill_alpha;\n                color.rgb = color.rgb * _fill_alpha + v_outline_color.rgb * _stroke_alpha;\n            #else // TANGRAM_BLEND_OVERLAY (and fallback for not implemented blending modes)\n                color.a = _stroke_alpha + _fill_alpha * (1. - _stroke_alpha);\n                color.rgb = mix(color.rgb * _fill_alpha, v_outline_color.rgb, _stroke_alpha) / max(color.a, 0.001); // avoid divide by zero\n            #endif\n        }\n    #else\n        // If shader points not supported, assume label texture\n        color = texture2D(u_texture, v_texcoord);\n        color.rgb /= max(color.a, 0.001); // un-multiply canvas texture\n    #endif\n\n    // Shader blocks for color/filter are only applied for sprites, shader points, and standalone text,\n    // NOT for text attached to a point (N.B.: for compatibility with ES)\n    if (u_apply_color_blocks) {\n        #pragma tangram: color\n        #pragma tangram: filter\n    }\n\n    color.a *= v_alpha_factor;\n\n    // highlight hidden label in fragment shader for debugging\n    #ifdef TANGRAM_SHOW_HIDDEN_LABELS\n        if (v_label_hidden > 0.) {\n            color.a *= 0.5;\n            color.rgb = vec3(1., 0., 0.);\n        }\n    #endif\n\n    // Use alpha test as a lower-quality substitute\n    // For opaque and translucent: avoid transparent pixels writing to depth buffer, obscuring geometry underneath\n    // For multiply: avoid transparent pixels multiplying geometry underneath to zero/full black\n    #if defined(TANGRAM_BLEND_OPAQUE) || defined(TANGRAM_BLEND_TRANSLUCENT) || defined(TANGRAM_BLEND_MULTIPLY)\n        if (color.a < TANGRAM_ALPHA_TEST) {\n            discard;\n        }\n    #endif\n\n    gl_FragColor = color;\n}\n",selection:!0,collision:!0,blend:"overlay",init:function(t){void 0===t&&(t={}),mo.init.call(this,t),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.stencil_proxy_tiles=!1,this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),!0===rr.suppress_label_fade_in?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),!0!==rr.suppress_label_snap_animation&&(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),!0===rr.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(t,e,n){var r=n.tile;if(r.generation===this.generation){var i={};if(i.color=this.parseColor(e.color,n),i.texture=e.texture,i.label_texture=null,i.blend_order=e.blend_order,i.color||i.texture){var o;if(i.alpha=ji.evalCachedProperty(e.alpha,n),this.hasSprites(i)){if(!(o=this.parseSprite(i,e,n)))return void Jn({level:"debug",once:!0},"Layer group '"+e.layers.join(", ")+"' uses a texture '"+i.texture+"', but doesn't specify which sprite to draw. Features that match this layer group won't be drawn without specifying the sprite with the 'sprite' or 'sprite_default' properties. The merged draw parameters for this layer group are:",e).then((function(n){n&&Jn("debug","Example feature for layer group '"+e.layers.join(", ")+"'",t)}));i.texcoords=o.texcoords}else if(e.sprite)return void Jn({level:"warn",once:!0},"Layer group '"+e.layers.join(", ")+"' specifies sprite '"+e.sprite+"', but the texture '"+e.texture+"' doesn't define any sprites. Features that match this layer group won't be drawn. The merged draw parameters for this layer group are:",e);if(this.calcSize(e,i,o,n),e.outline&&(i.outline_width=ji.evalCachedProperty(e.outline.width,n)||ji.defaults.outline.width,i.outline_color=this.parseColor(e.outline.color,n)),i.outline_edge_pct=0,i.outline_width&&i.outline_color){var a=i.outline_width;i.size[0]+=a,i.size[1]+=a,i.outline_edge_pct=a/Math.min(i.size[0],i.size[1])*2,i.outline_alpha=ji.evalCachedProperty(e.outline.alpha,n)}i.size[0]=Math.min(i.size[0],256),i.size[1]=Math.min(i.size[1],256),i.placement=e.placement,i.placement_min_length_ratio=ji.evalCachedProperty(e.placement_min_length_ratio,n),i.placement===Us.SPACED&&e.placement_spacing&&(i.placement_spacing=ji.evalCachedProperty(e.placement_spacing,n)),i.angle=ji.evalProperty(e.angle,n)||0,i.z=ji.evalCachedDistanceProperty(e.z,n)||ji.defaults.z,i.tile_edges=e.tile_edges,this.computeLayout(i,t,e,n,r);var s=e.text&&!1!==e.text.visible&&this.parseTextFeature(t,e.text,n,r);Array.isArray(s)&&(s=null,Jn({level:"warn",once:!0},"Layer group '"+e.layers.join(", ")+"': cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; provided 'text_source' value was "+JSON.stringify(e.text.text_source))),s&&(s.layout.parent=i,s.layout.priority=e.text.priority?Math.max(s.layout.priority,i.priority+.5):i.priority+.5,Xa.addStyle(this.collision_group_text,r.id)),this.queueFeature({feature:t,draw:e,context:n,style:i,text_feature:s},r),Xa.addStyle(this.collision_group_points,r.id)}}},calcSize:function(t,e,n,r){if(e.size=t.size,e.size){if(e.size=ji.evalCachedPointSizeProperty(t.size,n,Gr.textures[e.texture],r),null==e.size)return void Jn({level:"warn",once:!0},"Layer group '"+t.layers.join(", ")+"': 'size' ("+JSON.stringify(t.size.value)+") couldn't be interpreted, features that match this layer group won't be drawn");"number"==typeof e.size&&(e.size=[e.size,e.size])}else e.size=n&&n.css_size||[16,16]},hasSprites:function(t){return t.texture&&Gr.textures[t.texture]&&Gr.textures[t.texture].sprites},getSpriteInfo:function(t,e){var n=Gr.textures[t.texture].sprites[e]&&Gr.getSpriteInfo(t.texture,e);return e&&!n?(this.texture_missing_sprites[t.texture]=this.texture_missing_sprites[t.texture]||{},this.texture_missing_sprites[t.texture][e]||(Jn("debug","Style: in style '"+this.name+"', could not find sprite '"+e+"' for texture '"+t.texture+"'"),this.texture_missing_sprites[t.texture][e]=!0)):n&&(n.sprite=e),n},parseSprite:function(t,e,n){var r=ji.evalProperty(e.sprite,n);return this.getSpriteInfo(t,r)||this.getSpriteInfo(t,e.sprite_default)},queueFeature:function(t,e){this.tile_data[e.id]&&this.queues[e.id]||this.startData(e),this.queues[e.id]=this.queues[e.id]||[],this.queues[e.id].push(t)},endData:function(t){return new Promise(function(e,n){var r,i,o,a,s,u,l,c,h,f;return r=this,t.canceled?(Jn("trace","Style "+this.name+": stop tile build because tile was canceled: "+t.key),e(null)):(i=this.queues[t.id],delete this.queues[t.id],o=[],a=[],i.forEach((function(t){for(var e=t.style,n=t.feature,i=n.geometry,s=r.buildLabels(e.size,i,e),u=0;u<s.length;u++){var l=s[u],c={feature:n,draw:t.draw,context:t.context,style:e,label:l};if(a.push(c),t.text_feature){var h={feature:n,draw:t.text_feature.draw,context:t.context,text:t.text_feature.text,text_settings_key:t.text_feature.text_settings_key,layout:t.text_feature.layout,point_label:l,linked:c};o.push(h),t.draw.text.optional||(c.linked=h)}}})),Promise.resolve(Promise.all([Xa.collide(a,this.collision_group_points,t.id).then((function(t){t.forEach((function(t){r.feature_style=t.style,r.feature_style.label=t.label,r.feature_style.linked=t.linked,mo.addFeature.call(r,t.feature,t.draw,t.context)}))})),this.collideAndRenderTextLabels(t,this.collision_group_text,o)])).then(function(i){try{return s=i[1],u=s.labels,l=s.texts,c=s.textures,u&&l&&u.forEach((function(t){var e=t.text_settings_key,n=l[e]&&l[e][t.text],i=r.feature_style;i.label=t.label,i.linked=t.linked,i.size=n.size.logical_size,i.texcoords=n.align[t.label.align].texcoords,i.label_texture=c[n.align[t.label.align].texture_id],i.blend_order=t.draw.blend_order,mo.addFeature.call(r,t.feature,t.draw,t.context)})),this.freeText(t),Promise.resolve(mo.endData.call(this,t)).then((function(t){try{return(h=t)&&c&&c.length&&(h.textures=h.textures||[],(f=h.textures).push.apply(f,c)),e(h)}catch(t){return n(t)}}),n)}catch(t){return n(t)}}.bind(this),n))}.bind(this))},_preprocess:function(t){t.color=ji.createColorPropertyCache(t.color),t.alpha=ji.createPropertyCache(t.alpha),t.texture=void 0!==t.texture?t.texture:this.texture,t.blend_order=this.getBlendOrderForDraw(t),t.outline&&(t.outline.color=ji.createColorPropertyCache(t.outline.color),t.outline.alpha=ji.createPropertyCache(t.outline.alpha),t.outline.width=ji.createPropertyCache(t.outline.width,ji.parsePositiveNumber)),t.z=ji.createPropertyCache(t.z,ji.parseUnits);try{t.size=ji.createPointSizePropertyCache(t.size,t.texture)}catch(e){return Jn({level:"warn",once:!0},"Layer group '"+t.layers.join(", ")+"': "+e+" ("+JSON.stringify(t.size)+"), features that match this layer group won't be drawn."),null}if(t.offset=ji.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(ji.parseNumber)})),t.buffer=ji.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(ji.parsePositiveNumber)})),t.repeat_distance=ji.createPropertyCache(t.repeat_distance,ji.parseNumber),t.placement=Us[t.placement&&t.placement.toUpperCase()],null==t.placement&&(t.placement=Us.VERTEX),t.placement_spacing=null!=t.placement_spacing?t.placement_spacing:80,t.placement_spacing=ji.createPropertyCache(t.placement_spacing,ji.parsePositiveNumber),t.placement_min_length_ratio=null!=t.placement_min_length_ratio?t.placement_min_length_ratio:1,t.placement_min_length_ratio=ji.createPropertyCache(t.placement_min_length_ratio,ji.parsePositiveNumber),"number"==typeof t.angle)t.angle=t.angle*Math.PI/180;else if("function"==typeof t.angle){var e=t.angle;t.angle=function(t){return e(t)*Math.PI/180}}else t.angle=t.angle||0;return t.text=this.preprocessText(t.text),t.text&&(t.text.key=t.key,t.text.group=t.group,t.text.layers=t.layers,t.text.order=t.order,t.text.blend_order=t.blend_order,t.text.repeat_group=null!=t.text.repeat_group?t.text.repeat_group:t.repeat_group,t.text.anchor=t.text.anchor||this.default_anchor,t.text.optional="boolean"==typeof t.text.optional&&t.text.optional,t.text.interactive=t.text.interactive||t.interactive),t},default_anchor:["bottom","top","right","left"],computeLayout:function(t,e,n,r,i){var o=t||{};o.id=e,o.units_per_pixel=i.units_per_pixel||1,o.collide=!1!==n.collide,o.anchor=n.anchor,o.offset=ji.evalCachedProperty(n.offset,r)||ji.zeroPair,o.buffer=ji.evalCachedProperty(n.buffer,r)||ji.zeroPair,o.repeat_distance=ji.evalCachedProperty(n.repeat_distance,r),o.repeat_distance&&(o.repeat_distance*=o.units_per_pixel,o.repeat_scale=1,"function"==typeof n.repeat_group?o.repeat_group=n.repeat_group(r):o.repeat_group=n.repeat_group||r.layer);var a=n.priority;return null!=a?"function"==typeof a&&(a=a(r)):a=-1>>>0,o.priority=a,o},buildTextLabels:function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=this.texts[t.id][i.text_settings_key][i.text].size.collision_size;i.label=new $a(i.point_label.position,o,i.layout),n.push(i)}return n},buildLabels:function(t,e,n){var r=[];if("Point"===e.type)r.push(new $a(e.coordinates,t,n,n.angle));else if("MultiPoint"===e.type)for(var i=e.coordinates,o=0;o<i.length;++o){var a=i[o];r.push(new $a(a,t,n,n.angle))}else if("LineString"===e.type)for(var s=Ja(e.coordinates,t,n),u=0;u<s.length;++u)r.push(s[u]);else if("MultiLineString"===e.type)for(var l=e.coordinates,c=0;c<l.length;c++)for(var h=Ja(l[c],t,n),f=0;f<h.length;++f)r.push(h[f]);else if("Polygon"===e.type)if(n.placement===Us.CENTROID){var d=ai.centroid(e.coordinates);d&&r.push(new $a(d,t,n,n.angle))}else for(var p=e.coordinates,m=0;m<p.length;m++)for(var g=Ja(p[m],t,n),v=0;v<g.length;++v)r.push(g[v]);else if("MultiPolygon"===e.type)if(n.placement===Us.CENTROID){var _=ai.multiCentroid(e.coordinates);_&&r.push(new $a(_,t,n,n.angle))}else for(var y=e.coordinates,b=0;b<y.length;b++)for(var x=y[b],w=0;w<x.length;w++)for(var T=Ja(x[w],t,n),A=0;A<T.length;++A)r.push(T[A]);return r},makeVertexTemplate:function(t,e,n){void 0===n&&(n=!0);var r=0;this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=t.z||0,this.vertex_template[r++]=this.scaleOrder(t.order),this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=t.label.layout.collide?0:1,e.variant.shader_point||(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=0,this.vertex_template[r++]=0;var i=t.color||ji.defaults.color;if(this.vertex_template[r++]=255*i[0],this.vertex_template[r++]=255*i[1],this.vertex_template[r++]=255*i[2],this.vertex_template[r++]=255*(null!=t.alpha?t.alpha:i[3]),e.variant.selection&&(this.vertex_template[r++]=255*t.selection_color[0],this.vertex_template[r++]=255*t.selection_color[1],this.vertex_template[r++]=255*t.selection_color[2],this.vertex_template[r++]=255*t.selection_color[3]),e.variant.shader_point){var o=t.outline_color||ji.defaults.outline.color;this.vertex_template[r++]=255*o[0],this.vertex_template[r++]=255*o[1],this.vertex_template[r++]=255*o[2],this.vertex_template[r++]=255*(null!=t.outline_alpha?t.outline_alpha:o[3]),this.vertex_template[r++]=t.outline_edge_pct||ji.defaults.outline.width}return n&&this.addCustomAttributesToVertexTemplate(t,r),this.vertex_template},buildQuad:function(t,e,n,r,i,o,a,s,u,l,c){return e[0]<=0||e[1]<=0?0:function(t,e,n,r,i,o,a,s,u,l,c,h){var f=128*i[0],d=128*i[1];Pa[0]=-f,Pa[1]=-d,Pa[2]=f,Pa[3]=d;for(var p=c||So,m=e.vertex_elements,g=e.vertex_count,v=0;v<4;v++)n[r.a_position+0]=t[0],n[r.a_position+1]=t[1],n[r.a_shape+0]=Pa[Ma[v]],n[r.a_shape+1]=Pa[Oa[v]],n[r.a_shape+2]=u,n[r.a_offset+0]=o[0],n[r.a_offset+1]=o[1],r.a_texcoord&&(n[r.a_texcoord+0]=65535*p[Ma[v]],n[r.a_texcoord+1]=65535*p[Oa[v]]),h&&(n[r.a_pre_angles+0]=Ea*s[0],n[r.a_pre_angles+1]=Ea*s[1],n[r.a_pre_angles+2]=Ea*s[2],n[r.a_pre_angles+3]=Ea*s[3],n[r.a_angles+0]=ka*l[0],n[r.a_angles+1]=ka*l[1],n[r.a_angles+2]=ka*l[2],n[r.a_angles+3]=ka*l[3],n[r.a_offsets+0]=64*a[0],n[r.a_offsets+1]=64*a[1],n[r.a_offsets+2]=64*a[2],n[r.a_offsets+3]=64*a[3]),e.addVertex(n);return m.push(g+0),m.push(g+1),m.push(g+2),m.push(g+2),m.push(g+3),m.push(g+0),2}(t,l,c,l.vertex_layout.index,e,o,a,i,4096*n,r,s,u)},build:function(t,e){var n=t.label;return"curved"===n.type?this.buildCurvedLabel(n,t,e):this.buildStraightLabel(n,t,e)},buildStraightLabel:function(t,e,n){var r,i,o=this.getTileMesh(n.tile,this.meshVariantTypeForDraw(e)),a=this.makeVertexTemplate(e,o);"point"!==t.type?(r=e.size[t.type],i=e.texcoords[t.type].texcoord):(r=e.size,i=e.texcoords),o.uniforms=o.uniforms||{},e.label_texture?(o.uniforms.u_texture=e.label_texture,o.uniforms.u_point_type=2,o.uniforms.u_apply_color_blocks=!1):e.texture?(o.uniforms.u_texture=e.texture,o.uniforms.u_point_type=1,o.uniforms.u_apply_color_blocks=!0):(o.uniforms.u_texture=Gr.default,o.uniforms.u_point_type=3,o.uniforms.u_apply_color_blocks=!0);var s=t.offset,u=this.buildQuad(t.position,r,t.angle,null,null,s,null,i,!1,o.vertex_data,a),l=e.linked&&e.linked.label.id;return this.trackLabel(t,l,o,u,n),u},buildCurvedLabel:function(t,e,n){for(var r,i,o=0,a=0;a<t.num_segments;a++){var s=e.size[t.type][a],u=e.texcoords_stroke[a];e.label_texture=e.label_textures[a],r=this.getTileMesh(n.tile,this.meshVariantTypeForDraw(e)),i=this.makeVertexTemplate(e,r),r.uniforms=r.uniforms||{},r.uniforms.u_texture=e.label_texture,r.uniforms.u_point_type=2,r.uniforms.u_apply_color_blocks=!1;var l=t.offset||[0,0],c=t.position,h=t.angles[a],f=t.offsets[a],d=t.pre_angles[a],p=this.buildQuad(c,s,t.angle,h,d,l,f,u,!0,r.vertex_data,i);o+=p;var m=e.linked&&e.linked.label.id;this.trackLabel(t,m,r,p,n)}for(var g=0;g<t.num_segments;g++){var v=e.size[t.type][g],_=e.texcoords[t.type][g].texcoord;e.label_texture=e.label_textures[g],r=this.getTileMesh(n.tile,this.meshVariantTypeForDraw(e)),i=this.makeVertexTemplate(e,r),r.uniforms=r.uniforms||{},r.uniforms.u_texture=e.label_texture,r.uniforms.u_point_type=2,r.uniforms.u_apply_color_blocks=!1;var y=t.offset||[0,0],b=t.position,x=t.angles[g],w=t.offsets[g],T=t.pre_angles[g],A=this.buildQuad(b,v,t.angle,x,T,y,w,_,!0,r.vertex_data,i);o+=A;var S=e.linked&&e.linked.label.id;this.trackLabel(t,S,r,A,n)}return o},trackLabel:function(t,e,n,r){if(t.layout.collide||t.may_repeat_across_tiles){n.labels=n.labels||{},n.labels[t.id]=n.labels[t.id]||{container:{label:t.toJSON(),linked:e},ranges:[]};var i=2*r,o=n.vertex_data.offset-n.vertex_data.stride*i;n.labels[t.id].ranges.push([o,i])}},buildLines:function(t,e,n){return this.build(e,n)},buildPoints:function(t,e,n){return this.build(e,n)},buildPolygons:function(t,e,n){return this.build(e,n)},vertexLayoutForMeshVariant:function(t){if(null==this.vertex_layouts[t.shader_point]){var e=[{name:"a_position",size:4,type:Xi.SHORT,normalized:!1},{name:"a_shape",size:4,type:Xi.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:Xi.UNSIGNED_SHORT,normalized:!0,static:t.shader_point?[0,0]:null},{name:"a_offset",size:2,type:Xi.SHORT,normalized:!1},{name:"a_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0,static:t.selection?null:[0,0,0,0]},{name:"a_outline_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0,static:t.shader_point?null:[0,0,0,0]},{name:"a_outline_edge",size:1,type:Xi.FLOAT,normalized:!1,static:t.shader_point?null:0}];this.addCustomAttributesToAttributeList(e),this.vertex_layouts[t.shader_point]=new To(e)}return this.vertex_layouts[t.shader_point]},meshVariantTypeForDraw:function(t){var e=t.label_texture||t.texture||"__shader_point",n=e+"/"+t.blend_order;return null==this.variants[n]&&(this.variants[n]={key:n,selection:1,shader_point:"__shader_point"===e,blend_order:t.blend_order,mesh_order:t.label_texture?1:0}),this.variants[n]},makeMesh:function(t,e,n){return void 0===n&&(n={}),n=Object.assign({},n,{fade_in_time:this.fade_in_time}),mo.makeMesh.call(this,t,e,n)}});var Vs=Math.abs;D(D.S,"Math",{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=Vs(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(i)}});var Zs=[0,.33,.66,.99],Ws=function(t,e,n,r){for(var i=[{type:"straight",tolerance:r.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],o=0;o<i.length;o++){var a=i[o],s=void 0;if("straight"===a.type?s=new Hs(e,n,r,a.tolerance):"curved"===a.type&&!r.no_curving&&n.length>2&&(s=new Ys(t,n,r)),s&&!s.throw_away)return s}return!1},qs=function(){function t(t){this.id=Wa.nextLabelId(),this.layout=t,this.position=[],this.angle=0,this.offset=t.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.obbs=[],this.aabbs=[],this.type="",this.throw_away=!1}var e=t.prototype;return e.toJSON=function(){return{id:this.id,type:this.type,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,may_repeat_across_tiles:this.may_repeat_across_tiles,layout:qa(this.layout)}},t.splitLineByOrientation=function(t){for(var e=[t[0]],n=0,r=0,i=0,o=e,a=!1,s=1;s<t.length;s++){var u=t[s],l=t[s-1],c=to.length(to.sub(u,l));u[0]>l[0]?1===i?(e.push(u),(n+=c)>r&&(o=e,r=n,a=!1)):(e=[l,u],(n=c)>r&&(o=e,r=n,a=!1),i=1):u[0]<l[0]?-1===i?(e.unshift(u),(n+=c)>r&&(o=e,r=n,a=!0)):(e=[u,l],(n=c)>r&&(o=e,r=n,a=!0),i=-1):(-1===i?e.unshift(u):(e.push(u),i=1),(n+=c)>r&&(o=e,r=n,a=-1===i))}return[o,a]},e.discard=function(t,e){if(void 0===e&&(e=null),this.throw_away)return!0;for(var n=0;n<this.obbs.length;n++){var r={aabb:this.aabbs[n],obb:this.obbs[n]};if(Wa.prototype.occluded.call(r,t,e))return!0}return!1},e.inTileBounds=function(){for(var t=0;t<this.aabbs.length;t++){var e={aabb:this.aabbs[t]};if(!Wa.prototype.inTileBounds.call(e))return!1}return!0},t.createOBB=function(t,e,n,r,i,o,a){var s=t[0],u=t[1];return!o||0===o[0]&&0===o[1]||(s+=(o=to.rot(o,i))[0]*a,u-=o[1]*a),new Za(s,u,-r,e,n)},t}(),Hs=function(t){function e(e,n,r,i){var o;return(o=t.call(this,r)||this).type="straight",o.size=e,o.throw_away=!o.fit(e,n,r,i),o}Rn(e,t);var n=e.prototype;return n.fit=function(t,e,n,r){var i,o=this.unit_scale,a=qs.splitLineByOrientation(e);e=a[0],i=a[1],"number"==typeof n.orientation&&(this.offset[1]+=1.2*(t[1]-n.vertical_buffer),i&&(this.offset[1]*=-1),-1===n.orientation&&(this.offset[1]*=-1));for(var s=Ks(e),u=t[0]*o,l=0;l<e.length-1;l++)for(var c=e[l],h=0,f=0,d=l+1,p=void 0;d<e.length;){var m=e[d-1],g=e[d],v=$s(m,g);if(d!==l+1&&(h+=Js(v,p)),Math.abs(h)>.1)break;if(Xs(f+=s[d-1],u)<r){var _=to.mult(to.add(c,g),.5);return this.angle=-v,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,"number"==typeof n.orientation&&(this.offset[1]*=-1)),this.position=_,this.updateBBoxes(this.position,t,this.angle,this.angle,this.offset),!0}p=v,d++}return!1},n.updateBBoxes=function(t,e,n,r,i){var o=this.unit_scale;this.obbs=[],this.aabbs=[];var a=(e[0]+2*this.layout.buffer[0])*o*Wa.epsilon,s=(e[1]+2*this.layout.buffer[1])*o*Wa.epsilon,u=qs.createOBB(t,a,s,n,r,i,o),l=u.getExtent();this.obbs.push(u),this.aabbs.push(l),this.inTileBounds&&(this.breach=!this.inTileBounds()),this.mayRepeatAcrossTiles&&(this.may_repeat_across_tiles=this.mayRepeatAcrossTiles())},e}(qs),Ys=function(t){function e(e,n,r){var i;return(i=t.call(this,r)||this).type="curved",i.angles=[],i.pre_angles=[],i.offsets=[],i.num_segments=e.length,i.sizes=e,i.throw_away=!i.fit(i.sizes,n,r),i}Rn(e,t);var n=e.prototype;return n.toJSON=function(){return{id:this.id,type:this.type,obbs:this.obbs.map((function(t){return t.toJSON()})),position:this.position,breach:this.breach,may_repeat_across_tiles:this.may_repeat_across_tiles,layout:qa(this.layout)}},n.fit=function(t,n,r){var i,o=this.unit_scale,a=Math.max.apply(Math,t.map((function(t){return t[1]}))),s=a*o,u=qs.splitLineByOrientation(n);n=u[0],i=u[1],"number"==typeof r.orientation&&(this.offset[1]+=1.2*(a-r.vertical_buffer),i&&(this.offset[1]*=-1),-1===r.orientation&&(this.offset[1]*=-1));var l=Ks(n),c=t.map((function(t){return t[0]*o})),h=l.reduce((function(t,e){return t+e}),0),f=c.reduce((function(t,e){return t+e}),0);if(f>h)return!1;var d=n.length-1;if(d-0<2)return!1;var p=e.curvaturePlacement(n,h,l,f,0,d),m=n[p];if(-1===p||d-p<2)return!1;this.position=m;for(var g=0;g<c.length;g++){this.offsets[g]=[],this.angles[g]=[],this.pre_angles[g]=[];for(var v=0;v<Zs.length;v++){var _=Zs[v],y=e.scaleLine(_,n),b=y[0],x=y[1];m=b[p];var w=e.placeAtIndex(p,b,x,c),T=w.positions,A=w.offsets,S=w.angles,E=w.pre_angles,k=A.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));if(0===_){this.angle=1/S.length*S.reduce((function(t,e){return t+e}));for(var M=0;M<T.length;M++){var O=T[M],P=E[M],z=c[M],R=P+S[M],L=this.angle,C=qs.createOBB(O,z,s,R,L,this.offset,o),j=C.getExtent();this.obbs.push(C),this.aabbs.push(j)}}this.offsets[g].push(k[g]),this.angles[g].push(S[g]),this.pre_angles[g].push(E[g])}}return!0},e.curvaturePlacement=function(t,e,n,r,i,o){i=i||0,o=o||t.length-1;for(var a=[],s=i+1;s<o;s++){var u=t[s-1],l=t[s],c=t[s+1],h=to.perp(l,u),f=to.perp(c,l),d=to.angleBetween(h,f);d>1&&(d=1/0),a.push(d)}a.push(1/0);for(var p=[],m=[],g=i,v=0,_=0;_<i;_++)v+=n[_];for(;v+r<e;){for(var y=v+r,b=v,x=g,w=0;x<o&&b+n[x]<y&&(w+=a[x])!==1/0;)b+=n[x],x++;if(0===w)return g;var T=w/(x-g);p.push(w),m.push(T),v+=n[g],g++}if(0===p.length)return-1;var A=Math.min.apply(null,p),S=m[p.indexOf(A)];return A<1.3&&S<.4?p.indexOf(A):-1},e.scaleLine=function(t,e){var n=[e[0]],r=[];return e.forEach((function(i,o){if(o!==e.length-1){var a=to.sub(e[o+1],e[o]),s=to.mult(a,1+t);n.push(to.add(n[o],s)),r.push(to.length(s))}})),[n,r]},e.placeAtIndex=function(t,n,r,i){var o=n[t],a=e.getIndicesAndOffsets(t,r,i),s=a[0],u=a[1],l=e.getPositionsFromIndicesAndOffsets(n,s,u),c=e.getAnglesFromIndicesAndOffsets(o,s,n,l);return{positions:l,offsets:c[0],angles:c[1],pre_angles:c[2]}},e.getIndicesAndOffsets=function(t,e,n){for(var r=n.length,i=[],o=[],a=0,s=0,u=0;a<r;){for(var l=n[a];a<r&&s+.5*l<=u+e[t];){var c=s-u+.5*l;o.push(c),i.push(t),s+=l,l=n[++a]}u+=e[t],t++}return[i,o]},e.getPositionsFromIndicesAndOffsets=function(t,e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i],a=n[i],s=$s(t[o],t[o+1]),u=to.rot([a,0],s),l=to.add(t[o],u);r.push(l)}return r},e.getAnglesFromIndicesAndOffsets=function(t,e,n,r){for(var i=[],o=[],a=[],s=0;s<r.length;s++){var u=r[s],l=e[s],c=to.sub(u,t),h=-to.angle(c),f=-$s(n[l],n[l+1])-h;if(s>0){var d=i[s-1],p=o[s-1];Math.abs(h-d)>Math.PI&&(h+=h>d?-2*Math.PI:2*Math.PI),Math.abs(p-f)>Math.PI&&(f+=f>p?-2*Math.PI:2*Math.PI)}i.push(h),o.push(f),a.push(c)}return[a,i,o]},e}(qs);function Xs(t,e){return e/t}function $s(t,e){var n=to.sub(e,t);return to.angle(n)}function Ks(t){for(var e=[],n=0;n<t.length-1;n++){var r=t[n],i=t[n+1],o=Math.hypot(r[0]-i[0],r[1]-i[1]);e.push(o)}return e}function Js(t,e){var n,r;for(t>e?(n=e,r=t):(n=t,r=e);r-n>Math.PI;)n+=2*Math.PI;return Math.abs(r-n)}var Qs=Object.create(Gs);Object.assign(Qs,{name:"text",super:Gs,built_in:!0,init:function(t){void 0===t&&(t={}),mo.init.call(this,t),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_CURVED_LABEL=!0,this.reset()},makeVertexTemplate:function(t,e){this.super.makeVertexTemplate.call(this,t,e,!1);for(var n=e.vertex_data.vertex_layout.index.a_pre_angles,r=0;r<12;r++)this.vertex_template[n++]=0;return this.addCustomAttributesToVertexTemplate(t,n),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(t,e,n){var r=this,i=n.tile;if(i.generation===this.generation){var o=t.geometry.type;e.can_articulate="LineString"===o||"MultiLineString"===o,e.supersample_text="LineString"===o||"MultiLineString"===o;var a=this.parseTextFeature(t,e,n,i);a&&(a instanceof Array?a.forEach((function(e){e.feature=t,e.context=n,e.layout.vertex=!1,r.queueFeature(e,i)})):(a.feature=t,a.context=n,a.layout.vertex=!1,this.queueFeature(a,i)),Xa.addStyle(this.name,i.id))}},endData:function(t){return new Promise(function(e,n){var r,i,o,a,s,u,l,c;return r=this,i=this.queues[t.id],delete this.queues[t.id],Promise.resolve(this.collideAndRenderTextLabels(t,this.name,i)).then(function(i){try{return a=(o=i).labels,s=o.texts,u=o.textures,a&&s&&(this.texts[t.id]=s,a.forEach((function(e){var n=e.text_settings_key,i=r.texts[t.id][n]&&r.texts[t.id][n][e.text],o=r.feature_style;o.label=e.label,i.text_settings.can_articulate?(o.size={},o.texcoords={},"straight"===e.label.type?(o.size.straight=i.size.logical_size,o.texcoords.straight=i.texcoords.straight,o.label_texture=u[i.texcoords.straight.texture_id]):(o.size.curved=i.segment_sizes.map((function(t){return t.logical_size})),o.texcoords_stroke=i.texcoords_stroke,o.texcoords.curved=i.texcoords.curved,o.label_textures=i.texcoords.curved.map((function(t){return u[t.texture_id]})))):(o.size=i.size.logical_size,o.texcoords=i.align[e.label.align].texcoords,o.label_texture=u[i.align[e.label.align].texture_id]),o.blend_order=e.draw.blend_order,mo.addFeature.call(r,e.feature,e.draw,e.context)}))),this.freeText(t),Promise.resolve(mo.endData.call(this,t)).then((function(t){try{if(l=t)for(var r in u&&u.length&&(c=l.textures).push.apply(c,u),l.meshes)l.meshes[r].uniforms.u_apply_color_blocks=!0;return e(l)}catch(t){return n(t)}}),n)}catch(t){return n(t)}}.bind(this),n)}.bind(this))},_preprocess:function(t){return t.blend_order=this.getBlendOrderForDraw(t),this.preprocessText(t)},buildTextLabels:function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=this.texts[t.id][i.text_settings_key][i.text],a=void 0;if(i.layout.vertical_buffer=o.vertical_buffer,o.text_settings.can_articulate){var s=o.segment_sizes.map((function(t){return t.collision_size}));i.layout.no_curving=o.no_curving,a=this.buildLabels(s,i.feature.geometry,i.layout,o.size.collision_size)}else a=this.buildLabels(o.size.collision_size,i.feature.geometry,i.layout);for(var u=0;u<a.length;u++){var l=Object.create(i);l.label=a[u],n.push(l)}}return n},buildLabels:function(t,e,n,r){var i=[];if("LineString"===e.type)Array.prototype.push.apply(i,this.buildLineLabels(e.coordinates,t,n,r));else if("MultiLineString"===e.type)for(var o=e.coordinates,a=0;a<o.length;++a)Array.prototype.push.apply(i,this.buildLineLabels(o[a],t,n,r));else if("Point"===e.type)i.push(new $a(e.coordinates,t,n));else if("MultiPoint"===e.type)for(var s=e.coordinates,u=0;u<s.length;++u)i.push(new $a(s[u],t,n));else if("Polygon"===e.type){var l=ai.centroid(e.coordinates);l&&i.push(new $a(l,t,n))}else if("MultiPolygon"===e.type){var c=ai.multiCentroid(e.coordinates);c&&i.push(new $a(c,t,n))}return i},buildLineLabels:function(t,e,n,r){var i=[],o=Math.min(n.subdiv,t.length-1);if(o>1)for(var a=(t.length-1)/o,s=0;s<o;s++){var u=Math.floor(s*a),l=Math.floor((s+1)*a)+1,c=t.slice(u,l),h=Ws(e,r,c,n);h&&i.push(h)}if(i.length<o){var f=Ws(e,r,t,n);f&&i.push(f)}return i},vertexLayoutForMeshVariant:function(t){if(null==this.vertex_layouts[t.shader_point]){var e=[{name:"a_position",size:4,type:Xi.SHORT,normalized:!1},{name:"a_shape",size:4,type:Xi.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:Xi.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:Xi.SHORT,normalized:!1},{name:"a_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:Xi.UNSIGNED_BYTE,normalized:!0,static:t.selection?null:[0,0,0,0]},{name:"a_pre_angles",size:4,type:Xi.BYTE,normalized:!1},{name:"a_angles",size:4,type:Xi.SHORT,normalized:!1},{name:"a_offsets",size:4,type:Xi.UNSIGNED_SHORT,normalized:!1}];this.addCustomAttributesToAttributeList(e),this.vertex_layouts[t.shader_point]=new To(e)}return this.vertex_layouts[t.shader_point]}}),Qs.texture_id=0;var tu=Object.create(na);Object.assign(tu,{name:"raster",super:na,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1},_preprocess:function(t){return t.color=t.color||ji.defaults.color,this.super._preprocess.apply(this,arguments)}});var eu=function(){function t(){this.styles={},this.base_styles={},this.active_styles=[],this.active_blend_orders=[],this.register(Object.create(na)),this.register(Object.create(Sa)),this.register(Object.create(Gs)),this.register(Object.create(Qs)),this.register(Object.create(tu))}var e=t.prototype;return e.init=function(){Jr.removeBlock("global"),Jr.removeBlock("setup"),Jr.addBlock("global","#ifdef TANGRAM_VERTEX_SHADER\n\n// Apply layer ordering to avoid z-fighting\nvoid applyLayerOrder (float layer, inout vec4 position) {\n    position.z -= layer * TANGRAM_LAYER_DELTA * position.w;\n}\n\n// Vertex position in model space: [0, 1] range over the local tile\n// Note positions can be outside that range due to unclipped geometry, geometry higher than a unit cube, etc.\nvec4 modelPosition() {\n    return\n        vec4(\n            a_position.xyz / TANGRAM_TILE_SCALE         // scale coords to ~0-1 range\n            * exp2(u_tile_origin.z - u_tile_origin.w),  // adjust for tile overzooming\n        1.)\n        + vec4(0., 1., 0., 0.);\n        // NB: additional offset to account for unusual Tangram JS y coords,\n        // should be refactored to remove\n}\n\n// Position in model space as above, but according to tile coordinate (as opposed to style) zoom\n// e.g. unadjusted for tile overzooming\nvec4 modelPositionBaseZoom() {\n    return\n        vec4(\n            a_position.xyz / TANGRAM_TILE_SCALE,    // scale coords to ~0-1 range\n        1.)\n        + vec4(0., 1., 0., 0.); // see note on offset above\n}\n\n#endif\n\n// Vertex position in world coordinates, useful for 3d procedural textures, etc.\nvec4 worldPosition() {\n    return v_world_position;\n}\n\n// Optionally wrap world coordinates (allows more precision at higher zooms)\n// e.g. at wrap 1000, the world space will wrap every 1000 meters\n#ifdef TANGRAM_VERTEX_SHADER\n\nvec4 wrapWorldPosition(vec4 world_position) {\n    #if defined(TANGRAM_WORLD_POSITION_WRAP)\n    vec2 anchor = u_tile_origin.xy - mod(u_tile_origin.xy, TANGRAM_WORLD_POSITION_WRAP);\n        world_position.xy -= anchor;\n    #endif\n    return world_position;\n}\n\n#endif\n\n// Normal in world space\n#if defined(TANGRAM_VERTEX_SHADER)\n\nvec3 worldNormal() {\n    return TANGRAM_NORMAL;\n}\n\n#elif defined(TANGRAM_FRAGMENT_SHADER)\n\nvec3 worldNormal() {\n    return u_inverseNormalMatrix * TANGRAM_NORMAL;\n}\n\n#endif\n"),Jr.addBlock("global","// Vertex attribute + varying for feature selection\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\n    attribute vec4 a_selection_color;\n    varying vec4 v_selection_color;\n#endif\n"),Jr.replaceBlock("setup","// Selection pass-specific rendering\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\n    if (a_selection_color.rgb == vec3(0.)) {\n        // Discard by forcing invalid triangle if we're in the feature\n        // selection pass but have no selection info\n        // TODO: in some cases we may actually want non-selectable features to occlude selectable ones?\n        gl_Position = vec4(0., 0., 0., 1.);\n        return;\n    }\n    v_selection_color = a_selection_color;\n#endif\n"),Jr.defines.TANGRAM_EPSILON=1e-5,Jr.defines.TANGRAM_LAYER_DELTA=1/16384,Jr.defines.TANGRAM_TILE_SCALE="vec3("+ai.tile_scale+"., "+ai.tile_scale+"., u_meters_per_pixel * "+ai.tile_size+".)",Jr.defines.TANGRAM_HEIGHT_SCALE=ai.height_scale,Jr.defines.TANGRAM_ALPHA_TEST=.5},e.destroy=function(t){var e=this;Object.keys(this.styles).forEach((function(n){var r=e.styles[n];r.gl===t&&(Jn("trace","StyleManager.destroy: destroying render style "+r.name),r.base&&e.remove(r.name),r.destroy())}))},e.register=function(t){this.styles[t.name]=t,this.base_styles[t.name]=t},e.remove=function(t){delete this.styles[t]},e.getActiveStyles=function(){return this.active_styles},e.updateActiveStyles=function(t){return this.active_styles=Object.keys(t.reduce((function(t,e){return Object.keys(e.meshes).forEach((function(e){return t[e]=!0})),t}),{})),this.active_styles},e.getActiveBlendOrders=function(){return this.active_blend_orders},e.updateActiveBlendOrders=function(t){var e=[];t.forEach((function(t){Object.entries(t.meshes).forEach((function(t){var n=t[0];t[1].forEach((function(t){var r=t.variant.blend_order,i=e.findIndex((function(t){return t.blend_order===r}));i=i>-1?i:e.push({blend_order:r,styles:[]})-1,-1===e[i].styles.indexOf(n)&&e[i].styles.push(n)}))}))})),this.active_blend_orders=e.sort((function(t,e){return t.blend_order-e.blend_order}))},e.mix=function(t,e){if(t.mixed)return t;t.mixed={};var n,r=[];t.mix&&(Array.isArray(t.mix)?(n=r).push.apply(n,t.mix):r.push(t.mix),(r=r.map((function(t){return e[t]})).filter((function(e){return e&&e!==t}))).forEach((function(e){return t.mixed[e.name]=!0}))),r.push(t),t.animated=r.some((function(t){return t&&t.animated})),t.texcoords=r.some((function(t){return t&&t.texcoords})),t.base=r.map((function(t){return t.base})).filter((function(t){return t})).pop(),t.lighting=r.map((function(t){return t.lighting})).filter((function(t){return null!=t})).pop(),t.texture=r.map((function(t){return t.texture})).filter((function(t){return t})).pop(),t.raster=r.map((function(t){return t.raster})).filter((function(t){return null!=t})).pop(),t.dash=r.map((function(t){return t.dash})).filter((function(t){return null!=t})).pop(),t.dash_background_color=r.map((function(t){return t.dash_background_color})).filter((function(t){return null!=t})).pop(),r.some((function(t){return t.hasOwnProperty("blend")&&t.blend}))&&(t.blend=r.map((function(t){return t.hasOwnProperty("blend")&&t.blend})).filter((function(t){return t})).pop()),t.blend_order=r.map((function(t){return t.blend_order})).filter((function(t){return null!=t})).pop(),t.defines=Object.assign.apply(Object,[{}].concat(r.map((function(t){return t.defines})).filter((function(t){return t})))),t.material=Object.assign.apply(Object,[{}].concat(r.map((function(t){return t.material})).filter((function(t){return t}))));var i=r.map((function(t){return t.draw})).filter((function(t){return t}));return i.length>0&&(t.draw=oi.apply(void 0,[{}].concat(i))),this.mixShaders(t,e,r),t},e.mixShaders=function(t,e,n){var r={},i=n.map((function(t){return t.shaders})).filter((function(t){return t}));if(r.defines=Object.assign.apply(Object,[{}].concat(i.map((function(t){return t.defines})).filter((function(t){return t})))),r.attributes=Object.assign.apply(Object,[{}].concat(i.map((function(t){return t.attributes})).filter((function(t){return t})))),r.uniforms={},r._uniforms=t.shaders&&t.shaders.uniforms||{},r._uniform_scopes={},n.filter((function(t){return t.shaders&&t.shaders.uniforms})).forEach((function(t){var n=function(n){r._uniform_scopes[n]=t.name,Object.defineProperty(r.uniforms,n,{enumerable:!0,configurable:!0,get:function(){return void 0!==r._uniforms[n]?r._uniforms[n]:e[r._uniform_scopes[n]].shaders.uniforms!==r.uniforms?e[r._uniform_scopes[n]].shaders.uniforms[n]:void 0},set:function(t){r._uniforms[n]=t}})};for(var i in t.shaders.uniforms)n(i)})),r.extensions=Object.keys(i.map((function(t){return t.extensions})).filter((function(t){return t})).reduce((function(t,e){return"string"==typeof e?t[e]=!0:e.forEach((function(e){return t[e]=!0})),t}),{})||{}),t.shaders&&t.shaders.blocks)for(var o in t.shaders.block_scopes=t.shaders.block_scopes||{},t.shaders.blocks){var a,s=t.shaders.blocks[o];t.shaders.block_scopes[o]=t.shaders.block_scopes[o]||[],Array.isArray(s)?(a=t.shaders.block_scopes[o]).push.apply(a,s.map((function(){return t.name}))):t.shaders.block_scopes[o].push(t.name)}var u={};return i.forEach((function(t){if(t.blocks){r.blocks=r.blocks||{},r.block_scopes=r.block_scopes||{};var e={};for(var n in t.blocks){var i=t.blocks[n],o=t.block_scopes[n];r.blocks[n]=r.blocks[n]||[],r.block_scopes[n]=r.block_scopes[n]||[],i=Array.isArray(i)?i:[i],o=Array.isArray(o)?o:[o];for(var a=0;a<i.length;a++)u[o[a]]||(e[o[a]]=!0,r.blocks[n].push(i[a]),r.block_scopes[n].push(o[a]))}Object.assign(u,e)}})),Object.assign(t.mixed,u),t.shaders=r,t},e.create=function(t,e,n){void 0===n&&(n={});var r=oi({},e);return r.name=t,(r=this.mix(r,n)).base&&this.base_styles[r.base]?this.styles[t]=r=Object.assign(Object.create(this.base_styles[r.base]),r):r.base=null,r},e.build=function(t){var e=this,n=Object.assign({},t);this.styles&&Object.values(this.styles).forEach((function(t){return Zn.removeTarget(t.main_thread_target)}));for(var r=["opaque","add","multiply","overlay","inlay","translucent"],i=["polygons","lines","points","text","raster"],o=0;o<r.length;o++)for(var a=r[o],s=0;s<i.length;s++){var u=i[s],l=a+"_"+u;null==n[l]&&(n[l]={base:u,blend:a})}var c=Object.keys(n).sort((function(t,r){return e.inheritanceDepth(t,n)-e.inheritanceDepth(r,n)}));for(var h in this.styles)this.base_styles[h]?this.styles[h].reset():delete this.styles[h];var f={};return c.forEach((function(t){f[t]=e.create(t,n[t],f)})),this.styles},e.initStyles=function(t){for(var e in void 0===t&&(t={}),this.styles)this.styles[e].init(t)},e.inheritanceDepth=function(t,e){for(var n=this,r=0;;){var i=e[t];if(!i)break;if(!i.mix)break;if(r++,Array.isArray(i.mix)){r+=Math.max.apply(Math,i.mix.map((function(r){if(t!==r)return n.inheritanceDepth(r,e)})));break}if(t===i.mix)break;t=i.mix}return r},t}();function nu(t){return null!=t}function ru(t){return"("+t+")"}function iu(t){return"string"==typeof t?'"'+t+'"':t}function ou(t){return"$"===t[0]?"context['"+t.substring(1)+"']":t.indexOf(".")>-1?-1===t.indexOf("\\.")?"context.feature.properties"+t.split(".").map((function(t){return"['"+t+"']"})).join(""):"context.feature.properties"+t.replace(/\\\./g,"__TANGRAM_DELIMITER__").split(".").map((function(t){return t.replace(/__TANGRAM_DELIMITER__/g,".")})).map((function(t){return"['"+t+"']"})).join(""):"context.feature.properties['"+t+"']"}function au(t,e){return ru(iu(e)+" === "+ou(t))}function su(t,e){return ru("["+e.map(iu).join(",")+"].indexOf("+ou(t)+") > -1")}function uu(t,e){return ru(t.filter(nu).map((function(t){return ru(t.join(" && "))})).join(" "+e+" "))}function lu(t,e,n){return e&&e.length>0?uu(e.map((function(t){return gu(t,n)})),"||"):"true"}function cu(t,e,n){return e&&e.length>0?uu(e.map((function(t){return gu(t,n)})),"&&"):"true"}function hu(t,e,n){return"!"+ru(gu(e,n).join(" && "))}function fu(t,e,n){return"!"+ru(lu(0,e,n))}function du(t,e){return ru(ou(t)+(e?" != ":" == ")+"null")}function pu(t,e,n){var r=[],i=n&&"function"==typeof n.rangeTransform&&n.rangeTransform;if(e.max){var o=i?i(e.max):e.max;r.push(ou(t)+" < "+o)}if(e.min){var a=i?a=i(e.min):e.min;r.push(ou(t)+" >= "+a)}return ru(r.join(" && "))}function mu(t,e){var n=[];if(e.includes_any){var r="["+(Array.isArray(e.includes_any)?e.includes_any:[e.includes_any]).map(iu).join(",")+"]";n.push(ou(t)+" != null && "+r+".some(function(v) { return "+ou(t)+".indexOf(v) > -1 })")}if(e.includes_all){var i="["+(Array.isArray(e.includes_all)?e.includes_all:[e.includes_all]).map(iu).join(",")+"]";n.push(ou(t)+" != null && "+i+".every(function(v) { return "+ou(t)+".indexOf(v) > -1 })")}return ru(n.join(" && "))}function gu(t,e){var n=[];if("function"==typeof t)return[ru(t.toString()+"(context)")];if(Array.isArray(t))return[lu(0,t,e)];if(null==t)return["true"];for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o],s=typeof a;if("string"===s||"number"===s)n.push(au(o,a));else if("boolean"===s)n.push(du(o,a));else if("not"===o)n.push(hu(0,a,e));else if("any"===o)n.push(lu(0,a,e));else if("all"===o)n.push(cu(0,a,e));else if("none"===o)n.push(fu(0,a,e));else if(Array.isArray(a))n.push(su(o,a));else if("object"===s&&null!=a)a.max||a.min?n.push(pu(o,a,e)):(a.includes_any||a.includes_all)&&n.push(mu(o,a));else{if(null!=a)throw new Error("Unknown Query syntax: "+a);n.push(" true ")}}return 0===r.length?["true"]:n}function vu(t,e){return null==t?function(){return!0}:new Function("context","return "+ru(gu(t,e).join(" && "))+";")}D(D.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});var _u=["filter","draw","visible","enabled","data","exclusive","priority"],yu={};function bu(t,e){for(var n,r=0,i=0;i<t.length;i++)t[i].length>r&&(r=t[i].length);if(0===r)return null;for(var o={visible:!0},a=function(r){if(n=[],t.forEach((function(t){t[r]&&t[r][e]&&-1===n.indexOf(t[r][e])&&n.push(t[r][e])})),0===n.length)return"continue";oi.apply(void 0,[o].concat(n))},s=0;s<r;s++)a(s);return!1===o.visible?null:o}var xu=["any","all","not","none"],wu=function(){function t(e){var n=e.layer,r=e.name,i=e.parent,o=e.draw,a=e.visible,s=e.enabled,u=e.filter,l=e.exclusive,c=e.priority,h=e.styles;if(this.id=t.id++,this.config_data=n.data,this.parent=i,this.name=r,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=o,this.filter=u,this.exclusive=!0===l,this.priority=null!=c?c:Number.MAX_SAFE_INTEGER,this.styles=h,this.is_built=!1,s=void 0===s?a:s,this.enabled=!1!==s,this.draw)for(var f in this.draw)if(this.draw[f]=null==this.draw[f]?{}:this.draw[f],"object"!=typeof this.draw[f]){var d="Draw group '"+f+"' for layer "+this.full_name+" is invalid, must be an object, ";Jn("warn",d+="but was set to `"+f+": "+this.draw[f]+"` instead"),delete this.draw[f]}}var e=t.prototype;return e.build=function(){Jn("trace","Building layer '"+this.full_name+"'"),this.buildFilter(),this.buildDraw(),this.is_built=!0},e.buildDraw=function(){this.draw=Ri(this.draw,ji.wrapFunction),this.calculatedDraw=function(t){var e=[];if(t.parent){var n=t.parent.calculatedDraw||[];e.push.apply(e,n)}return e.push(t.draw),e}(this)},e.buildFilter=function(){this.filter_original=this.filter,this.filter=Ri(this.filter,ji.wrapFunction);var t=typeof this.filter;if(null==this.filter||"object"===t||"function"===t)try{this.buildZooms(),this.buildPropMatches(),null!=this.filter&&("function"==typeof this.filter||Object.keys(this.filter).length>0)?this.filter=vu(this.filter,Su):this.filter=null}catch(t){var e="Filter for layer "+this.full_name+" is invalid, `filter: "+JSON.stringify(this.filter)+"` ";Jn("warn",e+="failed with error '"+t.message+"', stack trace: "+t.stack)}else{var n="Filter for layer "+this.full_name+" is invalid, filter value must be an object or function, ";Jn("warn",n+="but was set to `filter: "+this.filter+"` instead")}},e.buildZooms=function(){var t=this.filter&&this.filter.$zoom,e=typeof t;if(null!=t){if(this.zooms={},"number"===e)this.zooms[t]=!0;else if(Array.isArray(t))for(var n=0;n<t.length;n++)this.zooms[t[n]]=!0;else if("object"===e&&(null!=t.min||null!=t.max))for(var r=t.min||0,i=t.max||ai.max_style_zoom,o=r;o<i;o++)this.zooms[o]=!0;delete this.filter.$zoom}},e.buildPropMatches=function(){var t=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach((function(e){if(-1===xu.indexOf(e)){var n=t.filter[e],r=typeof n,i=Array.isArray(n);if(!i&&"string"!==r&&"number"!==r)return;"$"===e[0]?(t.context_prop_matches=t.context_prop_matches||[],t.context_prop_matches.push([e.substring(1),i?n:[n]]),delete t.filter[e]):-1===e.indexOf(".")&&(t.feature_prop_matches=t.feature_prop_matches||[],t.feature_prop_matches.push([e,i?n:[n]]),delete t.filter[e])}}))},e.doPropMatches=function(t){if(this.feature_prop_matches)for(var e=0;e<this.feature_prop_matches.length;e++){var n=this.feature_prop_matches[e],r=t.feature.properties[n[0]];if(null==r||-1===n[1].indexOf(r))return!1}if(this.context_prop_matches)for(var i=0;i<this.context_prop_matches.length;i++){var o=this.context_prop_matches[i],a=t[o[0]];if(null==a||-1===o[1].indexOf(a))return!1}return!0},e.doesMatch=function(t){if(!this.enabled)return!1;if(this.is_built||this.build(),null!=this.zooms&&!this.zooms[t.zoom])return!1;if(!this.doPropMatches(t))return!1;var e;if(this.filter instanceof Function)try{e=this.filter(t)}catch(e){var n="Filter for this "+this.full_name+": `filter: "+this.filter_original+"` ";Jn("error",n+="failed with error '"+e.message+"', stack trace: "+e.stack,t.feature)}else e=null==this.filter;return!!e&&(this.children_to_parse&&(function(t,e,n){for(var r in e){var i=e[r];if("object"!=typeof i||Array.isArray(i)){var o="Layer value must be an object: cannot create layer '"+r+": "+JSON.stringify(i)+"'";o+=", under parent layer '"+t.full_name+"'.",n[t.name]&&(o+=" The parent name '"+t.name+"' is also the name of a style, did you mean to create a 'draw' group",t.parent&&(o+=" under '"+t.parent.name+"'"),o+=" instead?"),Jn("warn",o)}else ku(r,i,t,n)}t.layers.sort((function(t,e){if(t.exclusive<e.exclusive)return 1;if(t.exclusive>e.exclusive)return-1;var n=t.exclusive?1:-1;return t.priority>e.priority?n:t.priority<e.priority?-n:t.full_name<e.full_name?n:t.full_name>e.full_name?-n:void 0}))}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)},t}();wu.id=0;var Tu=function(t){function e(e){var n;return(n=t.call(this,e)||this).is_leaf=!0,n}return Rn(e,t),e}(wu),Au=function(t){function e(e){var n;return(n=t.call(this,e)||this).is_tree=!0,n.layers=e.layers||[],n}Rn(e,t);var n=e.prototype;return n.addLayer=function(t){this.layers.push(t)},n.buildDrawGroups=function(t){var e=[],n=[];if(function t(e,n,r,i){var o=!1;if(0!==n.length){for(var a=0;a<n.length;a++){var s=n[a];if(s.is_leaf){if(s.doesMatch(e)&&(o=!0,r.push(s),i.push(s.id),s.exclusive))break}else if(s.is_tree&&s.doesMatch(e)&&(o=!0,t(e,s.layers,r,i)||(r.push(s),i.push(s.id)),s.exclusive))break}return o}}(t,[this],e,n),e.length>0){var r=function(t){if(t.length>1){for(var e=t[0],n=1;n<t.length;n++)e+="/"+t[n];return e}return t[0]}(n);if(void 0===yu[r]){for(var i=e.map((function(t){return t&&!1!==t.visible&&t.calculatedDraw})),o={},a=0;a<i.length;a++){var s=i[a];if(s)for(var u=0;u<s.length;u++){var l=s[u];for(var c in l)o[c]=!0}}for(var h in o)yu[r]=yu[r]||{},yu[r][h]=bu(i,h),yu[r][h]?(yu[r][h].key=r+"/"+h,yu[r][h].layers=e.map((function(t){return t&&t.full_name})),yu[r][h].group=h):delete yu[r][h];yu[r]&&0===Object.keys(yu[r]).length&&(yu[r]=null)}return yu[r]}},e}(wu),Su={rangeTransform:function(t){return"string"==typeof t&&"px2"===t.trim().slice(-3)?parseFloat(t)+" * context.meters_per_pixel_sq":t}};function Eu(t){return _u.indexOf(t)>-1}function ku(t,e,n,r){var i,o={name:t,layer:e=null==e?{}:e,parent:n,styles:r},a=function(t){var e={},n={};for(var r in t)Eu(r)?e[r]=t[r]:n[r]=t[r];return[e,n]}(e),s=a[0],u=a[1],l=(i=u,0===Object.keys(i).length),c=new(l&&null!=n?Tu:Au)(Object.assign(o,s));return c.enabled&&(n&&n.addLayer(c),c.children_to_parse=l?null:u),c}var Mu=0,Ou=0,Pu=function(){function t(t){var e=t.coords,n=t.style_z,r=t.source,i=t.workers,o=t.view;this.id=Mu++,this.view=o,this.source=r,this.generation=null,this.valid=!0,this.visible=!1,this.proxy_for=null,this.proxied_as=null,this.proxy_level=0,this.proxy_order_offset=0,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.debug={},this.style_z=n,this.coords=ho.normalizedCoord(e,this.source),this.key=ho.key(this.coords,this.source,this.style_z),this.overzoom=Math.max(this.style_z-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=ai.metersForTile(this.coords),this.max=ai.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:-(this.max.y-this.min.y)},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.meters_per_pixel=ai.metersPerPixel(this.style_z),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=ai.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=ai.unitsPerMeter(this.coords.z)*this.overzoom2,this.preserve_tiles_within_zoom=this.source.preserve_tiles_within_zoom,this.meshes={},this.new_mesh_styles=[],this.pending_label_meshes=null,this.setWorker(i)}var e=t.prototype;return e.freeResources=function(){for(var t in this.meshes)this.meshes[t].forEach((function(t){return t.destroy()}));if(this.meshes={},this.pending_label_meshes)for(var e in this.pending_label_meshes)this.pending_label_meshes[e].forEach((function(t){return t.destroy()}));this.pending_label_meshes=null},e.destroy=function(){Tr.removeForTile(this.id),this.workerMessage("self.removeTile",this.key),this.freeResources(),this.worker=null,this.valid=!1},e.buildAsMessage=function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_z:this.style_z,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation,debug:this.debug}},e.setWorker=function(t){this.source.tiled?this.worker_id=Math.abs(this.coords.x+this.coords.y+this.coords.z)%t.length:this.worker_id=this.source.id%t.length,this.worker=t[this.worker_id]},e.workerMessage=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Zn.postMessage.apply(Zn,[this.worker].concat(e))},e.build=function(t,e){var n=(void 0===e?{}:e).fade_in,r=void 0===n||n;return this.generation=t,this.fade_in=r,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()}).catch((function(t){throw t}))},t.cancel=function(e){e&&(e.canceled=!0,e.source_data&&e.source_data.request_id&&(nr.cancelRequest(e.source_data.request_id),e.source_data.request_id=null),t.abortBuild(e))},t.buildGeometry=function(e,n){var r=n.scene_id,i=n.layers,o=n.styles,a=n.global,s=e.source_data;for(var u in e.debug.building=+new Date,e.debug.feature_count=0,e.debug.layers=null,Xa.startTile(e.id,{apply_repeat_groups:!0}),i){var l=i[u];if(l&&l.config_data){if(l.config_data.source===e.source)for(var c=t.getDataForSource(s,l.config_data,u),h=0;h<c.length;h++){var f=c[h],d=f.geom;if(d)for(var p=0;p<d.features.length;p++){var m=d.features[p];if(null!=m.geometry){var g=ji.getFeatureParseContext(m,e,a);g.winding=e.default_winding,g.source=e.source,g.layer=f.layer;var v=l.buildDrawGroups(g,!0);if(v){for(var _ in v){var y=v[_],b=y.style||_,x=o[b];x?null!=(y=x.preprocess(y))&&!1!==y.visible&&(g.layers=y.layers,x.addFeature(m,y,g)):Jn("warn","Style '"+b+"' not found, skipping layer '"+u+"':",y,m)}e.debug.feature_count++}}}}}else Jn("warn","Layer "+u+" was defined without a geometry data source and will not be rendered.")}e.debug.building=+new Date-e.debug.building;var w=this.stylesForTile(e,o).map((function(t){return o[t]}));t.buildStyleGroups(e,w,r,(function(t){return t.collision?"collision":"non-collision"}))},t.stylesForTile=function(t,e){var n=[];for(var r in e)e[r].hasDataForTile(t)&&n.push(r);return n},t.buildStyleGroups=function(e,n,r,i){var o=n.reduce((function(t,e){var n=i(e);return t[n]=t[n]||[],t[n].push(e),t}),{});if(0===Object.keys(o).length)return Zn.postMessage("TileManager_"+r+".buildTileStylesCompleted",Zn.withTransferables({tile:t.slice(e),progress:{start:!0,done:!0}})),void Xa.resetTile(e.id);var a={};for(var s in o)t.buildStyleGroup({group_name:s,groups:o,tile:e,progress:a,scene_id:r})},t.buildStyleGroup=function(e){return new Promise((function(n,r){var i,o,a,s,u,l,c;i=e.group_name,o=e.groups,a=e.tile,s=e.progress,u=e.scene_id,l=o[i],c={};var h=function(){try{return n()}catch(t){return r(t)}},f=function(t){try{return Jn("error","Error for style group '"+i+"' for tile "+a.key,t&&t.stack||t),h()}catch(t){return r(t)}};try{return Promise.resolve(Promise.all(l.map((function(t){return new Promise((function(e,n){var r;return Promise.resolve(t.endData(a)).then((function(i){try{return(r=i)&&(c[t.name]=r),e()}catch(t){return n(t)}}),n)}))})))).then((function(e){try{return Jn("trace","Finished style group '"+i+"' for tile "+a.key),o[i]=null,Object.keys(o).every((function(t){return null==o[t]}))&&(s.done=!0),Zn.postMessage("TileManager_"+u+".buildTileStylesCompleted",Zn.withTransferables({tile:Object.assign({},t.slice(a),{mesh_data:c}),progress:s})),s.done&&Xa.resetTile(a.id),h()}catch(t){return f(t)}}),f)}catch(t){f(t)}}))},t.getDataForSource=function(t,e,n){var r=[];if(null!=e&&null!=t&&null!=t.layers)if(!0===e.all_layers)for(var i in null!=e.layer&&Jn({level:"warn",once:!0},"Layer "+n+" includes both 'all_layers: true' and an explicit 'layer' keyword in its 'data' block. 'all_layers: true' takes precedence, 'layer' will be ignored."),t.layers)t.layers[i].features&&r.push({layer:i,geom:t.layers[i]});else!e.layer&&t.layers._default?r.push({geom:t.layers._default}):!e.layer&&n?r.push({layer:n,geom:t.layers[n]}):"string"==typeof e.layer?r.push({layer:e.layer,geom:t.layers[e.layer]}):Array.isArray(e.layer)&&e.layer.forEach((function(e){t.layers[e]&&t.layers[e].features&&r.push({layer:e,geom:t.layers[e]})}));return r},e.buildMeshes=function(t,e){if(!this.error){this.build_id=Ou++,e.start&&(this.debug.geometry_count=0,this.debug.buffer_size=0);var n={},r=this.mesh_data;if(r)for(var i in r){for(var o in r[i].meshes){var a=r[i].meshes[o];if(a.vertex_data){if(!t[i]){Jn("warn","Could not create mesh because style '"+i+"' not found, for tile "+this.key+", aborting tile");break}var s=Object.assign({},r[i]);s.uniforms=Object.assign({},s.uniforms,a.uniforms),s.variant=a.variant,a.labels&&(s.retain=!0);var u=t[i].makeMesh(a.vertex_data,a.vertex_elements,s);u.variant=s.variant,u.labels=a.labels,n[i]=n[i]||[],n[i].push(u),null==u.variant.mesh_order&&(u.variant.mesh_order=n[i].length-1),this.debug.buffer_size+=u.buffer_size,this.debug.geometry_count+=u.geometry_count}}n[i]&&n[i].sort((function(t,e){var n=t.variant.mesh_order,r=e.variant.mesh_order;return null==n?1:null==r?-1:n<r?-1:1}))}for(var l in delete this.mesh_data,n)t[l].collision?(this.pending_label_meshes=this.pending_label_meshes||{},this.pending_label_meshes[l]=n[l]):(this.meshes[l]&&this.meshes[l].forEach((function(t){return t.destroy()})),this.meshes[l]=n[l],this.new_mesh_styles.push(l));if(e.done){for(var c in this.meshes)-1!==this.new_mesh_styles.indexOf(c)||this.pending_label_meshes&&null!=this.pending_label_meshes[c]||(this.meshes[c].forEach((function(t){return t.destroy()})),delete this.meshes[c]);this.new_mesh_styles=[],this.debug.geometry_ratio=(this.debug.geometry_count/this.debug.feature_count).toFixed(1)}this.printDebug(e)}},e.pendingLabelStyleCount=function(){return this.pending_label_meshes?Object.keys(this.pending_label_meshes).length:0},e.swapPendingLabels=function(){if(this.labeled=!0,this.pending_label_meshes){for(var t in this.pending_label_meshes)this.meshes[t]&&this.meshes[t].forEach((function(t){return t.destroy()})),this.meshes[t]=this.pending_label_meshes[t];this.pending_label_meshes=null}},t.abortBuild=function(t){if(Tr.removeForTile(t.id),Xa.abortTile(t.id),t.mesh_data)for(var e in t.mesh_data){var n=t.mesh_data[e].textures;n&&n.forEach((function(e){var n=Gr.textures[e];n&&(Jn("trace","releasing texture "+e+" for tile "+t.key),n.release())}))}},e.setProxyFor=function(t){t?(this.visible=!0,this.proxy_for=this.proxy_for||[],this.proxy_for.push(t),this.proxy_order_offset=1,t.proxied_as=t.style_z>this.style_z?"child":"parent",this.proxy_level=Math.abs(t.style_z-this.style_z)):(this.proxy_for=null,this.proxy_order_offset=0,this.proxy_level=0)},e.isProxy=function(){return null!=this.proxy_for},e.shouldProxyForStyle=function(t){return!this.proxy_for||this.proxy_for.some((function(e){return null==e.meshes[t]}))},e.setupProgram=function(t,e){var n=t.model,r=t.model32;e.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_z,this.coords.z]),e.uniform("1f","u_tile_proxy_order_offset",this.proxy_order_offset),Cs(n),Ps(n,n,Es(this.min.x,this.min.y,0)),zs(n,n,Es(this.span.x/ai.tile_scale,this.span.y/ai.tile_scale,1)),js(r,n),e.uniform("Matrix4fv","u_model",r),e.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)},t.slice=function(t,e){var n=["id","key","loading","loaded","generation","error","debug"];Array.isArray(e)&&n.push.apply(n,e);for(var r={},i=0;i<n.length;i++){var o=n[i];r[o]=t[o]}return r},e.merge=function(t){return this.loading=t.loading,this.loaded=t.loaded,this.generation=t.generation,this.error=t.error,this.mesh_data=t.mesh_data,this.debug=oi(this.debug,t.debug),this},e.printDebug=function(t){var e=["layers"],n={};for(var r in this.debug)-1===e.indexOf(r)&&(n[r]=this.debug[r]);Jn("debug","Tile "+(t.done?"(done)":"")+": debug for "+this.key+": [  "+JSON.stringify(n)+" ]")},t}();Pu.coord_children={};var zu=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},Ru=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+d]=255&a,d+=p,a/=256,l-=8);t[n+d-p]|=128*m},Lu=Cu;function Cu(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function ju(t){return t.type===Cu.Bytes?t.readVarint()+t.pos:t.pos+1}function Iu(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Nu(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function Du(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Fu(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Bu(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Uu(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Gu(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Vu(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Zu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Wu(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function qu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Hu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Yu(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Xu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Cu.Varint=0,Cu.Fixed64=1,Cu.Bytes=2,Cu.Fixed32=5,Cu.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Hu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Xu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Hu(this.buf,this.pos)+4294967296*Hu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Hu(this.buf,this.pos)+4294967296*Xu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=zu(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=zu(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Iu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Iu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Iu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Iu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Iu(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Iu(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=ju(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=ju(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=ju(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=ju(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=ju(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=ju(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=ju(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=ju(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=ju(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Cu.Varint)for(;this.buf[this.pos++]>127;);else if(e===Cu.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Cu.Fixed32)this.pos+=4;else{if(e!==Cu.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Yu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Yu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Yu(this.buf,-1&t,this.pos),Yu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Yu(this.buf,-1&t,this.pos),Yu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Nu(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Ru(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Ru(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&Nu(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Cu.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,Du,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Fu,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Gu,e)},writePackedFloat:function(t,e){this.writeMessage(t,Bu,e)},writePackedDouble:function(t,e){this.writeMessage(t,Uu,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Vu,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Zu,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Wu,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,qu,e)},writeBytesField:function(t,e){this.writeTag(t,Cu.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Cu.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Cu.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Cu.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Cu.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Cu.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Cu.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Cu.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Cu.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Cu.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var $u=Ku;function Ku(t,e){this.x=t,this.y=e}Ku.prototype={clone:function(){return new Ku(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ku.convert=function(t){return t instanceof Ku?t:Array.isArray(t)?new Ku(t[0],t[1]):t};var Ju=Qu;function Qu(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(tl,this,e)}function tl(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function el(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}Qu.types=["Unknown","Point","LineString","Polygon"],Qu.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(!i){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new $u(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Qu.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(!r){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},Qu.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=Qu.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+s)/o;t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];c(u=h);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=el(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var f={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var nl=rl;function rl(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(il,this,e),this.length=this._features.length}function il(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function ol(t,e,n){if(3===t){var r=new nl(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}rl.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ju(this._pbf,e,this.extent,this._keys,this._values)};var al=function(t,e){this.layers=t.readFields(ol,{},e)},sl=Ju,ul=0,ll=1,cl=2,hl=["{","["],fl=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).response_type="arraybuffer",!0===e.parse_json?r.parse_json_type=ll:Array.isArray(e.parse_json)?(r.parse_json_type=cl,r.parse_json_prop_list=e.parse_json):(null!=e.parse_json&&Jn({level:"warn",once:!0},"Data source '"+r.name+"': 'parse_json' parameter should be 'true', or an array of property names (was '"+JSON.stringify(e.parse_json)+"')"),r.parse_json_type=ul),r}Rn(e,t);var n=e.prototype;return n.parseSourceData=function(t,e,n){var r=new Uint8Array(n),i=new Lu(r);if(e.data=new al(i),e.layers=this.toGeoJSON(e.data),"function"==typeof this.transform){var o={min:Object.assign({},t.min),max:Object.assign({},t.max),coords:Object.assign({},t.coords)};e.layers=this.transform(e.layers,this.extra_data,o)}delete e.data},n.toGeoJSON=function(t){var e={};for(var n in t.layers){for(var r=t.layers[n],i=ai.tile_scale/r.extent,o={type:"FeatureCollection",features:[]},a=0;a<r.length;a++){var s=r.feature(a),u={type:"Feature",geometry:{},id:s.id,properties:s.properties};this.parseJSONProperties(u);for(var l=u.geometry,c=s.loadGeometry(),h=0;h<c.length;h++)for(var f=c[h],d=0;d<f.length;d++)f[d]=[f[d].x*i,f[d].y*i];l.coordinates=c,"Point"===sl.types[s.type]?(l.type="Point",l.coordinates=l.coordinates[0][0]):"LineString"===sl.types[s.type]?1===c.length?(l.type="LineString",l.coordinates=l.coordinates[0]):l.type="MultiLineString":"Polygon"===sl.types[s.type]&&(l=dl(l)),o.features.push(u)}e[n]=o}return e},n.parseJSONProperties=function(t){if(this.parse_json_type!==ul){var e=t.properties;if(this.parse_json_type===cl)this.parse_json_prop_list.forEach((function(t){try{e[t]=JSON.parse(e[t])}catch(t){}}));else for(var n in e)if(hl.indexOf(e[n][0])>-1)try{e[n]=JSON.parse(e[n])}catch(t){}}},e}(co);function dl(t){for(var e,n=[],r=[],i=0;i<t.coordinates.length;i++){var o=t.coordinates[i],a=ai.ringWinding(o);null!=a&&(a===(e=e||a)&&r.length>0&&(n.push(r),r=[]),r.push(o))}return r.length>0&&n.push(r),1===n.length?(t.type="Polygon",t.coordinates=n[0]):n.length>1?(t.type="MultiPolygon",t.coordinates=n):t=null,t}function pl(t,e,n){var r=e[0],i=e[1],o=n[0],a=n[1],s=t[0],u=t[1],l=o-r,c=a-i;if(0!==l||0!==c){var h=((s-r)*l+(u-i)*c)/(l*l+c*c);h>1?(r=o,i=a):h>0&&(r+=l*h,i+=c*h)}return(l=s-r)*l+(c=u-i)*c}so.register("MVT",(function(){return fl}));var ml=function(t,e,n,r){var i={id:r||null,type:e,geometry:n,tags:t||null,min:[1/0,1/0],max:[-1/0,-1/0]};return function(t){var e=t.geometry,n=t.min,r=t.max;if(1===t.type)gl(n,r,e);else for(var i=0;i<e.length;i++)gl(n,r,e[i])}(i),i};function gl(t,e,n){for(var r,i=0;i<n.length;i++)r=n[i],t[0]=Math.min(r[0],t[0]),e[0]=Math.max(r[0],e[0]),t[1]=Math.min(r[1],t[1]),e[1]=Math.max(r[1],e[1])}function vl(t,e,n){if(null!==e.geometry){var r,i,o,a,s=e.geometry,u=s.type,l=s.coordinates,c=e.properties,h=e.id;if("Point"===u)t.push(ml(c,1,[yl(l)],h));else if("MultiPoint"===u)t.push(ml(c,1,_l(l),h));else if("LineString"===u)t.push(ml(c,2,[_l(l,n)],h));else if("MultiLineString"===u||"Polygon"===u){for(o=[],r=0;r<l.length;r++)a=_l(l[r],n),"Polygon"===u&&(a.outer=0===r),o.push(a);t.push(ml(c,"Polygon"===u?3:2,o,h))}else if("MultiPolygon"===u){for(o=[],r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)(a=_l(l[r][i],n)).outer=0===i,o.push(a);t.push(ml(c,3,o,h))}else{if("GeometryCollection"!==u)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<s.geometries.length;r++)vl(t,{geometry:s.geometries[r],properties:c},n)}}}function _l(t,e){for(var n=[],r=0;r<t.length;r++)n.push(yl(t[r]));return e&&(function(t,e){var n,r,i,o,a=e*e,s=0,u=t.length-1,l=[];for(t[s][2]=1,t[u][2]=1;u;){for(r=0,n=s+1;n<u;n++)(i=pl(t[n],t[s],t[u]))>r&&(o=n,r=i);r>a?(t[o][2]=r,l.push(s),l.push(o),s=o):(u=l.pop(),s=l.pop())}}(n,e),function(t){for(var e,n,r=0,i=0,o=0;o<t.length-1;o++)e=n||t[o],n=t[o+1],r+=e[0]*n[1]-n[0]*e[1],i+=Math.abs(n[0]-e[0])+Math.abs(n[1]-e[1]);t.area=Math.abs(r/2),t.dist=i}(n)),n}function yl(t){var e=Math.sin(t[1]*Math.PI/180),n=t[0]/360+.5,r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return[n,r=r<0?0:r>1?1:r,0]}function bl(t,e,n,r,i){return[Math.round(e*(t[0]*n-r)),Math.round(e*(t[1]*n-i))]}var xl={tile:function(t,e){if(t.transformed)return t;var n,r,i,o=t.z2,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry;if(1===u.type)for(r=0;r<l.length;r++)l[r]=bl(l[r],e,o,a,s);else for(r=0;r<l.length;r++){var c=l[r];for(i=0;i<c.length;i++)c[i]=bl(c[i],e,o,a,s)}}return t.transformed=!0,t},point:bl},wl=function(t,e,n,r,i,o,a,s){if(r/=e,a>=(n/=e)&&s<=r)return t;if(a>r||s<n)return null;for(var u=[],l=0;l<t.length;l++){var c,h,f=t[l],d=f.geometry,p=f.type;if(c=f.min[i],h=f.max[i],c>=n&&h<=r)u.push(f);else if(!(c>r||h<n)){var m=1===p?Tl(d,n,r,i):Al(d,n,r,i,o,3===p);m.length&&u.push(ml(f.tags,p,m,f.id))}}return u.length?u:null};function Tl(t,e,n,r){for(var i=[],o=0;o<t.length;o++){var a=t[o],s=a[r];s>=e&&s<=n&&i.push(a)}return i}function Al(t,e,n,r,i,o){for(var a=[],s=0;s<t.length;s++){var u,l,c,h=0,f=0,d=null,p=t[s],m=p.area,g=p.dist,v=p.outer,_=p.length,y=[];for(l=0;l<_-1;l++)u=d||p[l],d=p[l+1],h=f||u[r],f=d[r],h<e?f>n?(y.push(i(u,d,e),i(u,d,n)),o||(y=Sl(a,y,m,g,v))):f>=e&&y.push(i(u,d,e)):h>n?f<e?(y.push(i(u,d,n),i(u,d,e)),o||(y=Sl(a,y,m,g,v))):f<=n&&y.push(i(u,d,n)):(y.push(u),f<e?(y.push(i(u,d,e)),o||(y=Sl(a,y,m,g,v))):f>n&&(y.push(i(u,d,n)),o||(y=Sl(a,y,m,g,v))));(h=(u=p[_-1])[r])>=e&&h<=n&&y.push(u),c=y[y.length-1],o&&c&&(y[0][0]!==c[0]||y[0][1]!==c[1])&&y.push(y[0]),Sl(a,y,m,g,v)}return a}function Sl(t,e,n,r,i){return e.length&&(e.area=n,e.dist=r,void 0!==i&&(e.outer=i),t.push(e)),[]}function El(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if(1===a)i=kl(o.geometry,e);else{i=[];for(var s=0;s<o.geometry.length;s++)i.push(kl(o.geometry[s],e))}n.push(ml(o.tags,a,i,o.id))}return n}function kl(t,e){var n=[];n.area=t.area,n.dist=t.dist;for(var r=0;r<t.length;r++)n.push([t[r][0]+e,t[r][1],t[r][2]]);return n}var Ml=function(t,e,n,r,i,o){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:e,transformed:!1,min:[2,1],max:[-1,0]},s=0;s<t.length;s++){a.numFeatures++,Ol(a,t[s],i,o);var u=t[s].min,l=t[s].max;u[0]<a.min[0]&&(a.min[0]=u[0]),u[1]<a.min[1]&&(a.min[1]=u[1]),l[0]>a.max[0]&&(a.max[0]=l[0]),l[1]>a.max[1]&&(a.max[1]=l[1])}return a};function Ol(t,e,n,r){var i,o,a,s,u=e.geometry,l=e.type,c=[],h=n*n;if(1===l)for(i=0;i<u.length;i++)c.push(u[i]),t.numPoints++,t.numSimplified++;else for(i=0;i<u.length;i++)if(a=u[i],r||!(2===l&&a.dist<n||3===l&&a.area<h)){var f=[];for(o=0;o<a.length;o++)s=a[o],(r||s[2]>h)&&(f.push(s),t.numSimplified++),t.numPoints++;3===l&&Pl(f,a.outer),c.push(f)}else t.numPoints+=a.length;if(c.length){var d={geometry:c,type:l,tags:e.tags||null};null!==e.id&&(d.id=e.id),t.features.push(d)}}function Pl(t,e){(function(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a])[0]-e[0])*(e[1]+n[1]);return r})(t)<0===e&&t.reverse()}var zl=function(t,e){return new Rl(t,e)};function Rl(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;n&&console.time("preprocess data");var r=1<<e.maxZoom,i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)vl(n,t.features[r],e);else"Feature"===t.type?vl(n,t,e):vl(n,{geometry:t},e);return n}(t,e.tolerance/(r*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e,n){var r=t,i=wl(t,1,-1-e,e,0,n,-1,2),o=wl(t,1,1-e,2+e,0,n,-1,2);return(i||o)&&(r=wl(t,1,-e,1+e,0,n,-1,2)||[],i&&(r=El(i,1).concat(r)),o&&(r=r.concat(El(o,-1)))),r}(i,e.buffer/e.extent,Cl)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ll(t,e,n){return 32*((1<<t)*n+e)+t}function Cl(t,e,n){return[n,(n-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function jl(t,e,n){return[(n-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],n,1]}function Il(t,e,n){var r=t.source;if(1!==r.length)return!1;var i=r[0];if(3!==i.type||i.geometry.length>1)return!1;var o=i.geometry[0].length;if(5!==o)return!1;for(var a=0;a<o;a++){var s=xl.point(i.geometry[0][a],e,t.z2,t.x,t.y);if(s[0]!==-n&&s[0]!==e+n||s[1]!==-n&&s[1]!==e+n)return!1}return!0}Rl.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},Rl.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug,c=null;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var h=1<<e,f=Ll(e,n,r),d=this.tiles[f],p=e===u.maxZoom?0:u.tolerance/(h*u.extent);if(!d&&(l>1&&console.time("creation"),d=this.tiles[f]=Ml(t,h,n,r,p,e===u.maxZoom),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var m="z"+e;this.stats[m]=(this.stats[m]||0)+1,this.total++}if(d.source=t,i){if(e===u.maxZoom||e===i)continue;var g=1<<i-e;if(n!==Math.floor(o/g)||r!==Math.floor(a/g))continue}else if(e===u.indexMaxZoom||d.numPoints<=u.indexMaxPoints)continue;if(u.solidChildren||!Il(d,u.extent,u.buffer)){d.source=null,l>1&&console.time("clipping");var v,_,y,b,x,w,T=.5*u.buffer/u.extent,A=.5-T,S=.5+T,E=1+T;v=_=y=b=null,x=wl(t,h,n-T,n+S,0,Cl,d.min[0],d.max[0]),w=wl(t,h,n+A,n+E,0,Cl,d.min[0],d.max[0]),x&&(v=wl(x,h,r-T,r+S,1,jl,d.min[1],d.max[1]),_=wl(x,h,r+A,r+E,1,jl,d.min[1],d.max[1])),w&&(y=wl(w,h,r-T,r+S,1,jl,d.min[1],d.max[1]),b=wl(w,h,r+A,r+E,1,jl,d.min[1],d.max[1])),l>1&&console.timeEnd("clipping"),t.length&&(s.push(v||[],e+1,2*n,2*r),s.push(_||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(b||[],e+1,2*n+1,2*r+1))}else i&&(c=e)}return c},Rl.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug,a=1<<t,s=Ll(t,e=(e%a+a)%a,n);if(this.tiles[s])return xl.tile(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[Ll(l,c,h)];if(!u||!u.source)return null;if(o>1&&console.log("found parent tile z%d-%d-%d",l,c,h),Il(u,i,r.buffer))return xl.tile(u,i);o>1&&console.time("drilling down");var f=this.splitTile(u.source,l,c,h,t,e,n);if(o>1&&console.timeEnd("drilling down"),null!==f){var d=1<<t-f;s=Ll(f,Math.floor(e/d),Math.floor(n/d))}return this.tiles[s]?xl.tile(this.tiles[s],i):null};var Nl=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).load_data=null,r.tile_indexes={},r.setTileSize(512),r.pad_scale=0,r}Rn(e,t);var n=e.prototype;return n._load=function(e){var n=this;return this.load_data||(this.load_data=t.prototype._load.call(this,{source_data:{layers:{}}}).then((function(t){t.source_data.error&&Jn("warn","data source load error(s) for source '"+n.name+"', URL '"+n.url+"': "+t.source_data.error);var e=t.source_data.layers;for(var r in e)n.tile_indexes[r]=zl(e[r],{maxZoom:n.max_zoom,tolerance:1.5,extent:ai.tile_scale,buffer:1e-4});return n.loaded=!0,t}))),this.load_data.then((function(){for(var t in n.tile_indexes)e.source_data.layers[t]=n.getTileFeatures(e,t);return e}))},n.getTileFeatures=function(t,e){var n,r=ai.wrapTile(t.coords,{x:!0}),i=this.tile_indexes[e].getTile(r.z,r.x,r.y);if(i&&i.features){n={type:"FeatureCollection",features:[]};for(var o=0;o<i.features.length;o++){var a=i.features[o],s={type:"Feature",geometry:{},id:a.id,properties:a.tags};if(1===a.type)s.geometry.coordinates=a.geometry.map((function(t){return[t[0],t[1]]})),s.geometry.type="MultiPoint";else{if(2!==a.type&&3!==a.type)continue;if(s.geometry.coordinates=a.geometry.map((function(t){return t.map((function(t){return[t[0],t[1]]}))})),2===a.type)s.geometry.type="MultiLineString";else if(s.geometry=dl(s.geometry),null==s.geometry)continue}n.features.push(s)}}return n},n.formatURL=function(){return this.url},n.parseSourceData=function(t,e,n){var r="string"==typeof n?JSON.parse(n):n,i=this.getLayers(r);e.layers=this.preprocessLayers(i,t)},n.preprocessLayers=function(t,e){for(var n in t){var r=t[n];r.features=this.preprocessFeatures(r.features)}if("function"==typeof this.transform){var i={min:Object.assign({},e.min),max:Object.assign({},e.max),coords:Object.assign({},e.coords)};1===Object.keys(t).length&&t._default?t._default=this.transform(t._default,this.extra_data,i):t=this.transform(t,this.extra_data,i)}return t},n.preprocessFeatures=function(t){if(t=t.filter((function(t){return null!=t.geometry})),this.config.generate_label_centroids){var e=[],n={label_placement:!0};t.forEach((function(t){var r,i;if("Polygon"===t.geometry.type)i=Fl(r=t.geometry.coordinates,t.id,t.properties,n),e.push(i);else if("MultiPolygon"===t.geometry.type){r=t.geometry.coordinates;for(var o=-1/0,a=0,s=0;s<r.length;s++){var u=ai.polygonArea(r[s]);u>o&&(o=u,a=s)}i=Fl(r[a],t.id,t.properties,n),e.push(i)}})),e=e.filter((function(t){return t})),Array.prototype.push.apply(t,e)}return t},n.getLayers=function(t){return"Feature"===t.type?{_default:{type:"FeatureCollection",features:[t]}}:"FeatureCollection"===t.type?{_default:t}:t},e}(lo),Dl=function(t){function e(e,n){return t.call(this,e,n)||this}Rn(e,t);var n=e.prototype;return n.parseSourceData=function(t,e,n){var r="string"==typeof n?JSON.parse(n):n;this.prepareGeoJSON(r,t,e)},n.prepareGeoJSON=function(t,e,n){if("function"==typeof this.transform){var r={min:Object.assign({},e.min),max:Object.assign({},e.max),coords:Object.assign({},e.coords)};t=this.transform(t,this.extra_data,r)}n.layers=Nl.prototype.getLayers(t);var i={coords:e.coords,min:ai.metersForTile(ai.wrapTile(e.coords,{x:!0}))};so.projectData(n),so.scaleData(n,i)},e}(co);function Fl(t,e,n,r){var i=ai.centroid(t);if(i){var o={};return Object.assign(o,n,r),{type:"Feature",id:e,properties:o,geometry:{type:"Point",coordinates:i}}}}function Bl(t){return t}function Ul(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=function(t,e){var n=function(t){if(null==(e=t.transform))return Bl;var e,n,r,i=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(t,e){return e||(n=r=0),t[0]=(n+=t[0])*i+a,t[1]=(r+=t[1])*o+s,t}}(t),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o].slice(),o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function o(t){return n(t.slice())}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0].slice()),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0].slice());return e}function u(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}so.register("GeoJSON",(function(t){return Dl.urlHasTilePattern(t.url)?Dl:Nl}));var Gl=function(t){function e(){return t.apply(this,arguments)||this}Rn(e,t);var n=e.prototype;return n.parseSourceData=function(e,n,r){var i="string"==typeof r?JSON.parse(r):r;i=this.toGeoJSON(i);var o=this.getLayers(i);t.prototype.preprocessLayers.call(this,o,e),n.layers=o},n.toGeoJSON=function(t){if(t.objects&&1===Object.keys(t.objects).length){var e=Object.keys(t.objects)[0];t=Vl(t,t.objects[e])}else{var n={};for(var r in t.objects)n[r]=Vl(t,t.objects[r]);t=n}return t},e}(Nl);function Vl(t,e){var n=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Ul(t,e)}))}:Ul(t,e)}(t,e);return"Feature"===n.type&&(n={type:"FeatureCollection",features:[n]}),n}var Zl=function(t){function e(e,n){return t.call(this,e,n)||this}return Rn(e,t),e.prototype.parseSourceData=function(t,e,n){var r="string"==typeof n?JSON.parse(n):n;r=Gl.prototype.toGeoJSON(r),this.prepareGeoJSON(r,t,e)},e}(Dl);so.register("TopoJSON",(function(t){return Zl.urlHasTilePattern(t.url)?Zl:Gl})),t.$export=D,t.Collision=Xa,t.DataSource=so,t.FeatureSelection=Yi,t.FilterOptions=Su,t.FontManager=os,t.GLSL=qr,t.Geo=ai,t.Label=Wa,t.LabelLineStraight=Hs,t.LabelPoint=$a,t.Light=eo,t.Material=Qi,t.OBB=Za,t.ShaderProgram=Jr,t.Style=mo,t.StyleManager=eu,t.StyleParser=ji,t.Task=Tr,t.TextCanvas=ws,t.Texture=Gr,t.Thread=It,t.Tile=Pu,t.TileID=ho,t.Utils=nr,t.Vector=to,t.VertexArrayObject=Qr,t.VertexData=wo,t.VertexElements=bo,t.View=Bs,t.WorkerBroker=Zn,t._createClass=zn,t._inheritsLoose=Rn,t.addBaseURL=function(t,e){if(!t||!xr(t))return t;var n,r="/"!==t[0];if(e?(n=document.createElement("a")).href=e:n=window.location,r)t=br(n.href)+t;else{var i=n.origin;i||(i=n.protocol+"//"+n.host),t=i+t}return t},t.anObject=c,t.buildFilter=vu,t.cache=zi,t.clearFunctionStringCache=function(){zi.functions={},zi.num_functions=0,zi.num_cached=0},t.commonjsRequire=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")},t.compileFunctionStrings=Ri,t.core=n,t.createCommonjsModule=e,t.createObjectURL=function(t){return void 0===_r&&"function"!=typeof(_r=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(_r=null,Jn("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_r?_r(t):t},t.debugSettings=rr,t.debugSumLayerStats=function(t){var e={},n={};return t.filter((function(t){return t.debug.layers})).forEach((function(t){Object.keys(t.debug.layers.list).forEach((function(n){var r=t.debug.layers.list[n];go(e,n,r.features,r.geoms,r.styles,r.base)})),function t(e,n){for(var r in e){var i=e[r];go(n,r,i.features,i.geoms,i.styles,i.base),i.layers&&(n[r].layers=n[r].layers||{},t(i.layers,n[r].layers))}}(t.debug.layers.tree,n)})),{list:e,tree:n}},t.extensionForURL=function(t){var e=(t=t.split("/").pop()).lastIndexOf(".");if(e>-1)return t.substring(e+1)},t.flattenRelativeURL=function(t){for(var e=(t||"").split("/"),n=1;n<e.length;n++)"."===e[n]?(e.splice(n,1),n--):".."===e[n]&&(n+=0,e.splice(n-1,2),n--);return e.join("/")},t.getKeys=tt,t.global=r,t.has=L,t.isArray=he,t.isLocalURL=function(t){if("string"==typeof t)return t.search(/^(data|blob):/)>-1},t.isObject=l,t.isRelativeURL=xr,t.isReserved=Eu,t.layerCache=function(){return yu},t.log=Jn,t.mergeDebugSettings=function(t){Object.assign(er,t)},t.mergeObjects=oi,t.parseLayers=function(t,e){yu={};var n={};for(var r in t){var i=t[r];i&&(n[r]=ku(r,i,null,e))}return n},t.pathForURL=br,t.require$$0=Lt,t.require$$0$1=de,t.require$$0$2=ce,t.require$$0$3=h,t.require$$0$4=Ur,t.require$$1=!1,t.require$$1$1=me,t.require$$10=x,t.require$$2=y,t.require$$26=s,t.require$$27=u,t.require$$3=Rt,t.require$$4=st,t.require$$5=f,t.require$$6=C,t.require$$9=b,t.setToStringTag=ct,t.shared=i,t.sliceObject=Sr,t.subscribeMixin=Ar,t.toIObject=z,t.toPrimitive=v,t.version=Dn})),i(0,(function(t){var e=Object.assign(self,{FeatureSelection:t.FeatureSelection,sources:{},styles:{},layers:{},tiles:{},init:function(e,n,r,i,o,a,s){return this.scene_id=e,this._worker_id=n,this.num_workers=r,t.log.setLevel(i),t.Utils.device_pixel_ratio=o,t.VertexElements.setElementIndexUint(a),t.FeatureSelection.setPrefix(this._worker_id),this.style_manager=new t.StyleManager,this.importExternalScripts(s),t.Label.id_prefix=n,t.Label.id_multiplier=r,n},importExternalScripts:function(e){var n=this;if(0!==e.length){t.log("debug","loading custom data source scripts in worker:",e);var r=Object.getOwnPropertyNames(window);importScripts.apply(void 0,e),Object.getOwnPropertyNames(window).forEach((function(t){-1===r.indexOf(t)&&(n[t]=window[t])}))}},updateConfig:function(e,n){var r=e.config,i=e.generation,o=e.introspection;return r=JSON.parse(r),t.mergeDebugSettings(n),this.generation=i,this.introspection=o,this.global=t.compileFunctionStrings(r.global),this.createDataSources(r),r.styles=t.compileFunctionStrings(r.styles,t.StyleParser.wrapFunction),this.styles=this.style_manager.build(r.styles),this.style_manager.initStyles({generation:this.generation,styles:this.styles,sources:this.sources,introspection:this.introspection}),this.layers=t.parseLayers(r.layers,this.style_manager.styles),this.syncing_textures=this.syncTextures(r.textures),this.configuring=this.syncing_textures.then((function(){t.log("debug","updated config")})),this.configuring},createDataSources:function(e){var n=this;this.last_config_sources=this.config_sources||{},this.config_sources=e.sources;var r=this.sources,i=[];for(var o in this.sources={},e.sources)if(JSON.stringify(this.last_config_sources[o])!==JSON.stringify(e.sources[o])){e.sources[o]=t.compileFunctionStrings(e.sources[o]);var a=void 0;try{a=t.DataSource.create(Object.assign({},e.sources[o],{name:o}),this.sources)}catch(t){continue}a&&(this.sources[o]=a,i.push(o))}else this.sources[o]=r[o];i.forEach((function(t){for(var e in n.tiles)n.tiles[e].source===t&&delete n.tiles[e]}))},awaitConfiguration:function(){return this.configuring},buildTile:function(e){var n=this,r=e.tile;if(null==this.getTile(r.key)||!0!==this.getTile(r.key).loading)return r=this.tiles[r.key]=Object.assign(this.getTile(r.key)||{},r),this.awaitConfiguration().then((function(){if(!0!==r.loaded)r.loading=!0,r.loaded=!1,r.error=null,n.loadTileSourceData(r).then((function(){n.getTile(r.key)?(r.source_data.error&&t.log("warn","tile load error(s) for "+r.key+": "+r.source_data.error),r.loading=!1,r.loaded=!0,t.Tile.buildGeometry(r,n)):t.log("trace","stop tile build after data source load because tile was removed: "+r.key)})).catch((function(e){r.loading=!1,r.loaded=!1,r.error=e.stack,t.log("error","tile load error for "+r.key+": "+r.error),t.WorkerBroker.postMessage("TileManager_"+n.scene_id+".buildTileError",t.Tile.slice(r))}));else{t.log("trace","used worker cache for tile "+r.key);try{t.Tile.buildGeometry(r,n)}catch(e){r.error=e.toString(),t.WorkerBroker.postMessage("TileManager_"+n.scene_id+".buildTileError",t.Tile.slice(r))}}}))},loadTileSourceData:function(t){var e=this.sources[t.source];if(e){for(var n in this.tiles){var r=this.tiles[n];if(r.source===t.source&&r.coords.key===t.coords.key&&r.loaded)return Promise.resolve(e.copyTileData(r,t))}return e.load(t)}return t.source_data={},Promise.resolve(t)},getTile:function(t){return this.tiles[t]},removeTile:function(e){var n=this.tiles[e];null!=n&&(!0===n.loading&&(t.log("trace","cancel tile load for "+e),n.loading=!1,t.Tile.cancel(n)),t.FeatureSelection.clearTile(e),delete this.tiles[e],t.log("trace","remove tile from cache for "+e))},queryFeatures:function(e){var n=this,r=e.filter,i=e.visible,o=e.geometry,a=e.tile_keys,s=[],u=a.map((function(t){return n.tiles[t]})).filter((function(t){return t&&t.loaded}));return null!=r&&(r=["{","["].indexOf(r[0])>-1?JSON.parse(r):r,r=t.compileFunctionStrings(r,t.StyleParser.wrapFunction)),r=t.buildFilter(r,t.FilterOptions),u.forEach((function(e){var a=function(a){var u=e.source_data.layers[a];if(null==u)return{v:void 0};u.features.forEach((function(u){var l=u.generation===n.generation;if(!(!0===i&&!l||!1===i&&l)){var c=t.StyleParser.getFeatureParseContext(u,e,n.global);if(c.source=e.source,c.layer=a,c.id=u.id,r(c)){var h={type:u.type,id:u.id,properties:Object.assign({},u.properties,{$source:c.source,$layer:c.layer,$geometry:c.geometry,$visible:l})};!0===o&&(h.geometry=t.Geo.copyGeometry(u.geometry),t.Geo.tileSpaceToLatlng(h.geometry,e.coords.z,e.min)),s.push(h)}}}))};for(var u in e.source_data.layers){var l=a(u);if("object"==typeof l)return l.v}})),s},getFeatureSelection:function(e){var n=void 0===e?{}:e,r=n.id,i=n.key,o=t.FeatureSelection.map[i];return{id:r,feature:o&&o.feature}},resetFeatureSelection:function(e){void 0===e&&(e=null),t.FeatureSelection.reset(e)},getFeatureSelectionMapSize:function(){return t.FeatureSelection.getMapSize()},syncTextures:function(e){var n=[];return e&&n.push.apply(n,Object.keys(e)),t.log("trace","sync textures to worker:",n),n.length>0?t.Texture.syncTexturesToWorker(n):Promise.resolve()},updateDevicePixelRatio:function(e){t.Utils.device_pixel_ratio=e},clearFunctionStringCache:function(){t.clearFunctionStringCache()},profile:function(t){console.profile("worker "+this._worker_id+": "+t)},profileEnd:function(t){console.profileEnd("worker "+this._worker_id+": "+t)},debug:{debugSettings:t.debugSettings,layerCache:t.layerCache,functionStringCache:t.cache}});t.WorkerBroker.addTarget("self",e)})),i(0,(function(t){var n={f:t.require$$27},i=t.require$$2.f,o=function(e){var r=t.core.Symbol||(t.core.Symbol=t.global.Symbol||{});"_"==e.charAt(0)||e in r||i(r,e,{value:n.f(e)})};o("asyncIterator");var a,s=t.require$$0$1.f,u={}.toString,l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c={f:function(e){return l&&"[object Window]"==u.call(e)?function(t){try{return s(t)}catch(t){return l.slice()}}(e):s(t.toIObject(e))}},h=t.require$$0$2.KEY,f=t.require$$1$1.f,d=t.require$$2.f,p=c.f,m=t.global.Symbol,g=t.global.JSON,v=g&&g.stringify,_=t.require$$27("_hidden"),y=t.require$$27("toPrimitive"),b={}.propertyIsEnumerable,x=t.shared("symbol-registry"),w=t.shared("symbols"),T=t.shared("op-symbols"),A=Object.prototype,S="function"==typeof m,E=t.global.QObject,k=!E||!E.prototype||!E.prototype.findChild,M=t.require$$5&&t.require$$0$3((function(){return 7!=t.require$$4(d({},"a",{get:function(){return d(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=f(A,e);r&&delete A[e],d(t,e,n),r&&t!==A&&d(A,e,r)}:d,O=function(e){var n=w[e]=t.require$$4(m.prototype);return n._k=e,n},P=S&&"symbol"==typeof m.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof m},z=function e(n,r,i){return n===A&&e(T,r,i),t.anObject(n),r=t.toPrimitive(r,!0),t.anObject(i),t.has(w,r)?(i.enumerable?(t.has(n,_)&&n[_][r]&&(n[_][r]=!1),i=t.require$$4(i,{enumerable:t.require$$9(0,!1)})):(t.has(n,_)||d(n,_,t.require$$9(1,{})),n[_][r]=!0),M(n,r,i)):d(n,r,i)},R=function(e,n){t.anObject(e);for(var r,i=function(e){var n=t.getKeys(e),r=t.require$$3.f;if(r)for(var i,o=r(e),a=t.require$$0.f,s=0;o.length>s;)a.call(e,i=o[s++])&&n.push(i);return n}(n=t.toIObject(n)),o=0,a=i.length;a>o;)z(e,r=i[o++],n[r]);return e},L=function(e){var n=b.call(this,e=t.toPrimitive(e,!0));return!(this===A&&t.has(w,e)&&!t.has(T,e))&&(!(n||!t.has(this,e)||!t.has(w,e)||t.has(this,_)&&this[_][e])||n)},C=function(e,n){if(e=t.toIObject(e),n=t.toPrimitive(n,!0),e!==A||!t.has(w,n)||t.has(T,n)){var r=f(e,n);return!r||!t.has(w,n)||t.has(e,_)&&e[_][n]||(r.enumerable=!0),r}},j=function(e){for(var n,r=p(t.toIObject(e)),i=[],o=0;r.length>o;)t.has(w,n=r[o++])||n==_||n==h||i.push(n);return i},I=function(e){for(var n,r=e===A,i=p(r?T:t.toIObject(e)),o=[],a=0;i.length>a;)!t.has(w,n=i[a++])||r&&!t.has(A,n)||o.push(w[n]);return o};S||(m=function(){if(this instanceof m)throw TypeError("Symbol is not a constructor!");var e=t.require$$26(arguments.length>0?arguments[0]:void 0),n=function n(r){this===A&&n.call(T,r),t.has(this,_)&&t.has(this[_],e)&&(this[_][e]=!1),M(this,e,t.require$$9(1,r))};return t.require$$5&&k&&M(A,e,{configurable:!0,set:n}),O(e)},t.require$$6(m.prototype,"toString",(function(){return this._k})),t.require$$1$1.f=C,t.require$$2.f=z,t.require$$0$1.f=c.f=j,t.require$$0.f=L,t.require$$3.f=I,t.require$$5&&!t.require$$1&&t.require$$6(A,"propertyIsEnumerable",L,!0),n.f=function(e){return O(t.require$$27(e))}),t.$export(t.$export.G+t.$export.W+t.$export.F*!S,{Symbol:m});for(var N="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),D=0;N.length>D;)t.require$$27(N[D++]);for(var F=t.getKeys(t.require$$27.store),B=0;F.length>B;)o(F[B++]);t.$export(t.$export.S+t.$export.F*!S,"Symbol",{for:function(e){return t.has(x,e+="")?x[e]:x[e]=m(e)},keyFor:function(t){if(!P(t))throw TypeError(t+" is not a symbol!");for(var e in x)if(x[e]===t)return e},useSetter:function(){k=!0},useSimple:function(){k=!1}}),t.$export(t.$export.S+t.$export.F*!S,"Object",{create:function(e,n){return void 0===n?t.require$$4(e):R(t.require$$4(e),n)},defineProperty:z,defineProperties:R,getOwnPropertyDescriptor:C,getOwnPropertyNames:j,getOwnPropertySymbols:I}),g&&t.$export(t.$export.S+t.$export.F*(!S||t.require$$0$3((function(){var t=m();return"[null]"!=v([t])||"{}"!=v({a:t})||"{}"!=v(Object(t))}))),"JSON",{stringify:function(e){for(var n,r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=n=i[1],(t.isObject(n)||void 0!==e)&&!P(e))return t.isArray(n)||(n=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!P(e))return e}),i[1]=n,v.apply(g,i)}}),m.prototype[y]||t.require$$10(m.prototype,y,m.prototype.valueOf),t.setToStringTag(m,"Symbol"),t.setToStringTag(Math,"Math",!0),t.setToStringTag(t.global.JSON,"JSON",!0);var U=a={},G=0;a.getContext=function(t,e){var n=!1;null==t&&((t=document.createElement("canvas")).style.position="absolute",t.style.top=0,t.style.left=0,t.style.zIndex=-1,document.body.appendChild(t),n=!0),t.addEventListener("webglcontextlost",(function(){})),t.addEventListener("webglcontextrestored",(function(){}));var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("Couldn't create WebGL context.");return r._tangram_id=G++,n?(a.resize(r,window.innerWidth,window.innerHeight,e.device_pixel_ratio),window.addEventListener("resize",(function(){a.resize(r,window.innerWidth,window.innerHeight,e.device_pixel_ratio)}))):a.resize(r,parseFloat(t.style.width),parseFloat(t.style.height),e.device_pixel_ratio),r},a.resize=function(t,e,n,r){r=r||window.devicePixelRatio||1,t.canvas.style.width=e+"px",t.canvas.style.height=n+"px",t.canvas.width=Math.round(e*r),t.canvas.height=Math.round(n*r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height)};var V=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Z=[],W=[],q="undefined"!=typeof Uint8Array?Uint8Array:Array,H=!1;function Y(){H=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)Z[e]=t[e],W[t.charCodeAt(e)]=e;W["-".charCodeAt(0)]=62,W["_".charCodeAt(0)]=63}function X(t,e,n){for(var r,i,o=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(Z[(i=r)>>18&63]+Z[i>>12&63]+Z[i>>6&63]+Z[63&i]);return o.join("")}function $(t){var e;H||Y();for(var n=t.length,r=n%3,i="",o=[],a=0,s=n-r;a<s;a+=16383)o.push(X(t,a,a+16383>s?s:a+16383));return 1===r?(e=t[n-1],i+=Z[e>>2],i+=Z[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=Z[e>>10],i+=Z[e>>4&63],i+=Z[e<<2&63],i+="="),o.push(i),o.join("")}function K(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)}function J(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+d]=255&a,d+=p,a/=256,l-=8);t[n+d-p]|=128*m}var Q={}.toString,tt=Array.isArray||function(t){return"[object Array]"==Q.call(t)};it.TYPED_ARRAY_SUPPORT=void 0===V.TYPED_ARRAY_SUPPORT||V.TYPED_ARRAY_SUPPORT;var et=nt();function nt(){return it.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function rt(t,e){if(nt()<e)throw new RangeError("Invalid typed array length");return it.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=it.prototype:(null===t&&(t=new it(e)),t.length=e),t}function it(t,e,n){if(!(it.TYPED_ARRAY_SUPPORT||this instanceof it))return new it(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return st(this,t)}return ot(this,t,e,n)}function ot(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),it.TYPED_ARRAY_SUPPORT?(t=e).__proto__=it.prototype:t=ut(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!it.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|ht(e,n),i=(t=rt(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(ct(e)){var n=0|lt(e.length);return 0===(t=rt(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?rt(t,0):ut(t,e);if("Buffer"===e.type&&tt(e.data))return ut(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function at(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function st(t,e){if(at(e),t=rt(t,e<0?0:0|lt(e)),!it.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function ut(t,e){var n=e.length<0?0:0|lt(e.length);t=rt(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function lt(t){if(t>=nt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+nt().toString(16)+" bytes");return 0|t}function ct(t){return!(null==t||!t._isBuffer)}function ht(t,e){if(ct(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Nt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Dt(t).length;default:if(r)return Nt(t).length;e=(""+e).toLowerCase(),r=!0}}function ft(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function dt(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=it.from(e,r)),ct(e))return 0===e.length?-1:pt(t,e,n,r,i);if("number"==typeof e)return e&=255,it.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):pt(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function pt(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function mt(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function gt(t,e,n,r){return Ft(Nt(e,t.length-n),t,n,r)}function vt(t,e,n,r){return Ft(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _t(t,e,n,r){return vt(t,e,n,r)}function yt(t,e,n,r){return Ft(Dt(e),t,n,r)}function bt(t,e,n,r){return Ft(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function xt(t,e,n){return 0===e&&n===t.length?$(t):$(t.slice(e,n))}function wt(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=Tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Tt));return n}(r)}it.poolSize=8192,it._augment=function(t){return t.__proto__=it.prototype,t},it.from=function(t,e,n){return ot(null,t,e,n)},it.TYPED_ARRAY_SUPPORT&&(it.prototype.__proto__=Uint8Array.prototype,it.__proto__=Uint8Array),it.alloc=function(t,e,n){return function(t,e,n,r){return at(e),e<=0?rt(t,e):void 0!==n?"string"==typeof r?rt(t,e).fill(n,r):rt(t,e).fill(n):rt(t,e)}(null,t,e,n)},it.allocUnsafe=function(t){return st(null,t)},it.allocUnsafeSlow=function(t){return st(null,t)},it.isBuffer=Bt,it.compare=function(t,e){if(!ct(t)||!ct(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},it.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},it.concat=function(t,e){if(!tt(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return it.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=it.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!ct(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},it.byteLength=ht,it.prototype._isBuffer=!0,it.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ft(this,e,e+1);return this},it.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ft(this,e,e+3),ft(this,e+1,e+2);return this},it.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ft(this,e,e+7),ft(this,e+1,e+6),ft(this,e+2,e+5),ft(this,e+3,e+4);return this},it.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?wt(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Et(this,e,n);case"utf8":case"utf-8":return wt(this,e,n);case"ascii":return At(this,e,n);case"latin1":case"binary":return St(this,e,n);case"base64":return xt(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},it.prototype.equals=function(t){if(!ct(t))throw new TypeError("Argument must be a Buffer");return this===t||0===it.compare(this,t)},it.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},it.prototype.compare=function(t,e,n,r,i){if(!ct(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},it.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},it.prototype.indexOf=function(t,e,n){return dt(this,t,e,n,!0)},it.prototype.lastIndexOf=function(t,e,n){return dt(this,t,e,n,!1)},it.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return mt(this,t,e,n);case"utf8":case"utf-8":return gt(this,t,e,n);case"ascii":return vt(this,t,e,n);case"latin1":case"binary":return _t(this,t,e,n);case"base64":return yt(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bt(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},it.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Tt=4096;function At(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function St(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function Et(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=It(t[o]);return i}function kt(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Mt(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Ot(t,e,n,r,i,o){if(!ct(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Pt(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function zt(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function Rt(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Lt(t,e,n,r,i){return i||Rt(t,0,n,4),J(t,e,n,r,23,4),n+4}function Ct(t,e,n,r,i){return i||Rt(t,0,n,8),J(t,e,n,r,52,8),n+8}it.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),it.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=it.prototype;else{var i=e-t;n=new it(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},it.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Mt(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},it.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Mt(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},it.prototype.readUInt8=function(t,e){return e||Mt(t,1,this.length),this[t]},it.prototype.readUInt16LE=function(t,e){return e||Mt(t,2,this.length),this[t]|this[t+1]<<8},it.prototype.readUInt16BE=function(t,e){return e||Mt(t,2,this.length),this[t]<<8|this[t+1]},it.prototype.readUInt32LE=function(t,e){return e||Mt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},it.prototype.readUInt32BE=function(t,e){return e||Mt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},it.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Mt(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},it.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Mt(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},it.prototype.readInt8=function(t,e){return e||Mt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},it.prototype.readInt16LE=function(t,e){e||Mt(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},it.prototype.readInt16BE=function(t,e){e||Mt(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},it.prototype.readInt32LE=function(t,e){return e||Mt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},it.prototype.readInt32BE=function(t,e){return e||Mt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},it.prototype.readFloatLE=function(t,e){return e||Mt(t,4,this.length),K(this,t,!0,23,4)},it.prototype.readFloatBE=function(t,e){return e||Mt(t,4,this.length),K(this,t,!1,23,4)},it.prototype.readDoubleLE=function(t,e){return e||Mt(t,8,this.length),K(this,t,!0,52,8)},it.prototype.readDoubleBE=function(t,e){return e||Mt(t,8,this.length),K(this,t,!1,52,8)},it.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Ot(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},it.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Ot(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},it.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,1,255,0),it.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},it.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,2,65535,0),it.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Pt(this,t,e,!0),e+2},it.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,2,65535,0),it.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Pt(this,t,e,!1),e+2},it.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,4,4294967295,0),it.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):zt(this,t,e,!0),e+4},it.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,4,4294967295,0),it.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):zt(this,t,e,!1),e+4},it.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Ot(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},it.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Ot(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},it.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,1,127,-128),it.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},it.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,2,32767,-32768),it.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Pt(this,t,e,!0),e+2},it.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,2,32767,-32768),it.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Pt(this,t,e,!1),e+2},it.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,4,2147483647,-2147483648),it.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):zt(this,t,e,!0),e+4},it.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Ot(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),it.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):zt(this,t,e,!1),e+4},it.prototype.writeFloatLE=function(t,e,n){return Lt(this,t,e,!0,n)},it.prototype.writeFloatBE=function(t,e,n){return Lt(this,t,e,!1,n)},it.prototype.writeDoubleLE=function(t,e,n){return Ct(this,t,e,!0,n)},it.prototype.writeDoubleBE=function(t,e,n){return Ct(this,t,e,!1,n)},it.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!it.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},it.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!it.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=ct(t)?t:Nt(new it(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var jt=/[^+\/0-9A-Za-z-_]/g;function It(t){return t<16?"0"+t.toString(16):t.toString(16)}function Nt(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Dt(t){return function(t){var e,n,r,i,o,a;H||Y();var s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[s-2]?2:"="===t[s-1]?1:0,a=new q(3*s/4-o),r=o>0?s-4:s;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)i=W[t.charCodeAt(e)]<<18|W[t.charCodeAt(e+1)]<<12|W[t.charCodeAt(e+2)]<<6|W[t.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=W[t.charCodeAt(e)]<<2|W[t.charCodeAt(e+1)]>>4,a[u++]=255&i):1===o&&(i=W[t.charCodeAt(e)]<<10|W[t.charCodeAt(e+1)]<<4|W[t.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(jt,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Ft(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Bt(t){return null!=t&&(!!t._isBuffer||Ut(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Ut(t.slice(0,0))}(t))}function Ut(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Gt=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:et,Buffer:it,SlowBuffer:function(t){return+t!=t&&(t=0),it.alloc(+t)},isBuffer:Bt});function Vt(){}function Zt(){Zt.init.call(this)}function Wt(t){return void 0===t._maxListeners?Zt.defaultMaxListeners:t._maxListeners}function qt(t,e,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]):(o=t._events=new Vt,t._eventsCount=0),a){if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=Wt(t))&&i>0&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=o[e]=n,++t._eventsCount;return t}function Ht(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function Yt(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Xt(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function $t(){throw new Error("setTimeout has not been defined")}function Kt(){throw new Error("clearTimeout has not been defined")}Vt.prototype=Object.create(null),Zt.EventEmitter=Zt,Zt.usingDomains=!1,Zt.prototype.domain=void 0,Zt.prototype._events=void 0,Zt.prototype._maxListeners=void 0,Zt.defaultMaxListeners=10,Zt.init=function(){this.domain=null,Zt.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Vt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Zt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Zt.prototype.getMaxListeners=function(){return Wt(this)},Zt.prototype.emit=function(t){var e,n,r,i,o,a,s,u="error"===t;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(s=this.domain,u){if(e=arguments[1],!s){if(e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=Xt(t,r),o=0;o<r;++o)i[o].call(n)}(n,c,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=Xt(t,i),a=0;a<i;++a)o[a].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=Xt(t,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,s=Xt(t,a),u=0;u<a;++u)s[u].call(n,r,i,o)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=Xt(t,i),a=0;a<i;++a)o[a].apply(n,r)}(n,c,this,i)}return!0},Zt.prototype.addListener=function(t,e){return qt(this,t,e,!1)},Zt.prototype.on=Zt.prototype.addListener,Zt.prototype.prependListener=function(t,e){return qt(this,t,e,!0)},Zt.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Ht(this,t,e)),this},Zt.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Ht(this,t,e)),this},Zt.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new Vt:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Vt,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,a||e)}return this},Zt.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Vt,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new Vt:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Vt,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},Zt.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},Zt.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Yt.call(t,e)},Zt.prototype.listenerCount=Yt,Zt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Jt=$t,Qt=Kt;function te(t){if(Jt===setTimeout)return setTimeout(t,0);if((Jt===$t||!Jt)&&setTimeout)return Jt=setTimeout,setTimeout(t,0);try{return Jt(t,0)}catch(n){try{return Jt.call(null,t,0)}catch(n){return Jt.call(this,t,0)}}}"function"==typeof V.setTimeout&&(Jt=setTimeout),"function"==typeof V.clearTimeout&&(Qt=clearTimeout);var ee,ne=[],re=!1,ie=-1;function oe(){re&&ee&&(re=!1,ee.length?ne=ee.concat(ne):ie=-1,ne.length&&ae())}function ae(){if(!re){var t=te(oe);re=!0;for(var e=ne.length;e;){for(ee=ne,ne=[];++ie<e;)ee&&ee[ie].run();ie=-1,e=ne.length}ee=null,re=!1,function(t){if(Qt===clearTimeout)return clearTimeout(t);if((Qt===Kt||!Qt)&&clearTimeout)return Qt=clearTimeout,clearTimeout(t);try{Qt(t)}catch(e){try{return Qt.call(null,t)}catch(e){return Qt.call(this,t)}}}(t)}}function se(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ne.push(new ue(t,e)),1!==ne.length||re||te(ae)}function ue(t,e){this.fun=t,this.array=e}function le(){}ue.prototype.run=function(){this.fun.apply(null,this.array)};var ce=le,he=le,fe=le,de=le,pe=le,me=le,ge=le,ve=V.performance||{},_e=ve.now||ve.mozNow||ve.msNow||ve.oNow||ve.webkitNow||function(){return(new Date).getTime()},ye=new Date,be={nextTick:se,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ce,addListener:he,once:fe,off:de,removeListener:pe,removeAllListeners:me,emit:ge,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*_e.call(ve),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ye)/1e3}},xe=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},we=t.createCommonjsModule((function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}})),Te=t.createCommonjsModule((function(t,e){var n=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(o(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,a=i.length,s=String(t).replace(n,(function(t){if("%%"===t)return"%";if(r>=a)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}})),u=i[r];r<a;u=i[++r])d(u)||!_(u)?s+=" "+u:s+=" "+o(u);return s},e.deprecate=function(t,n){if(g(V.process))return function(){return e.deprecate(t,n).apply(this,arguments)};var r=!1;return function(){return r||(console.error(n),r=!0),t.apply(this,arguments)}};var r,i={};function o(t,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),u(r,t,r.depth)}function a(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function s(t,e){return t}function u(t,n,r){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=u(t,i,r)),i}var o=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return p(e)?t.stylize(""+e,"number"):f(e)?t.stylize(""+e,"boolean"):d(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),b(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(x(n)){var _=n.name?": "+n.name:"";return t.stylize("[Function"+_+"]","special")}if(v(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(y(n))return t.stylize(Date.prototype.toString.call(n),"date");if(b(n))return l(n)}var w,T="",A=!1,E=["{","}"];return h(n)&&(A=!0,E=["[","]"]),x(n)&&(T=" [Function"+(n.name?": "+n.name:"")+"]"),v(n)&&(T=" "+RegExp.prototype.toString.call(n)),y(n)&&(T=" "+Date.prototype.toUTCString.call(n)),b(n)&&(T=" "+l(n)),0!==a.length||A&&0!=n.length?r<0?v(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),w=A?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)S(e,String(a))?o.push(c(t,e,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(c(t,e,n,r,i,!0))})),o}(t,n,r,s,a):a.map((function(e){return c(t,n,r,s,e,A)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(w,T,E)):E[0]+T+E[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),S(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?(s=d(n)?u(t,l.value,null):u(t,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function h(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function d(t){return null===t}function p(t){return"number"==typeof t}function m(t){return"string"==typeof t}function g(t){return void 0===t}function v(t){return _(t)&&"[object RegExp]"===w(t)}function _(t){return"object"==typeof t&&null!==t}function y(t){return _(t)&&"[object Date]"===w(t)}function b(t){return _(t)&&("[object Error]"===w(t)||t instanceof Error)}function x(t){return"function"==typeof t}function w(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(g(r)&&(r=""),t=t.toUpperCase(),!i[t])if(new RegExp("\\b"+t+"\\b","i").test(r)){var n=be.pid;i[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else i[t]=function(){};return i[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=f,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=p,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=v,e.isObject=_,e.isDate=y,e.isError=b,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=xe;var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(n=[T((t=new Date).getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":"),[t.getDate(),A[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=we,e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}})),Ae=(Te.format,Te.deprecate),Se=Te.debuglog,Ee=(Te.inspect,Te.isArray,Te.isBoolean,Te.isNull,Te.isNullOrUndefined,Te.isNumber,Te.isString,Te.isSymbol,Te.isUndefined,Te.isRegExp,Te.isObject,Te.isDate,Te.isError,Te.isFunction,Te.isPrimitive,Te.isBuffer,Te.log,Te.inherits);function ke(){this.head=null,this.tail=null,this.length=0}Te._extend,ke.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},ke.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},ke.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},ke.prototype.clear=function(){this.head=this.tail=null,this.length=0},ke.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},ke.prototype.concat=function(t){if(0===this.length)return it.alloc(0);if(1===this.length)return this.head.data;for(var e=it.allocUnsafe(t>>>0),n=this.head,r=0;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e};var Me=t.createCommonjsModule((function(t,e){var n=Gt.Buffer;function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=Gt:(r(Gt,e),e.Buffer=i),r(n,i),i.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},i.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return Gt.SlowBuffer(t)}})),Oe=(Me.Buffer,Me.Buffer),Pe=Oe.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},ze=Re;function Re(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(Oe.isEncoding===Pe||!Pe(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=je,this.end=Ie,e=4;break;case"utf8":this.fillLast=Ce,e=4;break;case"base64":this.text=Ne,this.end=De,e=3;break;default:return this.write=Fe,void(this.end=Be)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Oe.allocUnsafe(e)}function Le(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function Ce(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�".repeat(n);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�".repeat(n+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�".repeat(n+2)}}(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function je(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Ie(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function Ne(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function De(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Fe(t){return t.toString(this.encoding)}function Be(t){return t&&t.length?this.write(t):""}Re.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},Re.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e},Re.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=Le(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n?0:(i=Le(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n?0:(i=Le(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},Re.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length},Ve.ReadableState=Ge;var Ue=Se("stream");function Ge(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof vn&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new ke,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new ze(t.encoding),this.encoding=t.encoding)}function Ve(t){if(!(this instanceof Ve))return new Ve(t);this._readableState=new Ge(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),Zt.call(this)}function Ze(t,e,n,r,i){var o=function(t,e){var n=null;return Bt(e)||"string"==typeof e||null==e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,qe(t)}}(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else{var u;!e.decoder||i||r||(n=e.decoder.write(n),u=!e.objectMode&&0===n.length),i||(e.reading=!1),u||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&qe(t))),function(t,e){e.readingMore||(e.readingMore=!0,se(Ye,t,e))}(t,e)}else i||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}function We(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function qe(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Ue("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?se(He,t):He(t))}function He(t){Ue("emit readable"),t.emit("readable"),Ke(t)}function Ye(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Ue("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function Xe(t){Ue("readable nexttick read 0"),t.read(0)}function $e(t,e){e.reading||(Ue("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Ke(t),e.flowing&&!e.reading&&t.read(0)}function Ke(t){var e=t._readableState;for(Ue("flow",e.flowing);e.flowing&&null!==t.read(););}function Je(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0==(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=it.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0==(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function Qe(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,se(tn,e,t))}function tn(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function en(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function nn(){}function rn(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function on(t,e){Object.defineProperty(this,"buffer",{get:Ae((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof vn&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?se(i,r):i(r),t._writableState.errorEmitted=!0,t.emit("error",r)}(t,n,r,e,i);else{var o=cn(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||ln(t,n),r?se(un,t,n,o,i):un(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new dn(this)}function an(t){if(!(this instanceof an||this instanceof vn))return new an(t);this._writableState=new on(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),Zt.call(this)}function sn(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function un(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),fn(t,e)}function ln(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;sn(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new dn(e)}else{for(;n;){var s=n.chunk,u=n.encoding,l=n.callback;if(sn(t,e,!1,e.objectMode?1:s.length,s,u,l),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function cn(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function hn(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function fn(t,e){var n=cn(e);return n&&(0===e.pendingcb?(hn(t,e),e.finished=!0,t.emit("finish")):hn(t,e)),n}function dn(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}Ee(Ve,Zt),Ve.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=it.from(t,e),e=""),Ze(this,n,t,e,!1)},Ve.prototype.unshift=function(t){return Ze(this,this._readableState,t,"",!0)},Ve.prototype.isPaused=function(){return!1===this._readableState.flowing},Ve.prototype.setEncoding=function(t){return this._readableState.decoder=new ze(t),this._readableState.encoding=t,this},Ve.prototype.read=function(t){Ue("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Ue("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?Qe(this):qe(this),null;if(0===(t=We(t,e))&&e.ended)return 0===e.length&&Qe(this),null;var r,i=e.needReadable;return Ue("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&Ue("length less than watermark",i=!0),e.ended||e.reading?Ue("reading or ended",i=!1):i&&(Ue("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=We(n,e))),null===(r=t>0?Je(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&Qe(this)),null!==r&&this.emit("data",r),r},Ve.prototype._read=function(t){this.emit("error",new Error("not implemented"))},Ve.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,Ue("pipe count=%d opts=%j",r.pipesCount,e);var i=e&&!1===e.end?l:a;function o(t){Ue("onunpipe"),t===n&&l()}function a(){Ue("onend"),t.end()}r.endEmitted?se(i):n.once("end",i),t.on("unpipe",o);var s=function(t){return function(){var e=t._readableState;Ue("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&t.listeners("data").length&&(e.flowing=!0,Ke(t))}}(n);t.on("drain",s);var u=!1;function l(){Ue("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",s),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",l),n.removeListener("data",h),u=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||s()}var c=!1;function h(e){Ue("ondata"),c=!1,!1!==t.write(e)||c||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==en(r.pipes,t))&&!u&&(Ue("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,c=!0),n.pause())}function f(e){Ue("onerror",e),m(),t.removeListener("error",f),0===t.listeners("error").length&&t.emit("error",e)}function d(){t.removeListener("finish",p),m()}function p(){Ue("onfinish"),t.removeListener("close",d),m()}function m(){Ue("unpipe"),n.unpipe(t)}return n.on("data",h),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",f),t.once("close",d),t.once("finish",p),t.emit("pipe",n),r.flowing||(Ue("pipe resume"),n.resume()),t},Ve.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=en(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},Ve.prototype.on=function(t,e){var n=Zt.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&qe(this):se(Xe,this))}return n},Ve.prototype.addListener=Ve.prototype.on,Ve.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ue("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,se($e,t,e))}(this,t)),this},Ve.prototype.pause=function(){return Ue("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Ue("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ve.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",(function(){if(Ue("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(i){Ue("wrapped data"),e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i||(e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n])}(["error","close","destroy","pause","resume"],(function(e){t.on(e,r.emit.bind(r,e))})),r._read=function(e){Ue("wrapped _read",e),n&&(n=!1,t.resume())},r},Ve._fromList=Je,an.WritableState=on,Ee(an,Zt),on.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},an.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},an.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"==typeof e&&(n=e,e=null),it.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=nn),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),se(e,n)}(this,n):function(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):it.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),se(r,o),i=!1),i}(this,r,t,n)&&(r.pendingcb++,i=function(t,e,n,r,i){n=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=it.from(e,n)),e}(e,n,r),it.isBuffer(n)&&(r="buffer");var o=e.objectMode?1:n.length;e.length+=o;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new rn(n,r,i),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else sn(t,e,!1,o,n,r,i);return a}(this,r,t,e,n)),i},an.prototype.cork=function(){this._writableState.corked++},an.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||ln(this,t))},an.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},an.prototype._write=function(t,e,n){n(new Error("not implemented"))},an.prototype._writev=null,an.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,fn(t,e),n&&(e.finished?se(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Ee(vn,Ve);for(var pn=Object.keys(an.prototype),mn=0;mn<pn.length;mn++){var gn=pn[mn];vn.prototype[gn]||(vn.prototype[gn]=an.prototype[gn])}function vn(t){if(!(this instanceof vn))return new vn(t);Ve.call(this,t),an.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",_n)}function _n(){this.allowHalfOpen||this._writableState.ended||se(yn,this)}function yn(t){t.end()}function bn(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function xn(t){if(!(this instanceof xn))return new xn(t);vn.call(this,t),this._transformState=new bn(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t){wn(e,t)})):wn(e)}))}function wn(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function Tn(t){if(!(this instanceof Tn))return new Tn(t);xn.call(this,t)}function An(){Zt.call(this)}Ee(xn,vn),xn.prototype.push=function(t,e){return this._transformState.needTransform=!1,vn.prototype.push.call(this,t,e)},xn.prototype._transform=function(t,e,n){throw new Error("Not implemented")},xn.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},xn.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},Ee(Tn,xn),Tn.prototype._transform=function(t,e,n){n(null,t)},Ee(An,Zt),An.Readable=Ve,An.Writable=an,An.Duplex=vn,An.Transform=xn,An.PassThrough=Tn,An.Stream=An,An.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(l(),0===Zt.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t};var Sn=An,En=t.createCommonjsModule((function(t,e){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer=!0,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),e.blob=0===r.getBlob("application/zip").size}catch(t){e.blob=!1}}}try{e.nodestream=!!Sn.Readable}catch(t){e.nodestream=!1}})),kn=(En.base64,En.array,En.string,En.arraybuffer,En.nodebuffer,En.uint8array,En.blob,En.nodestream,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Mn=function(t){for(var e,n,r,i,o,a,s,u=[],l=0,c=t.length,h=c,f="string"!==Lr.getTypeOf(t);l<t.length;)h=c-l,f?(e=t[l++],n=l<c?t[l++]:0,r=l<c?t[l++]:0):(e=t.charCodeAt(l++),n=l<c?t.charCodeAt(l++):0,r=l<c?t.charCodeAt(l++):0),i=e>>2,o=(3&e)<<4|n>>4,a=h>1?(15&n)<<2|r>>6:64,s=h>2?63&r:64,u.push(kn.charAt(i)+kn.charAt(o)+kn.charAt(a)+kn.charAt(s));return u.join("")},On=function(t){var e,n,r,i,o,a,s=0,u=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var l,c=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===kn.charAt(64)&&c--,t.charAt(t.length-2)===kn.charAt(64)&&c--,c%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=En.uint8array?new Uint8Array(0|c):new Array(0|c);s<t.length;)e=kn.indexOf(t.charAt(s++))<<2|(i=kn.indexOf(t.charAt(s++)))>>4,n=(15&i)<<4|(o=kn.indexOf(t.charAt(s++)))>>2,r=(3&o)<<6|(a=kn.indexOf(t.charAt(s++))),l[u++]=e,64!==o&&(l[u++]=n),64!==a&&(l[u++]=r);return l},Pn=function(t,e){return new it(t,e)},zn=function(t){return it.alloc?it.alloc(t):new it(t)},Rn=function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume},Ln=t.createCommonjsModule((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),Cn=t.createCommonjsModule((function(t){var e=t.exports={version:"2.3.0"};"number"==typeof __e&&(__e=e)})),jn=(Cn.version,function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}),In=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Nn=function(t){if(!In(t))throw TypeError(t+" is not an object!");return t},Dn=function(t){try{return!!t()}catch(t){return!0}},Fn=!Dn((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),Bn=Ln.document,Un=In(Bn)&&In(Bn.createElement),Gn=function(t){return Un?Bn.createElement(t):{}},Vn=!Fn&&!Dn((function(){return 7!=Object.defineProperty(Gn("div"),"a",{get:function(){return 7}}).a})),Zn=Object.defineProperty,Wn={f:Fn?Object.defineProperty:function(t,e,n){if(Nn(t),e=function(t,e){if(!In(t))return t;var n,r;if("function"==typeof(n=t.toString)&&!In(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!In(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e),Nn(n),Vn)try{return Zn(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},qn=Fn?function(t,e,n){return Wn.f(t,e,function(t,e){return{enumerable:!1,configurable:!0,writable:!0,value:e}}(0,n))}:function(t,e,n){return t[e]=n,t},Hn=function t(e,n,r){var i,o,a,s=e&t.F,u=e&t.G,l=e&t.S,c=e&t.P,h=e&t.B,f=e&t.W,d=u?Cn:Cn[n]||(Cn[n]={}),p=d.prototype,m=u?Ln:l?Ln[n]:(Ln[n]||{}).prototype;for(i in u&&(r=n),r)(o=!s&&m&&void 0!==m[i])&&i in d||(a=o?m[i]:r[i],d[i]=u&&"function"!=typeof m[i]?r[i]:h&&o?jn(a,Ln):f&&m[i]==a?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(a):c&&"function"==typeof a?jn(Function.call,a):a,c&&((d.virtual||(d.virtual={}))[i]=a,e&t.R&&p&&!p[i]&&qn(p,i,a)))};Hn.F=1,Hn.G=2,Hn.S=4,Hn.P=8,Hn.B=16,Hn.W=32,Hn.U=64,Hn.R=128;var Yn,Xn,$n,Kn,Jn=Hn,Qn=Ln.document&&document.documentElement,tr={}.toString,er=Ln.process,nr=Ln.setImmediate,rr=Ln.clearImmediate,ir=Ln.MessageChannel,or=0,ar={},sr=function(){var t=+this;if(ar.hasOwnProperty(t)){var e=ar[t];delete ar[t],e()}},ur=function(t){sr.call(t.data)};nr&&rr||(nr=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ar[++or]=function(){!function(t,e,n){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},Yn(or),or},rr=function(t){delete ar[t]},"process"==(Kn=er,tr.call(Kn).slice(8,-1))?Yn=function(t){er.nextTick(jn(sr,t,1))}:ir?($n=(Xn=new ir).port2,Xn.port1.onmessage=ur,Yn=jn($n.postMessage,$n,1)):Ln.addEventListener&&"function"==typeof postMessage&&!Ln.importScripts?(Yn=function(t){Ln.postMessage(t+"","*")},Ln.addEventListener("message",ur,!1)):Yn="onreadystatechange"in Gn("script")?function(t){Qn.appendChild(Gn("script")).onreadystatechange=function(){Qn.removeChild(this),sr.call(t)}}:function(t){setTimeout(jn(sr,t,1),0)});var lr={set:nr,clear:rr};Jn(Jn.G+Jn.B,{setImmediate:lr.set,clearImmediate:lr.clear});var cr,hr,fr=Cn.setImmediate,dr=V.MutationObserver||V.WebKitMutationObserver;if(dr){var pr=0,mr=new dr(yr),gr=V.document.createTextNode("");mr.observe(gr,{characterData:!0}),cr=function(){gr.data=pr=++pr%2}}else if(V.setImmediate||void 0===V.MessageChannel)cr="document"in V&&"onreadystatechange"in V.document.createElement("script")?function(){var t=V.document.createElement("script");t.onreadystatechange=function(){yr(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},V.document.documentElement.appendChild(t)}:function(){setTimeout(yr,0)};else{var vr=new V.MessageChannel;vr.port1.onmessage=yr,cr=function(){vr.port2.postMessage(0)}}var _r=[];function yr(){var t,e;hr=!0;for(var n=_r.length;n;){for(e=_r,_r=[],t=-1;++t<n;)e[t]();n=_r.length}hr=!1}function br(){}var xr={},wr=["REJECTED"],Tr=["FULFILLED"],Ar=["PENDING"],Sr=Er;function Er(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=Ar,this.queue=[],this.outcome=void 0,t!==br&&Pr(this,t)}function kr(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function Mr(t,e,n){!function(t){1!==_r.push(t)||hr||cr()}((function(){var r;try{r=e(n)}catch(e){return xr.reject(t,e)}r===t?xr.reject(t,new TypeError("Cannot resolve promise with itself")):xr.resolve(t,r)}))}function Or(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function Pr(t,e){var n=!1;function r(e){n||(n=!0,xr.reject(t,e))}function i(e){n||(n=!0,xr.resolve(t,e))}var o=zr((function(){e(i,r)}));"error"===o.status&&r(o.value)}function zr(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}Er.prototype.catch=function(t){return this.then(null,t)},Er.prototype.then=function(t,e){if("function"!=typeof t&&this.state===Tr||"function"!=typeof e&&this.state===wr)return this;var n=new this.constructor(br);return this.state!==Ar?Mr(n,this.state===Tr?t:e,this.outcome):this.queue.push(new kr(n,t,e)),n},kr.prototype.callFulfilled=function(t){xr.resolve(this.promise,t)},kr.prototype.otherCallFulfilled=function(t){Mr(this.promise,this.onFulfilled,t)},kr.prototype.callRejected=function(t){xr.reject(this.promise,t)},kr.prototype.otherCallRejected=function(t){Mr(this.promise,this.onRejected,t)},xr.resolve=function(t,e){var n=zr(Or,e);if("error"===n.status)return xr.reject(t,n.value);var r=n.value;if(r)Pr(t,r);else{t.state=Tr,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},xr.reject=function(t,e){t.state=wr,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},Er.resolve=function(t){return t instanceof this?t:xr.resolve(new this(br),t)},Er.reject=function(t){var e=new this(br);return xr.reject(e,t)},Er.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),o=0,a=-1,s=new this(br);++a<n;)u(t[a],a);return s;function u(t,a){e.resolve(t).then((function(t){i[a]=t,++o!==n||r||(r=!0,xr.resolve(s,i))}),(function(t){r||(r=!0,xr.reject(s,t))}))}},Er.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r,i=-1,o=new this(br);++i<e;)r=t[i],this.resolve(r).then((function(t){n||(n=!0,xr.resolve(o,t))}),(function(t){n||(n=!0,xr.reject(o,t))}));return o};var Rr={Promise:"undefined"!=typeof Promise?Promise:Sr},Lr=t.createCommonjsModule((function(t,e){function n(t){return t}function r(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}e.newBlob=function(t,n){e.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var i={stringifyByChunk:function(t,e,n){var r=[],i=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return En.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return En.nodebuffer&&1===String.fromCharCode.apply(null,zn(1)).length}catch(t){return!1}}()}};function o(t){var n=65536,r=e.getTypeOf(t),o=!0;if("uint8array"===r?o=i.applyCanBeUsed.uint8array:"nodebuffer"===r&&(o=i.applyCanBeUsed.nodebuffer),o)for(;n>1;)try{return i.stringifyByChunk(t,r,n)}catch(t){n=Math.floor(n/2)}return i.stringifyByChar(t)}function a(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}e.applyFromCharCode=o;var s={};s.string={string:n,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return s.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:function(t){return r(t,zn(t.length))}},s.array={string:o,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return Pn(t)}},s.arraybuffer={string:function(t){return o(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return Pn(new Uint8Array(t))}},s.uint8array={string:o,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return Pn(t)}},s.nodebuffer={string:o,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return s.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:n},e.transformTo=function(t,n){if(n||(n=""),!t)return n;e.checkSupport(t);var r=e.getTypeOf(n);return s[r][t](n)},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":En.nodebuffer&&function(t){return Bt(t)}(t)?"nodebuffer":En.uint8array&&t instanceof Uint8Array?"uint8array":En.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!En[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},e.delay=function(t,e,n){fr((function(){t.apply(n||null,e||[])}))},e.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n},e.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},e.prepareContent=function(t,n,i,o,a){return Rr.Promise.resolve(n).then((function(t){return En.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new Rr.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(n){var s,u=e.getTypeOf(n);return u?("arraybuffer"===u?n=e.transformTo("uint8array",n):"string"===u&&(a?n=On(n):i&&!0!==o&&(n=r(s=n,En.uint8array?new Uint8Array(s.length):new Array(s.length)))),n):Rr.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}}));function Cr(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}Lr.newBlob,Lr.applyFromCharCode,Lr.transformTo,Lr.getTypeOf,Lr.checkSupport,Lr.MAX_VALUE_16BITS,Lr.MAX_VALUE_32BITS,Lr.pretty,Lr.delay,Lr.inherits,Lr.extend,Lr.prepareContent,Cr.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}};var jr=Cr,Ir=t.createCommonjsModule((function(t,e){for(var n=new Array(256),r=0;r<256;r++)n[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;function i(){jr.call(this,"utf-8 decode"),this.leftOver=null}function o(){jr.call(this,"utf-8 encode")}n[254]=n[254]=1,e.utf8encode=function(t){return En.nodebuffer?Pn(t,"utf-8"):function(t){var e,n,r,i,o,a=t.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=En.uint8array?new Uint8Array(s):new Array(s),o=0,i=0;o<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e}(t)},e.utf8decode=function(t){return En.nodebuffer?Lr.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,o,a=t.length,s=new Array(2*a);for(r=0,e=0;e<a;)if((i=t[e++])<128)s[r++]=i;else if((o=n[i])>4)s[r++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&e<a;)i=i<<6|63&t[e++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return s.length!==r&&(s.subarray?s=s.subarray(0,r):s.length=r),Lr.applyFromCharCode(s)}(t=Lr.transformTo(En.uint8array?"uint8array":"array",t))},Lr.inherits(i,jr),i.prototype.processChunk=function(t){var r=Lr.transformTo(En.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(En.uint8array){var i=r;(r=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),r.set(i,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var o=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+n[t[r]]>e?r:e}(r),a=r;o!==r.length&&(En.uint8array?(a=r.subarray(0,o),this.leftOver=r.subarray(o,r.length)):(a=r.slice(0,o),this.leftOver=r.slice(o,r.length))),this.push({data:e.utf8decode(a),meta:t.meta})},i.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=i,Lr.inherits(o,jr),o.prototype.processChunk=function(t){this.push({data:e.utf8encode(t.data),meta:t.meta})},e.Utf8EncodeWorker=o}));function Nr(t){jr.call(this,"ConvertWorker to "+t),this.destType=t}Ir.utf8encode,Ir.utf8decode,Ir.Utf8DecodeWorker,Ir.Utf8EncodeWorker,Lr.inherits(Nr,jr),Nr.prototype.processChunk=function(t){this.push({data:Lr.transformTo(this.destType,t.data),meta:t.meta})};var Dr=Nr,Fr=Sn.Readable;function Br(t,e,n){Fr.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}Lr.inherits(Br,Fr),Br.prototype._read=function(){this._helper.resume()};var Ur=Br,Gr=null;if(En.nodestream)try{Gr=Ur}catch(t){}function Vr(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,Lr.checkSupport(r),this._worker=t.pipe(new Dr(r)),t.lock()}catch(t){this._worker=new jr("error"),this._worker.error(t)}}Vr.prototype={accumulate:function(t){return function(t,e){return new Rr.Promise((function(n,r){var i=[],o=t._internalType,a=t._outputType,s=t._mimeType;t.on("data",(function(t,n){i.push(t),e&&e(n)})).on("error",(function(t){i=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return Lr.newBlob(Lr.transformTo("arraybuffer",e),n);case"base64":return Mn(e);default:return Lr.transformTo(t,e)}}(a,function(t,e){var n,r=0,i=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(o),n=0;n<e.length;n++)i.set(e[n],r),r+=e[n].length;return i;case"nodebuffer":return it.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(o,i),s);n(t)}catch(t){r(t)}i=[]})).resume()}))}(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){Lr.delay(e,arguments,n)})),this},resume:function(){return Lr.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(Lr.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new Gr(this,{objectMode:"nodebuffer"!==this._outputType},t)}};var Zr=Vr,Wr={base64:!1,binary:!1,dir:!1,createFolders:!0,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null};function qr(t){jr.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=Lr.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}Lr.inherits(qr,jr),qr.prototype.cleanUp=function(){jr.prototype.cleanUp.call(this),this.data=null},qr.prototype.resume=function(){return!!jr.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,Lr.delay(this._tickAndRepeat,[],this)),!0)},qr.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(Lr.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},qr.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})};var Hr=qr;function Yr(t){jr.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}Lr.inherits(Yr,jr),Yr.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}jr.prototype.processChunk.call(this,t)};var Xr=Yr,$r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}(),Kr=function(t,e){return void 0!==t&&t.length?"string"!==Lr.getTypeOf(t)?function(t,e,n,r){var i=$r,o=0+n;t^=-1;for(var a=0;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}(0|e,t,t.length):function(t,e,n,r){var i=$r,o=0+n;t^=-1;for(var a=0;a<o;a++)t=t>>>8^i[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length):0};function Jr(){jr.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Lr.inherits(Jr,jr),Jr.prototype.processChunk=function(t){this.streamInfo.crc32=Kr(t.data,this.streamInfo.crc32||0),this.push(t)};var Qr=Jr;function ti(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}ti.prototype={getContentWorker:function(){var t=new Hr(Rr.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Xr("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new Hr(Rr.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},ti.createWorkerFrom=function(t,e,n){return t.pipe(new Qr).pipe(new Xr("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new Xr("compressedSize")).withStreamInfo("compression",e)};var ei=ti,ni=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};ni.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(e=e.pipe(new Ir.Utf8EncodeWorker)),!i&&r&&(e=e.pipe(new Ir.Utf8DecodeWorker))}catch(t){(e=new jr("error")).error(t)}return new Zr(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof ei&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new Ir.Utf8EncodeWorker)),ei.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof ei?this._data.getContentWorker():this._data instanceof jr?this._data:new Hr(this._data)}};for(var ri=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],ii=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},oi=0;oi<ri.length;oi++)ni.prototype[ri[oi]]=ii;var ai=ni,si=t.createCommonjsModule((function(t,e){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(n)})),ui=(si.assign,si.shrinkBuf,si.setTyped,si.Buf8,si.Buf16,si.Buf32,4);function li(t){for(var e=t.length;--e>=0;)t[e]=0}var ci=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],hi=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],fi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],di=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pi=new Array(576);li(pi);var mi=new Array(60);li(mi);var gi=new Array(512);li(gi);var vi=new Array(256);li(vi);var _i=new Array(29);li(_i);var yi,bi,xi,wi=new Array(30);function Ti(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function Ai(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function Si(t){return t<256?gi[t]:gi[256+(t>>>7)]}function Ei(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function ki(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,Ei(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function Mi(t,e,n){ki(t,n[2*e],n[2*e+1])}function Oi(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function Pi(t,e,n){var r,i,o=new Array(16),a=0;for(r=1;r<=15;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=Oi(o[s]++,s))}}function zi(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Ri(t){t.bi_valid>8?Ei(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function Li(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function Ci(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&Li(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Li(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function ji(t,e,n){var r,i,o,a,s=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===r?Mi(t,i,e):(Mi(t,(o=vi[i])+256+1,e),0!==(a=ci[o])&&ki(t,i-=_i[o],a),Mi(t,o=Si(--r),n),0!==(a=hi[o])&&ki(t,r-=wi[o],a))}while(s<t.last_lit);Mi(t,256,e)}function Ii(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)Ci(t,o,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Ci(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,Ci(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)>p&&(o=p,m++),u[2*r+1]=o,r>l||(t.bl_count[o]++,a=0,r>=d&&(a=f[r-d]),s=u[2*r],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),Pi(o,l,t.bl_count)}function Ni(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function Di(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<u&&i===a)){if(s<l)do{Mi(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(Mi(t,i,t.bl_tree),s--),Mi(t,16,t.bl_tree),ki(t,s-3,2)):s<=10?(Mi(t,17,t.bl_tree),ki(t,s-3,3)):(Mi(t,18,t.bl_tree),ki(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}li(wi);var Fi=!1;function Bi(t,e,n,r){ki(t,0+(r?1:0),3),function(t,e,n,r){Ri(t),Ei(t,n),Ei(t,~n),si.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}var Ui,Gi={_tr_init:function(t){Fi||(function(){var t,e,n,r,i,o=new Array(16);for(n=0,r=0;r<28;r++)for(_i[r]=n,t=0;t<1<<ci[r];t++)vi[n++]=r;for(vi[n-1]=r,i=0,r=0;r<16;r++)for(wi[r]=i,t=0;t<1<<hi[r];t++)gi[i++]=r;for(i>>=7;r<30;r++)for(wi[r]=i<<7,t=0;t<1<<hi[r]-7;t++)gi[256+i++]=r;for(e=0;e<=15;e++)o[e]=0;for(t=0;t<=143;)pi[2*t+1]=8,t++,o[8]++;for(;t<=255;)pi[2*t+1]=9,t++,o[9]++;for(;t<=279;)pi[2*t+1]=7,t++,o[7]++;for(;t<=287;)pi[2*t+1]=8,t++,o[8]++;for(Pi(pi,287,o),t=0;t<30;t++)mi[2*t+1]=5,mi[2*t]=Oi(t,5);yi=new Ti(pi,ci,257,286,15),bi=new Ti(mi,hi,0,30,15),xi=new Ti(new Array(0),fi,0,19,7)}(),Fi=!0),t.l_desc=new Ai(t.dyn_ltree,yi),t.d_desc=new Ai(t.dyn_dtree,bi),t.bl_desc=new Ai(t.bl_tree,xi),t.bi_buf=0,t.bi_valid=0,zi(t)},_tr_stored_block:Bi,_tr_flush_block:function(t,e,n,r){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),Ii(t,t.l_desc),Ii(t,t.d_desc),a=function(t){var e;for(Ni(t,t.dyn_ltree,t.l_desc.max_code),Ni(t,t.dyn_dtree,t.d_desc.max_code),Ii(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*di[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?Bi(t,e,n,r):t.strategy===ui||o===i?(ki(t,2+(r?1:0),3),ji(t,pi,mi)):(ki(t,4+(r?1:0),3),function(t,e,n,r){var i;for(ki(t,e-257,5),ki(t,n-1,5),ki(t,r-4,4),i=0;i<r;i++)ki(t,t.bl_tree[2*di[i]+1],3);Di(t,t.dyn_ltree,e-1),Di(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),ji(t,t.dyn_ltree,t.dyn_dtree)),zi(t),r&&Ri(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(vi[n]+256+1)]++,t.dyn_dtree[2*Si(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){ki(t,2,3),Mi(t,256,pi),function(t){16===t.bi_valid?(Ei(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},Vi=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0},Zi=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}(),Wi=function(t,e,n,r){var i=Zi,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t},qi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Hi=258,Yi=262;function Xi(t,e){return t.msg=qi[e],e}function $i(t){return(t<<1)-(t>4?9:0)}function Ki(t){for(var e=t.length;--e>=0;)t[e]=0}function Ji(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(si.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function Qi(t,e){Gi._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Ji(t.strm)}function to(t,e){t.pending_buf[t.pending++]=e}function eo(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function no(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-Yi?t.strstart-(t.w_size-Yi):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+Hi,d=l[o+a-1],p=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(n=e)+a]===p&&l[n+a-1]===d&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<f);if(r=Hi-(f-o),o=f-Hi,r>a){if(t.match_start=e,a=r,r>=s)break;d=l[o+a-1],p=l[o+a]}}}while((e=h[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function ro(t){var e,n,r,i,o,a,s,u,l,c,h=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=h+(h-Yi)){si.arraySet(t.window,t.window,h,h,0),t.match_start-=h,t.strstart-=h,t.block_start-=h,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=h?r-h:0}while(--n);e=n=h;do{r=t.prev[--e],t.prev[e]=r>=h?r-h:0}while(--n);i+=h}if(0===t.strm.avail_in)break;if(a=t.strm,s=t.window,u=t.strstart+t.lookahead,l=i,c=void 0,(c=a.avail_in)>l&&(c=l),n=0===c?0:(a.avail_in-=c,si.arraySet(s,a.input,a.next_in,c,u),1===a.state.wrap?a.adler=Vi(a.adler,s,c,u):2===a.state.wrap&&(a.adler=Wi(a.adler,s,c,u)),a.next_in+=c,a.total_in+=c,c),t.lookahead+=n,t.lookahead+t.insert>=3)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+3-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Yi&&0!==t.strm.avail_in)}function io(t,e){for(var n,r;;){if(t.lookahead<Yi){if(ro(t),t.lookahead<Yi&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-Yi&&(t.match_length=no(t,n)),t.match_length>=3)if(r=Gi._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=Gi._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Qi(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(Qi(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Qi(t,!1),0===t.strm.avail_out)?1:2}function oo(t,e){for(var n,r,i;;){if(t.lookahead<Yi){if(ro(t),t.lookahead<Yi&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Yi&&(t.match_length=no(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=Gi._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Qi(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=Gi._tr_tally(t,0,t.window[t.strstart-1]))&&Qi(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Gi._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(Qi(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Qi(t,!1),0===t.strm.avail_out)?1:2}function ao(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function so(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new si.Buf16(1146),this.dyn_dtree=new si.Buf16(122),this.bl_tree=new si.Buf16(78),Ki(this.dyn_ltree),Ki(this.dyn_dtree),Ki(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new si.Buf16(16),this.heap=new si.Buf16(573),Ki(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new si.Buf16(573),Ki(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function uo(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,Gi._tr_init(e),0):Xi(t,-2)}function lo(t){var e,n=uo(t);return 0===n&&((e=t.state).window_size=2*e.w_size,Ki(e.head),e.max_lazy_match=Ui[e.level].max_lazy,e.good_match=Ui[e.level].good_length,e.nice_match=Ui[e.level].nice_length,e.max_chain_length=Ui[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function co(t,e,n,r,i,o){if(!t)return-2;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||8!==n||r<8||r>15||e<0||e>9||o<0||o>4)return Xi(t,-2);8===r&&(r=9);var s=new so;return t.state=s,s.strm=t,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new si.Buf8(2*s.w_size),s.head=new si.Buf16(s.hash_size),s.prev=new si.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new si.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=n,lo(t)}Ui=[new ao(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ro(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Qi(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Yi&&(Qi(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Qi(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Qi(t,!1),t.strm.avail_out),1)})),new ao(4,4,8,4,io),new ao(4,5,16,8,io),new ao(4,6,32,32,io),new ao(4,4,16,16,oo),new ao(8,16,32,32,oo),new ao(8,16,128,128,oo),new ao(8,32,128,256,oo),new ao(32,128,258,1024,oo),new ao(32,258,258,4096,oo)];var ho={deflateInit:function(t,e){return co(t,e,8,15,8,0)},deflateInit2:co,deflateReset:lo,deflateResetKeep:uo,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},deflate:function(t,e){var n,r,i,o;if(!t||!t.state||e>5||e<0)return t?Xi(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return Xi(t,0===t.avail_out?-5:-2);if(r.strm=t,n=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,to(r,31),to(r,139),to(r,8),r.gzhead?(to(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),to(r,255&r.gzhead.time),to(r,r.gzhead.time>>8&255),to(r,r.gzhead.time>>16&255),to(r,r.gzhead.time>>24&255),to(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),to(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(to(r,255&r.gzhead.extra.length),to(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Wi(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(to(r,0),to(r,0),to(r,0),to(r,0),to(r,0),to(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),to(r,3),r.status=113);else{var a=8+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=113,eo(r,a),0!==r.strstart&&(eo(r,t.adler>>>16),eo(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(t.adler=Wi(t.adler,r.pending_buf,r.pending-i,i)),Ji(t),i=r.pending,r.pending!==r.pending_buf_size));)to(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=Wi(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Wi(t.adler,r.pending_buf,r.pending-i,i)),Ji(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,to(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=Wi(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Wi(t.adler,r.pending_buf,r.pending-i,i)),Ji(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,to(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=Wi(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Ji(t),r.pending+2<=r.pending_buf_size&&(to(r,255&t.adler),to(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(Ji(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&$i(e)<=$i(n)&&4!==e)return Xi(t,-5);if(666===r.status&&0!==t.avail_in)return Xi(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var s=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(ro(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=Gi._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Qi(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Qi(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Qi(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=Hi){if(ro(t),t.lookahead<=Hi&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=t.strstart+Hi;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=Hi-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=Gi._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Gi._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Qi(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Qi(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Qi(t,!1),0===t.strm.avail_out)?1:2}(r,e):Ui[r.level].func(r,e);if(3!==s&&4!==s||(r.status=666),1===s||3===s)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===s&&(1===e?Gi._tr_align(r):5!==e&&(Gi._tr_stored_block(r,0,0,!1),3===e&&(Ki(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Ji(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(to(r,255&t.adler),to(r,t.adler>>8&255),to(r,t.adler>>16&255),to(r,t.adler>>24&255),to(r,255&t.total_in),to(r,t.total_in>>8&255),to(r,t.total_in>>16&255),to(r,t.total_in>>24&255)):(eo(r,t.adler>>>16),eo(r,65535&t.adler)),Ji(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},deflateEnd:function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?Xi(t,-2):(t.state=null,113===e?Xi(t,-3):0):-2},deflateSetDictionary:function(t,e){var n,r,i,o,a,s,u,l,c=e.length;if(!t||!t.state)return-2;if(2===(o=(n=t.state).wrap)||1===o&&42!==n.status||n.lookahead)return-2;for(1===o&&(t.adler=Vi(t.adler,e,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(Ki(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new si.Buf8(n.w_size),si.arraySet(l,e,c-n.w_size,n.w_size,0),e=l,c=n.w_size),a=t.avail_in,s=t.next_in,u=t.input,t.avail_in=c,t.next_in=0,t.input=e,ro(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,ro(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=u,t.avail_in=a,n.wrap=o,0},deflateInfo:"pako deflate (from Nodeca project)"},fo=!0,po=!0;try{String.fromCharCode.apply(null,[0])}catch(t){fo=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){po=!1}for(var mo=new si.Buf8(256),go=0;go<256;go++)mo[go]=go>=252?6:go>=248?5:go>=240?4:go>=224?3:go>=192?2:1;function vo(t,e){if(e<65537&&(t.subarray&&po||!t.subarray&&fo))return String.fromCharCode.apply(null,si.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}mo[254]=mo[254]=1;var _o=function(t){var e,n,r,i,o,a=t.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new si.Buf8(s),o=0,i=0;o<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},yo=function(t){return vo(t,t.length)},bo=function(t){for(var e=new si.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},xo=function(t,e){var n,r,i,o,a=e||t.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=t[n++])<128)s[r++]=i;else if((o=mo[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&t[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return vo(s,r)},wo=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+mo[t[n]]>e?n:e},To=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ao=Object.prototype.toString;function So(t){if(!(this instanceof So))return new So(t);this.options=si.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new To,this.strm.avail_out=0;var n=ho.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(qi[n]);if(e.header&&ho.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?_o(e.dictionary):"[object ArrayBuffer]"===Ao.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=ho.deflateSetDictionary(this.strm,r)))throw new Error(qi[n]);this._dict_set=!0}}function Eo(t,e){var n=new So(e);if(n.push(t,!0),n.err)throw n.msg||qi[n.err];return n.result}So.prototype.push=function(t,e){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=_o(t):"[object ArrayBuffer]"===Ao.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new si.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=ho.deflate(i,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(yo(si.shrinkBuf(i.output,i.next_out))):this.onData(si.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=ho.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),i.avail_out=0,!0)},So.prototype.onData=function(t){this.chunks.push(t)},So.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=si.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ko={Deflate:So,deflate:Eo,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Eo(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Eo(t,e)}},Mo=function(t,e){var n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,v,_,y,b,x,w,T,A,S,E;n=t.state,r=t.next_in,S=t.input,i=r+(t.avail_in-5),o=t.next_out,E=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,h=n.wnext,f=n.window,d=n.hold,p=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),y=m[d&v];e:for(;;){if(d>>>=b=y>>>24,p-=b,0==(b=y>>>16&255))E[o++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=m[(65535&y)+(d&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&y,(b&=15)&&(p<b&&(d+=S[r++]<<p,p+=8),x+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=S[r++]<<p,p+=8,d+=S[r++]<<p,p+=8),y=g[d&_];n:for(;;){if(d>>>=b=y>>>24,p-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=g[(65535&y)+(d&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(w=65535&y,p<(b&=15)&&(d+=S[r++]<<p,(p+=8)<b&&(d+=S[r++]<<p,p+=8)),(w+=d&(1<<b)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=b,p-=b,w>(b=o-a)){if((b=w-b)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(T=0,A=f,0===h){if(T+=l-b,b<x){x-=b;do{E[o++]=f[T++]}while(--b);T=o-w,A=E}}else if(h<b){if(T+=l+h-b,(b-=h)<x){x-=b;do{E[o++]=f[T++]}while(--b);if(T=0,h<x){x-=b=h;do{E[o++]=f[T++]}while(--b);T=o-w,A=E}}}else if(T+=h-b,b<x){x-=b;do{E[o++]=f[T++]}while(--b);T=o-w,A=E}for(;x>2;)E[o++]=A[T++],E[o++]=A[T++],E[o++]=A[T++],x-=3;x&&(E[o++]=A[T++],x>1&&(E[o++]=A[T++]))}else{T=o-w;do{E[o++]=E[T++],E[o++]=E[T++],E[o++]=E[T++],x-=3}while(x>2);x&&(E[o++]=E[T++],x>1&&(E[o++]=E[T++]))}break}}break}}while(r<i&&o<s);r-=x=p>>3,d&=(1<<(p-=x<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p},Oo=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Po=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],zo=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Ro=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Lo=function(t,e,n,r,i,o,a,s){var u,l,c,h,f,d,p,m,g,v=s.bits,_=0,y=0,b=0,x=0,w=0,T=0,A=0,S=0,E=0,k=0,M=null,O=0,P=new si.Buf16(16),z=new si.Buf16(16),R=null,L=0;for(_=0;_<=15;_++)P[_]=0;for(y=0;y<r;y++)P[e[n+y]]++;for(w=v,x=15;x>=1&&0===P[x];x--);if(w>x&&(w=x),0===x)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(b=1;b<x&&0===P[b];b++);for(w<b&&(w=b),S=1,_=1;_<=15;_++)if(S<<=1,(S-=P[_])<0)return-1;if(S>0&&(0===t||1!==x))return-1;for(z[1]=0,_=1;_<15;_++)z[_+1]=z[_]+P[_];for(y=0;y<r;y++)0!==e[n+y]&&(a[z[e[n+y]]++]=y);if(0===t?(M=R=a,d=19):1===t?(M=Oo,O-=257,R=Po,L-=257,d=256):(M=zo,R=Ro,d=-1),k=0,y=0,_=b,f=o,T=w,A=0,c=-1,h=(E=1<<w)-1,1===t&&E>852||2===t&&E>592)return 1;for(;;){p=_-A,a[y]<d?(m=0,g=a[y]):a[y]>d?(m=R[L+a[y]],g=M[O+a[y]]):(m=96,g=0),u=1<<_-A,b=l=1<<T;do{i[f+(k>>A)+(l-=u)]=p<<24|m<<16|g|0}while(0!==l);for(u=1<<_-1;k&u;)u>>=1;if(0!==u?(k&=u-1,k+=u):k=0,y++,0==--P[_]){if(_===x)break;_=e[n+a[y]]}if(_>w&&(k&h)!==c){for(0===A&&(A=w),f+=b,S=1<<(T=_-A);T+A<x&&!((S-=P[T+A])<=0);)T++,S<<=1;if(E+=1<<T,1===t&&E>852||2===t&&E>592)return 1;i[c=k&h]=w<<24|T<<16|f-o|0}}return 0!==k&&(i[f+k]=_-A<<24|64<<16|0),s.bits=w,0};function Co(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function jo(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new si.Buf16(320),this.work=new si.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Io(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new si.Buf32(852),e.distcode=e.distdyn=new si.Buf32(592),e.sane=1,e.back=-1,0):-2}function No(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,Io(t)):-2}function Do(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,No(t))):-2}function Fo(t,e){var n,r;return t?(r=new jo,t.state=r,r.window=null,0!==(n=Do(t,e))&&(t.state=null),n):-2}var Bo,Uo,Go=!0;function Vo(t){if(Go){var e;for(Bo=new si.Buf32(512),Uo=new si.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Lo(1,t.lens,0,288,Bo,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Lo(2,t.lens,0,32,Uo,0,t.work,{bits:5}),Go=!1}t.lencode=Bo,t.lenbits=9,t.distcode=Uo,t.distbits=5}function Zo(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new si.Buf8(o.wsize)),r>=o.wsize?(si.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),si.arraySet(o.window,e,n-r,i,o.wnext),(r-=i)?(si.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var Wo={inflateReset:No,inflateReset2:Do,inflateResetKeep:Io,inflateInit:function(t){return Fo(t,15)},inflateInit2:Fo,inflate:function(t,e){var n,r,i,o,a,s,u,l,c,h,f,d,p,m,g,v,_,y,b,x,w,T,A,S,E=0,k=new si.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),a=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,l=n.hold,c=n.bits,h=s,f=u,T=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(2&n.wrap&&35615===l){n.check=0,k[0]=255&l,k[1]=l>>>8&255,n.check=Wi(n.check,k,2,0),l=0,c=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&l)){t.msg="unknown compression method",n.mode=30;break}if(c-=4,w=8+(15&(l>>>=4)),0===n.wbits)n.wbits=w;else if(w>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<w,t.adler=n.check=1,n.mode=512&l?10:12,l=0,c=0;break;case 2:for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(n.flags=l,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(k[0]=255&l,k[1]=l>>>8&255,n.check=Wi(n.check,k,2,0)),l=0,c=0,n.mode=3;case 3:for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&(k[0]=255&l,k[1]=l>>>8&255,k[2]=l>>>16&255,k[3]=l>>>24&255,n.check=Wi(n.check,k,4,0)),l=0,c=0,n.mode=4;case 4:for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(k[0]=255&l,k[1]=l>>>8&255,n.check=Wi(n.check,k,2,0)),l=0,c=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(k[0]=255&l,k[1]=l>>>8&255,n.check=Wi(n.check,k,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((d=n.length)>s&&(d=s),d&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),si.arraySet(n.head.extra,r,o,d,w)),512&n.flags&&(n.check=Wi(n.check,r,d,o)),s-=d,o+=d,n.length-=d),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;d=0;do{w=r[o+d++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&d<s);if(512&n.flags&&(n.check=Wi(n.check,r,d,o)),s-=d,o+=d,w)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;d=0;do{w=r[o+d++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&d<s);if(512&n.flags&&(n.check=Wi(n.check,r,d,o)),s-=d,o+=d,w)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}t.adler=n.check=Co(l),l=0,c=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){l>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}switch(n.last=1&l,c-=1,3&(l>>>=1)){case 0:n.mode=14;break;case 1:if(Vo(n),n.mode=20,6===e){l>>>=2,c-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}l>>>=2,c-=2;break;case 14:for(l>>>=7&c,c-=7&c;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&l,l=0,c=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(d=n.length){if(d>s&&(d=s),d>u&&(d=u),0===d)break t;si.arraySet(i,r,o,d,a),s-=d,o+=d,u-=d,a+=d,n.length-=d;break}n.mode=12;break;case 17:for(;c<14;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.lens[M[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},T=Lo(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,T){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(E=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,_=65535&E,!((g=E>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(_<16)l>>>=g,c-=g,n.lens[n.have++]=_;else{if(16===_){for(S=g+2;c<S;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(l>>>=g,c-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}w=n.lens[n.have-1],d=3+(3&l),l>>>=2,c-=2}else if(17===_){for(S=g+3;c<S;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}c-=g,w=0,d=3+(7&(l>>>=g)),l>>>=3,c-=3}else{for(S=g+7;c<S;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}c-=g,w=0,d=11+(127&(l>>>=g)),l>>>=7,c-=7}if(n.have+d>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;d--;)n.lens[n.have++]=w}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,A={bits:n.lenbits},T=Lo(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,T){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},T=Lo(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,T){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(s>=6&&u>=258){t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,Mo(t,f),a=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,l=n.hold,c=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;v=(E=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,_=65535&E,!((g=E>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(v&&0==(240&v)){for(y=g,b=v,x=_;v=(E=n.lencode[x+((l&(1<<y+b)-1)>>y)])>>>16&255,_=65535&E,!(y+(g=E>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}l>>>=y,c-=y,n.back+=y}if(l>>>=g,c-=g,n.back+=g,n.length=_,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=12;break}if(64&v){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(S=n.extra;c<S;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(E=n.distcode[l&(1<<n.distbits)-1])>>>16&255,_=65535&E,!((g=E>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(0==(240&v)){for(y=g,b=v,x=_;v=(E=n.distcode[x+((l&(1<<y+b)-1)>>y)])>>>16&255,_=65535&E,!(y+(g=E>>>24)<=c);){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}l>>>=y,c-=y,n.back+=y}if(l>>>=g,c-=g,n.back+=g,64&v){t.msg="invalid distance code",n.mode=30;break}n.offset=_,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(S=n.extra;c<S;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===u)break t;if(d=f-u,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=i,p=a-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{i[a++]=m[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===u)break t;i[a++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===s)break t;s--,l|=r[o++]<<c,c+=8}if(f-=u,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?Wi(n.check,i,f,a-f):Vi(n.check,i,f,a-f)),f=u,(n.flags?l:Co(l))!==n.check){t.msg="incorrect data check",n.mode=30;break}l=0,c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break t;s--,l+=r[o++]<<c,c+=8}if(l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}l=0,c=0}n.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=c,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&Zo(t,t.output,t.next_out,f-t.avail_out),h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?Wi(n.check,i,f,t.next_out-f):Vi(n.check,i,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===f||4===e)&&0===T&&(T=-5),T},inflateEnd:function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},inflateGetHeader:function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},inflateSetDictionary:function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?-2:11===n.mode&&Vi(1,e,r,0)!==n.check?-3:Zo(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},qo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Ho=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Yo=Object.prototype.toString;function Xo(t){if(!(this instanceof Xo))return new Xo(t);this.options=si.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new To,this.strm.avail_out=0;var n=Wo.inflateInit2(this.strm,e.windowBits);if(n!==qo.Z_OK)throw new Error(qi[n]);this.header=new Ho,Wo.inflateGetHeader(this.strm,this.header)}function $o(t,e){var n=new Xo(e);if(n.push(t,!0),n.err)throw n.msg||qi[n.err];return n.result}Xo.prototype.push=function(t,e){var n,r,i,o,a,s,u=this.strm,l=this.options.chunkSize,c=this.options.dictionary,h=!1;if(this.ended)return!1;r=e===~~e?e:!0===e?qo.Z_FINISH:qo.Z_NO_FLUSH,"string"==typeof t?u.input=bo(t):"[object ArrayBuffer]"===Yo.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new si.Buf8(l),u.next_out=0,u.avail_out=l),(n=Wo.inflate(u,qo.Z_NO_FLUSH))===qo.Z_NEED_DICT&&c&&(s="string"==typeof c?_o(c):"[object ArrayBuffer]"===Yo.call(c)?new Uint8Array(c):c,n=Wo.inflateSetDictionary(this.strm,s)),n===qo.Z_BUF_ERROR&&!0===h&&(n=qo.Z_OK,h=!1),n!==qo.Z_STREAM_END&&n!==qo.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==qo.Z_STREAM_END&&(0!==u.avail_in||r!==qo.Z_FINISH&&r!==qo.Z_SYNC_FLUSH)||("string"===this.options.to?(i=wo(u.output,u.next_out),o=u.next_out-i,a=xo(u.output,i),u.next_out=o,u.avail_out=l-o,o&&si.arraySet(u.output,u.output,i,o,0),this.onData(a)):this.onData(si.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(h=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==qo.Z_STREAM_END);return n===qo.Z_STREAM_END&&(r=qo.Z_FINISH),r===qo.Z_FINISH?(n=Wo.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===qo.Z_OK):r!==qo.Z_SYNC_FLUSH||(this.onEnd(qo.Z_OK),u.avail_out=0,!0)},Xo.prototype.onData=function(t){this.chunks.push(t)},Xo.prototype.onEnd=function(t){t===qo.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=si.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ko={Inflate:Xo,inflate:$o,inflateRaw:function(t,e){return(e=e||{}).raw=!0,$o(t,e)},ungzip:$o},Jo={};(0,si.assign)(Jo,ko,Ko,qo);var Qo=Jo,ta="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array?"uint8array":"array";function ea(t,e){jr.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}Lr.inherits(ea,jr),ea.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(Lr.transformTo(ta,t.data),!1)},ea.prototype.flush=function(){jr.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},ea.prototype.cleanUp=function(){jr.prototype.cleanUp.call(this),this._pako=null},ea.prototype._createPako=function(){this._pako=new Qo[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}};var na={STORE:{magic:"\0\0",compressWorker:function(t){return new jr("STORE compression")},uncompressWorker:function(){return new jr("STORE decompression")}},DEFLATE:{magic:"\b\0",compressWorker:function(t){return new ea("Deflate",t)},uncompressWorker:function(){return new ea("Inflate",{})}}},ra="PK",ia="PK",oa="PK",aa="PK",sa=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},ua=function(t,e,n,r,i,o){var a,s,u=t.file,l=t.compression,c=o!==Ir.utf8encode,h=Lr.transformTo("string",o(u.name)),f=Lr.transformTo("string",Ir.utf8encode(u.name)),d=u.comment,p=Lr.transformTo("string",o(d)),m=Lr.transformTo("string",Ir.utf8encode(d)),g=f.length!==u.name.length,v=m.length!==d.length,_="",y="",b="",x=u.dir,w=u.date,T={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(T.crc32=t.crc32,T.compressedSize=t.compressedSize,T.uncompressedSize=t.uncompressedSize);var A=0;e&&(A|=8),c||!g&&!v||(A|=2048);var S,E,k=0,M=0;x&&(k|=16),"UNIX"===i?(M=798,k|=(E=S=u.unixPermissions,S||(E=x?16893:33204),(65535&E)<<16)):(M=20,k|=63&(u.dosPermissions||0)),a=w.getUTCHours(),a<<=6,a|=w.getUTCMinutes(),a<<=5,a|=w.getUTCSeconds()/2,s=w.getUTCFullYear()-1980,s<<=4,s|=w.getUTCMonth()+1,s<<=5,s|=w.getUTCDate(),g&&(y=sa(1,1)+sa(Kr(h),4)+f,_+="up"+sa(y.length,2)+y),v&&(b=sa(1,1)+sa(Kr(p),4)+m,_+="uc"+sa(b.length,2)+b);var O="";return O+="\n\0",O+=sa(A,2),O+=l.magic,O+=sa(a,2),O+=sa(s,2),O+=sa(T.crc32,4),O+=sa(T.compressedSize,4),O+=sa(T.uncompressedSize,4),O+=sa(h.length,2),O+=sa(_.length,2),{fileRecord:ra+O+h+_,dirRecord:ia+sa(M,2)+O+sa(p.length,2)+"\0\0\0\0"+sa(k,4)+sa(r,4)+h+_+p}},la=function(t){return"PK\b"+sa(t.crc32,4)+sa(t.compressedSize,4)+sa(t.uncompressedSize,4)};function ca(t,e,n,r){jr.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}Lr.inherits(ca,jr),ca.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,jr.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},ca.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=ua(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},ca.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=ua(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:la(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},ca.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,i){var o=Lr.transformTo("string",i(r));return oa+"\0\0\0\0"+sa(t,2)+sa(t,2)+sa(e,4)+sa(n,4)+sa(o.length,2)+o}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},ca.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},ca.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},ca.prototype.resume=function(){return!!jr.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},ca.prototype.error=function(t){var e=this._sources;if(!jr.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},ca.prototype.lock=function(){jr.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()};var ha=ca;function fa(t,e){jr.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}Lr.inherits(fa,jr),fa.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},fa.prototype.pause=function(){return!!jr.prototype.pause.call(this)&&(this._stream.pause(),!0)},fa.prototype.resume=function(){return!!jr.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)};var da=fa,pa=function(t,e,n){var r,i=Lr.getTypeOf(e),o=Lr.extend(n||{},Wr);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(t=ga(t)),o.createFolders&&(r=ma(t))&&va.call(this,r,!0);var a,s="string"===i&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!s),(e instanceof ei&&0===e.uncompressedSize||o.dir||!e||0===e.length)&&(o.base64=!1,o.binary=!0,e="",o.compression="STORE",i="string"),a=e instanceof ei||e instanceof jr?e:Rn(e)?new da(t,e):Lr.prepareContent(t,e,o.binary,o.optimizedBinaryString,o.base64);var u=new ai(t,a,o);this.files[t]=u},ma=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},ga=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},va=function(t,e){return e=void 0!==e?e:Wr.createFolders,t=ga(t),this.files[t]||pa.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function _a(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var ya={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r))},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1===arguments.length){if(_a(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,pa.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(_a(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=va.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=Lr.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Ir.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");Lr.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS"),e=function(t,e,n){var r=new ha(e.streamFiles,n,e.platform,e.encodeFileName),i=0;try{t.forEach((function(t,n){i++;var o=function(t,e){var n=t||e,r=na[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},s=n.dir,u=n.date;n._compressWorker(o,a).withStreamInfo("file",{name:t,dir:s,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(r)})),r.entriesCount=i}catch(t){r.error(t)}return r}(this,n,n.comment||this.comment||"")}catch(t){(e=new jr("error")).error(t)}return new Zr(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};function ba(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}ba.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return Lr.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}};var xa=ba;function wa(t){xa.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}Lr.inherits(wa,xa),wa.prototype.byteAt=function(t){return this.data[this.zero+t]},wa.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},wa.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},wa.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Ta=wa;function Aa(t){xa.call(this,t)}Lr.inherits(Aa,xa),Aa.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},Aa.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},Aa.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},Aa.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Sa=Aa;function Ea(t){Ta.call(this,t)}Lr.inherits(Ea,Ta),Ea.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var ka=Ea;function Ma(t){ka.call(this,t)}Lr.inherits(Ma,ka),Ma.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Oa=Ma,Pa=function(t){var e=Lr.getTypeOf(t);return Lr.checkSupport(e),"string"!==e||En.uint8array?"nodebuffer"===e?new Oa(t):En.uint8array?new ka(Lr.transformTo("uint8array",t)):new Ta(Lr.transformTo("array",t)):new Sa(t)};function za(t,e){this.options=t,this.loadOptions=e}za.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in na)if(na.hasOwnProperty(e)&&na[e].magic===t)return na[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+Lr.pretty(this.compressionMethod)+" unknown (inner file : "+Lr.transformTo("string",this.fileName)+")");this.decompressed=new ei(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=Pa(this.extraFields[1].value);this.uncompressedSize===Lr.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===Lr.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===Lr.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===Lr.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){var t=En.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Ir.utf8decode(this.fileName),this.fileCommentStr=Ir.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=Lr.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=Lr.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=Pa(t.value);return 1!==e.readInt(1)?null:Kr(this.fileName)!==e.readInt(4)?null:Ir.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=Pa(t.value);return 1!==e.readInt(1)?null:Kr(this.fileComment)!==e.readInt(4)?null:Ir.utf8decode(e.readData(t.length-5))}return null}};var Ra=za;function La(t){this.files=[],this.loadOptions=t}La.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+Lr.pretty(e)+", expected "+Lr.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=En.uint8array?"uint8array":"array",n=Lr.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(ra),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ia);)(t=new Ra({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(oa);if(t<0)throw this.isSignature(0,ra)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(oa),this.readBlockEndOfCentral(),this.diskNumber===Lr.MAX_VALUE_16BITS||this.diskWithCentralDirStart===Lr.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===Lr.MAX_VALUE_16BITS||this.centralDirRecords===Lr.MAX_VALUE_16BITS||this.centralDirSize===Lr.MAX_VALUE_32BITS||this.centralDirOffset===Lr.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature("PK"))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature("PK"),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,aa)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(aa),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(aa),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(r>0)this.isSignature(e,ia)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=Pa(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var Ca=La;function ja(t){return new Rr.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new Qr);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}function Ia(){if(!(this instanceof Ia))return new Ia;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new Ia;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}Ia.prototype=ya,Ia.prototype.loadAsync=function(t,e){var n=this;return e=Lr.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:Ir.utf8decode}),Rn(t)?Rr.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):Lr.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new Ca(e);return n.load(t),n})).then((function(t){var n=[Rr.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var i=0;i<r.length;i++)n.push(ja(r[i]));return Rr.Promise.all(n)})).then((function(t){for(var r=t.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))},Ia.support=En,Ia.defaults=Wr,Ia.version="3.1.5",Ia.loadAsync=function(t,e){return(new Ia).loadAsync(t,e)},Ia.external=Rr;var Na=Ia;function Da(t){return null==t}var Fa=function(t){return"object"==typeof t&&null!==t},Ba=function(t){return Array.isArray(t)?t:Da(t)?[]:[t]},Ua=function(t,e){var n,r="";for(n=0;n<e;n+=1)r+=t;return r},Ga=function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},Va=function(t,e){var n,r,i,o;if(e)for(n=0,r=(o=Object.keys(e)).length;n<r;n+=1)t[i=o[n]]=e[i];return t};function Za(t,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}Za.prototype=Object.create(Error.prototype),Za.prototype.constructor=Za,Za.prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e};var Wa=Za;function qa(t,e,n,r,i){this.name=t,this.buffer=e,this.position=n,this.line=r,this.column=i}qa.prototype.getSnippet=function(t,e){var n,r,i,o,a;if(!this.buffer)return null;for(t=t||4,e=e||75,n="",r=this.position;r>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>e/2-1){n=" ... ",r+=5;break}for(i="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>e/2-1){i=" ... ",o-=5;break}return a=this.buffer.slice(r,o),Ua(" ",t)+n+a+i+"\n"+Ua(" ",t+this.position-r+n.length)+"^"},qa.prototype.toString=function(t){var e,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(n+=":\n"+e),n};var Ha=qa,Ya=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],Xa=["scalar","sequence","mapping"],$a=function(t,e){var n,r;if(e=e||{},Object.keys(e).forEach((function(e){if(-1===Ya.indexOf(e))throw new Wa('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=(n=e.styleAliases||null,r={},null!==n&&Object.keys(n).forEach((function(t){n[t].forEach((function(e){r[String(e)]=t}))})),r),-1===Xa.indexOf(this.kind))throw new Wa('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function Ka(t,e,n){var r=[];return t.include.forEach((function(t){n=Ka(t,e,n)})),t[e].forEach((function(t){n.forEach((function(e,n){e.tag===t.tag&&r.push(n)})),n.push(t)})),n.filter((function(t,e){return-1===r.indexOf(e)}))}function Ja(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach((function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new Wa("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=Ka(this,"implicit",[]),this.compiledExplicit=Ka(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,n={};function r(t){n[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return n}(this.compiledImplicit,this.compiledExplicit)}Ja.DEFAULT=null,Ja.create=function(){var t,e;switch(arguments.length){case 1:t=Ja.DEFAULT,e=arguments[0];break;case 2:t=arguments[0],e=arguments[1];break;default:throw new Wa("Wrong number of arguments for Schema.create function")}if(t=Ba(t),e=Ba(e),!t.every((function(t){return t instanceof Ja})))throw new Wa("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!e.every((function(t){return t instanceof $a})))throw new Wa("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Ja({include:t,explicit:e})};var Qa=Ja,ts=new Qa({explicit:[new $a("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new $a("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new $a("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]}),es=new $a("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),ns=new $a("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function rs(t){return 48<=t&&t<=55}function is(t){return 48<=t&&t<=57}var os,as=new $a("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=t.length,i=0,o=!1;if(!r)return!1;if("-"!==(e=t[i])&&"+"!==e||(e=t[++i]),"0"===e){if(i+1===r)return!0;if("b"===(e=t[++i])){for(i++;i<r;i++)if("_"!==(e=t[i])){if("0"!==e&&"1"!==e)return!1;o=!0}return o}if("x"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!(48<=(n=t.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o}for(;i<r;i++)if("_"!==(e=t[i])){if(!rs(t.charCodeAt(i)))return!1;o=!0}return o}for(;i<r;i++)if("_"!==(e=t[i])){if(":"===e)break;if(!is(t.charCodeAt(i)))return!1;o=!0}return!!o&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(i)))},construct:function(t){var e,n,r=t,i=1,o=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(e=r[0])&&"+"!==e||("-"===e&&(i=-1),e=(r=r.slice(1))[0]),"0"===r?0:"0"===e?"b"===r[1]?i*parseInt(r.slice(2),2):"x"===r[1]?i*parseInt(r,16):i*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach((function(t){o.unshift(parseInt(t,10))})),r=0,n=1,o.forEach((function(t){r+=t*n,n*=60})),i*r):i*parseInt(r,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Ga(t)},represent:{binary:function(t){return"0b"+t.toString(2)},octal:function(t){return"0"+t.toString(8)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return"0x"+t.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ss=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),us=/^[-+]?[0-9]+e/,ls=new Qa({include:[ts],implicit:[es,ns,as,new $a("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!!ss.test(t)},construct:function(t){var e,n,r,i;return n="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,i=[],"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:e.indexOf(":")>=0?(e.split(":").forEach((function(t){i.unshift(parseFloat(t,10))})),e=0,r=1,i.forEach((function(t){e+=t*r,r*=60})),n*e):n*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Ga(t))},represent:function(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ga(t))return"-0.0";return n=t.toString(10),us.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})]}),cs=new Qa({include:[ls]}),hs=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$"),fs=new $a("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&null!==hs.exec(t)},construct:function(t){var e,n,r,i,o,a,s,u,l=0,c=null;if(null===(e=hs.exec(t)))throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],s=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(c=-c)),u=new Date(Date.UTC(n,r,i,o,a,s,l)),c&&u.setTime(u.getTime()-c),u},instanceOf:Date,represent:function(t){return t.toISOString()}}),ds=new $a("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),ps={}.Buffer,ms="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",gs=new $a("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=0,i=t.length,o=ms;for(n=0;n<i;n++)if(!((e=o.indexOf(t.charAt(n)))>64)){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=ms,a=0,s=[];for(e=0;e<i;e++)e%4==0&&e&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(e));return 0==(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),s},predicate:function(t){return ps&&ps.isBuffer(t)},represent:function(t){var e,n,r="",i=0,o=t.length,a=ms;for(e=0;e<o;e++)e%3==0&&e&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+t[e];return 0==(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),vs=Object.prototype.hasOwnProperty,_s=Object.prototype.toString,ys=new $a("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=[],s=t;for(e=0,n=s.length;e<n;e+=1){if(r=s[e],o=!1,"[object Object]"!==_s.call(r))return!1;for(i in r)if(vs.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(t){return null!==t?t:[]}}),bs=Object.prototype.toString,xs=new $a("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],"[object Object]"!==bs.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[e]=[i[0],r[i[0]]]}return!0},construct:function(t){if(null===t)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}}),ws=Object.prototype.hasOwnProperty,Ts=new Qa({include:[cs],implicit:[fs,ds],explicit:[gs,ys,xs,new $a("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,n=t;for(e in n)if(ws.call(n,e)&&null!==n[e])return!1;return!0},construct:function(t){return null!==t?t:{}}})]}),As=new $a("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}}),Ss=new $a("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,n=/\/([gim]*)$/.exec(t),r="";if("/"===e[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==e[e.length-r.length-1])return!1}return!0},construct:function(t){var e=t,n=/\/([gim]*)$/.exec(t),r="";return"/"===e[0]&&(n&&(r=n[1]),e=e.slice(1,e.length-r.length-1)),new RegExp(e,r)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}});try{var Es=t.commonjsRequire;os=Es("esprima")}catch(t){"undefined"!=typeof window&&(os=window.esprima)}var ks=new $a("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",n=os.parse(e,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&"FunctionExpression"===n.body[0].expression.type}catch(t){return!1}},construct:function(t){var e,n="("+t+")",r=os.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach((function(t){i.push(t.name)})),e=r.body[0].expression.body.range,new Function(i,n.slice(e[0]+1,e[1]-1))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),Ms=Qa.DEFAULT=new Qa({include:[Ts],explicit:[As,Ss,ks]}),Os=Object.prototype.hasOwnProperty,Ps=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,zs=/[\x85\u2028\u2029]/,Rs=/[,\[\]\{\}]/,Ls=/^(?:!|!!|![a-z\-]+!)$/i,Cs=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function js(t){return 10===t||13===t}function Is(t){return 9===t||32===t}function Ns(t){return 9===t||32===t||10===t||13===t}function Ds(t){return 44===t||91===t||93===t||123===t||125===t}function Fs(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function Bs(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t?"\t":9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function Us(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var Gs=new Array(256),Vs=new Array(256),Zs=0;Zs<256;Zs++)Gs[Zs]=Bs(Zs)?1:0,Vs[Zs]=Bs(Zs);function Ws(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Ms,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function qs(t,e){return new Wa(e,new Ha(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function Hs(t,e){throw qs(t,e)}function Ys(t,e){t.onWarning&&t.onWarning.call(null,qs(t,e))}var Xs={YAML:function(t,e,n){var r,i,o;null!==t.version&&Hs(t,"duplication of %YAML directive"),1!==n.length&&Hs(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Hs(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&Hs(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&Ys(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var r,i;2!==n.length&&Hs(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],Ls.test(r)||Hs(t,"ill-formed tag handle (first argument) of the TAG directive"),Os.call(t.tagMap,r)&&Hs(t,'there is a previously declared suffix for "'+r+'" tag handle'),Cs.test(i)||Hs(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[r]=i}};function $s(t,e,n,r){var i,o,a,s;if(e<n){if(s=t.input.slice(e,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||Hs(t,"expected valid JSON character");else Ps.test(s)&&Hs(t,"the stream contains non-printable characters");t.result+=s}}function Ks(t,e,n,r){var i,o,a,s;for(Fa(n)||Hs(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],Os.call(e,o)||(e[o]=n[o],r[o]=!0)}function Js(t,e,n,r,i,o){var a,s;if(i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(a=0,s=o.length;a<s;a+=1)Ks(t,e,o[a],n);else Ks(t,e,o,n);else t.json||Os.call(n,i)||!Os.call(e,i)||Hs(t,"duplicated mapping key"),e[i]=o,delete n[i];return e}function Qs(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Hs(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function tu(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;Is(i);)i=t.input.charCodeAt(++t.position);if(e&&35===i)do{i=t.input.charCodeAt(++t.position)}while(10!==i&&13!==i&&0!==i);if(!js(i))break;for(Qs(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&Ys(t,"deficient indentation"),r}function eu(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,0!==(e=t.input.charCodeAt(n))&&!Ns(e)))}function nu(t,e){1===e?t.result+=" ":e>1&&(t.result+=Ua("\n",e-1))}function ru(t,e){var n,r,i=t.tag,o=t.anchor,a=[],s=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),r=t.input.charCodeAt(t.position);0!==r&&45===r&&Ns(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,tu(t,!0,-1)&&t.lineIndent<=e)a.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,au(t,e,3,!1,!0),a.push(t.result),tu(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)Hs(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=i,t.anchor=o,t.kind="sequence",t.result=a,!0)}function iu(t){var e,n,r,i,o=!1,a=!1;if(33!==(i=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&Hs(t,"duplication of a tag property"),60===(i=t.input.charCodeAt(++t.position))?(o=!0,i=t.input.charCodeAt(++t.position)):33===i?(a=!0,n="!!",i=t.input.charCodeAt(++t.position)):n="!",e=t.position,o){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&62!==i);t.position<t.length?(r=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):Hs(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!Ns(i);)33===i&&(a?Hs(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),Ls.test(n)||Hs(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),Rs.test(r)&&Hs(t,"tag suffix cannot contain flow indicator characters")}return r&&!Cs.test(r)&&Hs(t,"tag name cannot contain such characters: "+r),o?t.tag=r:Os.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:Hs(t,'undeclared tag handle "'+n+'"'),!0}function ou(t){var e,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&Hs(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!Ns(n)&&!Ds(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Hs(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function au(t,e,n,r,i){var o,a,s,u,l,c,h,f,d=1,p=!1,m=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=4===n||3===n,r&&tu(t,!0,-1)&&(p=!0,t.lineIndent>e?d=1:t.lineIndent===e?d=0:t.lineIndent<e&&(d=-1)),1===d)for(;iu(t)||ou(t);)tu(t,!0,-1)?(p=!0,s=o,t.lineIndent>e?d=1:t.lineIndent===e?d=0:t.lineIndent<e&&(d=-1)):s=!1;if(s&&(s=p||i),1!==d&&4!==n||(h=1===n||2===n?e:e+1,f=t.position-t.lineStart,1===d?s&&(ru(t,f)||function(t,e,n){var r,i,o,a,s=t.tag,u=t.anchor,l={},c={},h=null,f=null,d=null,p=!1,m=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=l),a=t.input.charCodeAt(t.position);0!==a;){if(r=t.input.charCodeAt(t.position+1),o=t.line,63!==a&&58!==a||!Ns(r)){if(!au(t,n,2,!1,!0))break;if(t.line===o){for(a=t.input.charCodeAt(t.position);Is(a);)a=t.input.charCodeAt(++t.position);if(58===a)Ns(a=t.input.charCodeAt(++t.position))||Hs(t,"a whitespace character is expected after the key-value separator within a block mapping"),p&&(Js(t,l,c,h,f,null),h=f=d=null),m=!0,p=!1,i=!1,h=t.tag,f=t.result;else{if(!m)return t.tag=s,t.anchor=u,!0;Hs(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!m)return t.tag=s,t.anchor=u,!0;Hs(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(p&&(Js(t,l,c,h,f,null),h=f=d=null),m=!0,p=!0,i=!0):p?(p=!1,i=!0):Hs(t,"incomplete explicit mapping pair; a key node is missed"),t.position+=1,a=r;if((t.line===o||t.lineIndent>e)&&(au(t,e,4,!0,i)&&(p?f=t.result:d=t.result),p||(Js(t,l,c,h,f,d),h=f=d=null),tu(t,!0,-1),a=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==a)Hs(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return p&&Js(t,l,c,h,f,null),m&&(t.tag=s,t.anchor=u,t.kind="mapping",t.result=l),m}(t,f,h))||function(t,e){var n,r,i,o,a,s,u,l,c,h,f=!0,d=t.tag,p=t.anchor,m={};if(91===(h=t.input.charCodeAt(t.position)))i=93,s=!1,r=[];else{if(123!==h)return!1;i=125,s=!0,r={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),h=t.input.charCodeAt(++t.position);0!==h;){if(tu(t,!0,e),(h=t.input.charCodeAt(t.position))===i)return t.position++,t.tag=d,t.anchor=p,t.kind=s?"mapping":"sequence",t.result=r,!0;f||Hs(t,"missed comma between flow collection entries"),c=null,o=a=!1,63===h&&Ns(t.input.charCodeAt(t.position+1))&&(o=a=!0,t.position++,tu(t,!0,e)),n=t.line,au(t,e,1,!1,!0),l=t.tag,u=t.result,tu(t,!0,e),h=t.input.charCodeAt(t.position),!a&&t.line!==n||58!==h||(o=!0,h=t.input.charCodeAt(++t.position),tu(t,!0,e),au(t,e,1,!1,!0),c=t.result),s?Js(t,r,m,l,u,c):o?r.push(Js(t,null,m,l,u,c)):r.push(u),tu(t,!0,e),44===(h=t.input.charCodeAt(t.position))?(f=!0,h=t.input.charCodeAt(++t.position)):f=!1}Hs(t,"unexpected end of the stream within a flow collection")}(t,h)?m=!0:(a&&function(t,e){var n,r,i,o,a,s=1,u=!1,l=e,c=0,h=!1;if(124===(o=t.input.charCodeAt(t.position)))r=!1;else{if(62!==o)return!1;r=!0}for(t.kind="scalar",t.result="";0!==o;)if(43===(o=t.input.charCodeAt(++t.position))||45===o)1===s?s=43===o?3:2:Hs(t,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===i?Hs(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?Hs(t,"repeat of an indentation width identifier"):(l=e+i-1,u=!0)}if(Is(o)){do{o=t.input.charCodeAt(++t.position)}while(Is(o));if(35===o)do{o=t.input.charCodeAt(++t.position)}while(!js(o)&&0!==o)}for(;0!==o;){for(Qs(t),t.lineIndent=0,o=t.input.charCodeAt(t.position);(!u||t.lineIndent<l)&&32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position);if(!u&&t.lineIndent>l&&(l=t.lineIndent),js(o))c++;else{if(t.lineIndent<l){3===s?t.result+=Ua("\n",c):1===s&&u&&(t.result+="\n");break}for(r?Is(o)?(h=!0,t.result+=Ua("\n",c+1)):h?(h=!1,t.result+=Ua("\n",c+1)):0===c?u&&(t.result+=" "):t.result+=Ua("\n",c):t.result+=Ua("\n",u?c+1:c),u=!0,c=0,n=t.position;!js(o)&&0!==o;)o=t.input.charCodeAt(++t.position);$s(t,n,t.position,!1)}}return!0}(t,h)||function(t,e){var n,r,i;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if($s(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;r=i=t.position,t.position++}else js(n)?($s(t,r,i,!0),nu(t,tu(t,!1,e)),r=i=t.position):t.position===t.lineStart&&eu(t)?Hs(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Hs(t,"unexpected end of the stream within a single quoted scalar")}(t,h)||function(t,e){var n,r,i,o,a,s,u;if(34!==(s=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(s=t.input.charCodeAt(t.position));){if(34===s)return $s(t,n,t.position,!0),t.position++,!0;if(92===s){if($s(t,n,t.position,!0),js(s=t.input.charCodeAt(++t.position)))tu(t,!1,e);else if(s<256&&Gs[s])t.result+=Vs[s],t.position++;else if((a=120===(u=s)?2:117===u?4:85===u?8:0)>0){for(i=a,o=0;i>0;i--)(a=Fs(s=t.input.charCodeAt(++t.position)))>=0?o=(o<<4)+a:Hs(t,"expected hexadecimal character");t.result+=Us(o),t.position++}else Hs(t,"unknown escape sequence");n=r=t.position}else js(s)?($s(t,n,r,!0),nu(t,tu(t,!1,e)),n=r=t.position):t.position===t.lineStart&&eu(t)?Hs(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Hs(t,"unexpected end of the stream within a double quoted scalar")}(t,h)?m=!0:function(t){var e,n,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!Ns(r)&&!Ds(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Hs(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),t.anchorMap.hasOwnProperty(n)||Hs(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],tu(t,!0,-1),!0}(t)?(m=!0,null===t.tag&&null===t.anchor||Hs(t,"alias node should not have any properties")):function(t,e,n){var r,i,o,a,s,u,l,c,h=t.kind,f=t.result;if(Ns(c=t.input.charCodeAt(t.position))||Ds(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(Ns(r=t.input.charCodeAt(t.position+1))||n&&Ds(r)))return!1;for(t.kind="scalar",t.result="",i=o=t.position,a=!1;0!==c;){if(58===c){if(Ns(r=t.input.charCodeAt(t.position+1))||n&&Ds(r))break}else if(35===c){if(Ns(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&eu(t)||n&&Ds(c))break;if(js(c)){if(s=t.line,u=t.lineStart,l=t.lineIndent,tu(t,!1,-1),t.lineIndent>=e){a=!0,c=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=u,t.lineIndent=l;break}}a&&($s(t,i,o,!1),nu(t,t.line-s),i=o=t.position,a=!1),Is(c)||(o=t.position+1),c=t.input.charCodeAt(++t.position)}return $s(t,i,o,!1),!!t.result||(t.kind=h,t.result=f,!1)}(t,h,1===n)&&(m=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===d&&(m=s&&ru(t,f))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(u=0,l=t.implicitTypes.length;u<l;u+=1)if((c=t.implicitTypes[u]).resolve(t.result)){t.result=c.construct(t.result),t.tag=c.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else Os.call(t.typeMap,t.tag)?(c=t.typeMap[t.tag],null!==t.result&&c.kind!==t.kind&&Hs(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+c.kind+'", not "'+t.kind+'"'),c.resolve(t.result)?(t.result=c.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Hs(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):Hs(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||m}function su(t){var e,n,r,i,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(i=t.input.charCodeAt(t.position))&&(tu(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==i));){for(a=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Ns(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&Hs(t,"directive name must not be less than one character in length");0!==i;){for(;Is(i);)i=t.input.charCodeAt(++t.position);if(35===i){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&!js(i));break}if(js(i))break;for(e=t.position;0!==i&&!Ns(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&Qs(t),Os.call(Xs,n)?Xs[n](t,n,r):Ys(t,'unknown document directive "'+n+'"')}tu(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,tu(t,!0,-1)):a&&Hs(t,"directives end mark is expected"),au(t,t.lineIndent-1,4,!1,!0),tu(t,!0,-1),t.checkLineBreaks&&zs.test(t.input.slice(o,t.position))&&Ys(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&eu(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,tu(t,!0,-1)):t.position<t.length-1&&Hs(t,"end of the stream or a document separator is expected")}function uu(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new Ws(t,e);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)su(n);return n.documents}function lu(t,e,n){var r,i,o=uu(t,n);for(r=0,i=o.length;r<i;r+=1)e(o[r])}function cu(t,e){var n=uu(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new Wa("expected a single document in the stream, but found more")}}var hu={loadAll:lu,load:cu,safeLoadAll:function(t,e,n){lu(t,e,Va({schema:Ts},n))},safeLoad:function(t,e){return cu(t,Va({schema:Ts},e))}};function fu(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}var du,pu={Type:$a,Schema:Qa,FAILSAFE_SCHEMA:ts,JSON_SCHEMA:ls,CORE_SCHEMA:cs,DEFAULT_SAFE_SCHEMA:Ts,DEFAULT_FULL_SCHEMA:Ms,load:hu.load,loadAll:hu.loadAll,safeLoad:hu.safeLoad,safeLoadAll:hu.safeLoadAll,YAMLException:Wa,MINIMAL_SCHEMA:ts,SAFE_SCHEMA:Ts,DEFAULT_SCHEMA:Ms,scan:fu("scan"),parse:fu("parse"),compose:fu("compose"),addConstructor:fu("addConstructor")},mu=function(){function e(e,n,r){void 0===r&&(r=null),this.url=e,!n||t.isRelativeURL(n)&&!t.isRelativeURL(this.url)?this.path=t.pathForURL(this.url):this.path=n,this.path_for_parent=n||this.path,this.parent=r,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}var n=e.prototype;return n.load=function(){return _u(this.url)},n.resourceFor=function(t){return{url:this.urlFor(t),path:this.pathFor(t),type:this.typeFor(t)}},n.urlFor=function(e){return vu(e)?e:t.isRelativeURL(e)&&this.container?this.parent.urlFor(this.path_for_parent+e):t.addBaseURL(e,this.path)},n.pathFor=function(e){return t.pathForURL(e)},n.typeFor=function(e){return t.extensionForURL(e)},n.isContainer=function(){return!1},e}(),gu=function(e){function n(t,n,r){var i;return(i=e.call(this,t,n,r)||this).zip=null,i.files={},i.root=null,i.path="",i}t._inheritsLoose(n,e);var r=n.prototype;return r.isContainer=function(){return!0},r.load=function(){return new Promise(function(e,n){var r;return this.zip=new Na,"string"==typeof this.url?Promise.resolve(t.Utils.io(this.url,6e4,"arraybuffer")).then(function(t){try{return r=t.body,Promise.resolve(this.zip.loadAsync(r)).then(function(t){try{return Promise.resolve(this.parseZipFiles()).then(function(t){try{return e(this.loadRoot())}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n):e(this)}.bind(this))},r.urlFor=function(n){return vu(n)?n:t.isRelativeURL(n)?this.urlForZipFile(t.flattenRelativeURL(n)):e.prototype.urlFor.call(this,n)},r.typeFor=function(n){return t.isRelativeURL(n)?this.typeForZipFile(n):e.prototype.typeFor.call(this,n)},r.loadRoot=function(){return this.findRoot(),_u(this.urlForZipFile(this.root))},r.findRoot=function(){var e=this,n=Object.keys(this.files).filter((function(t){return 0===e.files[t].depth})).filter((function(e){return"yaml"===t.extensionForURL(e)}));if(1===n.length&&(this.root=n[0]),!this.root){var r="Could not find root scene for bundle '"+this.url+"': ";throw r+="The zip archive's root level must contain a single scene file with the '.yaml' extension. ",n.length>0?r+="Found multiple YAML files at the root level: "+n.map((function(t){return"'"+t+"'"})).join(", ")+".":r+="Found NO YAML files at the root level.",Error(r)}},r.parseZipFiles=function(){return new Promise(function(e,n){var r,i,o,a,s,u;return r=[],i=[],this.zip.forEach((function(t,e){e.dir||(r.push(t),i.push(e.async("arraybuffer")))})),Promise.resolve(Promise.all(i)).then(function(i){try{for(o=i,a=0;a<o.length;a++)s=r[a],u=s.split("/").length-1,this.files[s]={data:o[a],type:t.extensionForURL(s),depth:u};return e()}catch(t){return n(t)}}.bind(this),n)}.bind(this))},r.urlForZipFile=function(e){if(this.files[e])return this.files[e].url||(this.files[e].url=t.createObjectURL(new Blob([this.files[e].data]))),this.files[e].url},r.typeForZipFile=function(t){return this.files[t]&&this.files[t].type},n}(mu);function vu(t){return!(!t||"global."!==t.slice(0,7))}function _u(e){return new Promise((function(n,r){"string"==typeof e?t.Utils.io(e).then((function(t){var e=t.body;try{n(function(t){var e;try{e=pu.safeLoad(t,{json:!0})}catch(t){throw t}return e}(e))}catch(t){r(t)}}),r):(e=Object.assign({},e),n(e))}))}var yu=du={loadScene:function(e,n){return new Promise(function(r,i){var o,a,s,u,l,c,h,f,d;return o=this,s=(a=void 0===n?{}:n).path,u=a.type,l=[],Promise.resolve(this.loadSceneRecursive({url:e,path:s,type:u},null,l)).then(function(e){try{return c=e,h=this.finalize(c),f=h.config,d=h.bundle,f?(l.length>0&&l.forEach((function(e){var n="Failed to import scene: "+e.url;t.log("error",n,e),o.trigger("error",{type:"scene_import",message:n,error:e,url:e.url})})),r({config:f,bundle:d})):i(l[0])}catch(t){return i(t)}}.bind(this),i)}.bind(this))},loadSceneRecursive:function(e,n,r){return new Promise(function(i,o){var a,s,u,l,c,h,f,d,p;if(a=this,s=e.url,u=e.path,l=e.type,void 0===r&&(r=[]),!s)return i({});c=function(e,n,r,i){return void 0===i&&(i=null),null!=i&&"zip"===i||"string"==typeof e&&!t.isLocalURL(e)&&"zip"===t.extensionForURL(e)?new gu(e,n,r):new mu(e,n,r)}(s,u,n,l);var m=function(t){try{return t.url=s,r.push(t),i({})}catch(t){return o(t)}};try{return Promise.resolve(c.load()).then(function(e){try{return null==(h=e).import?(this.normalize(h,c),i({config:h,bundle:c})):(Array.isArray(h.import)||(h.import=[h.import]),f=[],h.import.forEach((function(e){"object"==typeof e&&(e=t.createObjectURL(new Blob([JSON.stringify(e)]))),f.push(c.resourceFor(e))})),delete h.import,d=f.map((function(t){return a.loadSceneRecursive(t,c,r)})),Promise.resolve(Promise.all(d)).then(function(e){try{return p=e.map((function(t){return a.normalize(t.config,t.bundle)})).map((function(t){return t.config})),h=t.mergeObjects.apply(void 0,p.concat([h])),this.normalize(h,c),i({config:h,bundle:c})}catch(t){return m(t)}}.bind(this),m))}catch(t){return m(t)}}.bind(this),m)}catch(t){m(t)}}.bind(this))},normalize:function(t,e){return this.normalizeDataSources(t,e),this.normalizeFonts(t,e),this.normalizeTextures(t,e),this.hoistTextures(t,e),{config:t,bundle:e}},normalizeDataSources:function(t,e){for(var n in t.sources=t.sources||{},t.sources)this.normalizeDataSource(t.sources[n],e);return t},normalizeDataSource:function(t,e){if(t.url=e.urlFor(t.url),Array.isArray(t.composite)&&t.composite.forEach((function(t){return t.url=e.urlFor(t.url)})),t.scripts)for(var n in Array.isArray(t.scripts)&&(t.scripts=t.scripts.reduce((function(t,e){return t[e]=e,t}),{})),t.scripts)t.scripts[n]=e.urlFor(t.scripts[n]);return t},normalizeFonts:function(t,e){for(var n in t.fonts=t.fonts||{},t.fonts)if(Array.isArray(t.fonts[n]))t.fonts[n].forEach((function(t){t.url=t.url&&e.urlFor(t.url)}));else{var r=t.fonts[n];r.url=r.url&&e.urlFor(r.url)}return t},normalizeTextures:function(t,e){if(t.textures=t.textures||{},t.textures)for(var n in t.textures){var r=t.textures[n];r.url&&(r.url=e.urlFor(r.url))}},hoistTextures:function(e,n){var r=this;if(e.styles){var i=function(t){var i=e.styles[t],o=i.texture;"string"!=typeof o||e.textures[o]||(i.texture=r.hoistTexture(o,e,n)),i.material&&["emission","ambient","diffuse","specular","normal"].forEach((function(t){var o=null!=i.material[t]&&i.material[t].texture;"string"!=typeof o||e.textures[o]||(i.material[t].texture=r.hoistTexture(o,e,n))}))};for(var o in e.styles)i(o)}if(this.hoistStyleShaderUniformTextures(e,n,{include_globals:!1}),e.layers)for(var a=[e.layers];a.length>0;){var s=a.pop();if("object"==typeof s&&!Array.isArray(s))for(var u in s)if("draw"===u){var l=s[u];for(var c in l){if(l[c].texture){var h=l[c].texture;"string"!=typeof h||e.textures[h]||(l[c].texture=this.hoistTexture(h,e,n))}if(l[c].outline&&l[c].outline.texture){var f=l[c].outline.texture;"string"!=typeof f||e.textures[f]||(l[c].outline.texture=this.hoistTexture(f,e,n))}}}else{if(t.isReserved(u))continue;a.push(s[u])}}},hoistStyleShaderUniformTextures:function(e,n,r){var i=this,o=r.include_globals;if(e.styles)for(var a in e.styles){var s=e.styles[a];s.shaders&&s.shaders.uniforms&&t.GLSL.parseUniforms(s.shaders.uniforms).forEach((function(t){var r=t.type,a=t.value,s=t.key,u=t.uniforms;"sampler2D"!==r||"string"!=typeof a||e.textures[a]||!o&&vu(a)||(u[s]=i.hoistTexture(a,e,n))}))}},hoistTexture:function(t,e,n){var r=vu(t),i=r?t:n.urlFor(t),o=r?"texture-"+i:i;return e.textures[o]={url:i},o},applyGlobalProperties:function(e){if(!e.global||0===Object.keys(e.global).length)return e;var n=function t(e,n,r){for(var i in void 0===n&&(n=null),void 0===r&&(r={}),n=n?n+".":"global.",e){var o=n+i,a=e[i];r[o]=a,"object"!=typeof a||Array.isArray(a)||t(a,o,r)}return r}(e.global);return function e(r,i,o){var a;if(null!=i&&"object"==typeof i&&i._global_prop&&i._global_prop[o]?a=i._global_prop[o]:"string"==typeof r&&"global."===r.slice(0,7)&&(a=r),a){null==i._global_prop&&Object.defineProperty(i,"_global_prop",{value:{}}),i._global_prop[o]=a;for(var s,u=n[a];"string"==typeof u&&"global."===u.slice(0,7);){if((s=s||[a]).indexOf(u)>-1){t.log({level:"warn",once:!0},"Global properties: cyclical reference detected",s),u=null;break}s.push(u),u=n[u]}Object.defineProperty(i,o,{enumerable:!0,get:function(){return u},set:function(t){delete i._global_prop[o],delete i[o],i[o]=t}})}else if(Array.isArray(r))for(var l=0;l<r.length;l++)e(r[l],r,l);else if("object"==typeof r)for(var c in r)e(r[c],r,c);return r}(e)},finalize:function(t){var e=t.config,n=t.bundle;return e?(e.global=e.global||{},e.scene=e.scene||{},e.cameras=e.cameras||{},e.lights=e.lights||{},e.styles=e.styles||{},e.layers=e.layers||{},e.camera&&(e.cameras.default=e.camera),0===Object.keys(e.cameras).length&&(e.cameras.default={}),(0===Object.keys(e.lights).length||Object.keys(e.lights).every((function(t){return!1===e.lights[t].visible})))&&(e.lights.default_light={type:"directional"}),{config:e,bundle:n}):{}}};t.subscribeMixin(du);var bu=function(){function e(){this.tiles={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=7,this.children_cache={}}var n=e.prototype;return n.addTile=function(e){for(this.tiles[e.key]=this.tiles[e.key]||{descendants:0},this.tiles[e.key].tile=e;e.style_z>=0;){if(!(e=t.TileID.parent(e)))return;this.tiles[e.key]||(this.tiles[e.key]={descendants:0}),this.tiles[e.key].descendants++}},n.removeTile=function(e){for(this.tiles[e.key]&&(delete this.tiles[e.key].tile,0===this.tiles[e.key].descendants&&delete this.tiles[e.key]);e.style_z>=0;){if(!(e=t.TileID.parent(e)))return;this.tiles[e.key]&&this.tiles[e.key].descendants>0&&(this.tiles[e.key].descendants--,0!==this.tiles[e.key].descendants||this.tiles[e.key].tile||delete this.tiles[e.key])}},n.getAncestor=function(e){for(var n=0;n<this.max_proxy_ancestor_depth;){if(!(e=t.TileID.parent(e)))return;if(this.tiles[e.key]&&this.tiles[e.key].tile&&this.tiles[e.key].tile.loaded)return this.tiles[e.key].tile;n++}},n.getDescendants=function(e,n){var r=this;void 0===n&&(n=0);var i=[];if(n<this.max_proxy_descendant_depth){var o=t.TileID.children(e,this.children_cache);if(!o)return;o.forEach((function(t){r.tiles[t.key]&&(r.tiles[t.key].tile&&r.tiles[t.key].tile.loaded?i.push(r.tiles[t.key].tile):r.tiles[t.key].descendants>0&&i.push.apply(i,r.getDescendants(t,n+1)))}))}return i},e}(),xu={},wu={};function Tu(e,n){if(void 0===n&&(n=null),this.obb)return t.Label.prototype.occluded.call(this,e,n);if(this.obbs)for(var r=0;r<this.obbs.length;r++){var i={aabb:this.aabbs[r],obb:this.obbs[r]};if(t.Label.prototype.occluded.call(i,e,n))return!0}return!1}var Au=function(){function e(e){var n=e.scene;this.scene=n,this.tiles={},this.pyramid=new bu,this.visible_coords={},this.queued_coords=[],this.building_tiles=null,this.renderable_tiles=[],this.collision={tile_keys:null,mesh_set:null,zoom:null,zoom_steps:3},this.main_thread_target=["TileManager",this.scene.id].join("_"),t.WorkerBroker.addTarget(this.main_thread_target,this)}var n=e.prototype;return n.destroy=function(){this.forEachTile((function(t){return t.destroy()})),this.tiles={},this.pyramid=null,this.visible_coords={},this.queued_coords=[],this.scene=null,t.WorkerBroker.removeTarget(this.main_thread_target)},n.keepTile=function(t){this.tiles[t.key]=t,this.pyramid.addTile(t)},n.hasTile=function(t){return void 0!==this.tiles[t]},n.forgetTile=function(t){if(this.hasTile(t)){var e=this.tiles[t];this.pyramid.removeTile(e)}delete this.tiles[t],this.tileBuildStop(t)},n.removeTile=function(e){t.log("trace","tile unload for "+e);var n=this.tiles[e];null!=n&&n.destroy(),this.forgetTile(n.key),this.scene.requestRedraw()},n.forEachTile=function(t){for(var e in this.tiles)t(this.tiles[e])},n.removeTiles=function(t){var e=[];for(var n in this.tiles)t(this.tiles[n])&&e.push(n);for(var r=0;r<e.length;r++){var i=e[r];this.removeTile(i)}},n.updateTilesForView=function(){this.visible_coords={};for(var t=this.view.findVisibleTileCoordinates(),e=0;e<t.length;e++){var n=t[e];this.queueCoordinate(n),this.visible_coords[n.key]=n}this.updateTileStates()},n.updateTileStates=function(){var t=this;return this.forEachTile((function(e){t.updateVisibility(e)})),this.loadQueuedCoordinates(),this.updateProxyTiles(),this.view.pruneTilesForView(),this.updateRenderableTiles(),this.style_manager.updateActiveStyles(this.renderable_tiles),this.style_manager.updateActiveBlendOrders(this.renderable_tiles),this.updateLabels()},n.updateLabels=function(){var e=this;if(this.scene.building&&!this.scene.building.initial)return Promise.resolve({});var n=this.renderable_tiles.filter((function(t){return t.valid})).filter((function(t){return t.built}));return 0===n.length?Promise.resolve({}):(n.sort((function(t,e){return t.build_id<e.build_id?-1:t.build_id>e.build_id?1:0})),this.collision.zoom===Su(this.view.zoom,this.collision.zoom_steps)&&this.collision.tile_keys===JSON.stringify(n.map((function(t){return t.key})))&&this.collision.mesh_set===Eu(n)?Promise.resolve({}):(this.collision.task||(this.collision.zoom=Su(this.view.zoom,this.collision.zoom_steps),this.collision.tile_keys=JSON.stringify(n.map((function(t){return t.key}))),this.collision.mesh_set=Eu(n),this.collision.task={type:"tileManagerUpdateLabels",run:function(r){return new Promise((function(i,o){var a;return Promise.resolve(function(e,n,r){return new Promise((function(i,o){var a,s,u,l,c;return void 0===r&&(r=!1),wu=xu,xu={},a=function(e,n){var r={},i={};for(var o in e.forEach((function(e){var o=t.Geo.unitsPerMeter(e.coords.z),a=Math.pow(2,n-e.style_z),s=o*a,u=t.Geo.metersPerPixel(n),l=Object.assign({},e.meshes,e.pending_label_meshes);for(var c in l)l[c].forEach((function(n){if(n.labels)for(var a in n.labels)if(!e.isProxy()||wu[a]){var l=n.labels[a].container.label,c=n.labels[a].container.linked,h=n.labels[a].ranges,f=r[a]={};if(f.discard=Tu.bind(f),f.build_id=e.build_id,Object.assign(f,l),f.layout=Object.assign({},l.layout),f.layout.repeat_scale=.75,f.layout.repeat_distance=f.layout.repeat_distance||0,f.layout.repeat_distance/=s,f.position=[f.position[0]/o+e.min.x,f.position[1]/o+e.min.y],f.unit_scale=u,"point"===f.type)t.LabelPoint.prototype.updateBBoxes.call(f);else if("straight"===f.type)t.LabelLineStraight.prototype.updateBBoxes.call(f,f.position,f.size,f.angle,f.angle,f.offset);else if(l.obbs){var d=l.obbs.map((function(n){var r=n.x,i=n.y,a=n.a,u=n.w,l=n.h;return r=r/o+e.min.x,i=i/o+e.min.y,u/=s,l/=s,new t.OBB(r,i,a,u,l)}));f.obbs=d,f.aabbs=d.map((function(t){return t.getExtent()}))}i[a]={label:f,linked:c,ranges:h,mesh:n}}}))})),i){var a=i[o];a.linked&&(a.linked=i[a.linked])}return i=Object.keys(i).map((function(t){return i[t]}))}(e,n),t.Collision.startTile("main",{apply_repeat_groups:!0,return_hidden:!0}),t.Collision.addStyle("main","main"),s=Math.max.apply(Math,[0].concat(Object.values(e).flatMap((function(t){return Object.values(t.meshes)})).map((function(t){return t[0].labels&&Object.keys(t[0].labels).length})).filter((function(t){return t})))),(u=Math.floor(s/t.Geo.tile_size))>0?t.Collision.initGrid({anchor:{x:Math.min.apply(Math,e.map((function(t){return t.min.x}))),y:Math.min.apply(Math,e.map((function(t){return t.min.y})))},span:e[0].span.x/u}):t.Collision.initGrid(),Promise.resolve(t.Collision.collide(a,"main","main")).then((function(t){try{return c=[],(l=t).forEach((function(t){var e=0;!0!==t.show||r&&t.label.breach&&!wu[t.label.id]||(e=1),e&&(xu[t.label.id]=!0);var n=!0;t.ranges.forEach((function(r){if(n){var i=t.mesh;if(i.valid){for(var o=i.vertex_layout.offset.a_shape,a=i.vertex_layout.stride,s=0;s<r[1];s++){if(i.vertex_data[r[0]+s*a+o+6]===e)return void(n=!1);i.vertex_data[r[0]+s*a+o+6]=e}-1===c.indexOf(i)&&c.push(i)}}}))})),c.forEach((function(t){return t.upload()})),e.forEach((function(t){return t.swapPendingLabels()})),i({labels:l,containers:a})}catch(t){return o(t)}}),o)}))}(n,e.collision.zoom,e.isLoadingVisibleTiles())).then((function(n){try{return a=n,e.scene.requestRedraw(),e.collision.task=null,t.Task.finish(r,a),e.updateTileStates(),i()}catch(t){return o(t)}}),o)}))},immediate:!0},t.Task.add(this.collision.task)),this.collision.task.promise))},n.updateProxyTiles=function(){var t=this;if(0!==this.view.zoom_direction){this.forEachTile((function(t){return t.setProxyFor(null)}));var e=!1;this.forEachTile((function(n){if(1===t.view.zoom_direction){if(n.visible&&!n.labeled){var r=t.pyramid.getAncestor(n);r&&(r.setProxyFor(n),e=!0)}}else if(-1===t.view.zoom_direction&&n.visible&&!n.labeled)for(var i=t.pyramid.getDescendants(n),o=0;o<i.length;o++)i[o].setProxyFor(n),e=!0})),e||(this.view.zoom_direction=0)}},n.updateVisibility=function(e){if(e.visible=!1,e.style_z===this.view.tile_zoom)if(this.visible_coords[e.coords.key])e.visible=!0;else for(var n in this.visible_coords)if(t.TileID.isDescendant(e.coords,this.visible_coords[n])){e.visible=!0;break}},n.pruneToVisibleTiles=function(){this.removeTiles((function(t){return!t.visible}))},n.getRenderableTiles=function(){return this.renderable_tiles},n.updateRenderableTiles=function(){for(var t in this.renderable_tiles=[],this.tiles){var e=this.tiles[t];e.visible&&e.loaded&&this.renderable_tiles.push(e)}return this.renderable_tiles},n.isLoadingVisibleTiles=function(){var t=this;return Object.keys(this.tiles).some((function(e){return t.tiles[e].visible&&!t.tiles[e].built}))},n.allVisibleTilesLabeled=function(){return this.renderable_tiles.every((function(t){return t.labeled}))},n.queueCoordinate=function(t){this.queued_coords[this.queued_coords.length]=t},n.loadQueuedCoordinates=function(){var e=this;0!==this.queued_coords.length&&(this.queued_coords.sort((function(n,r){var i=e.view.center.meters,o=t.Geo.metersPerTile(n.z)/2,a=t.Geo.metersForTile(n);a.x+=o,a.y-=o;var s=t.Geo.metersForTile(r);s.x+=o,s.y-=o;var u=Math.abs(i.x-a.x)+Math.abs(i.y-a.y),l=Math.abs(i.x-s.x)+Math.abs(i.y-s.y);return n.center_dist=u,r.center_dist=l,l>u?-1:l===u?0:1})),this.queued_coords.forEach((function(t){return e.loadCoordinate(t)})),this.queued_coords=[])},n.loadCoordinate=function(e){if(e.z===this.view.center.tile.z)for(var n in this.scene.sources){var r=this.scene.sources[n];if(r.builds_geometry_tiles&&r.includesTile(e,this.view.tile_zoom)){var i=t.TileID.normalizedKey(e,r,this.view.tile_zoom);if(i&&!this.hasTile(i)){t.log("trace","load tile "+i+", distance from view center: "+e.center_dist);var o=new t.Tile({source:r,coords:e,workers:this.scene.workers,style_z:this.view.baseZoom(e.z),view:this.view});this.keepTile(o),this.buildTile(o)}}}},n.buildTile=function(t,e){this.tileBuildStart(t.key),this.updateVisibility(t),t.build(this.scene.generation,e)},n.buildTileStylesCompleted=function(e){var n=e.tile,r=e.progress;if(null==this.tiles[n.key])t.log("trace","discarded tile "+n.key+" in TileManager.buildTileStylesCompleted because previously removed"),t.Tile.abortBuild(n),this.updateTileStates();else if(n.generation!==this.scene.generation)t.log("trace","discarded tile "+n.key+" in TileManager.buildTileStylesCompleted because built with scene config gen "+n.generation+", current "+this.scene.generation),t.Tile.abortBuild(n),this.updateTileStates();else{if(this.tiles[n.key]){if(n.id<this.tiles[n.key].id)return t.log("trace","discarded tile "+n.key+" for id "+n.id+" in TileManager.buildTileStylesCompleted because built for discarded tile id"),void t.Tile.abortBuild(n);n=this.tiles[n.key].merge(n)}r.done&&(n.built=!0),n.buildMeshes(this.scene.styles,r),this.updateTileStates(),this.scene.requestRedraw()}r.done&&this.tileBuildStop(n.key)},n.buildTileError=function(e){t.log("error","Error building tile "+e.key+":",e.error),this.forgetTile(e.key),t.Tile.abortBuild(e)},n.tileBuildStart=function(e){this.building_tiles=this.building_tiles||{},this.building_tiles[e]=!0,t.log("trace","tileBuildStart for "+e+": "+Object.keys(this.building_tiles).length)},n.tileBuildStop=function(e){this.building_tiles&&(t.log("trace","tileBuildStop for "+e+": "+Object.keys(this.building_tiles).length),delete this.building_tiles[e],this.checkBuildQueue())},n.checkBuildQueue=function(){this.building_tiles&&0!==Object.keys(this.building_tiles).length||(this.building_tiles=null,this.scene.tileManagerBuildDone())},n.getDebugProp=function(t,e){var n=[];for(var r in this.tiles)null==this.tiles[r].debug[t]||"function"==typeof e&&!0!==e(this.tiles[r])||n.push(this.tiles[r].debug[t]);return n},n.getDebugSum=function(t,e){var n=0;for(var r in this.tiles)null==this.tiles[r].debug[t]||"function"==typeof e&&!0!==e(this.tiles[r])||(n+=this.tiles[r].debug[t]);return n},n.getDebugAverage=function(t,e){return this.getDebugSum(t,e)/Object.keys(this.tiles).length},t._createClass(e,[{key:"view",get:function(){return this.scene.view}},{key:"style_manager",get:function(){return this.scene.style_manager}}]),e}();function Su(t,e,n){return void 0===n&&(n=2),(Math.floor(t*e)/e).toFixed(n)}function Eu(t){return JSON.stringify(Object.entries(t).map((function(t){var e=t[1];return Object.entries(e.meshes).map((function(t){return t[1].map((function(t){return t.created_at}))}))})))}var ku=function(){function t(t,e){e(t),this.value=t,this.setup=e}return t.prototype.set=function(t){JSON.stringify(this.value)!==JSON.stringify(t)&&(this.setup(t),this.value=t)},t}(),Mu=function(t){this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=t.BACK,this.defaults.blending=!1,this.defaults.blending_src=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=t.ONE,this.defaults.blending_dst_alpha=t.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,t.depthFunc(t.LESS),this.culling=new ku({cull:this.defaults.culling,face:this.defaults.culling_face},(function(e){e.cull?(t.enable(t.CULL_FACE),t.cullFace(e.face)):t.disable(t.CULL_FACE)})),this.blending=new ku({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},(function(e){e.blend?(t.enable(t.BLEND),e.src_alpha&&e.dst_alpha?t.blendFuncSeparate(e.src,e.dst,e.src_alpha,e.dst_alpha):t.blendFunc(e.src,e.dst)):t.disable(t.BLEND)})),this.depth_write=new ku({depth_write:this.defaults.depth_write},(function(e){t.depthMask(e.depth_write)})),this.depth_test=new ku({depth_test:this.defaults.depth_test},(function(e){e.depth_test?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)}))};t.require$$0$4("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0);var Ou,Pu=function(){function e(){this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}var n=e.prototype;return n.setCanvas=function(t,e){this.canvas=t,this.gl=e},n.screenshot=function(t){var e=this,n=(void 0===t?{}:t).background;return null!=this.queue_screenshot?this.queue_screenshot.promise:(this.queue_screenshot={background:n},this.queue_screenshot.promise=new Promise((function(t,n){e.queue_screenshot.resolve=t,e.queue_screenshot.reject=n})),this.queue_screenshot.promise)},n.completeScreenshot=function(){if(null!=this.queue_screenshot){var e=this.canvas.width,n=this.canvas.height,r=new Uint8Array(e*n*4);this.gl.readPixels(0,0,e,n,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r);var i=this.queue_screenshot.background;i=i&&"transparent"!==i?t.StyleParser.parseColor(i).slice(0,3).map((function(t){return 255*t})):null;for(var o=new Uint8ClampedArray(e*n*4),a=0;a<n;a++)for(var s=0;s<e;s++){var u=4*((n-a-1)*e+s),l=4*(a*e+s),c=r[u+3];o[l+0]=255*r[u+0]/c,o[l+1]=255*r[u+1]/c,o[l+2]=255*r[u+2]/c,o[l+3]=c,i&&(c/=255,o[l+0]=o[l+0]*c+i[0]*(1-c),o[l+1]=o[l+1]*c+i[1]*(1-c),o[l+2]=o[l+2]*c+i[2]*(1-c),o[l+3]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var h=this.screenshot_canvas;h.width=e,h.height=n,this.screenshot_context=this.screenshot_context||h.getContext("2d");var f=this.screenshot_context,d=new ImageData(o,e,n);f.putImageData(d,0,0);for(var p=h.toDataURL("image/png"),m=atob(p.slice(22)),g=new Uint8Array(m.length),v=0;v<m.length;++v)g[v]=m.charCodeAt(v);var _=new Blob([g],{type:"image/png"});this.queue_screenshot.resolve({url:p,blob:_,type:"png"}),this.queue_screenshot=null}},n.startVideoCapture=function(){var e=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return t.log("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return t.log("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var n=this.video_capture={};n.chunks=[],n.stream=this.canvas.captureStream(),n.options={mimeType:"video/webm"},n.media_recorder=new MediaRecorder(n.stream,n.options),n.media_recorder.ondataavailable=function(r){if(r.data.size>0&&n.chunks.push(r.data),n.resolve){var i=new Blob(n.chunks,{type:n.options.mimeType}),o=t.createObjectURL(i);n.stream&&(n.stream.getTracks()||[]).forEach((function(t){t.stop(),n.stream.removeTrack(t)})),n.stream=null,n.media_recorder=null,e.video_capture=null,n.resolve({url:o,blob:i,type:"webm"})}},n.media_recorder.start()}catch(e){return this.video_capture=null,t.log("error","Scene video capture failed",e),!1}return!0},n.stopVideoCapture=function(){var e=this;return this.video_capture?(this.video_capture.promise=new Promise((function(t,n){e.video_capture.resolve=t,e.video_capture.reject=n})),this.video_capture.media_recorder.stop(),this.video_capture.promise):(t.log("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))},e}(),zu=function(){function e(n,r){var i;r=r||{},t.subscribeMixin(this),this.id=e.id++,this.initialized=!1,this.initializing=null,this.sources={},this.view=new t.View(this,r),this.tile_manager=new Au({scene:this}),this.num_workers=r.numWorkers||2,!0===r.disableVertexArrayObjects&&(t.VertexArrayObject.disabled=!0),t.Utils.use_high_density_display=void 0===r.highDensityDisplay||r.highDensityDisplay,t.Utils.updateDevicePixelRatio(),this.config=null,this.config_source=n,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new t.StyleManager,this.building=null,this.dirty=!0,r.preUpdate&&this.subscribe({pre_update:r.preUpdate}),r.postUpdate&&this.subscribe({post_update:r.postUpdate}),this.render_loop=!r.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new Pu,this.selection=null,this.selection_feature_count=0,this.fetching_selection_map=null,this.prev_textures=null,this.introspection=!0===r.introspection,this.times={},this.resetTime(),this.container=r.container,this.canvas=null,this.contextOptions=r.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=e.generation,this.last_complete_generation=e.generation,(i=this).debug={profile:function(e){console.profile("main thread: "+e),t.WorkerBroker.postMessage(i.workers,"self.profile",e)},profileEnd:function(e){console.profileEnd("main thread: "+e),t.WorkerBroker.postMessage(i.workers,"self.profileEnd",e)},timeRebuild:function(e,n){void 0===e&&(e=1),void 0===n&&(n={});var r=[];!function o(){var a=+new Date;i.rebuild(n).then((function(){if(r.push(+new Date-a),r.length<e)o();else{var n=~~(r.reduce((function(t,e){return t+e}))/r.length);t.log("info","Profiled rebuild "+e+" times: "+n+" avg ("+Math.min.apply(Math,r)+" min, "+Math.max.apply(Math,r)+" max)")}}))}()},geometryCountByStyle:function(){var t={};return i.tile_manager.getRenderableTiles().forEach((function(e){var n=function(n){t[n]=t[n]||0,e.meshes[n].forEach((function(e){t[n]+=e.geometry_count}))};for(var r in e.meshes)n(r)})),t},geometryCountByBaseStyle:function(){var t=i.debug.geometryCountByStyle(),e={};for(var n in t){var r=i.styles[n].baseStyle();e[r]=e[r]||0,e[r]+=t[n]}return e},geometryCountTotal:function(){var t=i.debug.geometryCountByStyle();return Object.keys(t).reduce((function(e,n){return t[n]+e}),0)},geometrySizeByStyle:function(){var t={};return i.tile_manager.getRenderableTiles().forEach((function(e){var n=function(n){t[n]=t[n]||0,e.meshes[n].forEach((function(e){t[n]+=e.buffer_size}))};for(var r in e.meshes)n(r)})),t},geometrySizeByBaseStyle:function(){var t=i.debug.geometrySizeByStyle(),e={};for(var n in t){var r=i.styles[n].baseStyle();e[r]=e[r]||0,e[r]+=t[n]}return e},geometrySizeTotal:function(){var t=i.debug.geometrySizeByStyle();return Object.keys(t).reduce((function(e,n){return t[n]+e}),0)},textureSizeTotal:function(){return Object.values(t.Texture.textures).map((function(t){return t.byteSize()})).reduce((function(t,e){return t+e}))},layerStats:function(){return t.debugSettings.layer_stats?t.debugSumLayerStats(i.tile_manager.getRenderableTiles()):(t.log("warn","Enable the 'layer_stats' debug setting to collect layer stats"),{})},renderableTilesCount:function(){return i.tile_manager.getRenderableTiles().length}},this.log_level=r.logLevel||"warn",t.log.setLevel(this.log_level),t.log.reset()}e.create=function(t,n){return void 0===n&&(n={}),new e(t,n)};var n=e.prototype;return n.load=function(e,n){var r=this;return void 0===e&&(e=null),void 0===n&&(n={}),this.initializing?this.initializing:(t.log.reset(),this.updating++,this.initialized=!1,this.view_complete=!1,this.times.frame=null,this.times.build=null,(n="string"==typeof n?{base_path:n}:n).blocking=void 0===n.blocking||n.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.prev_textures=this.config&&Object.keys(this.config.textures),this.initializing=this.loadScene(e,n).then((function(){return r.createWorkers()})).then((function(){r.destroyFeatureSelection(),t.WorkerBroker.postMessage(r.workers,"self.clearFunctionStringCache");var e="object"==typeof r.config_source||r.hasSubscribersFor("load"),i=r.updateConfig({serialize_funcs:e,normalize:!1,loading:!0,fade_in:!0});if(!0===n.blocking)return i})).then((function(){r.freePreviousTextures(),r.updating--,r.initializing=null,r.initialized=!0,r.last_valid_config_source=r.config_source,r.last_valid_options={base_path:n.base_path,file_type:n.file_type},r.requestRedraw()})).catch((function(e){var n,i;if(r.initializing=null,r.updating=0,"YAMLException"===e.name?(n="yaml",i="Error parsing scene YAML"):i="Error initializing scene",r.trigger("error",{type:n,message:i,error:e,url:r.config_source}),i="Scene.load() failed to load "+JSON.stringify(r.config_source)+": "+e.message,r.last_valid_config_source)return t.log("warn",i,e),t.log("info","Scene.load() reverting to last valid configuration"),r.load(r.last_valid_config_source,r.last_valid_base_path);throw t.log("error",i,e),e})),this.initializing)},n.destroy=function(){if(this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.destroyFeatureSelection(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.gl){t.Texture.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},t.ShaderProgram.reset();var e=this.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this.gl=null}this.sources={},this.destroyWorkers(),this.tile_manager.destroy(),this.tile_manager=null,t.log.reset()},n.createCanvas=function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=U.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!0,stencil:!0,device_pixel_ratio:t.Utils.device_pixel_ratio,powerPreference:"high-performance"},this.contextOptions))}catch(t){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.resizeMap(this.container.clientWidth,this.container.clientHeight),t.VertexArrayObject.init(this.gl),this.render_states=new Mu(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}},n.updateExternalScripts=function(){var t=[].concat(this.external_scripts||[]),e=[];if(this.config.scene.scripts)for(var n in this.config.scene.scripts)-1===e.indexOf(this.config.scene.scripts[n])&&e.push(this.config.scene.scripts[n]);for(var r in this.config.sources){var i=this.config.sources[r];if(i.scripts)for(var o in i.scripts)-1===e.indexOf(i.scripts[o])&&e.push(i.scripts[o])}return this.external_scripts=e,!(this.external_scripts.length===t.length&&this.external_scripts.every((function(e,n){return e===t[n]})))},n.createWorkers=function(){return this.updateExternalScripts()&&this.destroyWorkers(),this.workers?Promise.resolve():this.makeWorkers()},n.makeWorkers=function(){var e=this,n=!!this.gl.getExtension("OES_element_index_uint"),i=[];this.workers=[];for(var o=function(o){var a=new Worker(r.workerURL);e.workers[o]=a,t.WorkerBroker.addWorker(a),t.log("debug","Scene.makeWorkers: initializing worker "+o);var s=o;i.push(t.WorkerBroker.postMessage(a,"self.init",e.id,o,e.num_workers,e.log_level,t.Utils.device_pixel_ratio,n,e.external_scripts).then((function(e){return t.log("debug","Scene.makeWorkers: initialized worker "+e),e}),(function(e){return t.log("error","Scene.makeWorkers: failed to initialize worker "+s+":",e),Promise.reject(e)})))},a=0;a<this.num_workers;a++)o(a);return this.next_worker=0,Promise.all(i).then((function(){t.log.setWorkers(e.workers)}))},n.destroyWorkers=function(){this.selection=null,Array.isArray(this.workers)&&(t.log.setWorkers(null),this.workers.forEach((function(t){t.terminate()})),this.workers=null)},n.ready=function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)},n.updateDevicePixelRatio=function(){var e=this;t.Utils.updateDevicePixelRatio()&&t.WorkerBroker.postMessage(this.workers,"self.updateDevicePixelRatio",t.Utils.device_pixel_ratio).then((function(){return e.rebuild()})).then((function(){return e.resizeMap(e.view.size.css.width,e.view.size.css.height)}))},n.resizeMap=function(e,n){0===e&&0===n||(this.dirty=!0,this.view.setViewportSize(e,n),this.gl&&U.resize(this.gl,e,n,t.Utils.device_pixel_ratio))},n.requestRedraw=function(){this.dirty=!0},n.immediateRedraw=function(){this.dirty=!0,this.update()},n.renderLoop=function(){this.render_loop_active=!0,this.update(),t.Task.setState({user_moving_view:this.view.user_input_active}),t.Task.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))},n.setupRenderLoop=function(){var t=this;this.render_loop_active||setTimeout((function(){t.renderLoop()}),0)},n.update=function(){var e=this.dirty,n=!!this.selection&&this.selection.hasPendingRequests(),r=!(!1===e&&!1===n||!1===this.initialized||this.updating>0||!1===this.ready());return this.trigger("pre_update",r),this.view.update(),!!r&&(this.dirty=!1,this.updateDevicePixelRatio(),this.render({main:e,selection:n}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",r),(!0===this.animated||this.view.isAnimating())&&(this.dirty=!0),this.frame++,t.log("trace","Scene.render()"),!0)},n.render=function(e){var n=this,r=e.main,i=e.selection,o=this.gl;if(this.updateBackground(),Object.keys(this.lights).forEach((function(t){return n.lights[t].update()})),this.render_count_changed=!1,r&&(this.render_count=this.renderPass(),this.last_main_render=this.frame,this.render_count!==this.last_render_count&&(this.render_count_changed=!0,this.logFirstFrame(),this.getFeatureSelectionMapSize().then((function(e){n.selection_feature_count=e,t.log("info","Scene: rendered "+n.render_count+" primitives ("+e+" features in selection map)")}))),this.last_render_count=this.render_count),i){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();!this.selection.locked&&this.last_selection_render<this.last_main_render&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),o.bindFramebuffer(o.FRAMEBUFFER,null),o.viewport(0,0,this.canvas.width,this.canvas.height),o.clearColor.apply(o,this.background.computed_color),this.last_selection_render=this.frame),this.selection.read()}return!0},n.renderPass=function(e,n){var r=this;void 0===e&&(e="program");var i=(void 0===n?{}:n).allow_blend;i=null==i||i,this.clearFrame();var o,a=0,s=this.style_manager.getActiveBlendOrders(),u=Array.isArray(s),l=0;for(s=u?s:s[Symbol.iterator]();;){var c;if(u){if(l>=s.length)break;c=s[l++]}else{if((l=s.next()).done)break;c=l.value}for(var h=c,f=h.blend_order,d=h.styles,p=function(n){var s=r.styles[d[n]];if(null==s)return"continue";if(s.blend!==o){var u=Object.assign({},t.Style.render_states[s.blend],{blend:i&&s.blend});r.setRenderState(u)}var l=i&&s.blend;if("translucent"===l)r.gl.colorMask(!1,!1,!1,!1),r.renderStyle(s.name,e,f),r.gl.colorMask(!0,!0,!0,!0),r.gl.depthFunc(r.gl.EQUAL),r.gl.enable(r.gl.STENCIL_TEST),r.gl.clearStencil(0),r.gl.clear(r.gl.STENCIL_BUFFER_BIT),r.gl.stencilFunc(r.gl.EQUAL,r.gl.ZERO,255),r.gl.stencilOp(r.gl.KEEP,r.gl.KEEP,r.gl.INCR),a+=r.renderStyle(s.name,e,f),r.gl.disable(r.gl.STENCIL_TEST),r.gl.depthFunc(r.gl.LESS);else if("opaque"!==l&&!0===s.stencil_proxy_tiles){var c=r.tile_manager.getRenderableTiles().filter((function(t){return t.meshes[s.name]})).map((function(t){return t.proxy_level})).reduce((function(t,e){return t.indexOf(e)>-1||t.push(e),t}),[]).sort();if(c.length>1){r.gl.enable(r.gl.STENCIL_TEST),r.gl.clearStencil(0),r.gl.clear(r.gl.STENCIL_BUFFER_BIT),r.gl.stencilOp(r.gl.KEEP,r.gl.KEEP,r.gl.REPLACE);for(var h=0;h<c.length;h++)r.gl.stencilFunc(r.gl.GEQUAL,c.length-h,255),a+=r.renderStyle(s.name,e,f,c[h]);r.gl.disable(r.gl.STENCIL_TEST)}else a+=r.renderStyle(s.name,e,f)}else a+=r.renderStyle(s.name,e,f);o=s.blend},m=0;m<d.length;m++)p(m)}return a},n.renderStyle=function(t,e,n,r){var i=this;void 0===r&&(r=null);for(var o,a=this.styles[t],s=!0,u=0,l=this.tile_manager.getRenderableTiles().filter((function(t){return"number"!=typeof r||t.proxy_level===r})).map((function(e){if(e.meshes[t])return[e,e.meshes[t].filter((function(t){return t.variant.blend_order===n}))]})).filter((function(t){return t})),c=Math.max.apply(Math,l.map((function(t){var e=t[1];return Math.max.apply(Math,e.map((function(t){return t.variant.mesh_order})))}))),h=function(n){var r=function(){if(h){if(f>=c.length)return"break";d=c[f++]}else{if((f=c.next()).done)return"break";d=f.value}var r=d,l=r[0],p=r[1],m=!0;if(!l.shouldProxyForStyle(t))return"continue";var g=p.filter((function(t){return t.variant.mesh_order===n}));return 0===g.length?"continue":!0!==s||(s=!1,o=i.setupStyle(a,e))?void g.forEach((function(t){!0===m&&(m=!1,i.view.setupTile(l,o)),a.render(t)&&i.requestRedraw(),u+=t.geometry_count})):{v:{v:0}}},c=l,h=Array.isArray(c),f=0;t:for(c=h?c:c[Symbol.iterator]();;){var d,p=r();switch(p){case"break":break t;case"continue":continue;default:if("object"==typeof p)return p.v}}},f=0;f<c+1;f++){var d=h(f);if("object"==typeof d)return d.v}return u},n.setupStyle=function(t,e){var n;try{if(!(n=t.getProgram(e)))return}catch(e){return void this.trigger("warning",{type:"styles",message:"Error compiling style "+t.name,style:t,shader_errors:t.program&&t.program.shader_errors})}for(var r in n.use(),t.setup(),n.uniform("1f","u_time",this.animated?(+new Date-this.start_time)/1e3:0),this.view.setupProgram(n),this.lights)this.lights[r].setupProgram(n);return n},n.clearFrame=function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))},n.setRenderState=function(t){var e=void 0===t?{}:t,n=e.depth_test,r=e.depth_write,i=e.cull_face,o=e.blend;if(this.initialized){var a=this.render_states;n=!1!==n&&a.defaults.depth_test,r=!1!==r&&a.defaults.depth_write,i=!1!==i&&a.defaults.culling,o=null!=o?o:a.defaults.blending;var s=this.gl;a.depth_test.set({depth_test:n}),a.depth_write.set({depth_write:r}),a.culling.set({cull:i,face:a.defaults.culling_face}),o?"opaque"===o?a.blending.set({blend:!1}):"overlay"===o||"inlay"===o||"translucent"===o?a.blending.set({blend:!0,src:s.SRC_ALPHA,dst:s.ONE_MINUS_SRC_ALPHA,src_alpha:s.ONE,dst_alpha:s.ONE_MINUS_SRC_ALPHA}):"add"===o?a.blending.set({blend:!0,src:s.ONE,dst:s.ONE}):"multiply"===o&&a.blending.set({blend:!0,src:s.ZERO,dst:s.SRC_COLOR}):a.blending.set({blend:!1})}},n.getFeatureAt=function(e,n){var r=(void 0===n?{}:n).radius;if(!this.initialized)return t.log("debug","Scene.getFeatureAt() called before scene was initialized"),Promise.resolve();if(0===this.selection_feature_count)return Promise.resolve();this.selection||this.resetFeatureSelection();var i={x:e.x/this.view.size.css.width,y:e.y/this.view.size.css.height};return r=r>0?{x:r/this.view.size.css.width,y:r/this.view.size.css.height}:null,this.selection.getFeatureAt(i,{radius:r}).then((function(t){return Object.assign(t,{pixel:e})})).catch((function(t){return Promise.resolve({error:t})}))},n.queryFeatures=function(e){return new Promise(function(n,r){var i,o,a,s,u,l,c,h,f,d,p,m,g,v,_,y,b;return o=(i=void 0===e?{}:e).filter,a=i.unique,s=void 0===a||a,u=i.group_by,l=void 0===u?null:u,h=void 0===(c=i.visible)?null:c,f=i.geometry,d=void 0!==f&&f,this.initialized?(o=t.Utils.serializeWithFunctions(o),p=!0===(s="string"==typeof s?[s]:s)||Array.isArray(s)&&s.indexOf("$id")>-1,m=s&&function(e){var n=Array.isArray(s)?t.sliceObject(e.properties,s):e.properties,r=p?e.id:null;return d?JSON.stringify({geometry:e.geometry,properties:n,id:r}):JSON.stringify({properties:n,id:r})},l=("string"==typeof l||Array.isArray(l))&&l,g=l&&function(e){return Array.isArray(l)?JSON.stringify(t.sliceObject(e,l)):e[l]},v=this.tile_manager.getRenderableTiles().map((function(t){return t.key})),Promise.resolve(t.WorkerBroker.postMessage(this.workers,"self.queryFeatures",{filter:o,visible:h,geometry:d,tile_keys:v})).then((function(t){try{return _=[],y={},b={},t.forEach((function(t){return t.forEach((function(t){if(m){var e=m(t);if(y[e])return;y[e]=!0}if(g){var n=g(t.properties);b[n]=b[n]||[],b[n].push(t)}else _.push(t)}))})),n(g?b:_)}catch(t){return r(t)}}),r)):n([])}.bind(this))},n.rebuild=function(n){var r=this,i=void 0===n?{}:n,o=i.initial,a=void 0!==o&&o,s=i.new_generation,u=void 0===s||s,l=i.sources,c=void 0===l?null:l,h=i.serialize_funcs,f=i.profile,d=void 0!==f&&f,p=i.fade_in,m=void 0!==p&&p;return new Promise((function(n,i){if(r.building){r.building.queued&&r.building.queued.reject&&(t.log("debug","Scene.rebuild: request superceded by a newer call"),r.building.queued.resolve(!1));var o={initial:a,new_generation:u,sources:c,serialize_funcs:h,profile:d,fade_in:m};return r.building.queued={resolve:n,reject:i,options:o},void t.log("trace","Scene.rebuild(): queuing request")}if(r.building={resolve:n,reject:i,initial:a},d&&r.debug.profile("Scene.rebuild"),u)for(var s in r.generation=++e.generation,r.styles)r.styles[s].setGeneration(r.generation);r.syncConfigToWorker({serialize_funcs:h}),r.resetWorkerFeatureSelection(c),r.resetTime(),r.tile_manager.pruneToVisibleTiles(),r.tile_manager.forEachTile((function(t){(!c||c.indexOf(t.source.name)>-1)&&r.tile_manager.buildTile(t,{fade_in:m})})),r.tile_manager.updateTilesForView(),r.tile_manager.checkBuildQueue()})).then((function(){d&&r.debug.profileEnd("Scene.rebuild")}))},n.tileManagerBuildDone=function(){if(t.TextCanvas.pruneTextCache(),this.building){t.log("info","Scene: build geometry finished"),this.building.resolve&&(this.logFirstBuild(),this.building.resolve(!0));var e=this.building.queued;this.building=null,e?(t.log("debug","Scene: starting queued rebuild() request"),this.rebuild(e.options).then(e.resolve,e.reject)):this.tile_manager.updateLabels()}},n.loadScene=function(e,n){var r=this;void 0===e&&(e=null);var i=void 0===n?{}:n,o=i.base_path,a=i.file_type;return this.config_source=e||this.config_source,"string"==typeof this.config_source?this.base_path=t.pathForURL(o||this.config_source):this.base_path=t.pathForURL(o),this.config_path=this.base_path,yu.loadScene(this.config_source,{path:this.base_path,type:a}).then((function(t){var e=t.config,n=t.bundle;return r.config=e,r.config_bundle=n,r.config}))},n.setDataSource=function(e,n){if(e&&n&&n.type&&(n.url||n.data)){var r=null==this.config.sources[e],i=this.config.sources[e]=Object.assign({},n);return i.data&&"object"==typeof i.data&&(i.url=t.createObjectURL(new Blob([JSON.stringify(i.data)])),delete i.data),r?this.updateConfig({rebuild:{sources:[e]}}):this.rebuild({sources:[e]})}t.log("error","No name provided or not a valid config:",e,n)},n.createDataSources=function(e){var n=this;void 0===e&&(e=!1);var r=[],i=Object.keys(this.sources),o=0;for(var a in this.config.sources){var s=this.config.sources[a],u=this.sources[a];try{var l=Object.assign({},s,{name:a,id:o++});if(this.sources[a]=t.DataSource.create(l,this.sources),!this.sources[a])throw{}}catch(e){delete this.sources[a];var c="Could not create data source: "+e.message;t.log("warn","Scene: "+c,s),this.trigger("warning",{type:"sources",source:s,message:c})}(e||t.DataSource.tileLayoutChanged(this.sources[a],u))&&r.push(a)}for(var h in i.forEach((function(t){n.config.sources[t]||(delete n.sources[t],r.push(t))})),r.length>0&&this.tile_manager.removeTiles((function(t){return r.indexOf(t.source.name)>-1})),this.config.layers){var f=this.config.layers[h];!1!==f.enabled&&f.data&&this.sources[f.data.source]&&(this.sources[f.data.source].builds_geometry_tiles=!0)}},n.loadTextures=function(){var e=this;return t.Texture.createFromObject(this.gl,this.config.textures).then((function(){return t.Texture.createDefault(e.gl)}))},n.freePreviousTextures=function(){var e=this;this.prev_textures&&(this.prev_textures.forEach((function(n){!e.config.textures[n]&&t.Texture.textures[n]&&t.Texture.textures[n].destroy()})),this.prev_textures=null)},n.updateStyles=function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var t in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[t].setGL(this.gl);this.dirty=!0},n.getActiveCamera=function(){return this.view.getActiveCamera()},n.setActiveCamera=function(t){return this.view.setActiveCamera(t)},n.createLights=function(){for(var e in this.lights={},this.config.lights)if(this.config.lights[e]&&"object"==typeof this.config.lights[e]){var n=this.config.lights[e];n.name=e.replace("-","_"),n.visible=!1!==n.visible,n.visible&&(this.lights[n.name]=t.Light.create(this.view,n))}t.Light.inject(this.lights)},n.setBackground=function(){var e=this.config.scene.background;this.background={},e&&e.color&&(this.background.color=t.StyleParser.createColorPropertyCache(e.color)),this.background.color||(this.background.color=t.StyleParser.createColorPropertyCache([0,0,0,0]))},n.updateBackground=function(){var e,n=this.background.computed_color,r=this.background.computed_color=t.StyleParser.evalCachedColorProperty(this.background.color,{zoom:this.view.tile_zoom});n&&!r.some((function(t,e){return n[e]!==t}))||(1===r[3]?this.canvas.style.backgroundColor="rgba("+r.map((function(t){return Math.floor(255*t)})).join(", ")+")":this.canvas.style.backgroundColor="transparent",(e=this.gl).clearColor.apply(e,r))},n.setIntrospection=function(t){var e=this;return t!==this.introspection?(this.introspection=null!=t&&t,this.updating++,this.updateConfig({normalize:!1}).then((function(){return e.updating--}))):Promise.resolve()},n.updateConfig=function(n){var r=this,i=void 0===n?{}:n,o=i.loading,a=void 0!==o&&o,s=i.rebuild,u=void 0===s||s,l=i.serialize_funcs,c=i.normalize,h=void 0===c||c,f=i.fade_in,d=void 0!==f&&f;this.generation=++e.generation,this.updating++,this.config=yu.applyGlobalProperties(this.config),h?yu.normalize(this.config,this.config_bundle):(yu.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),yu.normalizeTextures(this.config,this.config_bundle)),this.trigger(a?"load":"update",{config:this.config}),this.style_manager.init(),this.view.reset(),this.createLights(),this.createDataSources(a),this.loadTextures(),this.setBackground(),t.FontManager.loadFonts(this.config.fonts),this.updateStyles();var p=u?this.rebuild(Object.assign({initial:a,new_generation:!1,serialize_funcs:l,fade_in:d},"object"==typeof u&&u)):this.syncConfigToWorker({serialize_funcs:l});return this.updating--,this.view.updateBounds(),this.requestRedraw(),p.then((function(){r.last_render_count=0,r.requestRedraw()}))},n.syncConfigToWorker=function(e){var n=(void 0===e?{}:e).serialize_funcs,r=void 0===n||n?t.Utils.serializeWithFunctions(this.config):JSON.stringify(this.config);return t.WorkerBroker.postMessage(this.workers,"self.updateConfig",{config:r,generation:this.generation,introspection:this.introspection},t.debugSettings)},n.createListeners=function(){var e=this;this.listeners={},this.listeners.view={move:function(){return e.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return e.dirty=!0},warning:function(t){return e.trigger("warning",Object.assign({type:"textures"},t))}},t.Texture.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(t){return e.trigger("error",Object.assign({type:"scene"},t))}},yu.subscribe(this.listeners.scene_loader)},n.destroyListeners=function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),t.Texture.unsubscribe(this.listeners.texture),yu.unsubscribe(this.listeners.scene_loader),this.listeners=null},n.destroyFeatureSelection=function(){this.selection&&(this.selection.destroy(),this.selection=null)},n.resetFeatureSelection=function(){var e=this;this.selection=new t.FeatureSelection(this.gl,this.workers,(function(){return e.building})),this.last_render_count=0},n.resetWorkerFeatureSelection=function(e){void 0===e&&(e=null),this.workers&&t.WorkerBroker.postMessage(this.workers,"self.resetFeatureSelection",e)},n.getFeatureSelectionMapSize=function(){var e=this;return null==this.fetching_selection_map&&(this.fetching_selection_map=t.WorkerBroker.postMessage(this.workers,"self.getFeatureSelectionMapSize").then((function(t){return e.fetching_selection_map=null,t.reduce((function(t,e){return t+e}))}))),this.fetching_selection_map},n.resetTime=function(){this.start_time=+new Date},n.updateViewComplete=function(){!this.render_count_changed&&this.generation===this.last_complete_generation||this.building||this.tile_manager.isLoadingVisibleTiles()||!this.tile_manager.allVisibleTilesLabeled()||(this.tile_manager.updateLabels(),this.last_complete_generation=this.generation,this.trigger("view_complete",{first:!0!==this.view_complete}),this.view_complete=!0)},n.resetViewComplete=function(){this.last_complete_generation=null},n.screenshot=function(t){var e=(void 0===t?{}:t).background,n=void 0===e?"white":e;return this.requestRedraw(),this.media_capture.screenshot({background:n})},n.startVideoCapture=function(){return this.requestRedraw(),this.media_capture.startVideoCapture()},n.stopVideoCapture=function(){return this.media_capture.stopVideoCapture()},n.logFirstFrame=function(){0!==this.last_render_count||this.times.first_frame||(this.times.first_frame=+new Date-this.start_time,t.log("debug","Scene: initial frame time: "+this.times.first_frame))},n.logFirstBuild=function(){null==this.times.first_build&&(this.times.first_build=+new Date-this.start_time,t.log("debug","Scene: initial build time: "+this.times.first_build))},t._createClass(e,[{key:"animated",get:function(){var t=this;return!1!==this.config.scene.animated&&this.style_manager.getActiveStyles().some((function(e){return t.styles[e].animated}))}}]),e}();zu.id=0,zu.generation=0;var Ru={map:{},scrollWheelZoom:{},doubleClickZoom:{}};return{leafletLayer:function(e){return function(e){if(void 0!==Ou)return new Ou(e);if(t.Thread.is_main){var n,r=e.leaflet||window.L,i=r.GridLayer?r.GridLayer:r.TileLayer,o=i===r.GridLayer?"1.x":"0.7.x",a={};return i===r.TileLayer&&(a._addTile=function(){},a._removeTile=function(){},a._reset=function(){i.prototype._reset.apply(this,arguments),this.scene&&this.scene.container&&this.scene.canvas&&this.scene.container.appendChild(this.scene.canvas)}),Object.assign(a,{initialize:function(t){t.showDebug=!!t.showDebug,r.setOptions(this,t),this.updateTangramDebugSettings(),this.createScene(),this.hooks={},this._updating_tangram=!1},createScene:function(){this.scene=zu.create(this.options.scene,{numWorkers:this.options.numWorkers,preUpdate:this.options.preUpdate,postUpdate:this.options.postUpdate,continuousZoom:"1.x"===Ou.leafletVersion,wrapView:!0!==this.options.noWrap,highDensityDisplay:this.options.highDensityDisplay,logLevel:this.options.logLevel,introspection:this.options.introspection,webGLContextOptions:this.options.webGLContextOptions,disableRenderLoop:this.options.disableRenderLoop})},onAdd:function(e){var n=this;this.scene||this.createScene(),i.prototype.onAdd.apply(this,arguments),this.hooks.resize=function(){n._updating_tangram=!0,n.updateSize(),n._updating_tangram=!1},e.on("resize",this.hooks.resize),this.hooks.move=function(){if(!n._updating_tangram){n._updating_tangram=!0,n.scene.view.setPanning(!0);var r=e.getCenter();r.zoom=Math.max(Math.min(e.getZoom(),e.getMaxZoom()||t.Geo.default_view_max_zoom),e.getMinZoom()),n.scene.view.setView(r),n._mapLayerCount>1&&n.scene.immediateRedraw(),n._updating_tangram=!1}},e.on("move",this.hooks.move),this.hooks.moveend=function(){n.scene.view.setPanning(!1),n.scene.requestRedraw()},e.on("moveend",this.hooks.moveend),this.hooks.drag=function(){n.scene.view.markUserInput()},e.on("drag",this.hooks.drag),this._map_pane_observer=new MutationObserver((function(t){t.forEach((function(){return n.reverseTransform()}))})),this._map_pane_observer.observe(e.getPanes().mapPane,{attributes:!0}),this.modifyScrollWheelBehavior(e),this.modifyZoomBehavior(e),this.trackMapLayerCounts(e),this.setupSelectionEventHandlers(e),this.setSelectionEvents(this.options.events,{radius:this.options.selectionRadius}),this.scene.container=this.getContainer(),this.updateSize(),this.updateView(),this.resizeOnFirstVisible(),this.scene.subscribe({move:this.onTangramViewUpdate.bind(this)}),this.scene.load(this.options.scene,{base_path:this.options.sceneBasePath,file_type:this.options.sceneFileType,blocking:!1}).then((function(){n._updating_tangram=!0,n.updateSize(),n.updateView(),n.reverseTransform(),n._updating_tangram=!1,n.fire("init")})).catch((function(t){n.fire("error",t)}))},onRemove:function(t){i.prototype.onRemove.apply(this,arguments),t.off("layeradd layerremove overlayadd overlayremove",this._updateMapLayerCount),t.off("resize",this.hooks.resize),t.off("move",this.hooks.move),t.off("moveend",this.hooks.moveend),t.off("drag",this.hooks.drag),t.off("click",this.hooks.click),t.off("mousemove",this.hooks.mousemove),t.off("mouseout",this.hooks.mouseout),document.removeEventListener("visibilitychange",this.hooks.visibilitychange),this.hooks={},this._map_pane_observer.disconnect(),this.scene&&(this.scene.destroy(),this.scene=null)},createTile:function(t){var e=t.x+"/"+t.y+"/"+t.z,n=document.createElement("div");if(n.setAttribute("data-tile-key",e),n.style.width="256px",n.style.height="256px",this.options.showDebug){var r=document.createElement("div");r.textContent=e,r.style.position="absolute",r.style.left=0,r.style.top=0,r.style.color="white",r.style.fontSize="16px",r.style.textOutline="1px #000000",r.style.padding="8px",n.appendChild(r),n.style.borderStyle="solid",n.style.borderColor="white",n.style.borderWidth="1px"}return n},modifyScrollWheelBehavior:function(t){if(this.scene.view.continuous_zoom&&t.scrollWheelZoom&&!1!==this.options.modifyScrollWheel){t.options.zoomSnap=0;var e=t.scrollWheelZoom.enabled();t.scrollWheelZoom.disable(),r.Browser.chrome||r.Browser.safari?t.scrollWheelZoom._onWheelScroll=function(t){var e=r.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._performZoom(),r.DomEvent.stop(t)}:t.options.wheelDebounceTime=20;var i=(a=function(t){t._moveEnd(!0),t.fire("viewreset")},s=2*t.options.wheelDebounceTime,function(){var t=this,e=arguments;clearTimeout(u),u=setTimeout((function(){u=null,a.apply(t,e)}),s)});Ru.scrollWheelZoom._performZoom||(Ru.scrollWheelZoom._performZoom=t.scrollWheelZoom._performZoom);var o=this;t.scrollWheelZoom._performZoom=function(){if(this._map===o._map){var t=this._map,e=t.getZoom();t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel);this._delta=0,e+r>=this._map.getMaxZoom()?r=this._map.getMaxZoom()-e:e+r<=this._map.getMinZoom()&&(r=this._map.getMinZoom()-e),r&&("center"===t.options.scrollWheelZoom?n(o,t.getCenter(),e+r):n(o,this._lastMousePos,e+r),i(t))}else Ru.scrollWheelZoom._performZoom.call(this)},e&&t.scrollWheelZoom.enable()}var a,s,u},modifyZoomBehavior:function(t){if(this.scene.view.continuous_zoom&&!1!==this.options.modifyZoomBehavior){var e=this,i=function(e,i,o){t._stop();var a=t._zoom;i=r.latLng(i),o=void 0===o?a:o,o=Math.min(o,t.getMaxZoom());var s=Date.now();return t._moveStart(!0),function u(){var l=(Date.now()-s)/75;l<=1?(t._flyToFrame=r.Util.requestAnimFrame(u,t),n(e,i,a+(o-a)*l)):n(e,i,o)._moveEnd(!0)}.call(t),t};if(t.doubleClickZoom){var o=t.doubleClickZoom.enabled();t.doubleClickZoom.disable(),Ru.doubleClickZoom._onDoubleClick||(Ru.doubleClickZoom._onDoubleClick=t.doubleClickZoom._onDoubleClick),t.doubleClickZoom._onDoubleClick=function(t){if(this._map===e._map){var n=this._map,r=n.getZoom(),o=n.options.zoomDelta,a=t.originalEvent.shiftKey?r-o:r+o;"center"===n.options.doubleClickZoom?i(e,n.getCenter(),a):i(e,n.containerPointToLatLng(t.containerPoint),a)}else Ru.doubleClickZoom._onDoubleClick.call(this,t)},o&&t.doubleClickZoom.enable()}t._zoomAnimated&&(Ru.map._animateZoom||(Ru.map._animateZoom=t._animateZoom),t._animateZoom=function(t,n,o,a){this===e._map?(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=n,i(e,t,n)),setTimeout(r.Util.bind(this._onZoomTransitionEnd,this),250)):Ru.map._animateZoom.call(this,t,n,o,a)})}},updateView:function(){var e=this._map.getCenter();e.zoom=Math.max(Math.min(this._map.getZoom(),this._map.getMaxZoom()||t.Geo.default_view_max_zoom),this._map.getMinZoom()),this.scene.view.setView(e)},updateSize:function(){var t=this._map.getSize();this.scene.resizeMap(t.x,t.y)},resizeOnFirstVisible:function(){var t=this,e=!0;this.hooks.visibilitychange=function(){e&&(e=!1,t.updateSize())},document.addEventListener("visibilitychange",this.hooks.visibilitychange)},onTangramViewUpdate:function(){if(this._map&&!this._updating_tangram){var t=this._map.getCenter(),e=this.scene.view.center;t.lng===e.lng&&t.lat===e.lat&&this._map.getZoom()===this.scene.view.zoom||(this._updating_tangram=!0,this._map.setView([this.scene.view.center.lat,this.scene.view.center.lng],this.scene.view.zoom,{animate:!1}),this._updating_tangram=!1)}},render:function(){this.scene&&this.scene.update()},reverseTransform:function(){if(this._map&&this.scene&&this.scene.container){var t=this._map.containerPointToLayerPoint([0,0]);r.DomUtil.setPosition(this.scene.container,t)}},setupSelectionEventHandlers:function(t){var e=this;this._selection_events={},this._selection_radius=null,this.hooks.click=function(t){"function"==typeof e._selection_events.click&&e.scene.getFeatureAt(t.containerPoint,{radius:e._selection_radius}).then((function(n){var r=Object.assign({},n,{leaflet_event:t});e._selection_events.click(r)}))},t.on("click",this.hooks.click),this.hooks.mousemove=function(t){"function"==typeof e._selection_events.hover&&e.scene.getFeatureAt(t.containerPoint,{radius:e._selection_radius}).then((function(n){var r=Object.assign({},n,{leaflet_event:t});e._selection_events.hover(r)}))},t.on("mousemove",this.hooks.mousemove),this.hooks.mouseout=function(t){"function"==typeof e._selection_events.hover&&e._selection_events.hover({changed:!0,leaflet_event:t})},t.on("mouseout",this.hooks.mouseout)},setSelectionEvents:function(t,e){var n=(void 0===e?{}:e).radius;this._selection_events=Object.assign(this._selection_events,t),this._selection_radius=void 0!==n?n:this._selection_radius},trackMapLayerCounts:function(t){var e=this;this._updateMapLayerCount=function(){var n=t.getPanes().mapPane.childNodes;e._mapLayerCount=0;for(var r=0;r<n.length;r++)e._mapLayerCount+=n[r].childNodes.length},t.on("layeradd layerremove overlayadd overlayremove",this._updateMapLayerCount),this._updateMapLayerCount()},updateTangramDebugSettings:function(){t.mergeDebugSettings(this.options.debug||{})}}),n=function(t,e,n){var i=t._map,o=t.scene,a=i.getZoomScale(n),s=i.getSize().divideBy(2),u=(e instanceof r.Point?e:i.latLngToContainerPoint(e)).subtract(s).multiplyBy(1-1/a),l=i.containerPointToLatLng(s.add(u));return o&&o.view.markUserInput(),i._move(l,n,{flyTo:!0})},"function"!=typeof(Ou=i.extend(a)).remove&&(Ou.prototype.remove=function(){this._map&&this._map.removeLayer(this),this.fire("remove")}),Ou.layerBaseClass=i,Ou.leafletVersion=o,new Ou(e)}}(e)},debug:{log:t.log,yaml:pu,Utils:t.Utils,Geo:t.Geo,Vector:t.Vector,DataSource:t.DataSource,GLSL:t.GLSL,ShaderProgram:t.ShaderProgram,VertexData:t.VertexData,Texture:t.Texture,Material:t.Material,Light:t.Light,Scene:zu,WorkerBroker:t.WorkerBroker,Task:t.Task,StyleManager:t.StyleManager,StyleParser:t.StyleParser,TileID:t.TileID,Collision:t.Collision,FeatureSelection:t.FeatureSelection,TextCanvas:t.TextCanvas,debugSettings:t.debugSettings},version:t.version}}));try{r.debug.ESM=!1,r.debug.SHA="e76e4fd4278c18dccb19ec07d7550bbb76bdd8f7"}catch(o){}return r},t.exports=r()}).call(this,n("yLpj"))},NKxu:function(t,e,n){n("pIFo"),n("Oyvg"),n("a1Th"),n("h7Nl"),n("Btvt");var r=n("lSCD"),i=n("E2jh"),o=n("GoyQ"),a=n("3Fdi"),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},NO8f:function(t,e,n){n("7DDg")("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},Npjl:function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},Nr18:function(t,e,n){"use strict";var r=n("S/j/"),i=n("d/Gc"),o=n("ne8i");t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:i(u,n);l>s;)e[s++]=t;return e}},NykK:function(t,e,n){var r=n("nmnc"),i=n("AP2z"),o=n("KfNM"),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},O0oS:function(t,e,n){var r=n("Cwc5"),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},O7RO:function(t,e,n){var r=n("CMye"),i=n("7GkX");t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},ODXe:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",(function(){return r}))},OGtf:function(t,e,n){var r=n("XKFU"),i=n("eeVq"),o=n("vhPU"),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},"Of+w":function(t,e,n){var r=n("Cwc5")(n("Kz5y"),"WeakMap");t.exports=r},Pixb:function(t,e,n){"use strict";n("V+eJ"),n("8+KV"),n("dRSK"),n("bWfx"),n("0l/t"),n("HAE/");var r=n("284h"),i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("RIqP")),a=(i(n("q1tI")),i(n("17x9")),i(n("tbcB"))),s=r(n("ylu/")),u=n("6lFR"),l=n("pI4o"),c=function(){return document&&document.activeElement===document.body||(0,s.focusIsHidden)()},h=null,f=null,d=null,p=!1,m=function(){return!0};function g(t,e,n,r){var i=null,o=t;do{var a=r[o];if(a.guard)a.node.dataset.focusAutoGuard&&(i=a);else{if(!a.lockItem)break;if(o!==t)return;i=null}}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var v=function(t){return t&&"current"in t?t.current:t},_=function(){var t,e=!1;if(h){var n=h,r=n.observed,i=n.persistentFocus,a=n.autoFocus,u=n.shards,l=r||d&&d.portaledElement,_=document&&document.activeElement;if(l){var y=[l].concat((0,o.default)(u.map(v).filter(Boolean)));if(_&&!function(t){return(h.whiteList||m)(t)}(_)||(i||p||!c()||!f&&a)&&(!l||(0,s.focusInside)(y)||(t=_,d&&d.portaledElement===t)||(document&&!f&&_&&!a?(_.blur(),document.body.focus()):(e=(0,s.default)(y,f),d={})),p=!1,f=document&&document.activeElement),document){var b=document&&document.activeElement,x=(0,s.getFocusabledIn)(y),w=x.find((function(t){return t.node===b}));if(w){x.filter((function(t){var e=t.guard,n=t.node;return e&&n.dataset.focusAutoGuard})).forEach((function(t){return t.node.removeAttribute("tabIndex")}));var T=x.indexOf(w);g(T,x.length,1,x),g(T,-1,-1,x)}}}}return e},y=function(t){_()&&t&&(t.stopPropagation(),t.preventDefault())},b=function(){return(0,u.deferAction)(_)},x=function(t){var e=t.target,n=t.currentTarget;n.contains(e)||(d={observerNode:n,portaledElement:e})},w=function(){p=!0};l.mediumFocus.assignSyncMedium(x),l.mediumBlur.assignMedium(b),l.mediumEffect.assignMedium((function(t){return t({moveFocusInside:s.default,focusInside:s.focusInside})}));var T=(0,a.default)((function(t){return t.filter((function(t){return!t.disabled}))}),(function(t){var e=t.slice(-1)[0];e&&!h&&(document.addEventListener("focusin",y,!0),document.addEventListener("focusout",b),window.addEventListener("blur",w));var n=h,r=n&&e&&e.id===n.id;h=e,n&&!r&&(n.onDeactivation(),t.filter((function(t){return t.id===n.id})).length||n.returnFocus(!e)),e?(f=null,r&&n.observed===e.observed||e.onActivation(),_(),(0,u.deferAction)(_)):(document.removeEventListener("focusin",y,!0),document.removeEventListener("focusout",b),window.removeEventListener("blur",w),f=null)}))((function(){return null}));e.default=T},PqbK:function(t,e,n){"use strict";n("HAE/");var r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("QILm")),o=r(n("pVnL")),a=r(n("q1tI")),s=r(n("tUSV")),u=r(n("Pixb")),l=a.default.forwardRef((function(t,e){return a.default.createElement(s.default,(0,o.default)({sideCar:u.default,ref:e},t))})),c=s.default.propTypes||{},h=(c.sideCar,(0,i.default)(c,["sideCar"]));l.propTypes=h;var f=l;e.default=f},PtNZ:function(t,e,n){"use strict";n("HAE/");var r=n("284h"),i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("pVnL")),a=i(n("q1tI")),s=(i(n("17x9")),r(n("xCns"))),u=n("6lFR"),l=function(t){var e=t.disabled,n=t.children,r=t.className;return a.default.createElement("div",(0,o.default)({},(0,u.inlineProp)(s.FOCUS_AUTO,!e),{className:r}),n)};l.propTypes={},l.defaultProps={disabled:!1,className:void 0};var c=l;e.default=c},QILm:function(t,e,n){var r=n("8OQS");t.exports=function(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}},Qihw:function(t,e,n){"use strict";n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("8+KV"),n("HAE/");var r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0});var i={};e.default=void 0;var o=r(n("PqbK")),a=n("kbyB");Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(i,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}));var s=o.default;e.default=s},QkVE:function(t,e,n){n("bWfx");var r=n("EpBk");t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},QoRX:function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},QqLw:function(t,e,n){var r=n("tadb"),i=n("ebwN"),o=n("HOxn"),a=n("yGk4"),s=n("Of+w"),u=n("NykK"),l=n("3Fdi"),c=l(r),h=l(i),f=l(o),d=l(a),p=l(s),m=u;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=m},RIqP:function(t,e,n){var r=n("Ijbi"),i=n("EbDI"),o=n("Bnag");t.exports=function(t){return r(t)||i(t)||o()}},RXBc:function(t,e,n){"use strict";n.r(e);var r=n("q1tI"),i=n.n(r),o=(n("WLL4"),n("V+eJ"),n("KQm4")),a=(n("91GP"),n("o0o1")),s=n.n(a);n("eM6i"),n("ls82");function u(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,s,"next",t)}function s(t){u(o,r,i,a,s,"throw",t)}a(void 0)}))}}var c=n("ODXe"),h=(n("LK8F"),n("aUsF")),f=n.n(h);n("rGqo"),n("yt8O"),n("Btvt"),n("XfO3"),n("9AAn");function d(){return"undefined"==typeof document||void 0===document.visibilityState||"hidden"!==document.visibilityState}function p(){return void 0===navigator.onLine||navigator.onLine}var m=new Map;function g(t){return m.get(t)}function v(t,e){return m.set(t,e)}var _={},y={},b={},x={},w={};var T={onLoadingSlow:function(){},onSuccess:function(){},onError:function(){},onErrorRetry:function(t,e,n,r,i){if(d()){var o=Math.min(i.retryCount||0,8),a=~~((Math.random()+.5)*(1<<o))*n.errorRetryInterval;setTimeout(r,a,i)}},errorRetryInterval:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:3e3,refreshInterval:0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshWhenHidden:!1,refreshWhenOffline:!1,shouldRetryOnError:!0,suspense:!1};"undefined"!=typeof window&&navigator.connection&&-1!==["slow-2g","2g"].indexOf(navigator.connection.effectiveType)&&(T.errorRetryInterval=1e4,T.loadingTimeout=5e3);var A=!1;if("undefined"!=typeof window&&window.addEventListener&&!A){var S=function(){if(d()&&p())for(var t in b)b[t][0]&&b[t][0]()};window.addEventListener("visibilitychange",S,!1),window.addEventListener("focus",S,!1),A=!0}var E=T,k=(n("EK0E"),new WeakMap),M=0;function O(t,e){var n=!1;return function(){n||(n=!0,t.apply(void 0,arguments),setTimeout((function(){return n=!1}),e))}}var P=Object(r.createContext)({});P.displayName="SWRConfigContext";var z=P,R="undefined"==typeof window,L=R?r.useEffect:r.useLayoutEffect,C=function(t){return t?"err@"+t:""},j=function(t){var e=null;if("function"==typeof t)try{t=t()}catch(n){t=""}return Array.isArray(t)?(e=t,t=function(t){if(!t.length)return"";for(var e="arg",n=0;n<t.length;++n){var r=void 0;"object"!=typeof t[n]?r="string"==typeof t[n]?'"'+t[n]+'"':String(t[n]):k.has(t[n])?r=k.get(t[n]):(r=M,k.set(t[n],M++)),e+="@"+r}return e}(t)):t=String(t||""),[t,e]},I=function(t,e,n){var r=x[t];if(t&&r)for(var i=0;i<r.length;++i)r[i](!1,e,n)};z.Provider;var N=function(){var t,e,n={};arguments.length>=1&&(t=arguments.length<=0?void 0:arguments[0]),arguments.length>2?(e=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):"function"==typeof(arguments.length<=1?void 0:arguments[1])?e=arguments.length<=1?void 0:arguments[1]:"object"==typeof(arguments.length<=1?void 0:arguments[1])&&(n=arguments.length<=1?void 0:arguments[1]);var i=j(t),a=Object(c.a)(i,2),u=a[0],h=a[1],m=C(u);n=Object.assign({},E,Object(r.useContext)(z),n),void 0===e&&(e=n.fetcher);var T=g(u)||n.initialData,A=g(m),S=Object(r.useRef)({data:!1,error:!1,isValidating:!1}),k=Object(r.useRef)({data:T,error:A,isValidating:!1}),M=Object(r.useState)(null)[1],P=Object(r.useCallback)((function(t){var e=!1;for(var r in t)k.current[r]=t[r],S.current[r]&&(e=!0);(e||n.suspense)&&M({})}),[]),N=Object(r.useRef)(!1),D=Object(r.useRef)(u),F=Object(r.useCallback)(function(){var t=l(s.a.mark((function t(){var r,i,a,l,c,d,p,b=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=b.length>0&&void 0!==b[0]?b[0]:{},u&&e){t.next=3;break}return t.abrupt("return",!1);case 3:if(!N.current){t.next=5;break}return t.abrupt("return",!1);case 5:if(r=Object.assign({dedupe:!1},r),i=!0,a=void 0!==_[u]&&r.dedupe,t.prev=8,P({isValidating:!0}),!a){t.next=17;break}return c=y[u],t.next=14,_[u];case 14:l=t.sent,t.next=26;break;case 17:return _[u]&&(w[u]=Date.now()-1),n.loadingTimeout&&!g(u)&&setTimeout((function(){i&&n.onLoadingSlow(u,n)}),n.loadingTimeout),_[u]=null!==h?e.apply(void 0,Object(o.a)(h)):e(u),y[u]=c=Date.now(),setTimeout((function(){delete _[u],delete y[u]}),n.dedupingInterval),t.next=24,_[u];case 24:l=t.sent,n.onSuccess(l,u,n);case 26:if(!(w[u]&&c<=w[u])){t.next=29;break}return P({isValidating:!1}),t.abrupt("return",!1);case 29:v(u,l),v(m,void 0),D.current=u,d={isValidating:!1},void 0!==k.current.error&&(d.error=void 0),f()(k.current.data,l)||(d.data=l),P(d),a||I(u,l,void 0),t.next=48;break;case 39:t.prev=39,t.t0=t.catch(8),delete _[u],delete y[u],v(m,t.t0),D.current=u,k.current.error!==t.t0&&(P({isValidating:!1,error:t.t0}),a||I(u,void 0,t.t0)),n.onError(t.t0,u,n),n.shouldRetryOnError&&(p=(r.retryCount||0)+1,n.onErrorRetry(t.t0,u,n,F,Object.assign({dedupe:!0},r,{retryCount:p})));case 48:return i=!1,t.abrupt("return",!0);case 50:case"end":return t.stop()}}),t,null,[[8,39]])})));return function(){return t.apply(this,arguments)}}(),[u]);if(L((function(){if(u){N.current=!1;var t=k.current.data,e=g(u)||n.initialData;D.current===u&&f()(t,e)||(P({data:e}),D.current=u);var r,i=function(){return F({dedupe:!0})};n.initialData||(void 0!==e&&!R&&window.requestIdleCallback?window.requestIdleCallback(i):i()),n.revalidateOnFocus&&(r=O(i,n.focusThrottleInterval),b[u]?b[u].push(r):b[u]=[r]);var o=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o={},a=!1;return void 0===e||f()(k.current.data,e)||(o.data=e,a=!0),k.current.error!==n&&(o.error=n,a=!0),a&&P(o),D.current=u,!!t&&(r?i():F())};x[u]?x[u].push(o):x[u]=[o];var a=null;return n.revalidateOnReconnect&&(a=addEventListener("online",i)),function(){if(P=function(){return null},N.current=!0,r&&b[u]){var t=b[u],e=t.indexOf(r);e>=0&&(t[e]=t[t.length-1],t.pop())}if(x[u]){var n=x[u],i=n.indexOf(o);i>=0&&(n[i]=n[n.length-1],n.pop())}null!==a&&removeEventListener("online",a)}}}),[u,F]),L((function(){var t=null,e=function(){var r=l(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(k.current.error||!n.refreshWhenHidden&&!d()||n.refreshWhenOffline||!p()){r.next=3;break}return r.next=3,F({dedupe:!0});case 3:n.refreshInterval&&(t=setTimeout(e,n.refreshInterval));case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return n.refreshInterval&&(t=setTimeout(e,n.refreshInterval)),function(){t&&clearTimeout(t)}}),[n.refreshInterval,n.refreshWhenHidden,n.refreshWhenOffline,F]),n.suspense){if(R)throw new Error("Suspense on server side is not yet supported!");var B=g(u),U=g(m);if(void 0===B&&void 0===U){if(_[u]||F(),_[u]&&"function"==typeof _[u].then)throw _[u];B=_[u]}if(void 0===B&&U)throw U;return{error:U,data:B,revalidate:F,isValidating:k.current.isValidating}}return Object(r.useMemo)((function(){var t={revalidate:F};return Object.defineProperties(t,{error:{get:function(){return S.current.error=!0,D.current===u?k.current.error:A}},data:{get:function(){return S.current.data=!0,D.current===u?k.current.data:T}},isValidating:{get:function(){return S.current.isValidating=!0,k.current.isValidating}}}),t}),[F])},D=(n("Z2Ku"),n("8+KV"),n("2Spj"),n("f3/d"),n("HAE/"),n("jm62"),n("0l/t"),n("ioFf"),n("RW0V"),n("lSNA")),F=n.n(D),B=n("4qRI"),U=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,G=Object(B.a)((function(t){return U.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),V=n("qKvR"),Z=n("SIPS"),W=n("MiSq"),q=G,H=function(t){return"theme"!==t&&"innerRef"!==t},Y=function(t){return"string"==typeof t&&t.charCodeAt(0)>96?q:H};function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K=function t(e,n){var i,o,a;void 0!==n&&(i=n.label,a=n.target,o=e.__emotion_forwardProp&&n.shouldForwardProp?function(t){return e.__emotion_forwardProp(t)&&n.shouldForwardProp(t)}:n.shouldForwardProp);var s=e.__emotion_real===e,u=s&&e.__emotion_base||e;"function"!=typeof o&&s&&(o=e.__emotion_forwardProp);var l=o||Y(u),c=!l("as");return function(){var h=arguments,f=s&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==i&&f.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)f.push.apply(f,h);else{0,f.push(h[0][0]);for(var d=h.length,p=1;p<d;p++)f.push(h[p],h[0][p])}var m=Object(V.f)((function(t,e,n){return Object(r.createElement)(V.b.Consumer,null,(function(i){var s=c&&t.as||u,h="",d=[],p=t;if(null==t.theme){for(var m in p={},t)p[m]=t[m];p.theme=i}"string"==typeof t.className?h=Object(Z.a)(e.registered,d,t.className):null!=t.className&&(h=t.className+" ");var g=Object(W.a)(f.concat(d),e.registered,p);Object(Z.b)(e,g,"string"==typeof s);h+=e.key+"-"+g.name,void 0!==a&&(h+=" "+a);var v=c&&void 0===o?Y(s):l,_={};for(var y in t)c&&"as"===y||v(y)&&(_[y]=t[y]);return _.className=h,_.ref=n||t.innerRef,Object(r.createElement)(s,_)}))}));return m.displayName=void 0!==i?i:"Styled("+("string"==typeof u?u:u.displayName||u.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=u,m.__emotion_styles=f,m.__emotion_forwardProp=o,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(e,r){return t(e,void 0!==r?$({},n||{},{},r):n).apply(void 0,f)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){K[t]=K(t)}));var J=K,Q=(n("Oyvg"),n("KKXr"),n("bWfx"),n("Vd3H"),n("MgzW")),tt=n.n(Q),et=function(t,e){var n=tt()({},t,e);for(var r in t){var i;t[r]&&"object"==typeof e[r]&&tt()(n,((i={})[r]=tt()(t[r],e[r]),i))}return n},nt={breakpoints:[40,52,64].map((function(t){return t+"em"}))},rt=function(t){return"@media screen and (min-width: "+t+")"},it=function(t,e){return ot(e,t,t)},ot=function(t,e,n,r,i){for(e=e&&e.split?e.split("."):[e],r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t},at=function t(e){var n={},r=function(t){var r,i,o={},a=!1,s=t.theme&&t.theme.disableStyledSystemCache;for(var u in t)if(e[u]){var l=e[u],c=t[u],h=ot(t.theme,l.scale,l.defaults);if("object"!=typeof c)tt()(o,l(c,h,t));else{if(n.breakpoints=!s&&n.breakpoints||ot(t.theme,"breakpoints",nt.breakpoints),Array.isArray(c)){n.media=!s&&n.media||[null].concat(n.breakpoints.map(rt)),o=et(o,st(n.media,l,h,c,t));continue}null!==c&&(o=et(o,ut(n.breakpoints,l,h,c,t)),a=!0)}}return a&&(r=o,i={},Object.keys(r).sort((function(t,e){return t.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})})).forEach((function(t){i[t]=r[t]})),o=i),o};r.config=e,r.propNames=Object.keys(e),r.cache=n;var i=Object.keys(e).filter((function(t){return"config"!==t}));return i.length>1&&i.forEach((function(n){var i;r[n]=t(((i={})[n]=e[n],i))})),r},st=function(t,e,n,r,i){var o={};return r.slice(0,t.length).forEach((function(r,a){var s,u=t[a],l=e(r,n,i);u?tt()(o,((s={})[u]=tt()({},o[u],l),s)):tt()(o,l)})),o},ut=function(t,e,n,r,i){var o={};for(var a in r){var s=t[a],u=e(r[a],n,i);if(s){var l,c=rt(s);tt()(o,((l={})[c]=tt()({},o[c],u),l))}else tt()(o,u)}return o},lt=function(t){var e=t.properties,n=t.property,r=t.scale,i=t.transform,o=void 0===i?it:i,a=t.defaultScale;e=e||[n];var s=function(t,n,r){var i={},a=o(t,n,r);if(null!==a)return e.forEach((function(t){i[t]=a})),i};return s.scale=r,s.defaults=a,s},ct=function(t){void 0===t&&(t={});var e={};return Object.keys(t).forEach((function(n){var r=t[n];e[n]=!0!==r?"function"!=typeof r?lt(r):r:lt({property:n,scale:n})})),at(e)},ht=function(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){e&&e.config&&tt()(t,e.config)}));var i=at(t);return i},ft=ct({width:{property:"width",scale:"sizes",transform:function(t,e){return ot(e,t,!function(t){return"number"==typeof t&&!isNaN(t)}(t)||t>1?t:100*t+"%")}},height:{property:"height",scale:"sizes"},minWidth:{property:"minWidth",scale:"sizes"},minHeight:{property:"minHeight",scale:"sizes"},maxWidth:{property:"maxWidth",scale:"sizes"},maxHeight:{property:"maxHeight",scale:"sizes"},size:{properties:["width","height"],scale:"sizes"},overflow:!0,overflowX:!0,overflowY:!0,display:!0,verticalAlign:!0}),dt=ft,pt={color:{property:"color",scale:"colors"},backgroundColor:{property:"backgroundColor",scale:"colors"},opacity:!0};pt.bg=pt.backgroundColor;var mt,gt=ct(pt),vt=gt,_t=ct({fontFamily:{property:"fontFamily",scale:"fonts"},fontSize:{property:"fontSize",scale:"fontSizes",defaultScale:[12,14,16,20,24,32,48,64,72]},fontWeight:{property:"fontWeight",scale:"fontWeights"},lineHeight:{property:"lineHeight",scale:"lineHeights"},letterSpacing:{property:"letterSpacing",scale:"letterSpacings"},textAlign:!0,fontStyle:!0}),yt=_t,bt=ct({alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:!0,flex:!0,flexGrow:!0,flexShrink:!0,flexBasis:!0,justifySelf:!0,alignSelf:!0,order:!0}),xt=bt,wt={space:[0,4,8,16,32,64,128,256,512]},Tt=ct({gridGap:{property:"gridGap",scale:"space",defaultScale:wt.space},gridColumnGap:{property:"gridColumnGap",scale:"space",defaultScale:wt.space},gridRowGap:{property:"gridRowGap",scale:"space",defaultScale:wt.space},gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridAutoRows:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0}),At=Tt,St=ct(((mt={border:{property:"border",scale:"borders"},borderWidth:{property:"borderWidth",scale:"borderWidths"},borderStyle:{property:"borderStyle",scale:"borderStyles"},borderColor:{property:"borderColor",scale:"colors"},borderRadius:{property:"borderRadius",scale:"radii"},borderTop:{property:"borderTop",scale:"borders"},borderTopLeftRadius:{property:"borderTopLeftRadius",scale:"radii"},borderTopRightRadius:{property:"borderTopRightRadius",scale:"radii"},borderRight:{property:"borderRight",scale:"borders"},borderBottom:{property:"borderBottom",scale:"borders"},borderBottomLeftRadius:{property:"borderBottomLeftRadius",scale:"radii"},borderBottomRightRadius:{property:"borderBottomRightRadius",scale:"radii"},borderLeft:{property:"borderLeft",scale:"borders"},borderX:{properties:["borderLeft","borderRight"],scale:"borders"},borderY:{properties:["borderTop","borderBottom"],scale:"borders"},borderTopWidth:{property:"borderTopWidth",scale:"borderWidths"},borderTopColor:{property:"borderTopColor",scale:"colors"},borderTopStyle:{property:"borderTopStyle",scale:"borderStyles"}}).borderTopLeftRadius={property:"borderTopLeftRadius",scale:"radii"},mt.borderTopRightRadius={property:"borderTopRightRadius",scale:"radii"},mt.borderBottomWidth={property:"borderBottomWidth",scale:"borderWidths"},mt.borderBottomColor={property:"borderBottomColor",scale:"colors"},mt.borderBottomStyle={property:"borderBottomStyle",scale:"borderStyles"},mt.borderBottomLeftRadius={property:"borderBottomLeftRadius",scale:"radii"},mt.borderBottomRightRadius={property:"borderBottomRightRadius",scale:"radii"},mt.borderLeftWidth={property:"borderLeftWidth",scale:"borderWidths"},mt.borderLeftColor={property:"borderLeftColor",scale:"colors"},mt.borderLeftStyle={property:"borderLeftStyle",scale:"borderStyles"},mt.borderRightWidth={property:"borderRightWidth",scale:"borderWidths"},mt.borderRightColor={property:"borderRightColor",scale:"colors"},mt.borderRightStyle={property:"borderRightStyle",scale:"borderStyles"},mt)),Et=St,kt={background:!0,backgroundImage:!0,backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0};kt.bgImage=kt.backgroundImage,kt.bgSize=kt.backgroundSize,kt.bgPosition=kt.backgroundPosition,kt.bgRepeat=kt.backgroundRepeat;var Mt=ct(kt),Ot=Mt,Pt={space:[0,4,8,16,32,64,128,256,512]},zt=ct({position:!0,zIndex:{property:"zIndex",scale:"zIndices"},top:{property:"top",scale:"space",defaultScale:Pt.space},right:{property:"right",scale:"space",defaultScale:Pt.space},bottom:{property:"bottom",scale:"space",defaultScale:Pt.space},left:{property:"left",scale:"space",defaultScale:Pt.space}}),Rt=zt,Lt={space:[0,4,8,16,32,64,128,256,512]},Ct=function(t){return"number"==typeof t&&!isNaN(t)},jt=function(t,e){if(!Ct(t))return ot(e,t,t);var n=t<0,r=Math.abs(t),i=ot(e,r,r);return Ct(i)?i*(n?-1:1):n?"-"+i:i},It={};It.margin={margin:{property:"margin",scale:"space",transform:jt,defaultScale:Lt.space},marginTop:{property:"marginTop",scale:"space",transform:jt,defaultScale:Lt.space},marginRight:{property:"marginRight",scale:"space",transform:jt,defaultScale:Lt.space},marginBottom:{property:"marginBottom",scale:"space",transform:jt,defaultScale:Lt.space},marginLeft:{property:"marginLeft",scale:"space",transform:jt,defaultScale:Lt.space},marginX:{properties:["marginLeft","marginRight"],scale:"space",transform:jt,defaultScale:Lt.space},marginY:{properties:["marginTop","marginBottom"],scale:"space",transform:jt,defaultScale:Lt.space}},It.margin.m=It.margin.margin,It.margin.mt=It.margin.marginTop,It.margin.mr=It.margin.marginRight,It.margin.mb=It.margin.marginBottom,It.margin.ml=It.margin.marginLeft,It.margin.mx=It.margin.marginX,It.margin.my=It.margin.marginY,It.padding={padding:{property:"padding",scale:"space",defaultScale:Lt.space},paddingTop:{property:"paddingTop",scale:"space",defaultScale:Lt.space},paddingRight:{property:"paddingRight",scale:"space",defaultScale:Lt.space},paddingBottom:{property:"paddingBottom",scale:"space",defaultScale:Lt.space},paddingLeft:{property:"paddingLeft",scale:"space",defaultScale:Lt.space},paddingX:{properties:["paddingLeft","paddingRight"],scale:"space",defaultScale:Lt.space},paddingY:{properties:["paddingTop","paddingBottom"],scale:"space",defaultScale:Lt.space}},It.padding.p=It.padding.padding,It.padding.pt=It.padding.paddingTop,It.padding.pr=It.padding.paddingRight,It.padding.pb=It.padding.paddingBottom,It.padding.pl=It.padding.paddingLeft,It.padding.px=It.padding.paddingX,It.padding.py=It.padding.paddingY;var Nt,Dt=ht(ct(It.margin),ct(It.padding)),Ft=ct({boxShadow:{property:"boxShadow",scale:"shadows"},textShadow:{property:"textShadow",scale:"shadows"}});n("DNiP"),n("bHtr");function Bt(){return(Bt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var Ut=function(t,e,n,r,i){for(e=e&&e.split?e.split("."):[e],r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t},Gt=[40,52,64].map((function(t){return t+"em"})),Vt={space:[0,4,8,16,32,64,128,256,512],fontSizes:[12,14,16,20,24,32,48,64,72]},Zt={bg:"backgroundColor",m:"margin",mt:"marginTop",mr:"marginRight",mb:"marginBottom",ml:"marginLeft",mx:"marginX",my:"marginY",p:"padding",pt:"paddingTop",pr:"paddingRight",pb:"paddingBottom",pl:"paddingLeft",px:"paddingX",py:"paddingY"},Wt={marginX:["marginLeft","marginRight"],marginY:["marginTop","marginBottom"],paddingX:["paddingLeft","paddingRight"],paddingY:["paddingTop","paddingBottom"],size:["width","height"]},qt=((Nt={color:"colors",backgroundColor:"colors",borderColor:"colors",margin:"space",marginTop:"space",marginRight:"space",marginBottom:"space",marginLeft:"space",marginX:"space",marginY:"space",padding:"space",paddingTop:"space",paddingRight:"space",paddingBottom:"space",paddingLeft:"space",paddingX:"space",paddingY:"space",top:"space",right:"space",bottom:"space",left:"space",gridGap:"space",gridColumnGap:"space",gridRowGap:"space",gap:"space",columnGap:"space",rowGap:"space",fontFamily:"fonts",fontSize:"fontSizes",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",border:"borders",borderTop:"borders",borderRight:"borders",borderBottom:"borders",borderLeft:"borders",borderWidth:"borderWidths",borderStyle:"borderStyles",borderRadius:"radii",borderTopRightRadius:"radii",borderTopLeftRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",borderTopWidth:"borderWidths",borderTopColor:"colors",borderTopStyle:"borderStyles"}).borderTopLeftRadius="radii",Nt.borderTopRightRadius="radii",Nt.borderBottomWidth="borderWidths",Nt.borderBottomColor="colors",Nt.borderBottomStyle="borderStyles",Nt.borderBottomLeftRadius="radii",Nt.borderBottomRightRadius="radii",Nt.borderLeftWidth="borderWidths",Nt.borderLeftColor="colors",Nt.borderLeftStyle="borderStyles",Nt.borderRightWidth="borderWidths",Nt.borderRightColor="colors",Nt.borderRightStyle="borderStyles",Nt.outlineColor="colors",Nt.boxShadow="shadows",Nt.textShadow="shadows",Nt.zIndex="zIndices",Nt.width="sizes",Nt.minWidth="sizes",Nt.maxWidth="sizes",Nt.height="sizes",Nt.minHeight="sizes",Nt.maxHeight="sizes",Nt.flexBasis="sizes",Nt.size="sizes",Nt.fill="colors",Nt.stroke="colors",Nt),Ht=function(t,e){if("number"!=typeof e||e>=0)return Ut(t,e,e);var n=Math.abs(e),r=Ut(t,n,n);return"string"==typeof r?"-"+r:-1*r},Yt=["margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","top","bottom","left","right"].reduce((function(t,e){var n;return Bt({},t,((n={})[e]=Ht,n))}),{}),Xt=function t(e){return function(n){void 0===n&&(n={});var r=Bt({},Vt,{},n.theme||n),i={},o=function(t){return function(e){var n={},r=Ut(e,"breakpoints",Gt),i=[null].concat(r.map((function(t){return"@media screen and (min-width: "+t+")"})));for(var o in t){var a="function"==typeof t[o]?t[o](e):t[o];if(null!=a)if(Array.isArray(a))for(var s=0;s<a.slice(0,i.length).length;s++){var u=i[s];null!=a[s]&&(u?(n[u]=n[u]||{},n[u][o]=a[s]):n[o]=a[s])}else n[o]=a}return n}}("function"==typeof e?e(r):e)(r);for(var a in o){var s=o[a],u="function"==typeof s?s(r):s;if("variant"!==a)if(u&&"object"==typeof u)i[a]=t(u)(r);else{var l=Ut(Zt,a,a),c=Ut(qt,l),h=Ut(r,c,Ut(r,l,{})),f=Ut(Yt,l,Ut)(h,u,u);if(Wt[l])for(var d=Wt[l],p=0;p<d.length;p++)i[d[p]]=f;else i[l]=f}else i=Bt({},i,{},t(Ut(r,u))(r))}return i}},$t=function(t){var e,n,r=t.scale,i=t.prop,o=void 0===i?"variant":i,a=t.variants,s=void 0===a?{}:a,u=t.key;(n=Object.keys(s).length?function(t,e,n){return Xt(ot(e,t,null))(n.theme)}:function(t,e){return ot(e,t,null)}).scale=r||u,n.defaults=s;var l=((e={})[o]=n,e);return at(l)},Kt=$t({key:"buttons"}),Jt=$t({key:"textStyles",prop:"textStyle"}),Qt=$t({key:"colorStyles",prop:"colors"}),te=(dt.width,dt.height,dt.minWidth,dt.minHeight,dt.maxWidth,dt.maxHeight,dt.size,dt.verticalAlign,dt.display,dt.overflow,dt.overflowX,dt.overflowY,vt.opacity,yt.fontSize,yt.fontFamily,yt.fontWeight,yt.lineHeight,yt.textAlign,yt.fontStyle,yt.letterSpacing,xt.alignItems,xt.alignContent,xt.justifyItems,xt.justifyContent,xt.flexWrap,xt.flexDirection,xt.flex,xt.flexGrow,xt.flexShrink,xt.flexBasis,xt.justifySelf,xt.alignSelf,xt.order,At.gridGap,At.gridColumnGap,At.gridRowGap,At.gridColumn,At.gridRow,At.gridAutoFlow,At.gridAutoColumns,At.gridAutoRows,At.gridTemplateColumns,At.gridTemplateRows,At.gridTemplateAreas,At.gridArea,Et.borderWidth,Et.borderStyle,Et.borderColor,Et.borderTop,Et.borderRight,Et.borderBottom,Et.borderLeft,Et.borderRadius,Ot.backgroundImage,Ot.backgroundSize,Ot.backgroundPosition,Ot.backgroundRepeat,Rt.zIndex,Rt.top,Rt.right,Rt.bottom,Rt.left,ht(Dt,_t,gt,ft,bt,St,Mt,zt,Tt,Ft,Kt,Jt,Qt).propNames),ee=function(t){var e=new RegExp("^("+t.join("|")+")$");return Object(B.a)((function(t){return G(t)&&!e.test(t)}))};ee(te),n("L9s1");function ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ne(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ie={roundedTop:{properties:["borderTopLeftRadius","borderTopRightRadius"],scale:"radii"},roundedBottom:{properties:["borderBottomLeftRadius","borderBottomRightRadius"],scale:"radii"},roundedLeft:{properties:["borderTopLeftRadius","borderBottomLeftRadius"],scale:"radii"},roundedRight:{properties:["borderTopRightRadius","borderBottomRightRadius"],scale:"radii"},roundedTopRight:{property:"borderTopRightRadius",scale:"radii"},roundedTopLeft:{property:"borderTopLeftRadius",scale:"radii"},roundedBottomRight:{property:"borderBottomRightRadius",scale:"radii"},roundedBottomLeft:{property:"borderBottomLeftRadius",scale:"radii"},rounded:{property:"borderRadius",scale:"radii"},d:{property:"display"},w:{property:"width",scale:"sizes"},minW:{property:"minWidth",scale:"sizes"},maxW:{property:"maxWidth",scale:"sizes"},h:{property:"height",scale:"sizes"},minH:{property:"minHeight",scale:"sizes"},maxH:{property:"maxHeight",scale:"sizes"},bgImg:{property:"backgroundImage"},bgImage:{property:"backgroundImage"},bgSize:{property:"backgroundSize"},bgPos:{property:"backgroundPosition"},bgRepeat:{property:"backgroundRepeat"},pos:{property:"position"},flexDir:{property:"flexDirection"},shadow:{property:"boxShadow",scale:"shadows"},textDecoration:{property:"textDecoration"},overflowX:!0,overflowY:!0,textTransform:!0,animation:!0,appearance:!0,transform:!0,transformOrigin:!0,visibility:!0,whiteSpace:!0,userSelect:!0,pointerEvents:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,boxSizing:!0,cursor:!0,resize:!0,transition:!0,listStyleType:!0,listStylePosition:!0,listStyleImage:!0,fill:{property:"fill",scale:"colors"},stroke:{property:"stroke",scale:"colors"},objectFit:!0,objectPosition:!0,backgroundAttachment:{property:"backgroundAttachment"},outline:!0,float:!0,willChange:!0};ie.bgAttachment=ie.backgroundAttachment,ie.textDecor=ie.textDecoration,ie.listStylePos=ie.listStylePosition,ie.listStyleImg=ie.listStyleImage;var oe=ct(ie),ae=function(t,e){var n=Object.keys(ie),r={};if(n.includes(t)){var i=ie[t],o=i.properties,a=i.property;o&&o.forEach((function(t){return r[t]=e})),a&&(r[a]=e),!0===ie[t]&&(r[t]=e)}else r[t]=e;return r},se=function t(e){var n={};for(var r in e){var i;if("object"==typeof e[r])n=re({},n,((i={})[r]=t(e[r]),i));else n=re({},n,{},ae(r,e[r]))}return n},ue=ht(ft,gt,Dt,Mt,St,Tt,zt,Ft,_t,bt,oe),le=ee([].concat(te,["d","textDecoration","pointerEvents","visibility","transform","cursor","fill","stroke"])),ce=["htmlWidth","htmlHeight"],he=J("div",{shouldForwardProp:function(t){return!!ce.includes(t)||le(t)}})((function(t){if(t.isTruncated)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),ue);he.displayName="Box";var fe=he,de=n("pVnL"),pe=n.n(de),me=n("8OQS"),ge=n.n(me),ve={"2xl":["4xl",null,"5xl"],xl:["3xl",null,"4xl"],lg:["xl",null,"2xl"],md:"xl",sm:"md",xs:"sm"},_e=Object(r.forwardRef)((function(t,e){var n=t.size,r=void 0===n?"xl":n,i=ge()(t,["size"]);return Object(V.d)(fe,pe()({ref:e,as:"h2",fontSize:ve[r],lineHeight:"shorter",fontWeight:"bold",fontFamily:"heading"},i))}));_e.displayName="Heading";var ye=_e,be=i.a.forwardRef((function(t,e){return i.a.createElement(fe,pe()({ref:e,as:"p",fontFamily:"body"},t))}));be.displayName="Text";var xe=be,we=Object(r.forwardRef)((function(t,e){var n=t.align,r=t.justify,o=t.wrap,a=t.direction,s=ge()(t,["align","justify","wrap","direction"]);return i.a.createElement(fe,pe()({ref:e,display:"flex",flexDirection:a,alignItems:n,justifyContent:r,flexWrap:o},s))}));we.displayName="Flex";var Te=we;function Ae(){return(Ae=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var Se=function(t,e,n,r,i){for(e=e&&e.split?e.split("."):[e],r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t},Ee=[40,52,64].map((function(t){return t+"em"})),ke={space:[0,4,8,16,32,64,128,256,512],fontSizes:[12,14,16,20,24,32,48,64,72]},Me={bg:"backgroundColor",m:"margin",mt:"marginTop",mr:"marginRight",mb:"marginBottom",ml:"marginLeft",mx:"marginX",my:"marginY",p:"padding",pt:"paddingTop",pr:"paddingRight",pb:"paddingBottom",pl:"paddingLeft",px:"paddingX",py:"paddingY"},Oe={marginX:["marginLeft","marginRight"],marginY:["marginTop","marginBottom"],paddingX:["paddingLeft","paddingRight"],paddingY:["paddingTop","paddingBottom"]},Pe={color:"colors",backgroundColor:"colors",borderColor:"colors",margin:"space",marginTop:"space",marginRight:"space",marginBottom:"space",marginLeft:"space",marginX:"space",marginY:"space",padding:"space",paddingTop:"space",paddingRight:"space",paddingBottom:"space",paddingLeft:"space",paddingX:"space",paddingY:"space",top:"space",right:"space",bottom:"space",left:"space",gridGap:"space",gridColumnGap:"space",gridRowGap:"space",gap:"space",columnGap:"space",rowGap:"space",fontFamily:"fonts",fontSize:"fontSizes",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",border:"borders",borderTop:"borders",borderRight:"borders",borderBottom:"borders",borderLeft:"borders",borderWidth:"borderWidths",borderStyle:"borderStyles",borderRadius:"radii",borderTopRightRadius:"radii",borderTopLeftRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",zIndex:"zIndices",width:"sizes",minWidth:"sizes",maxWidth:"sizes",height:"sizes",minHeight:"sizes",maxHeight:"sizes"},ze=function(t,e){if("number"!=typeof e||e>=0)return Se(t,e,e);var n=Math.abs(e),r=Se(t,n,n);return"string"==typeof r?"-"+r:-1*r},Re=["margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","top","bottom","left","right"].reduce((function(t,e){var n;return Ae({},t,((n={})[e]=ze,n))}),{}),Le=function t(e){return function(n){void 0===n&&(n={});var r=Ae({},ke,n.theme||n),i={},o=function(t){return function(e){var n={},r=Se(e,"breakpoints",Ee),i=[null].concat(r.map((function(t){return"@media screen and (min-width: "+t+")"})));for(var o in t){var a=t[o];if(null!=a)if(Array.isArray(a))for(var s=0;s<a.length;s++){var u=i[s];null!=a[s]&&(u?(n[u]=n[u]||{},n[u][o]=a[s]):n[o]=a[s])}else n[o]=a}return n}}("function"==typeof e?e(r):e)(r);for(var a in o){var s=Se(Me,a,a),u=Se(Pe,s),l=Se(r,u,Se(r,s,{})),c=o[a],h="function"==typeof c?c(r):c;if("variant"!==a)if(h&&"object"==typeof h)i[s]=t(h)(r);else{var f=Se(Re,s,Se)(l,h,h);if(Oe[s])for(var d=Oe[s],p=0;p<d.length;p++)i[d[p]]=f;else i[s]=f}else i=Ae({},i,t(Se(r,h))(r))}return i}},Ce=J(fe)((function(t){var e,n=t._after,r=t._focus,i=t._selected,o=t._focusWithin,a=t._hover,s=t._invalid,u=t._active,l=t._disabled,c=t._grabbed,h=t._pressed,f=t._expanded,d=t._visited,p=t._before,m=t._readOnly,g=t._first,v=t._notFirst,_=t._notLast,y=t._last,b=t._placeholder,x=t._checked,w=t._groupHover,T=t._mixed,A=t._odd,S=t._even;return Le(((e={})["&:hover"]=se(a),e["&:focus"]=se(r),e["&:active, &[data-active=true]"]=se(u),e["&:visited"]=se(d),e["&:disabled, &:disabled:focus, &:disabled:hover, &[aria-disabled=true], &[aria-disabled=true]:focus, &[aria-disabled=true]:hover"]=se(l),e["&[aria-selected=true]"]=se(i),e["&[aria-invalid=true]"]=se(s),e["&[aria-expanded=true]"]=se(f),e["&[aria-grabbed=true]"]=se(c),e["&[aria-readonly=true], &[readonly]"]=se(m),e["&:first-of-type"]=se(g),e["&:not(:first-of-type)"]=se(v),e["&:not(:last-of-type)"]=se(_),e["&:last-of-type"]=se(y),e["&:nth-of-type(odd)"]=se(A),e["&:nth-of-type(even)"]=se(S),e["&[aria-checked=mixed]"]=se(T),e["&[aria-checked=true]"]=se(x),e["&[aria-pressed=true]"]=se(h),e["[role=group]:hover &"]=se(w),e["&:before"]=se(p),e["&:after"]=se(n),e["&:focus-within"]=se(o),e["&::placeholder"]=b,e))}));Ce.displayName="PseudoBox";var je=Ce,Ie={transition:"all 0.15s ease-out",cursor:"pointer",textDecoration:"none",outline:"none",_focus:{boxShadow:"outline"},_disabled:{opacity:"0.4",cursor:"not-allowed",textDecoration:"none"}},Ne=Object(r.forwardRef)((function(t,e){var n=t.isDisabled,r=t.isExternal,i=t.onClick,o=ge()(t,["isDisabled","isExternal","onClick"]),a=r?{target:"_blank",rel:"noopener noreferrer"}:null;return Object(V.d)(je,pe()({as:"a",ref:e,tabIndex:n?-1:void 0,"aria-disabled":n,onClick:n?function(t){return t.preventDefault()}:i,_hover:{textDecoration:"underline"}},a,Ie,o))}));Ne.displayName="Link";var De=Ne,Fe=n("cOp2"),Be=n.n(Fe);function Ue(){var t=Be()(["\n  flex-shrink: 0;\n  backface-visibility: hidden;\n  &:not(:root) {\n    overflow: hidden;\n  }\n"]);return Ue=function(){return t},t}var Ge=J(fe)(Ue()),Ve=Object(r.forwardRef)((function(t,e){var n=t.size,i=void 0===n?"1em":n,o=t.name,a=t.color,s=void 0===a?"currentColor":a,u=t.role,l=void 0===u?"presentation":u,c=t.focusable,h=void 0!==c&&c,f=ge()(t,["size","name","color","role","focusable"]),d=Object(r.useContext)(V.b).icons,p=d["question-outline"],m=null==d[o]?p.path:d[o].path,g=(null==d[o]?p.viewBox:d[o].viewBox)||"0 0 24 24";return Object(V.d)(Ge,pe()({ref:e,as:"svg",size:i,color:s,display:"inline-block",verticalAlign:"middle",viewBox:g,focusable:h,role:l},f),m)}));Ve.displayName="Icon";var Ze=Ve;function We(t){return fetch(t).then((function(t){return t.json()}))}n("25dN");var qe="undefined"==typeof window?r.useEffect:r.useLayoutEffect;var He=function(t){var e,n=[],i=0,o=function(t){var r="function"==typeof t?t(e):t;r!==e&&(e=Object.assign({},e,r),n.forEach((function(t){return t.callback()})))},a=function(){return e},s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;return{callback:function(){},currentSlice:n(e),equalityFn:r,errored:!1,index:i++,listener:t,selector:n}},u=function(t){return t.callback=function(){try{var n=t.selector(e);t.equalityFn(t.currentSlice,n)||t.listener(t.currentSlice=n)}catch(r){t.errored=!0,t.listener(null,r)}},n[t.index]=t,function(){i=0,n=n.filter((function(e){if(e!==t)return t.index=i++,!0}))}},l={setState:o,getState:a,subscribe:function(t,e,n){return u(s(t,e,n))},destroy:function(){return n=[]}};return e=t(o,a,l),[function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,i=Object(r.useReducer)((function(t){return t+1}),0)[1],o=Object(r.useRef)();o.current||(o.current=s(i,t,n));var l,c=o.current,h=!1;return(c.selector!==t||c.equalityFn!==n||c.errored)&&(l=t(e),h=!n(c.currentSlice,l)),qe((function(){h&&(c.currentSlice=l),c.selector=t,c.equalityFn=n,c.errored=!1})),qe((function(){return u(c)}),[]),h?l:c.currentSlice},l]},Ye=He((function(t){return{center:[0,0],updateCenter:function(e){return t((function(){return{center:e}}))}}}))[0],Xe=He((function(t){return{mapFocus:null,mapZoom:null,mapFocusData:null,updateMapFocus:function(e,n,r){return t((function(){return{mapFocus:e,mapFocusData:n,mapZoom:r}}))}}}))[0],$e=He((function(t){return{currentTab:1,updateTab:function(e){return t((function(){return{currentTab:e}}))}}}))[0],Ke=He((function(t){return{currentDate:null,updateDate:function(e){return t((function(){return{currentDate:e}}))}}}))[0],Je=He((function(t){return{currentDataType:0,updateDataType:function(e){return t((function(){return{currentDataType:e}}))}}}))[0],Qe=Ye,tn=0,en=function(){var t=Object(r.useState)(null),e=t[0],n=t[1];return Object(r.useEffect)((function(){return n(++tn)}),[]),e},nn=(n("HEwt"),n("CjxU")),rn=function(t,e){if(null!=t)if("function"==typeof t)t(e);else try{t.current=e}catch(n){throw new Error('Cannot assign value "'+e+'" to ref "'+t+'"')}},on=["a[href]","area[href]","button:not([disabled])","embed","iframe","input:not([disabled])","object","select:not([disabled])","textarea:not([disabled])","*[tabindex]:not([aria-disabled])","*[contenteditable]"].join();function an(t,e){"function"==typeof t?t(e):t&&(t.current=e)}function sn(t,e){return Object(r.useMemo)((function(){return null==t&&null==e?null:function(n){an(t,n),an(e,n)}}),[t,e])}var un="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,ln=function(t,e){return function(n){if(t&&t(n),!n.defaultPrevented)return e(n)}};function cn(t,e){Object(nn.b)()}var hn=n("mf32");function fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fn(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pn={display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center",transition:"all 0.2s",_focus:{zIndex:"1",boxShadow:"outline"}},mn={_disabled:{opacity:.4,cursor:"not-allowed"}},gn=function(t){switch(t.variant){case"line":return{tabList:{borderBottom:"2px",borderColor:"inherit"},tab:{borderBottom:"2px",borderColor:"transparent",mb:"-2px",_selected:{color:{light:(n=(e=t).color)+".600",dark:n+".300"}[e.colorMode],borderColor:"currentColor"},_active:{bg:"gray.200"},_disabled:{opacity:.4,cursor:"not-allowed"}}};case"enclosed":return function(t){var e=t.color,n=t.colorMode,r={light:e+".600",dark:e+".300"},i={light:"#fff",dark:t.theme.colors.gray[800]};return{tab:{roundedTop:"md",border:"1px",borderColor:"transparent",mb:"-1px",_selected:{color:r[n],borderColor:"inherit",borderBottomColor:i[n]}},tabList:{mb:"-1px",borderBottom:"1px",borderColor:"inherit"}}}(t);case"enclosed-colored":return function(t){var e=t.color,n=t.colorMode;return{tab:{border:"1px",borderColor:"inherit",bg:{light:"gray.50",dark:"whiteAlpha.50"}[n],mb:"-1px",_notLast:{mr:"-1px"},_selected:{bg:{light:"#fff",dark:"gray.800"}[n],color:{light:e+".600",dark:e+".300"}[n],borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"}},tabList:{mb:"-1px",borderBottom:"1px",borderColor:"inherit"}}}(t);case"soft-rounded":return function(t){var e=t.color;return{tab:{rounded:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:e+".700",bg:e+".100"}},tabList:{}}}(t);case"solid-rounded":return function(t){var e=t.color,n=t.colorMode;return{tab:{rounded:"full",fontWeight:"semibold",color:{light:"gray.600",dark:"inherit"}[n],_selected:{color:{light:"#fff",dark:"gray.800"}[n],bg:{light:e+".600",dark:e+".300"}[n]}},tabList:{}}}(t);case"unstyled":return{}}var e,n},vn=function(t){var e,n,r=t.align,i=t.orientation;return"horizontal"===i&&(e={alignItems:"center",justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[r],maxWidth:"full"},n={height:"100%"}),"vertical"===i&&(e={flexDirection:"column"},n={width:"100%"}),{tabList:e,tab:n}},_n={sm:{padding:"0.25rem 1rem",fontSize:"0.85rem"},md:{fontSize:"1rem",padding:"0.5rem 1rem"},lg:{fontSize:"1.15rem",padding:"0.75rem 1rem"}},yn=Object(r.forwardRef)((function(t,e){var n=t.isSelected,i=t.isDisabled,o=t.id,a=(t.size,ge()(t,["isSelected","isDisabled","id","size"])),s=function(){var t=Object(nn.b)(),e=Object(r.useContext)(xn),n=e.variant,i=e.color,o=e.size,a=e.isFitted,s=e.orientation,u=Object(hn.a)().colorMode,l=gn({variant:n,color:i,theme:t,colorMode:u}),c=vn({orientation:s});return dn({},pn,{},mn,{},_n[o],{},l&&l.tab,{},c&&c.tab,{},a&&{flex:1})}();return Object(V.d)(je,pe()({ref:e,role:"tab",tabIndex:n?0:-1,id:"tab:"+o,outline:"none",as:"button",type:"button",disabled:i,"aria-selected":n,"aria-disabled":i,"aria-controls":"panel:"+o},s,a))}));yn.displayName="Tab";var bn=Object(r.forwardRef)((function(t,e){var n=t.children,i=t.onKeyDown,o=(t.onClick,ge()(t,["children","onKeyDown","onClick"])),a=Object(r.useContext)(xn),s=a.id,u=a.index,l=a.manualIndex,c=a.onManualTabChange,h=a.isManual,f=a.onChangeTab,d=a.onFocusPanel,p=a.orientation,m=function(){var t=Object(nn.b)(),e=Object(r.useContext)(xn),n=e.variant,i=e.align,o=e.orientation,a=gn({variant:n,theme:t}),s=vn({align:i,orientation:o});return dn({},a&&a.tabList,{},s&&s.tabList)}(),g=Object(r.useRef)([]),v=r.Children.map(n,(function(t,e){return!0===t.props.isDisabled?null:e})).filter((function(t){return null!=t})),_=v.indexOf(u),y=v.length,b=function(t){var e=v[t];g.current[e].focus(),f&&f(e)},x=r.Children.map(n,(function(t,e){var n=h?e===l:e===u;return Object(r.cloneElement)(t,{ref:function(t){return g.current[e]=t},isSelected:n,onClick:function(n){g.current[e].focus(),c(e),f(e),t.props.onClick&&t.props.onClick(n)},id:s+"-"+e})}));return Object(V.d)(Te,pe()({onKeyDown:function(t){"ArrowRight"===t.key&&(t.preventDefault(),b((_+1)%y));"ArrowLeft"!==t.key&&"ArrowUp"!==t.key||(t.preventDefault(),b((_-1+y)%y));"Home"===t.key&&(t.preventDefault(),b(0)),"End"===t.key&&(t.preventDefault(),b(y-1)),"ArrowDown"===t.key&&(t.preventDefault(),d&&d()),i&&i(t)},ref:e,role:"tablist","aria-orientation":p},m,o),x)}));bn.displayName="TabList",Object(r.forwardRef)((function(t,e){var n=t.children,r=t.isSelected,i=t.selectedPanelRef,o=t.id,a=ge()(t,["children","isSelected","selectedPanelRef","id"]);return Object(V.d)(fe,pe()({ref:function(t){r&&rn(i,t),rn(e,t)},role:"tabpanel",tabIndex:-1,"aria-labelledby":"tab:"+o,hidden:!r,id:"panel:"+o,outline:0},a),n)})).displayName="TabPanel",Object(r.forwardRef)((function(t,e){var n=t.children,i=ge()(t,["children"]),o=Object(r.useContext)(xn),a=o.index,s=o.selectedPanelRef,u=o.id,l=o.isManual,c=o.manualIndex,h=r.Children.map(n,(function(t,e){if(Object(r.isValidElement)(t))return Object(r.cloneElement)(t,{isSelected:l?e===c:e===a,selectedPanelRef:s,id:u+"-"+e})}));return Object(V.d)(fe,pe()({tabIndex:"-1",ref:e},i),h)})).displayName="TabPanels";var xn=Object(r.createContext)(),wn=Object(r.forwardRef)((function(t,e){var n=t.children,i=t.onChange,o=t.index,a=t.defaultIndex,s=t.isManual,u=t.variant,l=void 0===u?"line":u,c=t.variantColor,h=void 0===c?"blue":c,f=t.align,d=void 0===f?"start":f,p=t.size,m=void 0===p?"md":p,g=t.orientation,v=void 0===g?"horizontal":g,_=t.isFitted,y=ge()(t,["children","onChange","index","defaultIndex","isManual","variant","variantColor","align","size","orientation","isFitted"]);cn();var b=Object(r.useRef)(null!=o).current,x=Object(r.useRef)(),w=Object(r.useState)((function(){return s?o||a||0:a||0})),T=w[0],A=w[1],S=Object(r.useState)(o||a||0),E=S[0],k=S[1],M=s?T:b?o:T,O=b?o:E,P={id:en(),index:M,manualIndex:O,onManualTabChange:function(t){b||k(t),s&&i&&i(t)},isManual:s,onChangeTab:function(t){b||A(t),b&&s&&A(t),s||i&&i(t)},selectedPanelRef:x,onFocusPanel:function(){x.current&&x.current.focus()},color:h,size:m,align:d,variant:l,isFitted:_,orientation:v};return Object(V.d)(xn.Provider,{value:P},Object(V.d)(fe,pe()({ref:e},y),n))}));wn.displayName="Tabs";var Tn=wn,An=n("cuY2"),Sn=n.n(An),En=Object(r.forwardRef)((function(t,e){var n=t.isOpen,r=t.animateOpacity,i=void 0===r||r,o=t.onAnimationStart,a=t.onAnimationEnd,s=t.duration,u=t.easing,l=void 0===u?"ease":u,c=t.startingHeight,h=void 0===c?0:c,f=t.endingHeight,d=void 0===f?"auto":f,p=ge()(t,["isOpen","animateOpacity","onAnimationStart","onAnimationEnd","duration","easing","startingHeight","endingHeight"]);return Object(V.d)(Sn.a,pe()({duration:s,easing:l,animateOpacity:i,height:n?d:h,applyInlineTransitions:!1,css:{transition:"height .2s ease,opacity .2s ease-in-out,transform .2s ease-in-out","&.rah-animating--to-height-zero":{opacity:0,transform:"translateY(-0.625rem)"}}},{onAnimationStart:o,onAnimationEnd:a}),Object(V.d)(fe,pe()({ref:e},p)))}));En.displayName="Collapse";var kn=En,Mn=function(t){var e=t.allowMultiple,n=t.allowToggle,i=t.index,o=t.defaultIndex,a=t.onChange,s=t.children,u=ge()(t,["allowMultiple","allowToggle","index","defaultIndex","onChange","children"]),l=function(t,e){return Array.isArray(t)?t.includes(e):t===e},c=Object(r.useState)((function(){return e?o||[]:o||0})),h=c[0],f=c[1],d=Object(r.useRef)(null!=i).current,p=d?i:h,m=r.Children.map(s,(function(t,i){if(Object(r.isValidElement)(t))return Object(r.cloneElement)(t,{isOpen:l(p,i),onChange:function(t){if(e)if(t){var r=[].concat(p,[i]);!d&&f(r),a&&a(r)}else{var o=p.filter((function(t){return t!==i}));!d&&f(o),a&&a(o)}else t?(!d&&f(i),a&&a(i)):n&&(!d&&f(null),a&&a(null))}})}));return Object(V.d)(fe,pe()({"data-accordion":""},u),m)},On=Object(r.createContext)(),Pn=function(){return Object(r.useContext)(On)},zn=Object(r.forwardRef)((function(t,e){var n=t.isOpen,i=t.defaultIsOpen,o=t.id,a=t.isDisabled,s=t.onChange,u=t.children,l=ge()(t,["isOpen","defaultIsOpen","id","isDisabled","onChange","children"]),c=Object(r.useState)(i||!1),h=c[0],f=c[1],d=Object(r.useRef)(null!=n).current,p=d?n:h,m=en(),g=o||m,v="accordion-header-"+g,_="accordion-panel-"+g;return Object(V.d)(On.Provider,{value:{isExpanded:p,isDisabled:a,headerId:v,panelId:_,onToggle:function(){s&&s(!p),!d&&f(!h)}}},Object(V.d)(je,pe()({borderTopWidth:"1px",_last:{borderBottomWidth:"1px"},"data-accordion-item":"",ref:e},l),"function"==typeof u?u({isExpanded:p,isDisabled:a}):u))}));zn.displayName="AccordionItem";var Rn=Object(r.forwardRef)((function(t,e){var n=t.onClick,r=ge()(t,["onClick"]),i=Pn(),o=i.isExpanded,a=i.panelId,s=i.headerId,u=i.isDisabled,l=i.onToggle;return Object(V.d)(je,pe()({ref:e,display:"flex",alignItems:"center",width:"100%",transition:"all 0.2s",_focus:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:"0.4",cursor:"not-allowed"},as:"button",type:"button",outline:"0",disabled:u,"aria-disabled":u,"aria-expanded":o,onClick:function(t){l(),n&&n(t)},id:s,"aria-controls":a,px:4,py:2},r))}));Rn.displayName="AccordionHeader";var Ln=Object(r.forwardRef)((function(t,e){var n=Pn(),r=n.isExpanded,i=n.panelId,o=n.headerId;return Object(V.d)(kn,pe()({ref:e,"data-accordion-panel":"",role:"region",id:i,"aria-labelledby":o,"aria-hidden":!r,isOpen:r,pt:2,px:4,pb:5},t))}));Ln.displayName="AccordionPanel";var Cn=function(t){var e=Pn(),n=e.isExpanded,r=e.isDisabled;return Object(V.d)(Ze,pe()({"aria-hidden":!0,focusable:"false",size:"1.25em",name:"chevron-down",opacity:r?.4:1,transform:n?"rotate(-180deg)":null,transition:"transform 0.2s",transformOrigin:"center"},t))},jn=(n("9VmF"),n("rvZc"),function(t){var e,n=t.direction,i=t.isInline,o=void 0!==i&&i,a=t.isReversed,s=void 0!==a&&a,u=t.children,l=t.align,c=t.justify,h=t.spacing,f=void 0===h?2:h,d=t.shouldWrapChildren,p=ge()(t,["direction","isInline","isReversed","children","align","justify","spacing","shouldWrapChildren"]),m=s||n&&n.endsWith("reverse"),g=o||n&&n.startsWith("row");g&&(e="row"),m&&(e=o?"row-reverse":"column-reverse"),n&&(e=n),g||m||n||(e="column");var v=r.Children.toArray(u).filter(r.isValidElement);return Object(V.d)(Te,pe()({align:l,justify:c,direction:e},p),v.map((function(t,e){var n,i,o=v.length===e+1,a=g?((n={})[m?"ml":"mr"]=o?null:f,n):((i={})[m?"mt":"mb"]=o?null:f,i);return d?Object(V.d)(fe,pe()({d:"inline-block"},a,{key:"stack-box-wrapper-"+e}),t):Object(r.cloneElement)(t,a)})))}),In=n("bt/X"),Nn=n.n(In),Dn=(n("a1Th"),n("h7Nl"),n("Tze0"),n("xfY5"),function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}),Fn=function(t){return(t=Dn(Math.abs(t)))?t[1]:NaN},Bn=(n("pIFo"),/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i);function Un(t){if(!(e=Bn.exec(t)))throw new Error("invalid format: "+t);var e;return new Gn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Gn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Un.prototype=Gn.prototype,Gn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Vn,Zn,Wn,qn,Hn=function(t,e){var n=Dn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Yn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Hn(100*t,e)},r:Hn,s:function(t,e){var n=Dn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Vn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Dn(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Xn=function(t){return t},$n=Array.prototype.map,Kn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Zn=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Xn:(e=$n.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Xn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}($n.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Un(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,_=t.type;"n"===_?(m=!0,_="g"):Yn[_]||(void 0===g&&(g=12),v=!0,_="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var y="$"===f?i:"#"===f&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",b="$"===f?o:/[%p]/.test(_)?u:"",x=Yn[_],w=/[defgprs%]/.test(_);function T(t){var i,o,u,f=y,T=b;if("c"===_)T=x(t)+T,t="";else{var A=(t=+t)<0;if(t=isNaN(t)?c:x(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),A&&0==+t&&(A=!1),f=(A?"("===h?h:l:"-"===h||"("===h?"":h)+f,T=("s"===_?Kn[8+Vn/3]:"")+T+(A&&"("===h?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){T=(46===u?a+t.slice(i+1):t.slice(i))+T,t=t.slice(0,i);break}}m&&!d&&(t=r(t,1/0));var S=f.length+t.length+T.length,E=S<p?new Array(p-S+1).join(e):"";switch(m&&d&&(t=r(E+t,E.length?p-T.length:1/0),E=""),n){case"<":t=f+t+T+E;break;case"=":t=f+E+t+T;break;case"^":t=E.slice(0,S=E.length>>1)+f+t+T+E.slice(S);break;default:t=E+f+t+T}return s(t)}return g=void 0===g?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),T.toString=function(){return t+""},T}return{format:h,formatPrefix:function(t,e){var n=h(((t=Un(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Fn(e)/3))),i=Math.pow(10,-r),o=Kn[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Wn=Zn.format,qn=Zn.formatPrefix;var Jn=function(t){return Wn(",.8r")(t).split(".")[0]},Qn=function(t){var e=t.points,n=t.prefix,o=void 0===n?"":n,a=t.text,s=Object(r.useState)(0),u=s[0],l=s[1],c=Ke((function(t){return t.currentDate}));return Object(r.useEffect)((function(){if(c){var t=e.reduce((function(t,e){return t+parseFloat(e.properties[o+c]||0)}),0);l(t)}}),[c,o,e]),Object(V.d)(i.a.Fragment,null,Object(V.d)(xe,{fontSize:["1.5rem","2rem","1.5rem","2rem"],lineHeight:1.25,fontWeight:700,color:"inherit"},(u?Jn(u):"—")+" "),Object(V.d)(xe,{fontSize:"md",color:"gray.600"},a))};var tr=function(t){var e=t.rows,n=Je((function(t){return t.updateDataType}));return Object(V.d)(Tn,{variantColor:"orange",mt:"1.25rem",onChange:function(t){n(t)}},Object(V.d)(bn,null,Object(V.d)(yn,{width:1/3,justifyContent:"flex-start",pl:"1.25rem",color:"gray.600",_selected:{borderColor:"#ec610e",color:"#ec610e"}},Object(V.d)(fe,{textAlign:"left"},Object(V.d)(Qn,{points:e,prefix:"",text:"Confirmed"}))),Object(V.d)(yn,{width:1/3,justifyContent:"flex-start",pl:"1.25rem",color:"gray.600",_selected:{borderColor:"#ec610e",color:"#ec610e"}},Object(V.d)(fe,{textAlign:"left"},Object(V.d)(Qn,{points:e,prefix:"deaths_",text:"Deaths"}))),Object(V.d)(yn,{width:1/3,justifyContent:"flex-start",pl:"1.25rem",color:"gray.600",_selected:{borderColor:"#ec610e",color:"#ec610e"}},Object(V.d)(fe,{textAlign:"left"},Object(V.d)(Qn,{points:e,prefix:"recoveries_",text:"Recoveries"})))))},er=function(t){var e=t.rows,n=Je((function(t){return t.currentDataType})),r=Ke((function(t){return t.currentDate})),i=Xe((function(t){return t.updateMapFocus})),o=$e((function(t){return t.updateTab})),a=Nn()(e.map((function(t){return"Mainland China"===t.properties.countryregion||"Hong Kong"===t.properties.countryregion||"Macau"===t.properties.countryregion||"Taiwan"===t.properties.countryregion?Object.assign({},t,{properties:Object.assign({},t.properties,{countryregion:"China"})}):t})),(function(t){return t.properties.countryregion})),s=Object.keys(a).map((function(t){return{key:t,sum:a[t].reduce((function(t,e){return t+parseInt(e.properties[r]||0)}),0),sum2:a[t].reduce((function(t,e){return t+parseInt(e.properties["deaths_"+r]||0)}),0),sum3:a[t].reduce((function(t,e){return t+parseInt(e.properties["recoveries_"+r]||0)}),0),items:a[t].filter((function(t){return t.properties[r]})).sort((function(t,e){return e.properties[r]-t.properties[r]}))}})).filter((function(t){return t.sum})).sort((function(t,e){return 0===n?e.sum-t.sum:1===n?e.sum2-t.sum2:e.sum3-t.sum3}));return Object(V.d)("div",null,Object(V.d)(tr,{rows:e}),Object(V.d)(Mn,{defaultIndex:[0],allowMultiple:!0,mt:"0"},s.map((function(t,e){return Object(V.d)(zn,{key:t.key,borderColor:e?"gray.200":"transparent"},Object(V.d)(Rn,null,Object(V.d)(Te,{justifyContent:"space-between",alignItems:"center",flex:"1 1 auto",py:"0.5rem"},Object(V.d)(ye,{pl:"1.25rem",color:"gray.500",fontSize:"1rem",textTransform:"uppercase"},t.key),Object(V.d)(fe,{pr:"1.25rem",color:"gray.500",fontWeight:700},0===n?Jn(t.sum):null,1===n?Jn(t.sum2):null,2===n?Jn(t.sum3):null)),Object(V.d)(Cn,{mr:"1.375rem"})),Object(V.d)(Ln,{pt:"0"},t.items.map((function(t,e){var a=t.properties,s=t.geometry,u=a.provincestate,l=a.countryregion,c=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(a,["provincestate","countryregion"]);return Object(V.d)(je,{tabIndex:0,key:u+e,bg:"transparent",borderRadius:"lg",py:"0.75rem",px:"1.25rem",border:"0.0625rem solid",borderColor:"gray.200",mt:"0.5rem",mb:"0.75rem",onClick:function(){return function(t,e){o(1),i([t[1],t[0]],e)}(s.coordinates,a)},cursor:"pointer",_hover:{bg:"gray.100"},_focus:{bg:"gray.100"},_active:{bg:"gray.200"}},Object(V.d)(jn,{isInline:!0,alignItems:"top",justifyContent:"space-between"},Object(V.d)(jn,{spacing:"0.125rem"},Object(V.d)(xe,{lineHeight:1.25,color:"gray.500",fontSize:"xs",fontWeight:600,textTransform:"uppercase"},l),Object(V.d)(xe,{fontSize:"lg",lineHeight:1.25,fontWeight:700},u||l)),Object(V.d)(jn,{isInline:!0,alignItems:"center",spacing:"1.5rem"},Object(V.d)(jn,{spacing:"0.125rem",textAlign:"right"},Object(V.d)(xe,{lineHeight:1.25,color:"gray.500",fontSize:"xs",fontWeight:600,textTransform:"uppercase"},0===n?"Confirmed":null,1===n?"Deaths":null,2===n?"Recoveries":null),Object(V.d)(xe,{fontSize:"lg",fontWeight:700,color:"gray.500"},0===n?Jn(c[r]||0):null,1===n?Jn(c["deaths_"+r]||0):null,2===n?Jn(c["recoveries_"+r]||0):null)),Object(V.d)(Ze,{name:"pin",size:"1.5rem",color:"gray.600"}))))}))))}))))};function nr(){var t=Be()(["\n  border: 0px;\n  clip: rect(0px, 0px, 0px, 0px);\n  height: 1px;\n  width: 1px;\n  margin: -1px;\n  padding: 0px;\n  overflow: hidden;\n  white-space: nowrap;\n  position: absolute;\n"]);return nr=function(){return t},t}var rr=J(fe)(nr());rr.displayName="VisuallyHidden";var ir=rr;function or(){var t=Be()(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return or=function(){return t},t}var ar=Object(V.e)(or()),sr={xs:"0.75rem",sm:"1rem",md:"1.5rem",lg:"2rem",xl:"3rem"},ur=Object(r.forwardRef)((function(t,e){var n=t.size,r=void 0===n?"md":n,i=t.label,o=void 0===i?"Loading...":i,a=t.thickness,s=void 0===a?"2px":a,u=t.speed,l=void 0===u?"0.45s":u,c=t.color,h=t.emptyColor,f=void 0===h?"transparent":h,d=ge()(t,["size","label","thickness","speed","color","emptyColor"]),p=sr[r]||r;return Object(V.d)(fe,pe()({ref:e,display:"inline-block",borderWidth:s,borderColor:"currentColor",borderBottomColor:f,borderLeftColor:f,borderStyle:"solid",rounded:"full",color:c,animation:ar+" "+l+" linear infinite",size:p},d),o&&Object(V.d)(ir,null,o))}));ur.displayName="Spinner";var lr=ur,cr=n("aSns"),hr=n.n(cr);var fr=function(t,e){return t+"."+e},dr=function(t,e){return hr()(t).fade(1-e).rgb().string()},pr=function(t){return{900:dr(t,.92),800:dr(t,.8),700:dr(t,.6),600:dr(t,.48),500:dr(t,.38),400:dr(t,.24),300:dr(t,.16),200:dr(t,.12),100:dr(t,.08),50:dr(t,.04)}};function mr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mr(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mr(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var vr={light:{color:"inherit",_hover:{bg:"gray.100"},_active:{bg:"gray.200"}},dark:{color:"whiteAlpha.900",_hover:{bg:"whiteAlpha.200"},_active:{bg:"whiteAlpha.300"}}},_r=function(t){var e=t.color,n=t.colorMode,r=t.theme,i=r.colors[e]&&r.colors[e][200];return("gray"===e?vr:{light:{color:e+".500",bg:"transparent",_hover:{bg:e+".50"},_active:{bg:e+".100"}},dark:{color:e+".200",bg:"transparent",_hover:{bg:dr(i,.12)},_active:{bg:dr(i,.24)}}})[n]},yr={light:{bg:"gray.100",_hover:{bg:"gray.200"},_active:{bg:"gray.300"}},dark:{bg:"whiteAlpha.200",_hover:{bg:"whiteAlpha.300"},_active:{bg:"whiteAlpha.400"}}},br={_disabled:{opacity:"40%",cursor:"not-allowed",boxShadow:"none"}},xr={lg:{height:12,minWidth:12,fontSize:"lg",px:6},md:{height:10,minWidth:10,fontSize:"md",px:4},sm:{height:8,minWidth:8,fontSize:"sm",px:3},xs:{height:6,minWidth:6,fontSize:"xs",px:2}},wr={_focus:{boxShadow:"outline"}},Tr={userSelect:"inherit",bg:"none",border:0,color:"inherit",display:"inline",font:"inherit",lineHeight:"inherit",m:0,p:0,textAlign:"inherit"},Ar=function(t){switch(t.variant){case"solid":return n=(e=t).color,r=e.colorMode,i={light:{bg:n+".500",color:"white",_hover:{bg:n+".600"},_active:{bg:n+".700"}},dark:{bg:n+".200",color:"gray.800",_hover:{bg:n+".300"},_active:{bg:n+".400"}}},"gray"===n&&(i=yr),i[r];case"ghost":return _r(t);case"link":return function(t){var e=t.color,n=t.colorMode;return{p:0,height:"auto",lineHeight:"normal",color:{light:e+".500",dark:e+".200"}[n],_hover:{textDecoration:"underline"},_active:{color:{light:e+".700",dark:e+".500"}[n]}}}(t);case"outline":return function(t){var e=t.color,n=t.colorMode;return gr({border:"1px",borderColor:"gray"===e?{light:"gray.200",dark:"whiteAlpha.300"}[n]:"current"},_r(t))}(t);case"unstyled":return Tr;default:return{}}var e,n,r,i},Sr={display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",transition:"all 250ms",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",lineHeight:"1.2",outline:"none"},Er=function(t){var e,n=gr({},t,{colorMode:Object(hn.a)().colorMode,theme:Object(nn.b)()});return gr({},Sr,{},(e=n.size,xr[e]),{},wr,{},br,{},Ar(n))},kr=function(t){var e=t.icon,n=ge()(t,["icon"]);return"string"==typeof e?Object(V.d)(Ze,pe()({focusable:"false",name:e,color:"currentColor"},n)):Object(V.d)(fe,pe()({as:e,"data-custom-icon":!0,focusable:"false",color:"currentColor"},n))},Mr=Object(r.forwardRef)((function(t,e){var n=t.isDisabled,r=t.isLoading,i=t.isActive,o=t.isFullWidth,a=t.children,s=t.as,u=void 0===s?"button":s,l=t.variantColor,c=void 0===l?"gray":l,h=t.leftIcon,f=t.rightIcon,d=t.variant,p=void 0===d?"solid":d,m=t.loadingText,g=t.iconSpacing,v=void 0===g?2:g,_=t.type,y=void 0===_?"button":_,b=t.size,x=void 0===b?"md":b,w=t.colorMode,T=ge()(t,["isDisabled","isLoading","isActive","isFullWidth","children","as","variantColor","leftIcon","rightIcon","variant","loadingText","iconSpacing","type","size","colorMode"]);cn();var A=Er({color:c,variant:p,size:x,colorMode:w}),S=n||r;return Object(V.d)(je,pe()({disabled:S,"aria-disabled":S,ref:e,as:u,type:y,borderRadius:"md",fontWeight:"semibold",width:o?"full":void 0,"data-active":i?"true":void 0},A,T),h&&!r&&Object(V.d)(kr,{ml:-1,mr:v,icon:h}),r&&Object(V.d)(lr,{position:m?"relative":"absolute",mr:m?v:0,color:"currentColor",size:"1em"}),r?m||Object(V.d)(fe,{as:"span",opacity:"0"},a):a,f&&!r&&Object(V.d)(kr,{mr:-1,ml:v,icon:f}))}));Mr.displayName="Button";var Or=Mr,Pr=Object(r.forwardRef)((function(t,e){var n=t.icon,r=t.isRound,i=t["aria-label"],o=ge()(t,["icon","isRound","aria-label"]),a=(o.isFullWidth,o.leftIcon,o.rightIcon,o.loadingText,ge()(o,["isFullWidth","leftIcon","rightIcon","loadingText"]));return Object(V.d)(Or,pe()({p:"0",borderRadius:r?"full":"md",ref:e,"aria-label":i},a),"string"==typeof n?Object(V.d)(Ze,{name:n,focusable:"false",color:"currentColor","aria-hidden":!0}):Object(V.d)(fe,{as:n,"aria-hidden":!0,focusable:"false",color:"currentColor"}))}));Pr.displayName="IconButton",Pr.defaultProps=Or.defaultProps;var zr=Pr,Rr=(n("rE2o"),n("hQwL")),Lr=n("xstl"),Cr={global:{language:"en",currentDate:"",currentDataType:0,prefix:"",max:1,language_text_source:"|\n      function() {\n        return (global.language && feature['name:'+global.language]) || feature.name\n      }\n    "},scene:{animated:!0,background:{color:Rr.a.gray[50]}},sources:{here:{type:"MVT",url:"https://vector.hereapi.com/v2/vectortiles/base/mc/{z}/{x}/{y}/omv?apiKey="+{}.GATSBY_API_KEY},provinces:{url:"https://xyz.api.here.com/hub/spaces/"+{}.GATSBY_PROVINCES_SPACE_ID+"/tile/web/{z}_{x}_{y}",url_params:{access_token:{}.GATSBY_ACCESS_TOKEN},type:"GeoJSON"},province_borders:{url:"https://xyz.api.here.com/hub/spaces/"+{}.GATSBY_PROVINCE_BORDERS_SPACE_ID+"/tile/web/{z}_{x}_{y}",url_params:{access_token:{}.GATSBY_ACCESS_TOKEN},type:"GeoJSON"}},styles:{_custom_cases:{base:"points",blend:"overlay"},_custom_cases2:{base:"points",blend:"overlay"}},layers:{highways:{data:{source:"here",layer:"roads"},filter:{all:[{$geometry:"line",kind:"highway"},{$zoom:{min:5,max:12}}]},draw:{lines:{order:200,color:Rr.a.gray[200],width:"1px"}}},"highway-labels":{data:{source:"here",layer:"road_labels"},filter:{all:[{$geometry:"line"},{$zoom:{min:4,max:12}}]},draw:{text:{text_source:"global.language_text_source",font:{family:Lr.a.fonts.mono,size:"12px",weight:600,fill:Rr.a.gray[500],stroke:{color:[255,255,255,.5],width:4}}}}},"province-borders":{data:{source:"province_borders"},filter:{all:[{$zoom:{min:3,max:12}}]},draw:{lines:{order:200,dash:[2,2],color:Rr.a.gray[400],dash_background_color:Rr.a.gray[100],width:"1px"}}},"country-borders":{data:{source:"here",layer:"boundaries"},filter:{all:[{$geometry:"line",kind:"country"},{$zoom:{min:3,max:12}}]},draw:{lines:{order:200,color:Rr.a.gray[300],width:"1.25px"}}},"disputed-regions-borders":{data:{source:"here",layer:"boundaries"},filter:{all:[{$geometry:"line",kind:"disputed"},{$zoom:{min:3,max:12}}]},draw:{lines:{order:200,dash:[4,3],color:Rr.a.gray[300],dash_background_color:Rr.a.gray[50],width:"1.25px"}}},water:{data:{source:"here",layer:"water"},"water fill":{filter:[{$geometry:"polygon"}],draw:{polygons:{order:200,color:"#A3CDFB"}}}},provinceLabels:{data:{source:"provinces"},filter:{all:[{$zoom:{min:3,max:17}}]},draw:{points:{color:Rr.a.gray[500],size:"0px",order:100,text:{text_source:'|\n              function () {\n                return feature.name || ""\n              }\n            ',font:{family:Lr.a.fonts.mono,size:[[3,"10px"],[8,"16px"]],transform:"uppercase",weight:400,fill:Rr.a.gray[400],stroke:{color:[255,255,255,.5],width:4}}}}}},countryLabels:{data:{source:"here",layer:"places"},filter:{all:[{kind:"country"},{$zoom:{min:3,max:17}}]},draw:{points:{color:Rr.a.gray[500],size:"0px",order:100,text:{text_source:"global.language_text_source",font:{family:Lr.a.fonts.mono,size:[[3,"10px"],[8,"16px"]],weight:600,fill:Rr.a.gray[500],stroke:{color:[255,255,255,.5],width:4}}}}}},capitalCities:{data:{source:"here",layer:"places"},filter:{all:[{kind:"locality",kind_detail:"city",country_capital:!0},{$zoom:{min:5,max:12}}]},draw:{points:{color:Rr.a.gray[500],size:[[5,"6px"],[10,"8px"]],order:1e3,outline:{width:"2px",color:Rr.a.gray[50]},text:{text_source:"global.language_text_source",font:{family:Lr.a.fonts.body,size:[[4,"10px"],[6,"12px"],[8,"14px"]],fill:[[4,Rr.a.gray[500]],[8,Rr.a.gray[600]]],stroke:{color:[255,255,255,.5],width:4}}}}}},cities:{data:{source:"here",layer:"places"},filter:{all:[{kind:"locality",kind_detail:"city",country_capital:!1},{$zoom:{min:7,max:12}}]},draw:{points:{color:"#652B19",size:"0px",order:1e3,text:{text_source:"global.language_text_source",font:{family:"sans-serif",size:"12px",fill:Rr.a.gray[500],stroke:{color:[1,1,1,1],width:3}}}}}},cases:{data:{source:"dynamic_data"},filter:{all:[{$zoom:{min:3}}]},draw:{_custom_cases:{interactive:!0,collide:!1,color:"rgba(236,97,14, 0.25)",order:9e3,outline:{width:"2px",color:'|\n              function() {\n                if (!feature[global.prefix + global.currentDate]) return null\n                return "#ec610e"\n              }\n            '},size:"|\n            function() {\n              if (!global.currentDate || !feature[global.prefix + global.currentDate]) return 0\n              const minSize = 8\n              const size = (200 - minSize) / global.max * parseInt(feature[global.prefix + global.currentDate])\n              const corrected = size + minSize\n              return corrected\n            }\n          "},_custom_cases2:{interactive:!0,collide:!1,color:"rgba(236,97,14, 0)",order:9001,size:"|\n            function() {\n              if (!global.currentDate || !feature[global.prefix + global.currentDate]) return 0\n              const minSize = 8\n              const size = (200 - minSize) / global.max * parseInt(feature[global.prefix + global.currentDate])\n              const corrected = size + minSize + 10\n              return corrected\n            }\n          "}}}}};function jr(){var t=function(t,e){e||(e=t.slice(0));return t.raw=e,t}(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(359.999deg);\n  }\n"]);return jr=function(){return t},t}var Ir=Object(V.e)(jr()),Nr=function(t){var e=t.points,o=Je((function(t){return t.currentDataType})),a=Qe((function(t){return t.updateCenter})),s=Xe((function(t){return t.mapFocus})),u=Xe((function(t){return t.mapZoom})),l=Xe((function(t){return t.updateMapFocus})),c=Ke((function(t){return t.currentDate})),h=Object(r.useState)(!1),f=h[0],d=h[1],p=Object(r.useRef)(),m=Object(r.useRef)(),g=Object(r.useRef)(),v=Object(r.useRef)();Object(r.useEffect)((function(){if(void 0!==typeof window&&e.length){var t=n("4R65"),r=n("N7A+");m.current=t,v.current&&(v.current.remove(),v.current=null,g.current=null);var i=t.popup({autoPan:!1}),o=t.map(p.current,{zoomControl:!1,minZoom:3,maxZoom:8,scrollWheelZoom:!0}),s=r.leafletLayer({scene:Cr,attribution:"Loading map",webGLContextOptions:{antialias:!1},events:{click:function(t){if(t.feature&&(t.feature||t.feature.properties)){var e=t.feature.properties,n=e.lat,r=e.long;l([n,r],t.feature.properties)}},hover:function(t){if(!t.feature||!t.feature&&!t.feature.properties)return p.current.style.cursor="default",void o.closePopup();p.current.style.cursor="pointer";var e=t.leaflet_event.latlng,n=g.current.config.global.currentDate,r=g.current.config.global.currentDataType,a=g.current.config.global.prefix,s=Jn(t.feature.properties[a+n]),u=["Mainland China","Macau","Hong Kong","Taiwan"].includes(t.feature.properties.countryregion),l=0===r?"Confirmed cases":1===r?"Deaths":"Recoveries",c=s?'\n              <div>\n                <div class="tt-address">\n                  <p class="tt-zip-code-value">\n                    '+(t.feature.properties.provincestate||t.feature.properties.countryregion)+"\n                  </p>\n                  "+(t.feature.properties.provincestate?'\n                      <p class="tt-zip-code-title">\n                        '+(u?"China":t.feature.properties.countryregion)+"\n                      </p>":"")+'\n                </div>\n                <p class="tt-median-rent-title">'+l+'</p>\n                <p class="tt-median-rent-value">\n                  <span>'+s+"</span>\n                </p>\n              </div>\n            ":"";i.setLatLng([e.lat,e.lng]).setContent(""+c).openOn(o)}}});o.on("move",(function(){var t=o.getCenter(),e=t.lat,n=t.lng;a([-n,-e])})),s.addTo(o),g.current=s.scene,o.setView([30,110],4),v.current=o;var u={type:"FeatureCollection",features:e},c=function(t,e){var n,r;if(void 0===e){var i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;null!=l&&(void 0===n?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}}catch(v){o=!0,a=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}else{var c=-1,h=!0,f=!1,d=void 0;try{for(var p,m=t[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;null!=(g=e(g,++c,t))&&(void 0===n?g>=g&&(n=r=g):(n>g&&(n=g),r<g&&(r=g)))}}catch(v){f=!0,d=v}finally{try{h||null==m.return||m.return()}finally{if(f)throw d}}}return[n,r]}(e,(function(t){var e=t.properties.headers.split(";;"),n=e[e.length-1];return parseInt(t.properties[n])}));s.scene.subscribe({load:function(){s.scene.config.global.max=c[1],s.scene.updateConfig(),s.scene.setDataSource("dynamic_data",{type:"GeoJSON",data:u}),d(!0)}})}}),[e]);var _=g.current&&g.current.config;Object(r.useEffect)((function(){s&&v.current.flyTo(s,u||5,{easeLinearity:.01,duration:1.5})}),[s,u]),Object(r.useEffect)((function(){c&&g.current&&g.current.config&&c!==g.current.config.global.currentDate&&(g.current.config.global.currentDate=c,g.current.updateConfig())}),[c,_]),Object(r.useEffect)((function(){g.current&&g.current.config&&(g.current.config.global.currentDataType=o||0,g.current.config.global.prefix=0===o?"":1===o?"deaths_":"recoveries_",g.current.updateConfig())}),[o,_]);return Object(V.d)(i.a.Fragment,null,Object(V.d)(fe,{ref:p,top:"0",left:[0,null,"25rem","30rem"],right:"0",bottom:"0",style:{position:"fixed",transition:"opacity 500ms",opacity:f?1:0}}),f?null:Object(V.d)(fe,{position:"fixed",top:"50%",left:["50%",null,"calc((100% + 25rem) / 2)","calc((100% + 30rem) / 2)"],zIndex:9999,transform:"translateX(-50%)"},Object(V.d)(Ze,{name:"spinner",size:"2.5rem",color:"gray.500",animation:Ir+" 1s linear infinite",mx:"auto",display:"block"}),Object(V.d)(xe,{textAlign:"center",color:"gray.500",mx:"auto",fontSize:"sm",mt:"0.75rem"},"Loading map")),Object(V.d)(fe,{position:"fixed",bottom:["6rem","8rem","5rem"],left:["auto",null,"26.5rem","32.5rem"],right:["2.75rem","3.75rem","auto"],zIndex:2,pointerEvents:["none",null,"all"]},Object(V.d)(jn,{spacing:"0.5rem",alignItems:"center",mb:["6.5rem",null,"1.25rem"]},Object(V.d)(xe,{color:"gray.600",width:"2.5rem",textAlign:"center",fontWeight:700,fontSize:"xs",lineHeight:"shorter"},"more cases"),Object(V.d)(fe,{width:"2.5rem",height:"2.5rem",border:"0.125rem solid",borderColor:"gray.500",borderRadius:"100%"}),Object(V.d)(fe,{width:"1.25rem",height:"1.25rem",border:"0.125rem solid",borderColor:"gray.500",borderRadius:"100%"}),Object(V.d)(fe,{width:"0.625rem",height:"0.625rem",border:"0.125rem solid",borderColor:"gray.500",borderRadius:"100%"}),Object(V.d)(xe,{color:"gray.600",width:"2.5rem",textAlign:"center",fontWeight:700,fontSize:"xs",lineHeight:"shorter"},"fewer cases")),Object(V.d)(jn,{display:["none",null,"block"],spacing:"1.25rem"},Object(V.d)(Te,{justifyContent:"center"},Object(V.d)(Te,{alignItems:"center",direction:"column",shadow:"lg",borderRadius:"md"},Object(V.d)(zr,{onClick:function(){v.current.zoomIn()},icon:"add",bg:"white",borderRadius:"0.25rem 0.25rem 0 0",border:"0.0625rem solid",borderColor:"transparent",_hover:{borderColor:"transparent"},_focus:{borderColor:"rgba(236,97,14, 1)",boxShadow:"0 0 0 0.0625rem rgba(236,97,14, 1), 0 0 0 0.25rem rgba(236,97,14, 0.25)"},_placeholder:{color:"gray.500"}}),Object(V.d)(fe,{height:"1px",width:"100%",bg:"gray.100"}),Object(V.d)(zr,{onClick:function(){v.current.zoomOut()},icon:"minus",bg:"white",borderRadius:"0 0 0.25rem 0.25rem",border:"0.0625rem solid",borderColor:"transparent",_hover:{borderColor:"transparent"},_focus:{borderColor:"rgba(236,97,14, 1)",boxShadow:"0 0 0 0.0625rem rgba(236,97,14, 1), 0 0 0 0.25rem rgba(236,97,14, 0.25)"},_placeholder:{color:"gray.500"}}))))))};n("/8Fb"),n("DW2E"),n("dZ+Y");function Dr(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Fr(){return(Fr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n("JX7q"),n("dI71");var Br=n("17x9"),Ur=n.n(Br);n("TOwV");function Gr(t){return null!=t&&"object"==typeof t&&1===t.nodeType}function Vr(t,e){return(!e||"hidden"!==t)&&("visible"!==t&&"clip"!==t)}function Zr(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var n=getComputedStyle(t,null);return Vr(n.overflowY,e)||Vr(n.overflowX,e)||function(t){var e=function(t){return t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.frameElement:null}(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)}(t)}return!1}function Wr(t,e,n,r,i,o,a,s){return o<t&&a>e||o>t&&a<e?0:o<=t&&s<=n||a>=e&&s>=n?o-t-r:a>e&&s<n||o<t&&s>n?a-e+i:0}function qr(t,e){null!==t&&function(t,e){var n=e.scrollMode,r=e.block,i=e.inline,o=e.boundary,a=e.skipOverflowHiddenElements,s="function"==typeof o?o:function(t){return t!==o};if(!Gr(t))throw new TypeError("Invalid target");for(var u=document.scrollingElement||document.documentElement,l=[],c=t;Gr(c)&&s(c);){if((c=c.parentNode)===u){l.push(c);break}c===document.body&&Zr(c)&&!Zr(document.documentElement)||Zr(c,a)&&l.push(c)}for(var h=window.visualViewport?visualViewport.width:innerWidth,f=window.visualViewport?visualViewport.height:innerHeight,d=window.scrollX||pageXOffset,p=window.scrollY||pageYOffset,m=t.getBoundingClientRect(),g=m.height,v=m.width,_=m.top,y=m.right,b=m.bottom,x=m.left,w="start"===r||"nearest"===r?_:"end"===r?b:_+g/2,T="center"===i?x+v/2:"end"===i?y:x,A=[],S=0;S<l.length;S++){var E=l[S],k=E.getBoundingClientRect(),M=k.height,O=k.width,P=k.top,z=k.right,R=k.bottom,L=k.left;if("if-needed"===n&&_>=0&&x>=0&&b<=f&&y<=h&&_>=P&&b<=R&&x>=L&&y<=z)return A;var C=getComputedStyle(E),j=parseInt(C.borderLeftWidth,10),I=parseInt(C.borderTopWidth,10),N=parseInt(C.borderRightWidth,10),D=parseInt(C.borderBottomWidth,10),F=0,B=0,U="offsetWidth"in E?E.offsetWidth-E.clientWidth-j-N:0,G="offsetHeight"in E?E.offsetHeight-E.clientHeight-I-D:0;if(u===E)F="start"===r?w:"end"===r?w-f:"nearest"===r?Wr(p,p+f,f,I,D,p+w,p+w+g,g):w-f/2,B="start"===i?T:"center"===i?T-h/2:"end"===i?T-h:Wr(d,d+h,h,j,N,d+T,d+T+v,v),F=Math.max(0,F+p),B=Math.max(0,B+d);else{F="start"===r?w-P-I:"end"===r?w-R+D+G:"nearest"===r?Wr(P,R,M,I,D+G,w,w+g,g):w-(P+M/2)+G/2,B="start"===i?T-L-j:"center"===i?T-(L+O/2)+U/2:"end"===i?T-z+N+U:Wr(L,z,O,j,N+U,T,T+v,v);var V=E.scrollLeft,Z=E.scrollTop;w+=Z-(F=Math.max(0,Math.min(Z+F,E.scrollHeight-M+G))),T+=V-(B=Math.max(0,Math.min(V+B,E.scrollWidth-O+U)))}A.push({el:E,top:F,left:B})}return A}(t,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach((function(t){var e=t.el,n=t.top,r=t.left;e.scrollTop=n,e.scrollLeft=r}))}function Hr(t,e){return t===e||t.contains&&t.contains(e)}function Yr(t,e){var n;function r(){n&&clearTimeout(n)}function i(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r(),n=setTimeout((function(){n=null,t.apply(void 0,o)}),e)}return i.cancel=r,i}function Xr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.some((function(e){return e&&e.apply(void 0,[t].concat(r)),t.preventDownshiftDefault||t.hasOwnProperty("nativeEvent")&&t.nativeEvent.preventDownshiftDefault}))}}function $r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.forEach((function(e){"function"==typeof e?e(t):e&&(e.current=t)}))}}function Kr(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=Jr(e,r)?e[r]:t[r],n}),{})}function Jr(t,e){return void 0!==t[e]}function Qr(t){var e=t.key,n=t.keyCode;return n>=37&&n<=40&&0!==e.indexOf("Arrow")?"Arrow"+e:e}function ti(t,e,n,r,i){void 0===i&&(i=!0);var o=n-1;("number"!=typeof e||e<0||e>=n)&&(e=t>0?-1:o+1);var a=e+t;a<0?a=i?o:0:a>o&&(a=i?0:o);var s=ei(t,a,n,r,i);return-1===s?e:s}function ei(t,e,n,r,i){var o=r(e);if(!o||!o.hasAttribute("disabled"))return e;if(t>0){for(var a=e+1;a<n;a++)if(!r(a).hasAttribute("disabled"))return a}else for(var s=e-1;s>=0;s--)if(!r(s).hasAttribute("disabled"))return s;return i?t>0?ei(1,0,n,r,!1):ei(-1,n-1,n,r,!1):-1}function ni(t,e,n,r,i){return void 0===i&&(i=!0),[e,n].some((function(e){return e&&(Hr(e,t)||i&&Hr(e,r.activeElement))}))}var ri=Yr((function(){oi().textContent=""}),500);function ii(t,e){var n=oi(e);t&&(n.textContent=t,ri())}function oi(t){void 0===t&&(t=document);var e=t.getElementById("a11y-status-message");return e||((e=t.createElement("div")).setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var ai={highlightedIndex:-1,isOpen:!1,selectedItem:null};function si(t,e){var n=void 0===e?{}:e,r=n.id,i=n.labelId,o=n.menuId,a=n.getItemId,s=n.toggleButtonId,u=void 0===r?"downshift-"+t():r;return{labelId:i||u+"-label",menuId:o||u+"-menu",getItemId:a||function(t){return u+"-item-"+t},toggleButtonId:s||u+"-toggle-button"}}function ui(t,e,n){return void 0!==t?t:0===n.length?-1:n.indexOf(e)}function li(t){return""+t.slice(0,1).toUpperCase()+t.slice(1)}function ci(t,e,n){Object.keys(e).forEach((function(r){!function(t,e,n,r){var i="on"+li(t)+"Change";e[i]&&void 0!==r[t]&&r[t]!==n[t]&&e[i](r)}(r,t,e,n)})),t.onStateChange&&void 0!==n&&t.onStateChange(n)}function hi(t,e,n){var i=Object(r.useRef)(),o=Object(r.useCallback)((function(e,n){return e=Kr(e,n.props),(0,n.props.stateReducer)(e,Fr({},n,{changes:t(e,n)}))}),[t]),a=Object(r.useReducer)(o,e),s=a[0],u=a[1];return Object(r.useEffect)((function(){i.current&&ci(n,i.current,s),i.current=s}),[s,n]),[Kr(s,n),u]}var fi=0;function di(){var t=Object(r.useState)(null),e=t[0],n=t[1];return Object(r.useEffect)((function(){return n(++fi)}),[]),e}function pi(t,e){return!!e&&(t.relatedTarget===e||t.nativeEvent&&(e===t.nativeEvent.explicitOriginalTarget||e.contains(t.nativeEvent.explicitOriginalTarget)))}var mi={itemToString:function(t){return t?String(t):""},stateReducer:function(t,e){return e.changes},getA11yStatusMessage:function(t){var e=t.isOpen,n=t.items;if(!n)return"";var r=n.length;return e?0===r?"No results are available":r+" result"+(1===r?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":""},getA11ySelectionMessage:function(t){var e=t.selectedItem;return(0,t.itemToString)(e)+" has been selected."},scrollIntoView:qr,circularNavigation:!1,environment:"undefined"==typeof window?{}:window};function gi(t,e,n){var r="default"+li(e);return r in t?t[r]:Fr({},ai,{},n)[e]}function vi(t,e,n){if(e in t)return t[e];var r="initial"+li(e);return r in t?t[r]:gi(t,e,n)}function _i(t,e,n,r){var i=t.items,o=t.initialHighlightedIndex,a=t.defaultHighlightedIndex,s=e.selectedItem,u=e.highlightedIndex;return void 0!==o&&u===o?o:void 0!==a?a:s?0===n?i.indexOf(s):ti(n,i.indexOf(s),i.length,r,!1):0===n?-1:n<0?i.length-1:0}Ur.a.array.isRequired,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.bool,Ur.a.number,Ur.a.number,Ur.a.number,Ur.a.bool,Ur.a.bool,Ur.a.bool,Ur.a.any,Ur.a.any,Ur.a.any,Ur.a.string,Ur.a.string,Ur.a.string,Ur.a.func,Ur.a.string,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.shape({addEventListener:Ur.a.func,removeEventListener:Ur.a.func,document:Ur.a.shape({getElementById:Ur.a.func,activeElement:Ur.a.any,body:Ur.a.any})});var yi={inputValue:""};function bi(t,e){return gi(t,e,yi)}function xi(t,e){return vi(t,e,yi)}Ur.a.array.isRequired,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.bool,Ur.a.number,Ur.a.number,Ur.a.number,Ur.a.bool,Ur.a.bool,Ur.a.bool,Ur.a.any,Ur.a.any,Ur.a.any,Ur.a.string,Ur.a.string,Ur.a.string,Ur.a.string,Ur.a.string,Ur.a.string,Ur.a.func,Ur.a.string,Ur.a.string,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.func,Ur.a.shape({addEventListener:Ur.a.func,removeEventListener:Ur.a.func,document:Ur.a.shape({getElementById:Ur.a.func,activeElement:Ur.a.any,body:Ur.a.any})});var wi=Fr({},mi,{circularNavigation:!0}),Ti=Object.freeze({__proto__:null,InputKeyDownArrowDown:0,InputKeyDownArrowUp:1,InputKeyDownEscape:2,InputKeyDownHome:3,InputKeyDownEnd:4,InputKeyDownEnter:5,InputChange:6,InputBlur:7,MenuMouseLeave:8,ItemMouseMove:9,ItemClick:10,ToggleButtonClick:11,FunctionToggleMenu:12,FunctionOpenMenu:13,FunctionCloseMenu:14,FunctionSetHighlightedIndex:15,FunctionSelectItem:16,FunctionSetInputValue:17,FunctionReset:18});function Ai(t,e){var n,r=e.type,i=e.props,o=e.shiftKey;switch(r){case 9:n={highlightedIndex:e.index};break;case 10:n={isOpen:bi(i,"isOpen"),highlightedIndex:bi(i,"highlightedIndex"),selectedItem:i.items[e.index],inputValue:i.itemToString(i.items[e.index])};break;case 0:n=t.isOpen?{highlightedIndex:ti(o?5:1,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,i.circularNavigation)}:{highlightedIndex:_i(i,t,1,e.getItemNodeFromIndex),isOpen:!0};break;case 1:n=t.isOpen?{highlightedIndex:ti(o?-5:-1,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,i.circularNavigation)}:{highlightedIndex:_i(i,t,-1,e.getItemNodeFromIndex),isOpen:!0};break;case 5:n=Fr({},t.highlightedIndex>=0&&{selectedItem:i.items[t.highlightedIndex],isOpen:bi(i,"isOpen"),highlightedIndex:bi(i,"highlightedIndex"),inputValue:i.itemToString(i.items[t.highlightedIndex])});break;case 2:n={isOpen:!1,selectedItem:null,highlightedIndex:-1,inputValue:""};break;case 3:n={highlightedIndex:ei(1,0,i.items.length,e.getItemNodeFromIndex,!1)};break;case 4:n={highlightedIndex:ei(-1,i.items.length-1,i.items.length,e.getItemNodeFromIndex,!1)};break;case 7:n=Fr({isOpen:!1},t.highlightedIndex>=0&&{selectedItem:i.items[t.highlightedIndex],inputValue:i.itemToString(i.items[t.highlightedIndex]),highlightedIndex:-1});break;case 6:n={isOpen:!0,highlightedIndex:bi(i,"highlightedIndex"),inputValue:e.inputValue};break;case 8:n={highlightedIndex:-1};break;case 11:case 12:n={isOpen:!t.isOpen,highlightedIndex:t.isOpen?-1:_i(i,t,0)};break;case 13:n={isOpen:!0,highlightedIndex:_i(i,t,0)};break;case 14:n={isOpen:!1};break;case 15:n={highlightedIndex:e.highlightedIndex};break;case 16:n={selectedItem:e.selectedItem};break;case 17:n={inputValue:e.inputValue};break;case 18:n={highlightedIndex:bi(i,"highlightedIndex"),isOpen:bi(i,"isOpen"),selectedItem:bi(i,"selectedItem"),inputValue:bi(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Fr({},t,{},n)}function Si(t){void 0===t&&(t={});var e=Fr({},wi,{},t),n=e.initialIsOpen,i=e.defaultIsOpen,o=e.items,a=e.scrollIntoView,s=e.getA11ySelectionMessage,u=e.getA11yStatusMessage,l=e.itemToString,c=e.environment,h=hi(Ai,function(t){var e=xi(t,"selectedItem"),n=xi(t,"isOpen"),r=xi(t,"highlightedIndex"),i=xi(t,"inputValue");return""===i&&e&&void 0===t.defaultInputValue&&void 0===t.initialInputValue&&void 0===t.inputValue&&(i=t.itemToString(e)),{highlightedIndex:r<0&&e?t.items.indexOf(e):r,isOpen:n,selectedItem:e,inputValue:i}}(e),e),f=h[0],d=f.isOpen,p=f.highlightedIndex,m=f.selectedItem,g=f.inputValue,v=h[1],_=function(t){return v(Fr({props:e},t))},y=function(t,e){var n=void 0===e?{}:e,r=n.id,i=n.inputId,o=Dr(n,["id","inputId"]),a=void 0===r?"downshift-"+t():r;return Fr({inputId:i||a+"-input"},si(t,Fr({id:r},o)))}(di,e),b=y.labelId,x=y.getItemId,w=y.menuId,T=y.toggleButtonId,A=y.inputId,S=Object(r.useRef)(null),E=Object(r.useRef)(),k=Object(r.useRef)(null),M=Object(r.useRef)(null),O=Object(r.useRef)(null);E.current=[];var P=Object(r.useRef)(!0),z=Object(r.useRef)(!0),R=Object(r.useRef)({isMouseDown:!1,isTouchMove:!1});Object(r.useEffect)((function(){z.current||ii(u({isOpen:d,items:o,selectedItem:m,itemToString:l,inputValue:g}),c.document)}),[d]),Object(r.useEffect)((function(){z.current||ii(s({isOpen:d,items:o,selectedItem:m,itemToString:l,inputValue:g}),c.document)}),[m]),Object(r.useEffect)((function(){p<0||!d||!E.current.length||(!1===P.current?P.current=!0:a(E.current[p],S.current))}),[p]),Object(r.useEffect)((function(){z.current?(n||i||d)&&k.current.focus():d&&k.current.focus()}),[d]),Object(r.useEffect)((function(){z.current=!1}),[]),Object(r.useEffect)((function(){var t=function(){R.current.isMouseDown=!0},e=function(t){R.current.isMouseDown=!1,d&&!ni(t.target,O.current,S.current,c.document)&&_({type:7})},n=function(){R.current.isTouchMove=!1},r=function(){R.current.isTouchMove=!0},i=function(t){!d||R.current.isTouchMove||ni(t.target,O.current,S.current,c.document,!1)||_({type:7})};return c.addEventListener("mousedown",t),c.addEventListener("mouseup",e),c.addEventListener("touchstart",n),c.addEventListener("touchmove",r),c.addEventListener("touchend",i),function(){c.removeEventListener("mousedown",t),c.removeEventListener("mouseup",e),c.removeEventListener("touchstart",n),c.removeEventListener("touchmove",r),c.removeEventListener("touchend",i)}}));var L=function(t){return E.current[t]},C={ArrowDown:function(t){t.preventDefault(),_({type:0,shiftKey:t.shiftKey,getItemNodeFromIndex:L})},ArrowUp:function(t){t.preventDefault(),_({type:1,shiftKey:t.shiftKey,getItemNodeFromIndex:L})},Home:function(t){t.preventDefault(),_({type:3,getItemNodeFromIndex:L})},End:function(t){t.preventDefault(),_({type:4,getItemNodeFromIndex:L})},Escape:function(){_({type:2})},Enter:function(t){t.preventDefault(),_({type:5,getItemNodeFromIndex:L})}},j=function(t){var e=Qr(t);e&&C[e]&&C[e](t)},I=function(t){_({type:6,inputValue:t.target.value})},N=function(t){!(R.current.isMouseDown||pi(t,M.current))&&_({type:7})},D=function(){_({type:8})},F=function(){_({type:11})};return{getItemProps:function(t){var e,n,r=void 0===t?{}:t,i=r.item,a=r.index,s=r.refKey,u=void 0===s?"ref":s,l=r.ref,c=r.onMouseMove,h=r.onClick,f=(r.onPress,Dr(r,["item","index","refKey","ref","onMouseMove","onClick","onPress"])),d=ui(a,i,o);if(d<0)throw new Error("Pass either item or item index in getItemProps!");var m=h;return Fr(((e={})[u]=$r(l,(function(t){t&&E.current.push(t)})),e.role="option",e),d===p&&{"aria-selected":!0},{id:x(d)},!f.disabled&&((n={onMouseMove:Xr(c,(function(){!function(t){t!==p&&(P.current=!1,_({type:9,index:t}))}(d)}))}).onClick=Xr(m,(function(){!function(t){_({type:10,index:t})}(d)})),n),{},f)},getLabelProps:function(t){return Fr({id:b,htmlFor:A},t)},getMenuProps:function(t){var e,n=void 0===t?{}:t,r=n.onMouseLeave,i=n.refKey,o=void 0===i?"ref":i,a=n.ref,s=Dr(n,["onMouseLeave","refKey","ref"]);return Fr(((e={})[o]=$r(a,(function(t){S.current=t})),e.id=w,e.role="listbox",e["aria-labelledby"]=b,e.onMouseLeave=Xr(r,D),e),s)},getInputProps:function(t){var e,n,r=void 0===t?{}:t,i=r.onKeyDown,o=r.onChange,a=r.onInput,s=r.onBlur,u=(r.onChangeText,r.refKey),l=void 0===u?"ref":u,c=r.ref,h=Dr(r,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),f={};h.disabled||((n={}).onChange=Xr(o,a,I),n.onKeyDown=Xr(i,j),n.onBlur=Xr(s,N),f=n);return Fr(((e={})[l]=$r(c,(function(t){k.current=t})),e.id=A,e["aria-autocomplete"]="list",e["aria-controls"]=w,e),p>-1&&{"aria-activedescendant":x(p)},{"aria-labelledby":b,autoComplete:"off",value:g},f,{},h)},getComboboxProps:function(t){var e,n=void 0===t?{}:t,r=n.refKey,i=void 0===r?"ref":r,o=n.ref,a=Dr(n,["refKey","ref"]);return Fr(((e={})[i]=$r(o,(function(t){O.current=t})),e.role="combobox",e["aria-haspopup"]="listbox",e["aria-owns"]=w,e["aria-expanded"]=d,e),a)},getToggleButtonProps:function(t){var e,n=void 0===t?{}:t,r=n.onClick,i=(n.onPress,n.refKey),o=void 0===i?"ref":i,a=n.ref,s=Dr(n,["onClick","onPress","refKey","ref"]);return Fr(((e={})[o]=$r(a,(function(t){M.current=t})),e.id=T,e.tabIndex=-1,e),!s.disabled&&Fr({},{onClick:Xr(r,F)}),{},s)},toggleMenu:function(){_({type:12})},openMenu:function(){_({type:13})},closeMenu:function(){_({type:14})},setHighlightedIndex:function(t){_({type:15,highlightedIndex:t})},setInputValue:function(t){_({type:17,inputValue:t})},selectItem:function(t){_({type:16,selectedItem:t})},reset:function(){_({type:18})},highlightedIndex:p,isOpen:d,selectedItem:m,inputValue:g}}Si.stateChangeTypes=Ti;var Ei=Object(r.createContext)(),ki=function(){return Object(r.useContext)(Ei)},Mi=Object(r.forwardRef)((function(t,e){var n=t.isInvalid,r=t.isRequired,i=t.isDisabled,o=t.isReadOnly,a=ge()(t,["isInvalid","isRequired","isDisabled","isReadOnly"]),s={isRequired:r,isDisabled:i,isInvalid:n,isReadOnly:o};return Object(V.d)(Ei.Provider,{value:s},Object(V.d)(fe,pe()({role:"group",ref:e},a)))}));Mi.displayName="FormControl";function Oi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oi(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oi(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zi={_readOnly:{bg:"transparent",boxShadow:"none !important",userSelect:"all"}},Ri={bg:"transparent",px:void 0,height:void 0},Li=function(t){switch(t.variant){case"flushed":return n=(e=t).theme,r=e.focusBorderColor,i=e.errorBorderColor,o=ot(n.colors,r,r),a=ot(n.colors,i,i),Pi({},zi,{borderBottom:"2px",borderColor:"inherit",rounded:0,px:void 0,bg:"transparent",_focus:{borderColor:o},_invalid:{borderColor:a}});case"unstyled":return Ri;case"filled":return function(t){var e=t.theme,n=t.focusBorderColor,r=t.errorBorderColor,i=t.colorMode,o=ot(e.colors,n,n),a=ot(e.colors,r,r);return Pi({},zi,{border:"2px",borderColor:"transparent",bg:{light:"gray.100",dark:"whiteAlpha.50"}[i],_hover:{bg:{light:"gray.200",dark:"whiteAlpha.100"}[i]},_disabled:{opacity:"0.4",cursor:"not-allowed"},_focus:{bg:"transparent",borderColor:o},_invalid:{borderColor:a}})}(t);case"outline":return function(t){var e=t.theme,n=t.colorMode,r=t.focusBorderColor,i=t.errorBorderColor,o=ot(e.colors,r,r),a=ot(e.colors,i,i);return Pi({},zi,{border:"1px",borderColor:{light:"inherit",dark:"whiteAlpha.50"}[n],bg:{light:"white",dark:"whiteAlpha.100"}[n],_hover:{borderColor:{light:"gray.300",dark:"whiteAlpha.200"}[n]},_disabled:{opacity:"0.4",cursor:"not-allowed"},_focus:{borderColor:o,boxShadow:"0 0 0 1px "+o},_invalid:{borderColor:a,boxShadow:"0 0 0 1px "+a}})}(t);default:return{}}var e,n,r,i,o,a},Ci={display:"flex",alignItems:"center",position:"relative",transition:"all 0.2s",outline:"none"},ji={lg:{fontSize:"lg",px:4,height:12,lineHeight:"3rem",rounded:"md"},md:{fontSize:"md",px:4,height:10,lineHeight:"2.5rem",rounded:"md"},sm:{fontSize:"sm",px:3,height:8,lineHeight:"2rem",rounded:"sm"}},Ii=function(t){var e=Pi({},t,{theme:Object(nn.b)(),colorMode:Object(hn.a)().colorMode});return Pi({width:t.isFullWidth?"100%":void 0},Ci,{},function(t){return ji[t.size]}(e),{},Li(e))},Ni=Object(r.forwardRef)((function(t,e){t.size,t.variant;var n=t.as,r=t["aria-label"],i=t["aria-describedby"],o=t.isReadOnly,a=(t.isFullWidth,t.isDisabled,t.isInvalid,t.isRequired,t.focusBorderColor,t.errorBorderColor,ge()(t,["size","variant","as","aria-label","aria-describedby","isReadOnly","isFullWidth","isDisabled","isInvalid","isRequired","focusBorderColor","errorBorderColor"])),s=Ii(t),u=function(t){var e=ki();return e?Object.keys(e).reduce((function(n,r){return n[r]=t[r],e&&null==t[r]&&(n[r]=e[r]),n}),{}):t}(t);return Object(V.d)(je,pe()({ref:e,as:n,readOnly:u.isReadOnly,"aria-readonly":o,disabled:u.isDisabled,"aria-label":r,"aria-invalid":u.isInvalid,required:u.isRequired,"aria-required":u.isRequired,"aria-disabled":u.isDisabled,"aria-describedby":i},s,a))}));Ni.displayName="Input",Ni.defaultProps={size:"md",as:"input",variant:"outline",isFullWidth:!0,focusBorderColor:"blue.500",errorBorderColor:"red.500"};var Di=Ni,Fi=Object(r.forwardRef)((function(t,e){var n,r=t.size,i=t.children,o=t.placement,a=void 0===o?"left":o,s=t.disablePointerEvents,u=void 0!==s&&s,l=ge()(t,["size","children","placement","disablePointerEvents"]),c=ji[r]&&ji[r].height,h=ji[r]&&ji[r].fontSize,f=((n={})[a]="0",n);return Object(V.d)(fe,pe()({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",height:c,width:c,fontSize:h,top:"0",zIndex:1,ref:e},u&&{pointerEvents:"none"},f,l),i)}));Fi.displayName="InputElement";var Bi=Object(r.forwardRef)((function(t,e){return Object(V.d)(Fi,pe()({ref:e,placement:"left"},t))}));Bi.displayName="InputLeftElement";var Ui=Object(r.forwardRef)((function(t,e){return Object(V.d)(Fi,pe()({ref:e,placement:"right"},t))}));Ui.displayName="InputRightElement";var Gi=function(t){var e=t.children,n=t.size,i=void 0===n?"md":n,o=ge()(t,["children","size"]),a=Object(nn.b)().sizes,s=ji[i]&&ji[i].height,u=null,l=null;return Object(V.d)(fe,pe()({display:"flex",position:"relative"},o),r.Children.map(e,(function(t){if(Object(r.isValidElement)(t))return t.type===Bi&&(u=a[s]),t.type===Ui&&(l=a[s]),t.type===Di?Object(r.cloneElement)(t,{size:i,pl:t.props.pl||u,pr:t.props.pr||l}):Object(r.cloneElement)(t,{size:i})})))},Vi=Object(r.forwardRef)((function(t,e){var n=t.styleType,i=void 0===n?"none":n,o=t.stylePos,a=void 0===o?"inside":o,s=t.spacing,u=t.children,l=ge()(t,["styleType","stylePos","spacing","children"]);return Object(V.d)(fe,pe()({ref:e,as:"ul",listStyleType:i,listStylePosition:a},l),r.Children.map(u,(function(t,e){if(Object(r.isValidElement)(t))return e+1===r.Children.count(u)?t:Object(r.cloneElement)(t,{spacing:s})})))}));Vi.displayName="List";var Zi=Object(r.forwardRef)((function(t,e){var n=t.spacing,r=ge()(t,["spacing"]);return Object(V.d)(je,pe()({ref:e,as:"li",mb:n},r))}));Zi.diplayName="ListItem";var Wi=Vi;function qi(){return(qi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var Hi={}.GATSBY_API_KEY,Yi=function(t){var e=t.items,n=void 0===e?[]:e,o=Xe((function(t){return t.updateMapFocus})),a=Object(r.useState)(n),s=a[0],u=a[1],l=Si({items:s,onSelectedItemChange:function(t){var e=t.selectedItem;e&&e.simpleLabel?(fetch("https://geocoder.ls.hereapi.com/6.2/geocode.json?apiKey="+Hi+"&locationId="+e.locationId).then((function(t){return t.json()})).then((function(t){var e=t.Response.View[0].Result[0].Location.DisplayPosition;o([e.Latitude,e.Longitude],null,7)})),v(e.simpleLabel.replace(/<[^>]*>/g,""))):v("")},onInputValueChange:function(t){var e=t.inputValue;fetch("https://autocomplete.geocoder.ls.hereapi.com/6.2/suggest.json?apiKey="+Hi+"&language=en&maxresults=10&matchLevel=city&query="+e.split(" ").join("+")+"&beginHighlight=<strong>&endHighlight=</strong>").then((function(t){return t.json()})).then((function(t){t.suggestions?u(t.suggestions.filter((function(t){return"city"===t.matchLevel})).map((function(t){return Object.assign({},t,{simpleLabel:t.address.city?t.address.city+(t.address.state?", "+t.address.state:"")+", "+t.address.country:t.address.country})}))):u([])}))}}),c=l.isOpen,h=l.getMenuProps,f=l.getInputProps,d=l.getComboboxProps,p=l.highlightedIndex,m=l.getItemProps,g=l.inputValue,v=l.setInputValue;return Object(V.d)(i.a.Fragment,null,Object(V.d)(fe,{position:"relative"},Object(V.d)(fe,d(),Object(V.d)(Gi,{boxShadow:"lg",size:"lg"},Object(V.d)(Di,qi({},f({placeholder:"Search the map",className:"main-combobox"}),{style:{WebkitAppearance:"none"},borderColor:"transparent",borderRadius:"md",_hover:{borderColor:"transparent"},_focus:{borderColor:"rgba(236,97,14, 1)",boxShadow:"0 0 0 0.0625rem rgba(236,97,14, 1), 0 0 0 0.25rem rgba(236,97,14, 0.25)"},_placeholder:{color:"gray.500"}})),Object(V.d)(Ui,null,g?Object(V.d)(zr,{icon:"close",isRound:!0,size:"sm","aria-label":"toggle menu",onClick:function(){return v("")}}):Object(V.d)(Ze,{name:"search",color:"gray.500"})))),c&&s.length?Object(V.d)(fe,{position:"absolute",top:"100%",left:0,right:0,mt:"0.5rem",bg:"white",borderRadius:"md",shadow:"md",maxHeight:"14rem",overflow:"scroll",py:"0.75rem"},Object(V.d)(Wi,h(),s.length?null:Object(V.d)(Zi,{py:"0.5rem",px:"1rem",color:"gray.500",alignItems:"center",display:"flex"},Object(V.d)(Ze,{name:"not-allowed",mr:"0.25rem"}),"Address not found"),s.map((function(t,e){var n=t.simpleLabel;return Object(V.d)(Zi,qi({isTruncated:!0,key:""+n+e,style:{backgroundColor:p===e?Rr.a.orange[50]:"transparent"},py:"0.5rem",px:"1rem"},m({item:n,index:e}),{dangerouslySetInnerHTML:{__html:n}}))})))):null))},Xi=function(t){var e=Object(r.useState)(Boolean(t)),n=e[0],i=e[1],o=Object(r.useCallback)((function(){return i(!1)}),[]);return{isOpen:n,onOpen:Object(r.useCallback)((function(){return i(!0)}),[]),onClose:o,onToggle:Object(r.useCallback)((function(){return i((function(t){return!t}))}),[])}},$i=n("i0Wh");function Ki(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ji(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ki(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ki(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qi=function(t){var e=t.in,n=t.offset,r=void 0===n?"10px":n,i=t.duration,o=void 0===i?150:i,a=t.children,s=ge()(t,["in","offset","duration","children"]);return Object(V.d)($i.Transition,pe()({items:e,config:{duration:o},from:{opacity:0,transform:"translate3d(0, "+r+", 0)"},enter:{opacity:1,transform:"translate3d(0, 0, 0)"},leave:{opacity:0,transform:"translate3d(0, "+r+", 0)"}},s),(function(t){return t&&function(t){return a(Ji({willChange:"opacity, transform"},t))}}))},to=n("x0D+"),eo=n("Qihw"),no=n.n(eo),ro=n("i8i4");var io=Object(r.forwardRef)((function(t,e){var n=t.children,i=t.container,o=t.isDisabled,a=void 0!==o&&o,s=t.onRendered,u=Object(r.useState)(null),l=u[0],c=u[1],h=sn(n.ref,e);return un((function(){a||c(function(t){return t="function"==typeof t?t():t,Object(ro.findDOMNode)(t)}(i)||document.body)}),[i,a]),un((function(){if(l&&!a)return an(e,l),function(){an(e,null)}}),[e,l,a]),un((function(){s&&(l||a)&&s()}),[s,l,a]),a?(r.Children.only(n),Object(r.cloneElement)(n,{ref:h})):l?Object(ro.createPortal)(n,l):l}));io.displayName="Portal";var oo=io,ao={display:"inline-flex",alignItems:"center",justifyContent:"center",rounded:"md",transition:"all 0.2s",flex:"0 0 auto",_hover:{bg:"blackAlpha.100"},_active:{bg:"blackAlpha.200"},_disabled:{cursor:"not-allowed"},_focus:{boxShadow:"outline"}},so={lg:{button:"40px",icon:"16px"},md:{button:"32px",icon:"12px"},sm:{button:"24px",icon:"10px"}},uo=function(t){var e=t.size,n=void 0===e?"md":e,r=t.isDisabled,i=t.color,o=t["aria-label"],a=void 0===o?"Close":o,s=ge()(t,["size","isDisabled","color","aria-label"]),u=Object(hn.a)().colorMode,l=so[n]&&so[n].button,c=so[n]&&so[n].icon;return Object(V.d)(je,pe()({as:"button",outline:"none","aria-disabled":r,disabled:r,"aria-label":a,size:l,_hover:{bg:{light:"blackAlpha.100",dark:"whiteAlpha.100"}[u]},_active:{bg:{light:"blackAlpha.200",dark:"whiteAlpha.200"}[u]}},ao,s),Object(V.d)(Ze,{color:i,focusable:"false",name:"close","aria-hidden":!0,size:c}))},lo="undefined"!=typeof document?document.body:null,co=new WeakMap,ho=new WeakMap,fo={},po=0,mo=n("2rMq");function go(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?go(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):go(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _o=Object(r.createContext)({}),yo=function(){return Object(r.useContext)(_o)};function bo(t){var e=t.isOpen,n=t.id,i=t.enableInert,o=t.container,a=void 0===o?mo.canUseDOM?document.body:null:o,s=Object(r.useRef)(mo.canUseDOM?document.getElementById(n)||document.createElement("div"):null);return Object(r.useEffect)((function(){var t=null,r=s.current;return e&&mo.canUseDOM&&(s.current.id=n,a.appendChild(s.current),i&&(t=function(t,e,n){void 0===e&&(e=lo),void 0===n&&(n="data-aria-hidden");var r=Array.isArray(t)?t:[t];fo[n]||(fo[n]=new WeakMap);var i=fo[n],o=[];return function t(e){!e||r.indexOf(e)>=0||Array.prototype.forEach.call(e.children,(function(e){if(r.some((function(t){return e.contains(t)})))t(e);else{var a=e.getAttribute("aria-hidden"),s=null!==a&&"false"!==a,u=(co.get(e)||0)+1,l=(i.get(e)||0)+1;co.set(e,u),i.set(e,l),o.push(e),1===u&&s&&ho.set(e,!0),1===l&&e.setAttribute(n,"true"),s||e.setAttribute("aria-hidden","true")}}))}(e),po++,function(){o.forEach((function(t){var e=co.get(t)-1,r=i.get(t)-1;co.set(t,e),i.set(t,r),e||(ho.has(t)||t.removeAttribute("aria-hidden"),ho.delete(t)),r||t.removeAttribute(n)})),--po||(co=new WeakMap,co=new WeakMap,ho=new WeakMap,fo={})}}(r))),function(){i&&null!=t&&t(),r.parentElement&&r.parentElement.removeChild(r)}}),[e,n,i,a]),s}var xo=function(t){var e=t.isOpen,n=t.initialFocusRef,o=t.finalFocusRef,a=t.onClose,s=t.blockScrollOnMount,u=void 0===s||s,l=t.closeOnEsc,c=void 0===l||l,h=t.closeOnOverlayClick,f=void 0===h||h,d=t.useInert,p=void 0===d||d,m=t.scrollBehavior,g=void 0===m?"outside":m,v=t.isCentered,_=t.addAriaLabels,y=void 0===_||_,b=t.preserveScrollBarGap,x=t.formatIds,w=void 0===x?function(t){return{content:"modal-"+t,header:"modal-"+t+"-header",body:"modal-"+t+"-body"}}:x,T=t.container,A=t.returnFocusOnClose,S=void 0===A||A,E=t.children,k=t.id,M=t.size,O=void 0===M?"md":M,P=Object(r.useRef)(null),z=en(),R=k||z,L=w(R).content,C=w(R).header,j=w(R).body,I="chakra-portal-"+R,N=!1,D=!1;"object"==typeof y&&(N=y.header,D=y.body),"boolean"==typeof y&&(N=y,D=y),Object(r.useEffect)((function(){var t=P.current;return e&&u&&Object(to.disableBodyScroll)(t,{reserveScrollBarGap:b}),function(){return Object(to.enableBodyScroll)(t)}}),[e,u,b]),Object(r.useEffect)((function(){var t=function(t){"Escape"===t.key&&c&&a(t,"pressedEscape")};return e&&!f&&mo.canUseDOM&&document.addEventListener("keydown",t),function(){mo.canUseDOM&&document.removeEventListener("keydown",t)}}),[e,a,f,c]);var F=bo({isOpen:e,id:I,enableInert:p,container:T}),B={isOpen:e,initialFocusRef:n,onClose:a,blockScrollOnMount:u,closeOnEsc:c,closeOnOverlayClick:f,returnFocusOnClose:S,contentRef:P,scrollBehavior:g,isCentered:v,headerId:C,bodyId:j,contentId:L,size:O,addAriaLabelledby:N,addAriaDescribedby:D},U=Object(r.useCallback)((function(){n&&n.current?n.current.focus():P.current&&0===function(t,e){void 0===e&&(e=!1);var n=Array.from(t.querySelectorAll(on));return n=n.filter((function(t){return"none"!==window.getComputedStyle(t).display})),!0===e&&(n=n.filter((function(t){return"-1"!==t.getAttribute("tabindex")}))),n}(P.current).length&&P.current.focus()}),[n]),G=Object(r.useCallback)((function(){o&&o.current&&o.current.focus()}),[o]);return e?i.a.createElement(_o.Provider,{value:B},i.a.createElement(oo,{container:F.current},i.a.createElement(no.a,{returnFocus:S&&!o,onActivation:U,onDeactivation:G},E))):null},wo=i.a.forwardRef((function(t,e){return i.a.createElement(fe,pe()({pos:"fixed",bg:"rgba(0,0,0,0.4)",left:"0",top:"0",w:"100vw",h:"100vh",ref:e,zIndex:"overlay",onClick:ln(t.onClick,(function(t){t.stopPropagation()}))},t))}));wo.displayName="ModalOverlay";var To=i.a.forwardRef((function(t,e){var n=t.onClick,r=t.children,o=t.zIndex,a=void 0===o?"modal":o,s=t.noStyles,u=ge()(t,["onClick","children","zIndex","noStyles"]),l=yo(),c=l.contentRef,h=l.onClose,f=l.isCentered,d=l.bodyId,p=l.headerId,m=l.contentId,g=l.size,v=l.closeOnEsc,_=l.addAriaLabelledby,y=l.addAriaDescribedby,b=l.scrollBehavior,x=l.closeOnOverlayClick,w=sn(e,c),T={light:{bg:"white",shadow:"0 7px 14px 0 rgba(0,0,0, 0.1), 0 3px 6px 0 rgba(0, 0, 0, .07)"},dark:{bg:"gray.700",shadow:"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"}}[Object(hn.a)().colorMode],A={},S={};return f?A={display:"flex",alignItems:"center",justifyContent:"center"}:S={top:"3.75rem",mx:"auto"},"inside"===b&&(A=vo({},A,{maxHeight:"calc(100vh - 7.5rem)",overflow:"hidden",top:"3.75rem"}),S=vo({},S,{height:"100%",top:0})),"outside"===b&&(A=vo({},A,{overflowY:"auto",overflowX:"hidden"}),S=vo({},S,{my:"3.75rem",top:0})),s&&(A={},S={}),i.a.createElement(fe,pe()({pos:"fixed",left:"0",top:"0",w:"100%",h:"100%",zIndex:a,onClick:function(t){t.stopPropagation(),x&&h(t,"clickedOverlay")},onKeyDown:function(t){"Escape"===t.key&&(t.stopPropagation(),v&&h(t,"pressedEscape"))}},A),i.a.createElement(fe,pe()({ref:w,as:"section",role:"dialog","aria-modal":"true",tabIndex:-1,outline:0,maxWidth:g,w:"100%",id:m},y&&{"aria-describedby":d},_&&{"aria-labelledby":p},{pos:"relative",d:"flex",flexDir:"column",zIndex:a,onClick:ln(n,(function(t){return t.stopPropagation()}))},T,S,u),r))}));To.displayName="ModalContent",Object(r.forwardRef)((function(t,e){var n=yo().headerId;return i.a.createElement(fe,pe()({ref:e,px:6,py:4,id:n,as:"header",position:"relative",fontSize:"xl",fontWeight:"semibold"},t))})).displayName="ModalHeader",Object(r.forwardRef)((function(t,e){return i.a.createElement(fe,pe()({display:"flex",justifyContent:"flex-end",ref:e,px:6,py:4,as:"footer"},t))})).displayName="ModalFooter";var Ao=Object(r.forwardRef)((function(t,e){var n=yo(),r=n.bodyId,o={};return"inside"===n.scrollBehavior&&(o={overflowY:"auto"}),i.a.createElement(fe,pe()({ref:e,id:r,px:6,py:2,flex:"1"},o,t))}));Ao.displayName="ModalBody";var So=Object(r.forwardRef)((function(t,e){var n=yo().onClose;return i.a.createElement(uo,pe()({ref:e,onClick:n,position:"absolute",top:"8px",right:"12px"},t))}));So.displayName="ModalCloseButton";var Eo=function(){return Object(V.d)(i.a.Fragment,null,Object(V.d)(ye,{fontSize:["1.5rem","2rem"],lineHeight:1.125,mb:"1.25rem"},"About"),Object(V.d)(xe,null,"Using HERE location services (HERE Vector Map Tiles API and HERE Data Hub APIs) and ",Object(V.d)(De,{alt:"Center for Systems Science and Engineering (CSSE)",href:"https://github.com/CSSEGISandData/COVID-19",color:"#00AFAA"},"data provided by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University"),", and ",Object(V.d)(De,{alt:"DXY",href:"https://ncov.dxy.cn/ncovh5/view/pneumonia?scene=2&clicktime=1579582238&enterid=1579582238&from=singlemessage&isappinstalled=0",color:"#00AFAA"},"DXY"),", we display the spread of Coronavirus COVID-19 globally. For questions regarding the global data, please get in touch with ",Object(V.d)(De,{alt:"Center for Systems Science and Engineering (CSSE)",href:"https://github.com/CSSEGISandData/COVID-19",color:"#00AFAA"},"JHU CSSE"),". For questions regarding China-specific data, please contact ",Object(V.d)(De,{alt:"DXY",href:"https://ncov.dxy.cn/ncovh5/view/pneumonia?scene=2&clicktime=1579582238&enterid=1579582238&from=singlemessage&isappinstalled=0",color:"#00AFAA"},"DXY"),"."),Object(V.d)(ye,{fontSize:["1.25rem","1.5rem"],lineHeight:1.125,mt:"1.75rem",mb:"1.25rem"},"About HERE Technologies"),Object(V.d)(xe,null,"HERE, a location data and technology platform, moves people, businesses and cities forward by harnessing the power of location. By leveraging our open platform, we empower our customers to achieve better outcomes – from helping a city manage its infrastructure or a business optimize its assets to guiding drivers to their destination safely. To learn more about HERE, please visit ",Object(V.d)(De,{href:"https://www.here.com/",target:"_blank",rel:"noopener noreferrer",color:"#00AFAA"},"www.here.com")," and ",Object(V.d)(De,{href:"https://360.here.com/",target:"_blank",rel:"noopener noreferrer",color:"#00AFAA"},"360.here.com")))};function ko(){return(ko=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var Mo=function(){var t=Xi(),e=t.isOpen,n=t.onOpen,i=t.onClose,o=Object(r.useRef)();return Object(V.d)(fe,{flex:"none",display:["none",null,"block"],ml:"0.75rem"},Object(V.d)(zr,{size:"lg",icon:"info",isRound:!0,variant:"outline",bg:"white",shadow:"lg",border:"0.125rem solid",borderColor:"transparent",_focus:{borderColor:"rgba(236,97,14, 1)",color:"rgba(236,97,14, 1)"},onClick:n,ref:o}),Object(V.d)(Qi,{in:e},(function(t){return Object(V.d)(xo,{finalFocusRef:o,onClose:i,scrollBehavior:"inside",isOpen:!0,size:["calc(100% - 2rem)",null,"2xl"]},Object(V.d)(wo,{opacity:t.opacity,zIndex:99999999}),Object(V.d)(To,ko({borderRadius:"lg"},t,{zIndex:99999999}),Object(V.d)(So,null),Object(V.d)(Ao,{py:"3rem",px:"2.5rem"},Object(V.d)(Eo,null))))})))},Oo=function(){return Object(V.d)(i.a.Fragment,null,Object(V.d)(fe,{display:["block",null,"none"],position:"fixed",top:"0",left:"0",right:"0",height:"0.25rem",bg:"#00AFAA"}),Object(V.d)(Te,{position:"fixed",flexWrap:"wrap",top:["1.5rem","1.5rem","2.5rem"],right:"0",zIndex:10,width:"100%",maxWidth:["100%",null,"28rem"],pr:["1.25rem",null,"2.5rem"],pl:["1.25rem",null,0],alignItems:"center"},Object(V.d)(fe,{width:"100%",display:["block",null,"none"]},Object(V.d)(ye,{fontSize:["1.5rem","2rem"],lineHeight:1.125,mb:"1.25rem"},Object(V.d)(xe,{mr:"0.75rem",as:"span"},"Tracking Coronavirus"," ",Object(V.d)("br",null),"COVID-19"))),Object(V.d)(fe,{flex:"1 1 auto"},Object(V.d)(Yi,null)),Object(V.d)(Mo,null)))},Po=n("Sfbj"),zo=function(){var t=Qe((function(t){return t.center}));return Object(V.d)(Po.ComposableMap,{width:400,height:400,projection:"geoOrthographic",projectionConfig:{rotate:t,scale:200}},Object(V.d)(Po.Graticule,{stroke:Rr.a.gray[200]}),Object(V.d)(Po.Geographies,{geography:"https://cdn.jsdelivr.net/npm/world-atlas@2/land-110m.json"},(function(t){var e=t.geographies;return Object(V.d)(i.a.Fragment,null,e.map((function(t){return Object(V.d)(Po.Geography,{key:t.rsmKey,geography:t,fill:Rr.a.gray[500],style:{default:{outline:"none"},hover:{outline:"none"},pressed:{outline:"none"}}})})))})))},Ro=function(){var t=$e((function(t){return t.updateTab})),e=$e((function(t){return t.currentTab}));return Object(V.d)(fe,{display:["block",null,"none"],position:"fixed",bottom:"0",left:"0",right:"0",bg:"white",zIndex:999999,boxShadow:"0 -0.25rem 0.75rem rgba(0,0,0,0.1)"},Object(V.d)(Tn,{variantColor:"orange",onChange:function(e){t(e)},defaultIndex:1,index:e},Object(V.d)(bn,{display:"flex",justifyContent:"space-between"},Object(V.d)(yn,{width:1/3,height:"3rem",fontWeight:600,_focus:{boxShadow:"none"}},Object(V.d)(Ze,{name:"list",mr:"0.25rem"}),"Cases"),Object(V.d)(yn,{width:1/3,height:"3rem",fontWeight:600,_focus:{boxShadow:"none"}},Object(V.d)(Ze,{name:"globe",mr:"0.25rem"}),"Map"),Object(V.d)(yn,{width:1/3,height:"3rem",fontWeight:600,_focus:{boxShadow:"none"}},Object(V.d)(Ze,{name:"info",mr:"0.25rem"}),"About"))))},Lo=function(){var t=Xe((function(t){return t.mapFocusData})),e=Ke((function(t){return t.currentDate})),n=Je((function(t){return t.currentDataType})),r=0===n?"":1===n?"deaths_":"recoveries_",i=0===n?"cases":1===n?"deaths":"recoveries";return t?Object(V.d)(Te,{display:["flex",null,"none"],position:"fixed",bottom:["6.5rem","7.5rem"],right:["8rem","10rem","15rem"],left:["1rem",null,"auto"],bg:"white",shadow:"md",px:"1.25rem",py:["0.75rem",null,"1.25rem"],borderRadius:"md",width:["auto",null,"15rem"],justifyContent:"space-between",zIndex:3},Object(V.d)(fe,{fontWeight:700},t?t.provincestate||t.countryregion:"No data"),Object(V.d)(fe,null,t?Jn(t[r+e])+" "+i:"No data")):null},Co=n("ozPf"),jo=n.n(Co),Io=n("Wgwc"),No=n.n(Io);function Do(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Fo=function(t){var e,n,r,i,o,a=t.variant,s=t.colorMode;switch(a){case"solid":return(e=t,n=e.theme.colors,r=e.color,i=n[r]&&n[r][500],o=dr(i,.6),{light:{bg:fr(r,500),color:"white"},dark:{bg:o,color:"whiteAlpha.800"}})[s];case"subtle":return function(t){var e=t.theme.colors,n=t.color,r=e[n]&&e[n][200],i=pr(r)[300];return{light:{bg:fr(n,100),color:fr(n,800)},dark:{bg:i,color:fr(n,200)}}}(t)[s];case"outline":return function(t){var e=t.theme.colors,n=t.color,r=e[n]&&e[n][200],i=dr(r,.8);return{light:{boxShadow:"inset 0 0 0px 1px "+(e[n]&&e[n][500]),color:fr(n,500)},dark:{boxShadow:"inset 0 0 0px 1px "+i,color:i}}}(t)[s];default:return{}}},Bo=function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Do(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Do(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{theme:Object(nn.b)(),colorMode:Object(hn.a)().colorMode});return Fo(e)},Uo=Object(r.forwardRef)((function(t,e){var n=t.variantColor,r=void 0===n?"gray":n,i=t.variant,o=void 0===i?"subtle":i,a=ge()(t,["variantColor","variant"]);cn();var s=Bo({color:r,variant:o});return Object(V.d)(fe,pe()({ref:e,display:"inline-block",px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",whiteSpace:"nowrap",verticalAlign:"middle"},s,a))}));Uo.displayName="Badge";var Go=Uo;function Vo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vo(n,!0).forEach((function(e){F()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wo={position:"absolute",top:"50%",transform:"translateY(-50%)"},qo=function(t){var e=t.thumbSize,n=t.trackPercent;t.theme;return Zo({},Wo,{zIndex:1,size:e,rounded:"full",bg:"#fff",boxShadow:"sm",left:"calc("+n+"% - "+e+" / 2)",border:"1px",borderColor:"transparent",transition:"transform 0.2s",_focus:{boxShadow:"outline"},_disabled:{backgroundColor:"gray.300"},_active:{transform:"translateY(-50%) scale(1.15)"}})},Ho=function(t){var e=t.trackHeight,n=t.trackPercent,r=t.color,i=t.colorMode;return Zo({},Wo,{height:e,bg:"light"===i?r+".500":r+".200",width:n+"%",rounded:"sm"})},Yo={light:{bg:"gray.200",_disabled:{bg:"gray.300"}},dark:{bg:"whiteAlpha.200",_disabled:{bg:"whiteAlpha.300"}}},Xo=function(t){var e=t.trackHeight,n=(t.theme,t.colorMode);return Zo({height:e,borderRadius:"sm",width:"100%"},Wo,{},Yo[n])},$o={width:"full",display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},Ko={lg:{thumb:"16px",trackHeight:"4px"},md:{thumb:"14px",trackHeight:"4px"},sm:{thumb:"10px",trackHeight:"2px"}},Jo=function(t){var e=Object(nn.b)(),n=Object(hn.a)().colorMode,r=t.trackPercent,i=t.size,o=t.color,a=Ko[i],s={trackHeight:a.trackHeight,thumbSize:a.thumb,theme:e,trackPercent:r,color:o,colorMode:n};return{rootStyle:$o,trackStyle:Xo(s),filledTrackStyle:Ho(s),thumbStyle:qo(s)}};function Qo(t,e){return function(t,e){var n=e.toString().split(".")[1],r=n?n.length:0;return Number(t.toFixed(r))}(Math.round(t/e)*e,e)}function ta(t,e,n){return t>n?n:t<e?e:t}var ea=Object(r.forwardRef)((function(t,e){var n=oa(),r=n.thumbRef,i=n.isDisabled,o=n.onFocus,a=n.onThumbKeyDown,s=n.min,u=n.max,l=n.valueText,c=n.orientation,h=n.trackPercent,f=n.size,d=n.color,p=n.value,m=n.ariaLabelledBy,g=Jo({trackPercent:h,orientation:c,size:f,color:d}).thumbStyle,v=sn(r,e);return Object(V.d)(je,pe()({"data-slider-thumb":"",d:"flex",alignItems:"center",outline:"none",justifyContent:"center",onFocus:o,ref:v,role:"slider",tabIndex:i?void 0:0,"aria-disabled":i,"aria-valuemin":s,"aria-valuetext":l,"aria-orientation":c,"aria-valuenow":p,"aria-valuemax":u,"aria-labelledby":m,onKeyDown:a},g,t))}));ea.displayName="SliderThumb";var na=function(t){var e=oa(),n=e.trackRef,r=e.isDisabled,i=ge()(e,["trackRef","isDisabled"]),o=Jo(i).trackStyle;return Object(V.d)(fe,pe()({"data-slider-track":"","aria-disabled":r,ref:n},o,t))},ra=function(t){var e=oa(),n=e.isDisabled,r=ge()(e,["isDisabled"]),i=Jo(r).filledTrackStyle;return Object(V.d)(je,pe()({"aria-disabled":n,"data-slider-filled-track":""},i,t))},ia=Object(r.createContext)(),oa=function(){return Object(r.useContext)(ia)},aa=Object(r.forwardRef)((function(t,e){var n=t.value,i=t.defaultValue,o=t.onChange,a=t.onKeyDown,s=t.onFocus,u=t.onBlur,l=t.onMouseDown,c=t.isDisabled,h=t.max,f=void 0===h?100:h,d=t.min,p=void 0===d?0:d,m=t.step,g=void 0===m?1:m,v=t["aria-labelledby"],_=(t["aria-label"],t["aria-valuetext"]),y=t.orientation,b=void 0===y?"horizontal":y,x=t.getAriaValueText,w=t.size,T=void 0===w?"md":w,A=t.color,S=void 0===A?"blue":A,E=t.name,k=t.id,M=t.children,O=ge()(t,["value","defaultValue","onChange","onKeyDown","onFocus","onBlur","onMouseDown","isDisabled","max","min","step","aria-labelledby","aria-label","aria-valuetext","orientation","getAriaValueText","size","color","name","id","children"]),P=Object(r.useRef)(null!=n).current,z=Object(r.useState)(i||0),R=z[0],L=z[1],C=ta(P?n:R,p,f),j=function(t,e,n){return 100*(t-e)/(n-e)}(C,p,f),I=Jo({trackPercent:j,orientation:b,size:T,color:S}).rootStyle,N=Object(r.useRef)(),D=Object(r.useRef)(),F=function(t){if(N.current){var e=N.current.getBoundingClientRect(),n=e.left,r=e.width,i=function(t,e,n){return(n-e)*t+e}(((t.touches?t.touches[0]:t).clientX-n)/r,p,f);return g&&(i=Qo(i,g)),i=ta(i,p,f)}},B=Object(r.useCallback)((function(t){P||L(t),o&&o(t)}),[P,o]),U=function t(){document.body.removeEventListener("mousemove",G),document.body.removeEventListener("touchmove",G),document.body.removeEventListener("mouseup",t),document.body.removeEventListener("touchend",t)},G=function(t){var e=F(t);B(e)},Z=function(t){if(!c){l&&l(t),t.preventDefault();var e=F(t);e!==C&&B(e),document.body.addEventListener("mousemove",G),document.body.addEventListener("touchmove",G),document.body.addEventListener("mouseup",U),document.body.addEventListener("touchend",U),D.current&&D.current.focus()}},W=x?x(C):_,q={trackRef:N,thumbRef:D,onThumbKeyDown:function(t){var e,n=!1,r=(f-p)/10;switch(t.key){case"ArrowLeft":case"ArrowDown":e=C-g,n=!0;break;case"ArrowRight":case"ArrowUp":e=C+g,n=!0;break;case"PageDown":e=C-r,n=!0;break;case"PageUp":e=C+r,n=!0;break;case"Home":e=p,n=!0;break;case"End":e=f,n=!0;break;default:return}n&&(t.preventDefault(),t.stopPropagation()),g&&(e=Qo(e,g)),e=ta(e,p,f),B(e),a&&a(t)},onFocus:s,trackPercent:j,ariaLabelledBy:v,orientation:b,isDisabled:c,size:T,color:S,min:p,max:f,valueText:W,value:C};return Object(V.d)(ia.Provider,{value:q},Object(V.d)(fe,pe()({role:"presentation",tabIndex:"-1",onMouseDown:Z,onTouchStart:Z,onMouseLeave:U,onTouchEnd:U,onBlur:function(t){U(),u&&u(t)},py:3,"aria-disabled":c,ref:e,css:{touchAction:"none"}},I,O),M,Object(V.d)("input",{type:"hidden",value:C,name:E,id:k})))}));aa.displayName="Slider";var sa=aa;function ua(t,e){return t===e}function la(t,e,n){var i=n&&n.equalityFn?n.equalityFn:ua,o=Object(r.useState)(t),a=o[0],s=o[1],u=function(t,e,n){void 0===n&&(n={});var i=n.maxWait,o=Object(r.useRef)(null),a=Object(r.useRef)([]),s=n.leading,u=void 0===n.trailing||n.trailing,l=Object(r.useRef)(!1),c=Object(r.useRef)(null),h=Object(r.useRef)(!1),f=Object(r.useRef)(t);f.current=t;var d=Object(r.useCallback)((function(){clearTimeout(c.current),clearTimeout(o.current),o.current=null,a.current=[],c.current=null,l.current=!1}),[]);return Object(r.useEffect)((function(){return function(){h.current=!0}}),[]),[Object(r.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];a.current=t,clearTimeout(c.current),l.current&&(l.current=!1),c.current||!s||l.current||(f.current.apply(f,t),l.current=!0),c.current=setTimeout((function(){var e=!0;s&&l.current&&(e=!1),d(),!h.current&&u&&e&&f.current.apply(f,t)}),e),i&&!o.current&&u&&(o.current=setTimeout((function(){var t=a.current;d(),h.current||f.current.apply(null,t)}),i))}),[i,e,d,s,u]),d,function(){c.current&&(f.current.apply(null,a.current),d())}]}(Object(r.useCallback)((function(t){return s(t)}),[]),e,n),l=u[0],c=u[1],h=u[2],f=Object(r.useRef)(t);return Object(r.useEffect)((function(){i(f.current,t)||(l(t),f.current=t)}),[t,l,i]),[a,c,h]}var ca=n("TSYQ"),ha=n.n(ca),fa=Math.PI,da=2*fa,pa=da-1e-6;function ma(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ga(){return new ma}ma.prototype=ga.prototype={constructor:ma,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var f=n-o,d=r-a,p=s*s+u*u,m=f*f+d*d,g=Math.sqrt(p),v=Math.sqrt(h),_=i*Math.tan((fa-Math.acos((p+h-m)/(2*g*v)))/2),y=_/v,b=_/g;Math.abs(y-1)>1e-6&&(this._+="L"+(t+y*l)+","+(e+y*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%da+da),h>pa?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=fa)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var va=ga,_a=function(t){return function(){return t}};function ya(t){this._context=t}ya.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var ba=function(t){return new ya(t)};function xa(t){return t[0]}function wa(t){return t[1]}var Ta=function(){var t=xa,e=null,n=_a(0),r=wa,i=_a(!0),o=null,a=ba,s=null;function u(u){var l,c,h,f,d,p=u.length,m=!1,g=new Array(p),v=new Array(p);for(null==o&&(s=a(d=va())),l=0;l<=p;++l){if(!(l<p&&i(f=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=l-1;h>=c;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(g[l]=+t(f,l,u),v[l]=+n(f,l,u),s.point(e?+e(f,l,u):g[l],r?+r(f,l,u):v[l]))}if(d)return s=null,d+""||null}function l(){return function(){var t=xa,e=wa,n=_a(!0),r=null,i=ba,o=null;function a(a){var s,u,l,c=a.length,h=!1;for(null==r&&(o=i(l=va())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(l)return o=null,l+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:_a(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:_a(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:_a(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:_a(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:_a(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:_a(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:_a(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:_a(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:_a(+t),u):r},u.lineX0=u.lineY0=function(){return l().x(t).y(n)},u.lineY1=function(){return l().x(t).y(r)},u.lineX1=function(){return l().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:_a(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u};function Aa(t,e){t(e)}function Sa(){return(Sa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ea(t){var e=t.children,n=t.x,r=t.x0,o=t.x1,a=t.y,s=t.y0,u=t.y1,l=t.data,c=void 0===l?[]:l,h=t.defined,f=void 0===h?function(){return!0}:h,d=t.className,p=t.curve,m=t.innerRef,g=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["children","x","x0","x1","y","y0","y1","data","defined","className","curve","innerRef"]),v=Ta();return n&&Aa(v.x,n),r&&Aa(v.x0,r),o&&Aa(v.x1,o),a&&Aa(v.y,a),s&&Aa(v.y0,s),u&&Aa(v.y1,u),f&&v.defined(f),p&&v.curve(p),e?i.a.createElement(i.a.Fragment,null,e({path:v})):i.a.createElement("path",Sa({ref:m,className:ha()("vx-area",d),d:v(c)||""},g))}Ea.propTypes={children:Ur.a.func,className:Ur.a.string,data:Ur.a.array,defined:Ur.a.func,innerRef:Ur.a.oneOfType([Ur.a.string,Ur.a.func,Ur.a.object]),x:Ur.a.oneOfType([Ur.a.func,Ur.a.number]),x0:Ur.a.oneOfType([Ur.a.func,Ur.a.number]),x1:Ur.a.oneOfType([Ur.a.func,Ur.a.number]),y:Ur.a.oneOfType([Ur.a.func,Ur.a.number]),y0:Ur.a.oneOfType([Ur.a.func,Ur.a.number]),y1:Ur.a.oneOfType([Ur.a.func,Ur.a.number])};var ka=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Ma=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return ka(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var Oa=Ma(ka),Pa=Oa.right,za=(Oa.left,Pa);var Ra=Array.prototype,La=(Ra.slice,Ra.map,Math.sqrt(50)),Ca=Math.sqrt(10),ja=Math.sqrt(2),Ia=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=Na(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function Na(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=La?10:o>=Ca?5:o>=ja?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=La?10:o>=Ca?5:o>=ja?2:1)}function Da(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=La?i*=10:o>=Ca?i*=5:o>=ja&&(i*=2),e<t?-i:i}function Fa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ba(){}function Ua(t,e){var n=new Ba;if(t instanceof Ba)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}Ba.prototype=Ua.prototype={constructor:Ba,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Ga=Ua;function Va(){}var Za=Ga.prototype;function Wa(t,e){var n=new Va;if(t instanceof Va)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}Va.prototype=Wa.prototype={constructor:Va,has:Za.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Za.remove,clear:Za.clear,values:Za.keys,size:Za.size,empty:Za.empty,each:Za.each};var qa=Array.prototype,Ha=qa.map,Ya=qa.slice;n("hHhE");var Xa=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function $a(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ka(){}var Ja="\\s*([+-]?\\d+)\\s*",Qa="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ts="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",es=/^#([0-9a-f]{3,8})$/,ns=new RegExp("^rgb\\("+[Ja,Ja,Ja]+"\\)$"),rs=new RegExp("^rgb\\("+[ts,ts,ts]+"\\)$"),is=new RegExp("^rgba\\("+[Ja,Ja,Ja,Qa]+"\\)$"),os=new RegExp("^rgba\\("+[ts,ts,ts,Qa]+"\\)$"),as=new RegExp("^hsl\\("+[Qa,ts,ts]+"\\)$"),ss=new RegExp("^hsla\\("+[Qa,ts,ts,Qa]+"\\)$"),us={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ls(){return this.rgb().formatHex()}function cs(){return this.rgb().formatRgb()}function hs(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=es.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?fs(e):3===n?new gs(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new gs(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new gs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ns.exec(t))?new gs(e[1],e[2],e[3],1):(e=rs.exec(t))?new gs(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=is.exec(t))?ds(e[1],e[2],e[3],e[4]):(e=os.exec(t))?ds(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=as.exec(t))?bs(e[1],e[2]/100,e[3]/100,1):(e=ss.exec(t))?bs(e[1],e[2]/100,e[3]/100,e[4]):us.hasOwnProperty(t)?fs(us[t]):"transparent"===t?new gs(NaN,NaN,NaN,0):null}function fs(t){return new gs(t>>16&255,t>>8&255,255&t,1)}function ds(t,e,n,r){return r<=0&&(t=e=n=NaN),new gs(t,e,n,r)}function ps(t){return t instanceof Ka||(t=hs(t)),t?new gs((t=t.rgb()).r,t.g,t.b,t.opacity):new gs}function ms(t,e,n,r){return 1===arguments.length?ps(t):new gs(t,e,n,null==r?1:r)}function gs(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function vs(){return"#"+ys(this.r)+ys(this.g)+ys(this.b)}function _s(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ys(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function bs(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ws(t,e,n,r)}function xs(t){if(t instanceof ws)return new ws(t.h,t.s,t.l,t.opacity);if(t instanceof Ka||(t=hs(t)),!t)return new ws;if(t instanceof ws)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ws(a,s,u,t.opacity)}function ws(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ts(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function As(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Xa(Ka,hs,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ls,formatHex:ls,formatHsl:function(){return xs(this).formatHsl()},formatRgb:cs,toString:cs}),Xa(gs,ms,$a(Ka,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new gs(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new gs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vs,formatHex:vs,formatRgb:_s,toString:_s})),Xa(ws,(function(t,e,n,r){return 1===arguments.length?xs(t):new ws(t,e,n,null==r?1:r)}),$a(Ka,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ws(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ws(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new gs(Ts(t>=240?t-240:t+120,i,r),Ts(t,i,r),Ts(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ss=function(t){return function(){return t}};function Es(t,e){return function(n){return t+n*e}}function ks(t){return 1==(t=+t)?Ms:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ss(isNaN(e)?n:e)}}function Ms(t,e){var n=e-t;return n?Es(t,n):Ss(isNaN(t)?e:t)}var Os=function t(e){var n=ks(e);function r(t,e){var r=n((t=ms(t)).r,(e=ms(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Ms(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Ps(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ms(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}Ps((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return As((n-r/e)*e,a,i,o,s)}})),Ps((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return As((n-r/e)*e,i,o,a,s)}})),n("Ji/l");var zs=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function Rs(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ls(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Bs(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var Cs=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},js=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},Is=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Bs(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Ns=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ds=new RegExp(Ns.source,"g");var Fs=function(t,e){var n,r,i,o=Ns.lastIndex=Ds.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Ns.exec(t))&&(r=Ds.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:js(n,r)})),o=Ds.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Bs=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Ss(e):("number"===r?js:"string"===r?(n=hs(e))?(e=n,Os):Fs:e instanceof hs?Os:e instanceof Date?Cs:Rs(e)?zs:Array.isArray(e)?Ls:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Is:js)(t,e)},Us=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},Gs=function(t){return+t},Vs=[0,1];function Zs(t){return t}function Ws(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function qs(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Hs(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Ws(i,r),o=n(a,o)):(r=Ws(r,i),o=n(o,a)),function(t){return o(r(t))}}function Ys(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ws(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=za(t,e,1,r)-1;return o[n](i[n](e))}}function Xs(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $s(){var t,e,n,r,i,o,a=Vs,s=Vs,u=Bs,l=Zs;function c(){return r=Math.min(a.length,s.length)>2?Ys:Hs,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(l(e)))}return h.invert=function(n){return l(e((o||(o=r(s,a.map(t),js)))(n)))},h.domain=function(t){return arguments.length?(a=Ha.call(t,Gs),l===Zs||(l=qs(a)),c()):a.slice()},h.range=function(t){return arguments.length?(s=Ya.call(t),c()):s.slice()},h.rangeRound=function(t){return s=Ya.call(t),u=Us,c()},h.clamp=function(t){return arguments.length?(l=t?qs(a):Zs,h):l!==Zs},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function Ks(t,e){return $s()(t,e)}var Js=function(t,e,n,r){var i,o=Da(t,e,n);switch((r=Un(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Fn(e)/3)))-Fn(Math.abs(t)))}(o,a))||(r.precision=i),qn(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Fn(e)-Fn(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Fn(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Wn(r)};function Qs(t){var e=t.domain;return t.ticks=function(t){var n=e();return Ia(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Js(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=Na(s,u,n))>0?r=Na(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=Na(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}n("pp/T"),n("eHKK");n("nzyx"),n("BJ/l"),n("CyHz");var tu=new Date,eu=new Date;function nu(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return nu((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return tu.setTime(+e),eu.setTime(+r),t(tu),t(eu),Math.floor(n(tu,eu))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ru=nu((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));ru.every=function(t){return isFinite(t=Math.floor(t))&&t>0?nu((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var iu=ru,ou=(ru.range,nu((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));ou.range;function au(t){return nu((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var su=au(0),uu=au(1),lu=au(2),cu=au(3),hu=au(4),fu=au(5),du=au(6),pu=(su.range,uu.range,lu.range,cu.range,hu.range,fu.range,du.range,nu((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),mu=pu,gu=(pu.range,nu((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),vu=(gu.range,nu((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),_u=(vu.range,nu((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),yu=(_u.range,nu((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));yu.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?nu((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):yu:null};yu.range;function bu(t){return nu((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var xu=bu(0),wu=bu(1),Tu=bu(2),Au=bu(3),Su=bu(4),Eu=bu(5),ku=bu(6),Mu=(xu.range,wu.range,Tu.range,Au.range,Su.range,Eu.range,ku.range,nu((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),Ou=Mu,Pu=(Mu.range,nu((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Pu.every=function(t){return isFinite(t=Math.floor(t))&&t>0?nu((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var zu=Pu;Pu.range;function Ru(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Lu(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Cu(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var ju,Iu={"-":"",_:" ",0:"0"},Nu=/^\s*\d+/,Du=/^%/,Fu=/[\\^$*+?|[\]().{}]/g;function Bu(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Uu(t){return t.replace(Fu,"\\$&")}function Gu(t){return new RegExp("^(?:"+t.map(Uu).join("|")+")","i")}function Vu(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Zu(t,e,n){var r=Nu.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Wu(t,e,n){var r=Nu.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function qu(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Hu(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Yu(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Xu(t,e,n){var r=Nu.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function $u(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ku(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ju(t,e,n){var r=Nu.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Qu(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function tl(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function el(t,e,n){var r=Nu.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function nl(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function rl(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function il(t,e,n){var r=Nu.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ol(t,e,n){var r=Nu.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function al(t,e,n){var r=Nu.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function sl(t,e,n){var r=Du.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ul(t,e,n){var r=Nu.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ll(t,e,n){var r=Nu.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function cl(t,e){return Bu(t.getDate(),e,2)}function hl(t,e){return Bu(t.getHours(),e,2)}function fl(t,e){return Bu(t.getHours()%12||12,e,2)}function dl(t,e){return Bu(1+mu.count(iu(t),t),e,3)}function pl(t,e){return Bu(t.getMilliseconds(),e,3)}function ml(t,e){return pl(t,e)+"000"}function gl(t,e){return Bu(t.getMonth()+1,e,2)}function vl(t,e){return Bu(t.getMinutes(),e,2)}function _l(t,e){return Bu(t.getSeconds(),e,2)}function yl(t){var e=t.getDay();return 0===e?7:e}function bl(t,e){return Bu(su.count(iu(t)-1,t),e,2)}function xl(t,e){var n=t.getDay();return t=n>=4||0===n?hu(t):hu.ceil(t),Bu(hu.count(iu(t),t)+(4===iu(t).getDay()),e,2)}function wl(t){return t.getDay()}function Tl(t,e){return Bu(uu.count(iu(t)-1,t),e,2)}function Al(t,e){return Bu(t.getFullYear()%100,e,2)}function Sl(t,e){return Bu(t.getFullYear()%1e4,e,4)}function El(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Bu(e/60|0,"0",2)+Bu(e%60,"0",2)}function kl(t,e){return Bu(t.getUTCDate(),e,2)}function Ml(t,e){return Bu(t.getUTCHours(),e,2)}function Ol(t,e){return Bu(t.getUTCHours()%12||12,e,2)}function Pl(t,e){return Bu(1+Ou.count(zu(t),t),e,3)}function zl(t,e){return Bu(t.getUTCMilliseconds(),e,3)}function Rl(t,e){return zl(t,e)+"000"}function Ll(t,e){return Bu(t.getUTCMonth()+1,e,2)}function Cl(t,e){return Bu(t.getUTCMinutes(),e,2)}function jl(t,e){return Bu(t.getUTCSeconds(),e,2)}function Il(t){var e=t.getUTCDay();return 0===e?7:e}function Nl(t,e){return Bu(xu.count(zu(t)-1,t),e,2)}function Dl(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Su(t):Su.ceil(t),Bu(Su.count(zu(t),t)+(4===zu(t).getUTCDay()),e,2)}function Fl(t){return t.getUTCDay()}function Bl(t,e){return Bu(wu.count(zu(t)-1,t),e,2)}function Ul(t,e){return Bu(t.getUTCFullYear()%100,e,2)}function Gl(t,e){return Bu(t.getUTCFullYear()%1e4,e,4)}function Vl(){return"+0000"}function Zl(){return"%"}function Wl(t){return+t}function ql(t){return Math.floor(+t/1e3)}!function(t){ju=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Gu(i),c=Vu(i),h=Gu(o),f=Vu(o),d=Gu(a),p=Vu(a),m=Gu(s),g=Vu(s),v=Gu(u),_=Vu(u),y={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:cl,e:cl,f:ml,H:hl,I:fl,j:dl,L:pl,m:gl,M:vl,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Wl,s:ql,S:_l,u:yl,U:bl,V:xl,w:wl,W:Tl,x:null,X:null,y:Al,Y:Sl,Z:El,"%":Zl},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:kl,e:kl,f:Rl,H:Ml,I:Ol,j:Pl,L:zl,m:Ll,M:Cl,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Wl,s:ql,S:jl,u:Il,U:Nl,V:Dl,w:Fl,W:Bl,x:null,X:null,y:Ul,Y:Gl,Z:Vl,"%":Zl},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=_[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:tl,e:tl,f:al,H:nl,I:nl,j:el,L:ol,m:Qu,M:rl,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:Ju,Q:ul,s:ll,S:il,u:Wu,U:qu,V:Hu,w:Zu,W:Yu,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:$u,Y:Xu,Z:Ku,"%":sl};function w(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Iu[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function T(t,e){return function(n){var r,i,o=Cu(1900,void 0,1);if(A(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(!e||"Z"in o||(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Lu(Cu(o.y,0,1))).getUTCDay(),r=i>4||0===i?wu.ceil(r):wu(r),r=Ou.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Ru(Cu(o.y,0,1))).getDay(),r=i>4||0===i?uu.ceil(r):uu(r),r=mu.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Lu(Cu(o.y,0,1)).getUTCDay():Ru(Cu(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Lu(o)):Ru(o)}}function A(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in Iu?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=w(n,y),y.X=w(r,y),y.c=w(e,y),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}(t),ju.format,ju.parse,ju.utcFormat,ju.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Hl=nu((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Yl=(Hl.range,nu((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),Xl=(Yl.range,nu((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})));Xl.range;function $l(t){var e=t.range,n=t.rangeRound,r=t.domain,i=t.nice,o=void 0!==i&&i,a=t.clamp,s=void 0!==a&&a,u=function t(){var e=Ks(Zs,Zs);return e.copy=function(){return Xs(e,t())},Fa.apply(e,arguments),Qs(e)}();return e&&u.range(e),n&&u.rangeRound(n),r&&u.domain(r),o&&u.nice(),s&&u.clamp(!0),u.type="linear",u}function Kl(){var t=function(t,e){e||(e=t.slice(0));return t.raw=e,t}(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return Kl=function(){return t},t}var Jl=Object(V.e)(Kl()),Ql=function(t){var e=t.points,n=t.dates,r=t.currentDate,i=Je((function(t){return t.currentDataType})),o=0===i?"":1===i?"deaths_":"recoveries_",a=n.map((function(t,n){var r=e.reduce((function(e,n){return e+parseFloat(n.properties[t]||0)}),0),i=e.reduce((function(e,n){return e+parseFloat(n.properties[o+t]||0)}),0);return{date:new Date(t),dateIndex:n,value:i,confirmedSum:r}})),s=[a],u=$l({domain:[0,n.length-1],range:[1,439]}),l=$l({domain:[0,s[0][s[0].length-1].confirmedSum],range:[55,2]}),c=function(t){return t.dateIndex},h=function(t){return t.value};return Object(V.d)(fe,{mb:"-0.5rem"},Object(V.d)("svg",{viewBox:"0 0 440 55",style:{width:"100%",height:"auto"}},s.map((function(t,e){return Object(V.d)("g",{key:"series-"+e},Object(V.d)(Ea,{data:t,x1:function(t){return u(c(t))},y1:function(t){return l(h(t))},x0:function(t){return u(c(t))},y0:55,fill:"#FBDFCF"}),Object(V.d)(Ea,{data:t,x:function(t){return u(c(t))},y:function(t){return l(h(t))},stroke:"#F5B086",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))})),Object(V.d)("rect",{x:u(r),y:0,width:450,height:55,fill:"rgba(255,255,255,0.8)"}),Object(V.d)(fe,{as:"rect",x:u(a.length-2),y:0,width:440/a.length,height:55,fill:"rgba(255,255,255,0.4)"}),Object(V.d)("line",{x1:u(r),x2:u(r),y1:0,y2:55,stroke:"#FFF",strokeWidth:5}),Object(V.d)(fe,{as:"line",x1:u(r),x2:u(r),y1:1,y2:55,stroke:"#ec610e",strokeWidth:2,strokeLinecap:"round",strokeDasharray:[3,3],animation:Jl+" 1s linear infinite alternate"})))};function tc(){var t=function(t,e){e||(e=t.slice(0));return t.raw=e,t}(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return tc=function(){return t},t}var ec=Object(V.e)(tc()),nc=function(){return Object(V.d)(fe,{animation:ec+" 1s linear infinite alternate",width:"0.5rem",height:"0.5rem",bg:"#ec610e",mr:"0.25rem",borderRadius:"100%"})},rc=function(t){var e=t.points,n=Ke((function(t){return t.updateDate})),i=Object(r.useMemo)((function(){var t=e[0].properties.headers.split(";;").filter((function(t){return t.includes("pm")||t.includes("am")})).sort((function(t,e){return new Date(t).getTime()-new Date(e).getTime()})),n=Nn()(t,(function(t){return No()(t).format("DD-MM-YYYY")}));return Object.keys(n).map((function(t){return n[t][n[t].length-1]}))}),[e]),o=Object(r.useState)(i.length-1),a=o[0],s=o[1],u=la(a,150)[0];return Object(r.useEffect)((function(){n(i[u])}),[u,i,n]),Object(V.d)(fe,{mt:"2rem"},Object(V.d)(ye,{fontSize:"md",as:"h3",mb:"0.5rem"},"Timeline"),Object(V.d)(Te,{mb:"-0.75rem",zIndex:10,position:"relative"},Object(V.d)(Go,{display:"inline-flex",alignItems:"center",bg:"#FBDFCF",color:"#ec610e",fontSize:"sm"},Object(V.d)(nc,null),a===i.length-1?No()(e[0].properties["@ns:com:here:xyz"].updatedAt).format("DD MMM YYYY h:mm a"):No()(i[a]).format("DD MMM YYYY"))),Object(V.d)(Ql,{points:e,dates:i,currentDate:a}),Object(V.d)(fe,{mr:"2px"},Object(V.d)(sa,{defaultValue:i.length-1,min:0,max:i.length-1,value:a,onChange:function(t){return s(t)}},Object(V.d)(na,null),Object(V.d)(ra,{bg:"#ec610e"}),Object(V.d)(ea,{size:"1.5rem",ml:"-0.25rem"},Object(V.d)(Ze,{name:"arrows",color:"#ec610e"})))),Object(V.d)(Te,{justifyContent:"space-between"},Object(V.d)(xe,{fontSize:"sm",color:"gray.600",mt:"-0.5rem"},No()(i[0]).format("DD MMM YYYY")),Object(V.d)(xe,{fontSize:"sm",color:"gray.600",mt:"-0.5rem"},No()(i[i.length-1]).format("DD MMM YYYY"))))},ic=function(t){var e=t.points,n=Ke((function(t){return t.currentDate})),r=e.length?e.reduce((function(t,e){return t+(e.properties[n]||0)}),0):null;return Object(V.d)(xe,{color:"gray.600",mb:"1.25rem"},"The first case of the new Coronavirus COVID-19 was recorded on 31 December in Wuhan, China (",Object(V.d)(De,{alt:"WHO — Novel coronavirus (COVID-19)",href:"https://www.who.int/emergencies/diseases/novel-coronavirus-2019",color:"#00AFAA"},"WHO"),"). Since then,"+(r?" "+Jn(r):"")+" confirmed cases have been recorded worldwide. This visualization shows the near real-time status based on data from the ",Object(V.d)(De,{alt:"Center for Systems Science and Engineering (CSSE)",href:"https://github.com/CSSEGISandData/2019-nCoV",color:"#00AFAA"},"Center for Systems Science and Engineering (CSSE)")," at Johns Hopkins University and ",Object(V.d)(De,{alt:"DXY",href:"https://ncov.dxy.cn/ncovh5/view/pneumonia?scene=2&clicktime=1579582238&enterid=1579582238&from=singlemessage&isappinstalled=0",color:"#00AFAA"},"DXY.")," Data currently available on the following zoom levels: City level - US, Canada and Australia; Province level - China; Country level - other countries."," To read more about this map, see ",Object(V.d)(De,{color:"#00AFAA",alt:"How we built an interactive map displaying the COVID-19 outbreak",href:"https://developer.here.com/blog/how-we-built-an-interactive-map-displaying-the-covid-19-outbreak"},"How we built an interactive map displaying the COVID-19 outbreak"),".")},oc={}.GATSBY_SPACE_ID,ac={}.GATSBY_ACCESS_TOKEN,sc=function(){var t=$e((function(t){return t.currentTab})),e=N("https://xyz.api.here.com/hub/spaces/"+oc+"/bbox?west=-180&north=90&east=180&south=-90&access_token="+ac,We,{focusThrottleInterval:6e4}),n=e.data,o=(e.error,n&&n.features||[]);return Object(r.useEffect)((function(){var t=document.getElementsByClassName("main-combobox")[0];t&&t.focus()}),[]),Object(V.d)(i.a.Fragment,null,Object(V.d)(fe,{display:t?["none",null,"block"]:"block",position:"fixed",top:"0",left:"0",bottom:"0",zIndex:999999,borderTop:"0.25rem solid #00AFAA",width:["100%",null,"25rem","30rem"],boxShadow:"lg",overflow:"scroll",bg:"white",pb:"5rem",style:{WebkitOverflowScrolling:"touch"}},Object(V.d)(fe,{px:"1.25rem",pt:"1.25rem"},Object(V.d)(ye,{fontSize:["1.5rem","2rem",null,"2.5rem"],lineHeight:1.125,mb:"1.25rem"},Object(V.d)(xe,{mr:"0.75rem",as:"span"},"Tracking Coronavirus"," ",Object(V.d)("br",null),"COVID-19")),o.length?Object(V.d)(ic,{points:o}):null,o.length?Object(V.d)(rc,{points:o}):null),o.length?Object(V.d)(er,{rows:o}):null),Object(V.d)(Te,{position:"absolute",bottom:["3.5rem",null,"1.25rem"],left:["1rem",null,"26.25rem","32.5rem"],right:["1rem",null,"2rem"],zIndex:2,justifyContent:"space-between",alignItems:"flex-end"},Object(V.d)(Te,{flexWrap:"wrap",justifyContent:"space-between",flex:"1 1 auto",pr:["0.75rem",null,0]},Object(V.d)(xe,{as:"span",fontSize:"xs",color:"gray.900",fontWeight:600},"Data: ",Object(V.d)(De,{href:"https://github.com/CSSEGISandData/COVID-19",color:"#00AFAA",bg:"white",py:"0.125rem",px:"0.25rem"},"JHU CSSE")," and ",Object(V.d)(De,{href:"https://ncov.dxy.cn/ncovh5/view/pneumonia?scene=2&clicktime=1579582238&enterid=1579582238&from=singlemessage&isappinstalled=0",color:"#00AFAA",bg:"white",py:"0.125rem",px:"0.25rem"},"DXY")),Object(V.d)(xe,{as:"span",fontSize:"xs",color:"gray.900",fontWeight:600},"Made with Leaflet, ",Object(V.d)(De,{href:"https://developer.here.com/documentation/vector-tiles-api/dev_guide?cid=Freemium-DeveloperPortalTutorial-PJ-0-Javascript-DevPortal-&utm_source=DeveloperPortalTutorial&utm_medium=referral&utm_campaign=Webinar_IOT_2020_Golden-Age-Location-Enabled-AI-Jan-16",color:"#00AFAA",bg:"white",py:"0.125rem",px:"0.25rem"},"HERE Vector Map Tiles API")," and ",Object(V.d)(De,{href:"https://developer.here.com/products/xyz?cid=Freemium-DeveloperPortalTutorial-PJ-0-XYZ-DevPortal-&utm_source=DeveloperPortalTutorial&utm_medium=referral&utm_campaign=CoronaVirusMap",color:"#00AFAA",bg:"white",py:"0.125rem",px:"0.25rem"},"HERE Data Hub APIs")," | ",Object(V.d)(De,{href:"#",color:"#00AFAA",bg:"white",py:"0.125rem",px:"0.25rem"},"Get the code",Object(V.d)(Ze,{name:"github",ml:"0.25rem",mt:"-0.125rem"})))),Object(V.d)(De,{flex:"none",href:"https://developer.here.com/?cid=Freemium-DeveloperPortalTutorial-PJ-0-Javascript-DevPortal-&utm_source=DeveloperPortalTutorial&utm_medium=referral&utm_campaign=Webinar_IOT_2020_Golden-Age-Location-Enabled-AI-Jan-16"},Object(V.d)("img",{src:jo.a,alt:"HERE logo",style:{width:"2.5rem",marginLeft:"0.75rem"}}))),Object(V.d)(Nr,{points:o}),Object(V.d)(Oo,null),Object(V.d)(fe,{position:"fixed",bottom:["5.5rem",null,"4rem"],right:["1rem",null,"2.5rem"],zIndex:2,width:["6rem","8rem","10rem"],height:["6rem","8rem","10rem"],boxShadow:"lg",borderRadius:"100%",bg:"white",border:"0.125rem solid",borderColor:"gray.50",pointerEvents:"none"},Object(V.d)(zo,null)),2===t?Object(V.d)(fe,{display:"block",position:"fixed",top:"0",left:"0",bottom:"0",zIndex:999999,borderTop:"0.25rem solid #00AFAA",width:["100%",null,"25rem","30rem"],boxShadow:"lg",overflow:"scroll",bg:"white",pb:"5rem",style:{WebkitOverflowScrolling:"touch"}},Object(V.d)(fe,{px:"1.25rem",pt:"1.25rem"},Object(V.d)(Eo,null))):null,Object(V.d)(Ro,null),Object(V.d)(Lo,null))},uc=n("Zttt"),lc=n("wtQ5");e.default=function(){return Object(V.d)(uc.a,null,Object(V.d)(lc.a,{title:"Tracking Coronavirus COVID-19",description:"Near real-time visualization based on data from the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University and DXY, using HERE Javascript API and HERE Data Hub APIs."}),Object(V.d)(sc,null))}},SKAX:function(t,e,n){var r=n("JC6p"),i=n("lQqw")(r);t.exports=i},SPin:function(t,e,n){"use strict";var r=n("XKFU"),i=n("eyMr");r(r.P+r.F*!n("LyE8")([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},SfRM:function(t,e,n){var r=n("YESw");t.exports=function(){this.__data__=r?r(null):{},this.size=0}},Sfbj:function(t,e,n){n("HAE/"),n("bHtr"),n("bWfx"),n("yt8O"),n("Btvt"),n("RW0V"),n("8+KV"),n("rE2o"),n("ioFf"),n("rGqo"),n("LK8F"),n("V+eJ"),n("91GP"),function(t,e,n,r,i){"use strict";var o="default"in e?e.default:e;n=n&&n.hasOwnProperty("default")?n.default:n;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=e.createContext(),c={geoEqualEarth:r.geoEqualEarth,geoMercator:r.geoMercator,geoTransverseMercator:r.geoTransverseMercator,geoAlbers:r.geoAlbers,geoAlbersUsa:r.geoAlbersUsa,geoAzimuthalEqualArea:r.geoAzimuthalEqualArea,geoAzimuthalEquidistant:r.geoAzimuthalEquidistant,geoOrthographic:r.geoOrthographic,geoConicConformal:r.geoConicConformal,geoConicEqualArea:r.geoConicEqualArea,geoConicEquidistant:r.geoConicEquidistant},h=function(t){var n=t.width,i=t.height,u=t.projection,h=t.projectionConfig,f=s(t,["width","height","projection","projectionConfig"]),d=h.center||[],p=h.rotate||[],m=h.parallels||[],g=h.scale||null,v=e.useMemo((function(){var t=function(t){var e=t.projectionConfig,n=void 0===e?{}:e,r=t.projection,i=void 0===r?"geoEqualEarth":r,o=t.width,a=void 0===o?800:o,s=t.height,u=void 0===s?500:s;if("function"==typeof i)return i;var l=c[i]().translate([a/2,u/2]);return[l.center?"center":null,l.rotate?"rotate":null,l.scale?"scale":null,l.parallels?"parallels":null].forEach((function(t){t&&(l=l[t](n[t]||l[t]()))})),l}({projectionConfig:h,projection:u,width:n,height:i});return{width:n,height:i,projection:t,path:r.geoPath().projection(t)}}),[n,i,u,d[0],d[1],p[0],p[1],p[2],m[0],m[1],g]);return o.createElement(l.Provider,a({value:v},f))};h.propTypes={width:n.number,height:n.number,projection:n.oneOfType([n.string,n.func]),projectionConfig:n.object};var f=function(t){var e=t.width,n=void 0===e?800:e,r=t.height,i=void 0===r?600:r,u=t.projection,l=void 0===u?"geoEqualEarth":u,c=t.projectionConfig,f=void 0===c?{}:c,d=t.className,p=void 0===d?"":d,m=s(t,["width","height","projection","projectionConfig","className"]);return o.createElement(h,{width:n,height:i,projection:l,projectionConfig:f},o.createElement("svg",a({viewBox:"0 0 "+n+" "+i,className:"rsm-svg "+p},m)))};function d(t,e){if(Array.isArray(t))return e?e(t):t;var n=i.feature(t,t.objects[Object.keys(t.objects)[0]]).features;return e?e(n):n}function p(t){var n=t.geography,r=t.parseGeographies,i=e.useContext(l).path,o=e.useState(),s=u(o,2),c=s[0],h=s[1];return e.useEffect((function(){var t;"undefined"!=typeof window&&("string"==typeof n?(t=n,fetch(t).then((function(t){if(!t.ok)throw Error(t.statusText);return t.json()})).catch((function(t){console.log("There was a problem when fetching the data: ",t)}))).then((function(t){t&&h(d(t,r))})):h(d(n,r)))}),[n]),{geographies:e.useMemo((function(){return function(t,e){return t?t.map((function(t,n){return a({},t,{rsmKey:"geo-"+n,svgPath:e(t)})})):[]}(c,i)}),[c,i])}}f.propTypes={width:n.number,height:n.number,projection:n.oneOfType([n.string,n.func]),projectionConfig:n.object,className:n.string};var m=function(t){var n=t.geography,r=t.children,i=t.parseGeographies,u=t.className,c=void 0===u?"":u,h=s(t,["geography","children","parseGeographies","className"]),f=e.useContext(l),d=f.path,m=f.projection,g=p({geography:n,parseGeographies:i}).geographies;return o.createElement("g",a({className:"rsm-geographies "+c},h),g&&g.length>0&&r({geographies:g,path:d,projection:m}))};m.propTypes={geography:n.oneOfType([n.string,n.object,n.array]),children:n.func,parseGeographies:n.func,className:n.string};var g=function(t){var n=t.geography,r=t.onMouseEnter,i=t.onMouseLeave,l=t.onMouseDown,c=t.onMouseUp,h=t.onFocus,f=t.onBlur,d=t.style,p=void 0===d?{}:d,m=t.className,g=void 0===m?"":m,v=s(t,["geography","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"]),_=e.useState(!1),y=u(_,2),b=y[0],x=y[1],w=e.useState(!1),T=u(w,2),A=T[0],S=T[1];return o.createElement("path",a({role:"geography",tabIndex:"0",className:"rsm-geography "+g,d:n.svgPath,onMouseEnter:function(t){S(!0),r&&r(t)},onMouseLeave:function(t){S(!1),b&&x(!1),i&&i(t)},onFocus:function(t){S(!0),h&&h(t)},onBlur:function(t){S(!1),b&&x(!1),f&&f(t)},onMouseDown:function(t){x(!0),l&&l(t)},onMouseUp:function(t){x(!1),c&&c(t)},style:p[b||A?b?"pressed":"hover":"default"]},v))};g.propTypes={geography:n.object,onMouseEnter:n.func,onMouseLeave:n.func,onMouseDown:n.func,onMouseUp:n.func,onFocus:n.func,onBlur:n.func,style:n.object,className:n.string};var v=e.memo(g),_=function(t){var n=t.fill,i=void 0===n?"transparent":n,u=t.stroke,c=void 0===u?"currentcolor":u,h=t.step,f=void 0===h?[10,10]:h,d=t.className,p=void 0===d?"":d,m=s(t,["fill","stroke","step","className"]),g=e.useContext(l).path;return o.createElement("path",a({d:g(r.geoGraticule().step(f)()),fill:i,stroke:c,className:"rsm-graticule "+p},m))};_.propTypes={fill:n.string,stroke:n.string,step:n.array,className:n.string};var y=e.memo(_);function b(t){var n=t.center,r=void 0===n?[0,0]:n,i=t.zoom,o=void 0===i?1:i,s=t.minZoom,c=void 0===s?1:s,h=t.maxZoom,f=void 0===h?5:h,d=t.zoomSensitivity,p=void 0===d?.025:d,m=t.onZoomStart,g=t.onZoomEnd,v=t.onMoveStart,_=t.onMoveEnd,y=t.disablePanning,b=void 0!==y&&y,x=t.disableZooming,w=void 0!==x&&x,T=e.useContext(l),A=T.width,S=T.height,E=T.projection,k=e.useRef(null),M=e.useState((function(){var t=E(r);return{x:A/2-t[0]*o,y:S/2-t[1]*o,last:[A/2-t[0]*o,S/2-t[1]*o],zoom:o,dragging:!1,zooming:!1}})),O=u(M,2),P=O[0],z=O[1],R=e.useRef(),L=e.useRef(),C=e.useRef(!1),j=e.useRef();function I(t){var e=R.current.closest("svg");t.targetTouches?(L.current.x=t.targetTouches[0].clientX,L.current.y=t.targetTouches[0].clientY):(L.current.x=t.clientX,L.current.y=t.clientY);var n=e.getScreenCTM().inverse();return L.current.matrixTransform(n)}function N(t){b||(C.current=!0,j.current=I(t),z((function(e){return v&&v(t,a({},e,{dragging:!0})),a({},e,{dragging:!0})})))}function D(t){if(C.current){t.preventDefault();var e=I(t);z((function(t){return a({},t,{x:t.last[0]+(e.x-j.current.x),y:t.last[1]+(e.y-j.current.y)})}))}}function F(t){C.current=!1,z((function(e){return _&&_(t,a({},e,{last:[e.x,e.y],dragging:!1})),a({},e,{last:[e.x,e.y],dragging:!1})}))}function B(t){if(t.ctrlKey&&!w){t.preventDefault();var e=t.deltaY*p;z((function(n){var r=n.zoom-e,i=r<c?c:r>f?f:r,o=I(t),s=(n.x-o.x)*i/n.zoom+o.x,u=(n.y-o.y)*i/n.zoom+o.y;return window.clearTimeout(k.current),k.current=setTimeout((function(){z((function(e){return g&&g(t,e),a({},e,{zooming:!1})}))}),66),m&&m(t,a({},n,{x:s,y:u,last:[s,u],zoom:i,zooming:!0})),a({},n,{x:s,y:u,last:[s,u],zoom:i,zooming:!0})}))}}return e.useLayoutEffect((function(){var t=R.current.closest("svg");return L.current=t.createSVGPoint(),t.addEventListener("wheel",B),window.PointerEvent?(t.addEventListener("pointerdown",N),t.addEventListener("pointerup",F),t.addEventListener("pointerleave",F),t.addEventListener("pointermove",D)):(t.addEventListener("mousedown",N),t.addEventListener("mouseup",F),t.addEventListener("mouseleave",F),t.addEventListener("mousemove",D),t.addEventListener("touchstart",N),t.addEventListener("touchend",F),t.addEventListener("touchmove",D)),function(){t.removeEventListener("wheel",B),window.PointerEvent?(t.removeEventListener("pointerdown",N),t.removeEventListener("pointerup",F),t.removeEventListener("pointerleave",F),t.removeEventListener("pointermove",D)):(t.removeEventListener("mousedown",N),t.removeEventListener("mouseup",F),t.removeEventListener("mouseleave",F),t.removeEventListener("mousemove",D),t.removeEventListener("touchstart",N),t.removeEventListener("touchend",F),t.removeEventListener("touchmove",D))}}),[]),e.useEffect((function(){z((function(t){var e=(t.x-A/2)*o/t.zoom+A/2,n=(t.y-S/2)*o/t.zoom+S/2;return a({},t,{x:e,y:n,last:[e,n],zoom:o})}))}),[o]),e.useEffect((function(){var t=E(r);z((function(e){return a({},e,{x:A/2-t[0]*e.zoom,y:S/2-t[1]*e.zoom,last:[A/2-t[0]*e.zoom,S/2-t[1]*e.zoom]})}))}),[r[0],r[1]]),{elRef:R,position:P,transformString:"translate("+P.x+" "+P.y+") scale("+P.zoom+")"}}var x=function(t){var e=t.render,n=t.children,r=t.center,i=void 0===r?[0,0]:r,u=t.zoom,l=void 0===u?1:u,c=t.minZoom,h=void 0===c?1:c,f=t.maxZoom,d=void 0===f?5:f,p=t.zoomSensitivity,m=void 0===p?.025:p,g=t.onZoomStart,v=t.onZoomEnd,_=t.onMoveStart,y=t.onMoveEnd,x=t.disablePanning,w=void 0!==x&&x,T=t.disableZooming,A=void 0!==T&&T,S=t.className,E=void 0===S?"":S,k=s(t,["render","children","center","zoom","minZoom","maxZoom","zoomSensitivity","onZoomStart","onZoomEnd","onMoveStart","onMoveEnd","disablePanning","disableZooming","className"]),M=b({center:i,zoom:l,minZoom:h,maxZoom:d,zoomSensitivity:m,onZoomStart:g,onZoomEnd:v,onMoveStart:_,onMoveEnd:y,disablePanning:w,disableZooming:A}),O=M.elRef,P=M.position,z=M.transformString;return o.createElement("g",a({ref:O,className:"rsm-zoomable-group "+E},k),e?e(P):o.createElement("g",{transform:z},n))};x.propTypes={render:n.func,children:n.oneOfType([n.node,n.arrayOf(n.node)]),center:n.array,zoom:n.number,minZoom:n.number,maxZoom:n.number,zoomSensitivity:n.number,onZoomStart:n.func,onZoomEnd:n.func,onMoveStart:n.func,onMoveEnd:n.func,disablePanning:n.bool,disableZooming:n.bool,className:n.string};var w=function(t){var n=t.id,r=void 0===n?"rsm-sphere":n,i=t.fill,u=void 0===i?"transparent":i,c=t.stroke,h=void 0===c?"currentcolor":c,f=t.strokeWidth,d=void 0===f?.5:f,p=t.className,m=void 0===p?"":p,g=s(t,["id","fill","stroke","strokeWidth","className"]),v=e.useContext(l).path,_=e.useMemo((function(){return v({type:"Sphere"})}),[v]);return o.createElement(e.Fragment,null,o.createElement("defs",null,o.createElement("clipPath",{id:r},o.createElement("path",{d:_}))),o.createElement("path",a({d:_,fill:u,stroke:h,strokeWidth:d,style:{pointerEvents:"none"},className:"rsm-sphere "+m},g)))};w.propTypes={id:n.string,fill:n.string,stroke:n.string,strokeWidth:n.number,className:n.string};var T=e.memo(w),A=function(t){var n=t.coordinates,r=t.children,i=t.onMouseEnter,c=t.onMouseLeave,h=t.onMouseDown,f=t.onMouseUp,d=t.onFocus,p=t.onBlur,m=t.style,g=void 0===m?{}:m,v=t.className,_=void 0===v?"":v,y=s(t,["coordinates","children","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"]),b=e.useContext(l).projection,x=e.useState(!1),w=u(x,2),T=w[0],A=w[1],S=e.useState(!1),E=u(S,2),k=E[0],M=E[1],O=b(n),P=u(O,2),z=P[0],R=P[1];return o.createElement("g",a({transform:"translate("+z+", "+R+")",className:"rsm-marker "+_,onMouseEnter:function(t){M(!0),i&&i(t)},onMouseLeave:function(t){M(!1),T&&A(!1),c&&c(t)},onFocus:function(t){M(!0),d&&d(t)},onBlur:function(t){M(!1),T&&A(!1),p&&p(t)},onMouseDown:function(t){A(!0),h&&h(t)},onMouseUp:function(t){A(!1),f&&f(t)},style:g[T||k?T?"pressed":"hover":"default"]},y),r)};A.propTypes={coordinates:n.array,children:n.oneOfType([n.node,n.arrayOf(n.node)]),onMouseEnter:n.func,onMouseLeave:n.func,onMouseDown:n.func,onMouseUp:n.func,onFocus:n.func,onBlur:n.func,style:n.object,className:n.string};var S=function(t){var n=t.from,r=void 0===n?[0,0]:n,i=t.to,u=void 0===i?[0,0]:i,c=t.coordinates,h=t.stroke,f=void 0===h?"currentcolor":h,d=t.strokeWidth,p=void 0===d?3:d,m=t.fill,g=void 0===m?"transparent":m,v=t.className,_=void 0===v?"":v,y=s(t,["from","to","coordinates","stroke","strokeWidth","fill","className"]),b=e.useContext(l).path,x={type:"LineString",coordinates:c||[r,u]};return o.createElement("path",a({d:b(x),className:"rsm-line "+_,stroke:f,strokeWidth:p,fill:g},y))};S.propTypes={from:n.array,to:n.array,coordinates:n.array,stroke:n.string,strokeWidth:n.number,fill:n.string,className:n.string};var E=function(t){var n=t.subject,r=t.children,i=t.connectorProps,c=t.dx,h=void 0===c?30:c,f=t.dy,d=void 0===f?30:f,p=t.curve,m=void 0===p?0:p,g=t.className,v=void 0===g?"":g,_=s(t,["subject","children","connectorProps","dx","dy","curve","className"]),y=(0,e.useContext(l).projection)(n),b=u(y,2),x=b[0],w=b[1],T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=Array.isArray(n)?n:[n,n];return"M0,0 Q"+(-t/2-t/2*r[0])+","+(-e/2+e/2*r[1])+" "+-t+","+-e}(h,d,m);return o.createElement("g",a({transform:"translate("+(x+h)+", "+(w+d)+")",className:"rsm-annotation "+v},_),o.createElement("path",a({d:T,fill:"transparent",stroke:"#000"},i)),r)};E.propTypes={subject:n.array,children:n.oneOfType([n.node,n.arrayOf(n.node)]),dx:n.number,dy:n.number,curve:n.number,connectorProps:n.object,className:n.string},t.Annotation=E,t.ComposableMap=f,t.Geographies=m,t.Geography=v,t.Graticule=y,t.Line=S,t.Marker=A,t.Sphere=T,t.ZoomableGroup=x,t.useGeographies=p,t.useZoomPan=b,Object.defineProperty(t,"__esModule",{value:!0})}(e,n("q1tI"),n("17x9"),n("n8A4"),n("0hfp"))},T016:function(t,e,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},TSYQ:function(t,e,n){var r;n("LK8F"),function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&t.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},Tdpu:function(t,e,n){n("7DDg")("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},UExd:function(t,e,n){var r=n("nh4g"),i=n("DVgA"),o=n("aCFj"),a=n("UqcF").f;t.exports=function(t){return function(e){for(var n,s=o(e),u=i(s),l=u.length,c=0,h=[];l>c;)n=u[c++],r&&!a.call(s,n)||h.push(t?[n,s[n]]:s[n]);return h}}},UMY1:function(t,e,n){var r=n("oMRN"),i=n("JD84"),o=n("ut/Y"),a=n("Z0cm");t.exports=function(t,e){return function(n,s){var u=a(n)?r:i,l=e?e():{};return u(n,t,o(s,2),l)}}},"UNi/":function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},V6Ve:function(t,e,n){n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V");var r=n("kekF")(Object.keys,Object);t.exports=r},VaNO:function(t,e){t.exports=function(t){return this.__data__.has(t)}},WFqU:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("yLpj"))},Wgwc:function(t,e,n){n("jqX0"),n("AphP"),n("a1Th"),n("h7Nl"),n("Btvt"),n("SRfc"),n("f3/d"),n("KKXr"),n("pIFo"),n("xfY5"),t.exports=function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",i="day",o="week",a="month",s="quarter",u="year",l=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,c=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},f={s:h,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+h(r,2,"0")+":"+h(i,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,a),i=e-r<0,o=t.clone().add(n+(i?-1:1),a);return Number(-(n+(e-r)/(i?r-o:o-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:a,y:u,w:o,d:i,h:r,m:n,s:e,ms:t,Q:s}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",m={};m[p]=d;var g=function(t){return t instanceof b},v=function(t,e,n){var r;if(!t)return p;if("string"==typeof t)m[t]&&(r=t),e&&(m[t]=e,r=t);else{var i=t.name;m[i]=t,r=i}return n||(p=r),r},_=function(t,e,n){if(g(t))return t.clone();var r=e?"string"==typeof e?{format:e,pl:n}:e:{};return r.date=t,new b(r)},y=f;y.l=v,y.i=g,y.w=function(t,e){return _(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var b=function(){function h(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var f=h.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r)return n?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(e)}(t),this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return y},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var n=_(t);return this.startOf(e)<=n&&n<=this.endOf(e)},f.isAfter=function(t,e){return _(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<_(t)},f.$g=function(t,e,n){return y.u(t)?this[e]:this.set(n,t)},f.year=function(t){return this.$g(t,"$y",u)},f.month=function(t){return this.$g(t,"$M",a)},f.day=function(t){return this.$g(t,"$W",i)},f.date=function(t){return this.$g(t,"$D","date")},f.hour=function(t){return this.$g(t,"$H",r)},f.minute=function(t){return this.$g(t,"$m",n)},f.second=function(t){return this.$g(t,"$s",e)},f.millisecond=function(e){return this.$g(e,"$ms",t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,s){var l=this,c=!!y.u(s)||s,h=y.p(t),f=function(t,e){var n=y.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return c?n:n.endOf(i)},d=function(t,e){return y.w(l.toDate()[t].apply(l.toDate(),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},p=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case u:return c?f(1,0):f(31,11);case a:return c?f(1,m):f(0,m+1);case o:var _=this.$locale().weekStart||0,b=(p<_?p+7:p)-_;return f(c?g-b:g+(6-b),m);case i:case"date":return d(v+"Hours",0);case r:return d(v+"Minutes",1);case n:return d(v+"Seconds",2);case e:return d(v+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(o,s){var l,c=y.p(o),h="set"+(this.$u?"UTC":""),f=(l={},l[i]=h+"Date",l.date=h+"Date",l[a]=h+"Month",l[u]=h+"FullYear",l[r]=h+"Hours",l[n]=h+"Minutes",l[e]=h+"Seconds",l[t]=h+"Milliseconds",l)[c],d=c===i?this.$D+(s-this.$W):s;if(c===a||c===u){var p=this.clone().set("date",1);p.$d[f](d),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else f&&this.$d[f](d);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[y.p(t)]()},f.add=function(t,s){var l,c=this;t=Number(t);var h=y.p(s),f=function(e){var n=_(c);return y.w(n.date(n.date()+Math.round(e*t)),c)};if(h===a)return this.set(a,this.$M+t);if(h===u)return this.set(u,this.$y+t);if(h===i)return f(1);if(h===o)return f(7);var d=(l={},l[n]=6e4,l[r]=36e5,l[e]=1e3,l)[h]||1,p=this.$d.getTime()+t*d;return y.w(p,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=y.z(this),i=this.$locale(),o=this.$H,a=this.$m,s=this.$M,u=i.weekdays,l=i.months,h=function(t,r,i,o){return t&&(t[r]||t(e,n))||i[r].substr(0,o)},f=function(t){return y.s(o%12||12,t,"0")},d=i.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:y.s(s+1,2,"0"),MMM:h(i.monthsShort,s,l,3),MMMM:l[s]||l(this,n),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,u,2),ddd:h(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:y.s(o,2,"0"),h:f(1),hh:f(2),a:d(o,a,!0),A:d(o,a,!1),m:String(a),mm:y.s(a,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:r};return n.replace(c,(function(t,e){return e||p[t]||r.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,l,c){var h,f=y.p(l),d=_(t),p=6e4*(d.utcOffset()-this.utcOffset()),m=this-d,g=y.m(this,d);return g=(h={},h[u]=g/12,h[a]=g,h[s]=g/3,h[o]=(m-p)/6048e5,h[i]=(m-p)/864e5,h[r]=m/36e5,h[n]=m/6e4,h[e]=m/1e3,h)[f]||m,c?g:y.a(g)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return m[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=v(t,e,!0);return r&&(n.$L=r),n},f.clone=function(){return y.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},h}();return _.prototype=b.prototype,_.extend=function(t,e){return t(e,b,_),_},_.locale=v,_.isDayjs=g,_.unix=function(t){return _(1e3*t)},_.en=m[p],_.Ls=m,_}()},Xi7e:function(t,e,n){var r=n("KMkd"),i=n("adU4"),o=n("tMB7"),a=n("+6XX"),s=n("Z8oC");function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},Y9lz:function(t,e,n){n("7DDg")("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},YESw:function(t,e,n){var r=n("Cwc5")(Object,"create");t.exports=r},YuTi:function(t,e,n){n("HAE/"),t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},Z0cm:function(t,e,n){n("LK8F");var r=Array.isArray;t.exports=r},Z8oC:function(t,e,n){var r=n("y1pI");t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},ZCpW:function(t,e,n){var r=n("lm/5"),i=n("O7RO"),o=n("IOzZ");t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},ZWtO:function(t,e,n){var r=n("4uTw"),i=n("9Nap");t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},Zz4T:function(t,e,n){"use strict";n("OGtf")("sub",(function(t){return function(){return t(this,"sub","","")}}))},aSns:function(t,e,n){"use strict";n("LK8F"),n("xfY5"),n("bWfx"),n("DW2E"),n("V+eJ"),n("Vd3H"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("8+KV");var r=n("GrlX"),i=n("uxXc"),o=[].slice,a=["keyword","gray","hex"],s={};Object.keys(i).forEach((function(t){s[o.call(i[t].labels).sort().join("")]=t}));var u={};function l(t,e){if(!(this instanceof l))return new l(t,e);if(e&&e in a&&(e=null),e&&!(e in i))throw new Error("Unknown model: "+e);var n,c;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof l)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var h=r.get(t);if(null===h)throw new Error("Unable to parse color from string: "+t);this.model=h.model,c=i[this.model].channels,this.color=h.value.slice(0,c),this.valpha="number"==typeof h.value[c]?h.value[c]:1}else if(t.length){this.model=e||"rgb",c=i[this.model].channels;var f=o.call(t,0,c);this.color=d(f,c),this.valpha="number"==typeof t[c]?t[c]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var p=Object.keys(t);"alpha"in t&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var m=p.sort().join("");if(!(m in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[m];var g=i[this.model].labels,v=[];for(n=0;n<g.length;n++)v.push(t[g[n]]);this.color=d(v)}if(u[this.model])for(c=i[this.model].channels,n=0;n<c;n++){var _=u[this.model][n];_&&(this.color[n]=_(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function c(t,e,n){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(u[t]||(u[t]=[]))[e]=n})),t=t[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[t]()).color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function h(t){return function(e){return Math.max(0,Math.min(t,e))}}function f(t){return Array.isArray(t)?t:[t]}function d(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}l.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in r.to?this:this.rgb(),n=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return r.to[e.model](n)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),n=1===e.valpha?e.color:e.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=i[this.model].channels,n=i[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new l(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new l(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:c("rgb",0,h(255)),green:c("rgb",1,h(255)),blue:c("rgb",2,h(255)),hue:c(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:c("hsl",1,h(100)),lightness:c("hsl",2,h(100)),saturationv:c("hsv",1,h(100)),value:c("hsv",2,h(100)),chroma:c("hcg",1,h(100)),gray:c("hcg",2,h(100)),white:c("hwb",1,h(100)),wblack:c("hwb",2,h(100)),cyan:c("cmyk",0,h(100)),magenta:c("cmyk",1,h(100)),yellow:c("cmyk",2,h(100)),black:c("cmyk",3,h(100)),x:c("xyz",0,h(100)),y:c("xyz",1,h(100)),z:c("xyz",2,h(100)),l:c("lab",0,h(100)),a:c("lab",1),b:c("lab",2),keyword:function(t){return arguments.length?new l(t):i[this.model].keyword(this.color)},hex:function(t){return arguments.length?new l(t):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return l.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n=(n+t)%360)<0?360+n:n,e.color[0]=n,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var n=t.rgb(),r=this.rgb(),i=void 0===e?.5:e,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,u=1-s;return l.rgb(s*n.red()+u*r.red(),s*n.green()+u*r.green(),s*n.blue()+u*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(i).forEach((function(t){if(-1===a.indexOf(t)){var e=i[t].channels;l.prototype[t]=function(){if(this.model===t)return new l(this);if(arguments.length)return new l(arguments,t);var n="number"==typeof arguments[e]?e:this.valpha;return new l(f(i[this.model][t].raw(this.color)).concat(n),t)},l[t]=function(n){return"number"==typeof n&&(n=d(o.call(arguments),e)),new l(n,t)}}})),t.exports=l},aUsF:function(t,e,n){"use strict";n("a1Th"),n("h7Nl"),n("Oyvg"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("LK8F");var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var a,s,u,l=r(e),c=r(n);if(l&&c){if((s=e.length)!=n.length)return!1;for(a=s;0!=a--;)if(!t(e[a],n[a]))return!1;return!0}if(l!=c)return!1;var h=e instanceof Date,f=n instanceof Date;if(h!=f)return!1;if(h&&f)return e.getTime()==n.getTime();var d=e instanceof RegExp,p=n instanceof RegExp;if(d!=p)return!1;if(d&&p)return e.toString()==n.toString();var m=i(e);if((s=m.length)!==i(n).length)return!1;for(a=s;0!=a--;)if(!o.call(n,m[a]))return!1;for(a=s;0!=a--;)if(!t(e[u=m[a]],n[u]))return!1;return!0}return e!=e&&n!=n}},adU4:function(t,e,n){var r=n("y1pI"),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},"aqI/":function(t,e,n){n("7DDg")("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},b80T:function(t,e,n){var r=n("UNi/"),i=n("03A+"),o=n("Z0cm"),a=n("DSRE"),s=n("wJg7"),u=n("c6wG"),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),f=!n&&!c&&!h&&u(t),d=n||c||h||f,p=d?r(t.length,String):[],m=p.length;for(var g in t)!e&&!l.call(t,g)||d&&("length"==g||h&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},bHtr:function(t,e,n){var r=n("XKFU");r(r.P,"Array",{fill:n("Nr18")}),n("nGyu")("fill")},"bt/X":function(t,e,n){var r=n("hypo"),i=n("UMY1"),o=Object.prototype.hasOwnProperty,a=i((function(t,e,n){o.call(t,n)?t[n].push(e):r(t,n,[e])}));t.exports=a},c6wG:function(t,e,n){var r=n("dD9F"),i=n("sEf8"),o=n("mdPL"),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},cDf5:function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},"cq/+":function(t,e,n){var r=n("mc0g")();t.exports=r},cuY2:function(t,e,n){"use strict";n("OG14"),n("V+eJ"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("/SS/"),n("hHhE"),n("91GP"),n("rE2o"),n("ioFf"),n("HAE/"),Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=l(n("q1tI")),s=l(n("17x9")),u=l(n("TSYQ"));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"},f=["animateOpacity","animationStateClasses","applyInlineTransitions","children","contentClassName","delay","duration","easing","height","onAnimationEnd","onAnimationStart"];function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;for(var i={},o=Object.keys(t),a=0;a<o.length;a++){var s=o[a];-1===n.indexOf(s)&&(i[s]=t[s])}return i}function p(t){return!isNaN(parseFloat(t))&&isFinite(t)}function m(t){return"string"==typeof t&&t.search("%")===t.length-1&&p(t.substr(0,t.length-1))}function g(t,e){t&&"function"==typeof t&&t(e)}var v=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r="auto",o="visible";p(t.height)?(r=t.height<0||"0"===t.height?0:t.height,o="hidden"):m(t.height)&&(r="0%"===t.height?0:t.height,o="hidden"),n.animationStateClasses=i({},h,t.animationStateClasses);var a=n.getStaticStateClasses(r);return n.state={animationStateClasses:a,height:r,overflow:o,shouldUseTransitions:!1},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"componentDidMount",value:function(){var t=this.state.height;this.contentElement&&this.contentElement.style&&this.hideContent(t)}},{key:"componentDidUpdate",value:function(t,e){var n,r=this,i=this.props,o=i.delay,a=i.duration,s=i.height,l=i.onAnimationEnd,h=i.onAnimationStart;if(this.contentElement&&s!==t.height){var f;this.showContent(e.height),this.contentElement.style.overflow="hidden";var d=this.contentElement.offsetHeight;this.contentElement.style.overflow="";var v=a+o,_=null,y={height:null,overflow:"hidden"},b="auto"===e.height;p(s)?(_=s<0||"0"===s?0:s,y.height=_):m(s)?(_="0%"===s?0:s,y.height=_):(_=d,y.height="auto",y.overflow=null),b&&(y.height=_,_=d);var x=(0,u.default)((c(f={},this.animationStateClasses.animating,!0),c(f,this.animationStateClasses.animatingUp,"auto"===t.height||s<t.height),c(f,this.animationStateClasses.animatingDown,"auto"===s||s>t.height),c(f,this.animationStateClasses.animatingToHeightZero,0===y.height),c(f,this.animationStateClasses.animatingToHeightAuto,"auto"===y.height),c(f,this.animationStateClasses.animatingToHeightSpecific,y.height>0),f)),w=this.getStaticStateClasses(y.height);this.setState({animationStateClasses:x,height:_,overflow:"hidden",shouldUseTransitions:!b}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),b?(y.shouldUseTransitions=!0,n=function(){r.setState(y),g(h,{newHeight:y.height})},requestAnimationFrame((function(){requestAnimationFrame((function(){n()}))})),this.animationClassesTimeoutID=setTimeout((function(){r.setState({animationStateClasses:w,shouldUseTransitions:!1}),r.hideContent(y.height),g(l,{newHeight:y.height})}),v)):(g(h,{newHeight:_}),this.timeoutID=setTimeout((function(){y.animationStateClasses=w,y.shouldUseTransitions=!1,r.setState(y),"auto"!==s&&r.hideContent(_),g(l,{newHeight:_})}),v))}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null,this.animationClassesTimeoutID=null,this.animationStateClasses=null}},{key:"showContent",value:function(t){0===t&&(this.contentElement.style.display="")}},{key:"hideContent",value:function(t){0===t&&(this.contentElement.style.display="none")}},{key:"getStaticStateClasses",value:function(t){var e;return(0,u.default)((c(e={},this.animationStateClasses.static,!0),c(e,this.animationStateClasses.staticHeightZero,0===t),c(e,this.animationStateClasses.staticHeightSpecific,t>0),c(e,this.animationStateClasses.staticHeightAuto,"auto"===t),e))}},{key:"render",value:function(){var t,e=this,n=this.props,r=n.animateOpacity,o=n.applyInlineTransitions,s=n.children,l=n.className,h=n.contentClassName,p=n.duration,m=n.easing,g=n.delay,v=n.style,_=this.state,y=_.height,b=_.overflow,x=_.animationStateClasses,w=_.shouldUseTransitions,T=i({},v,{height:y,overflow:b||v.overflow});w&&o&&(T.transition="height "+p+"ms "+m+" "+g+"ms",v.transition&&(T.transition=v.transition+", "+T.transition),T.WebkitTransition=T.transition);var A={};r&&(A.transition="opacity "+p+"ms "+m+" "+g+"ms",A.WebkitTransition=A.transition,0===y&&(A.opacity=0));var S=(0,u.default)((c(t={},x,!0),c(t,l,l),t));return a.default.createElement("div",i({},d.apply(void 0,[this.props].concat(f)),{"aria-hidden":0===y,className:S,style:T}),a.default.createElement("div",{className:h,style:A,ref:function(t){return e.contentElement=t}},s))}}]),e}(a.default.Component);v.propTypes={animateOpacity:s.default.bool,animationStateClasses:s.default.object,applyInlineTransitions:s.default.bool,children:s.default.any.isRequired,className:s.default.string,contentClassName:s.default.string,duration:s.default.number,delay:s.default.number,easing:s.default.string,height:function(t,e,n){var i=t[e];return"number"==typeof i&&i>=0||m(i)||"auto"===i?null:new TypeError('value "'+i+'" of type "'+(void 0===i?"undefined":r(i))+'" is invalid type for '+e+" in "+n+'. It needs to be a positive number, string "auto" or percentage string (e.g. "15%").')},onAnimationEnd:s.default.func,onAnimationStart:s.default.func,style:s.default.object},v.defaultProps={animateOpacity:!1,animationStateClasses:h,applyInlineTransitions:!0,duration:250,delay:0,easing:"ease",style:{}},e.default=v},dD9F:function(t,e,n){var r=n("NykK"),i=n("shjB"),o=n("ExA7"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},"dE+T":function(t,e,n){var r=n("XKFU");r(r.P,"Array",{copyWithin:n("upKx")}),n("nGyu")("copyWithin")},dI71:function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return r}))},dt0z:function(t,e,n){var r=n("zoYe");t.exports=function(t){return null==t?"":r(t)}},e4Nc:function(t,e,n){var r=n("fGT3"),i=n("k+1r"),o=n("JHgL"),a=n("pSRY"),s=n("H8j4");function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},e5cp:function(t,e,n){var r=n("fmRc"),i=n("or5M"),o=n("HDyB"),a=n("seXi"),s=n("QqLw"),u=n("Z0cm"),l=n("DSRE"),c=n("c6wG"),h="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,d,p,m){var g=u(t),v=u(e),_=g?"[object Array]":s(t),y=v?"[object Array]":s(e),b=(_="[object Arguments]"==_?h:_)==h,x=(y="[object Arguments]"==y?h:y)==h,w=_==y;if(w&&l(t)){if(!l(e))return!1;g=!0,b=!1}if(w&&!b)return m||(m=new r),g||c(t)?i(t,e,n,d,p,m):o(t,e,_,n,d,p,m);if(!(1&n)){var T=b&&f.call(t,"__wrapped__"),A=x&&f.call(e,"__wrapped__");if(T||A){var S=T?t.value():t,E=A?e.value():e;return m||(m=new r),p(S,E,n,d,m)}}return!!w&&(m||(m=new r),a(t,e,n,d,p,m))}},eHKK:function(t,e,n){var r=n("XKFU");r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},eUgh:function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},ebwN:function(t,e,n){var r=n("Cwc5")(n("Kz5y"),"Map");t.exports=r},ekgI:function(t,e,n){var r=n("YESw"),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},fGT3:function(t,e,n){var r=n("4kuk"),i=n("Xi7e"),o=n("ebwN");t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},"fR/l":function(t,e,n){var r=n("CH3K"),i=n("Z0cm");t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},fmRc:function(t,e,n){var r=n("Xi7e"),i=n("77Zs"),o=n("L8xA"),a=n("gCq4"),s=n("VaNO"),u=n("0Cz8");function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=u,t.exports=l},ftKO:function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},gCq4:function(t,e){t.exports=function(t){return this.__data__.get(t)}},"h/M4":function(t,e,n){var r=n("XKFU");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},hEkN:function(t,e,n){"use strict";n("OGtf")("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},hLT2:function(t,e,n){var r=n("XKFU");r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},hgQt:function(t,e,n){var r=n("Juji"),i=n("4sDh");t.exports=function(t,e){return null!=t&&i(t,e,r)}},hhXQ:function(t,e,n){var r=n("XKFU"),i=n("UExd")(!1);r(r.S,"Object",{values:function(t){return i(t)}})},hypo:function(t,e,n){var r=n("O0oS");t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},i0Wh:function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}n("INYr"),n("dRSK"),n("0l/t"),n("HEwt"),n("VRzm"),n("9VmF"),n("f3/d"),n("rE2o"),n("ioFf"),n("Tze0"),n("dZ+Y"),n("/8Fb"),n("DNiP"),n("XfO3"),n("T39b"),n("SRfc"),n("pIFo"),n("Oyvg"),n("LK8F"),n("8+KV"),n("V+eJ"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("bWfx"),n("DW2E"),n("eM6i"),n("HAE/"),Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("8OQS")),o=r(n("VbXa")),a=r(n("PJYZ")),s=r(n("pVnL")),u=r(n("q1tI")),l=r(n("i8i4")),c=void 0,h=void 0,f=[],d=function(t){return"undefined"!=typeof window&&window.requestAnimationFrame(t)},p=function(t){return"undefined"!=typeof window&&window.cancelAnimationFrame(t)},m=void 0,g=function(){return Date.now()},v=void 0,_=void 0,y=function(t,e){return h={fn:t,transform:e}},b=function(t){return f=t},x=function(t){return c=t},w=function(t){return m=t},T=function(t){return v=t},A=function(t){return _=t},S=Object.freeze({get bugfixes(){return c},get applyAnimatedValues(){return h},get colorNames(){return f},get requestFrame(){return d},get cancelFrame(){return p},get interpolation(){return m},get now(){return g},get defaultElement(){return v},get createAnimatedStyle(){return _},injectApplyAnimatedValues:y,injectColorNames:b,injectBugfixes:x,injectInterpolation:w,injectFrame:function(t,e){var n;return d=(n=[t,e])[0],p=n[1],n},injectNow:function(t){return g=t},injectDefaultElement:T,injectCreateAnimatedStyle:A}),E=function(){function t(){}var e=t.prototype;return e.attach=function(){},e.detach=function(){},e.getValue=function(){},e.getAnimatedValue=function(){return this.getValue()},e.addChild=function(t){},e.removeChild=function(t){},e.getChildren=function(){return[]},t}(),k=function(t){return Object.keys(t).map((function(e){return t[e]}))},M=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).children=[],e.getChildren=function(){return e.children},e.getPayload=function(t){return void 0===t&&(t=void 0),void 0!==t&&e.payload?e.payload[t]:e.payload||a(e)},e}o(e,t);var n=e.prototype;return n.addChild=function(t){0===this.children.length&&this.attach(),this.children.push(t)},n.removeChild=function(t){var e=this.children.indexOf(t);this.children.splice(e,1),0===this.children.length&&this.detach()},e}(E),O=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).payload=[],e.getAnimatedValue=function(){return e.getValue()},e.attach=function(){return e.payload.forEach((function(t){return t instanceof E&&t.addChild(a(e))}))},e.detach=function(){return e.payload.forEach((function(t){return t instanceof E&&t.removeChild(a(e))}))},e}return o(e,t),e}(M),P=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).payload={},e.getAnimatedValue=function(){return e.getValue(!0)},e.attach=function(){return k(e.payload).forEach((function(t){return t instanceof E&&t.addChild(a(e))}))},e.detach=function(){return k(e.payload).forEach((function(t){return t instanceof E&&t.removeChild(a(e))}))},e}return o(e,t),e.prototype.getValue=function(t){void 0===t&&(t=!1);var e={};for(var n in this.payload){var r=this.payload[n];(!t||r instanceof E)&&(e[n]=r instanceof E?r[t?"getAnimatedValue":"getValue"]():r)}return e},e}(M),z=function(t){function e(e){var n;return n=t.call(this)||this,!(e=e||{}).transform||e.transform instanceof E||(e=h.transform(e)),n.payload=e,n}return o(e,t),e}(P),R={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},L=function(){function t(){}return t.create=function(e,n,r){if("function"==typeof e)return e;if(m&&e.output&&"string"==typeof e.output[0])return m(e);if(Array.isArray(e))return t.create({range:e,output:n,extrapolate:r||"extend"});var i=e.output,o=e.range||[0,1],a=e.easing||function(t){return t},s="extend",u=e.map;void 0!==e.extrapolateLeft?s=e.extrapolateLeft:void 0!==e.extrapolate&&(s=e.extrapolate);var l="extend";return void 0!==e.extrapolateRight?l=e.extrapolateRight:void 0!==e.extrapolate&&(l=e.extrapolate),function(t){var e=function(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}(t,o);return function(t,e,n,r,i,o,a,s,u){var l=u?u(t):t;if(l<e){if("identity"===a)return l;"clamp"===a&&(l=e)}if(l>n){if("identity"===s)return l;"clamp"===s&&(l=n)}if(r===i)return r;if(e===n)return t<=e?r:i;e===-1/0?l=-l:n===1/0?l-=e:l=(l-e)/(n-e);l=o(l),r===-1/0?l=-l:i===1/0?l+=r:l=l*(i-r)+r;return l}(t,o[e],o[e+1],i[e],i[e+1],a,s,l,u)}},t}();var C="[-+]?\\d*\\.?\\d+",j=C+"%";function I(){return"\\(\\s*("+Array.prototype.slice.call(arguments).join(")\\s*,\\s*(")+")\\s*\\)"}var N=new RegExp("rgb"+I(C,C,C)),D=new RegExp("rgba"+I(C,C,C,C)),F=new RegExp("hsl"+I(C,j,j)),B=new RegExp("hsla"+I(C,j,j,C)),U=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,G=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,V=/^#([0-9a-fA-F]{6})$/,Z=/^#([0-9a-fA-F]{8})$/;function W(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function q(t,e,n){var r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,o=W(i,r,t+1/3),a=W(i,r,t),s=W(i,r,t-1/3);return Math.round(255*o)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function H(t){var e=parseInt(t,10);return e<0?0:e>255?255:e}function Y(t){return(parseFloat(t)%360+360)%360/360}function X(t){var e=parseFloat(t);return e<0?0:e>1?255:Math.round(255*e)}function $(t){var e=parseFloat(t);return e<0?0:e>100?1:e/100}function K(t){var e,n,r="number"==typeof(e=t)?e>>>0===e&&e>=0&&e<=4294967295?e:null:(n=V.exec(e))?parseInt(n[1]+"ff",16)>>>0:R.hasOwnProperty(e)?R[e]:(n=N.exec(e))?(H(n[1])<<24|H(n[2])<<16|H(n[3])<<8|255)>>>0:(n=D.exec(e))?(H(n[1])<<24|H(n[2])<<16|H(n[3])<<8|X(n[4]))>>>0:(n=U.exec(e))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=Z.exec(e))?parseInt(n[1],16)>>>0:(n=G.exec(e))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=F.exec(e))?(255|q(Y(n[1]),$(n[2]),$(n[3])))>>>0:(n=B.exec(e))?(q(Y(n[1]),$(n[2]),$(n[3]))|X(n[4]))>>>0:null;return null===r?t:"rgba("+((4278190080&(r=r||0))>>>24)+", "+((16711680&r)>>>16)+", "+((65280&r)>>>8)+", "+(255&r)/255+")"}var J=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Q=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,tt=new RegExp("("+Object.keys(R).join("|")+")","g");var et=function(t){function e(n,r,i){var o;return(o=t.call(this)||this).getValue=function(){var t;return(t=o).calc.apply(t,o.payload.map((function(t){return t.getValue()})))},o.updateConfig=function(t,e){return o.calc=L.create(t,e)},o.interpolate=function(t,n){return new e(a(o),t,n)},o.payload=n instanceof O&&!n.updateConfig?n.payload:Array.isArray(n)?n:[n],o.calc=L.create(r,i),o}return o(e,t),e}(O);var nt=function(t){function e(e){var n;return(n=t.call(this)||this).setValue=function(t,e){void 0===e&&(e=!0),n.value=t,e&&n.flush()},n.getValue=function(){return n.value},n.updateStyles=function(){return function t(e,n){"function"==typeof e.update?n.add(e):e.getChildren().forEach((function(e){return t(e,n)}))}(a(n),n.animatedStyles)},n.updateValue=function(t){return n.flush(n.value=t)},n.interpolate=function(t,e){return new et(a(n),t,e)},n.value=e,n.animatedStyles=new Set,n.done=!1,n.startPosition=e,n.lastPosition=e,n.lastVelocity=void 0,n.lastTime=void 0,n.controller=void 0,n}o(e,t);var n=e.prototype;return n.flush=function(){0===this.animatedStyles.size&&this.updateStyles(),this.animatedStyles.forEach((function(t){return t.update()}))},n.prepare=function(t){void 0===this.controller&&(this.controller=t),this.controller===t&&(this.startPosition=this.value,this.lastPosition=this.value,this.lastVelocity=t.isActive?this.lastVelocity:void 0,this.lastTime=t.isActive?this.lastTime:void 0,this.done=!1,this.animatedStyles.clear())},e}(M),rt=function(t){function e(e){var n;return(n=t.call(this)||this).setValue=function(t,e){void 0===e&&(e=!0),Array.isArray(t)?t.length===n.payload.length&&t.forEach((function(t,r){return n.payload[r].setValue(t,e)})):n.payload.forEach((function(r,i){return n.payload[i].setValue(t,e)}))},n.getValue=function(){return n.payload.map((function(t){return t.getValue()}))},n.interpolate=function(t,e){return new et(a(n),t,e)},n.payload=e.map((function(t){return new nt(t)})),n}return o(e,t),e}(O);function it(t,e){return null==t?e:t}function ot(t){return void 0!==t?Array.isArray(t)?t:[t]:[]}function at(t,e){if(typeof t!=typeof e)return!1;if("string"==typeof t||"number"==typeof t)return t===e;var n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return void 0!==n||t===e}function st(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"==typeof t?t.apply(void 0,n):t}function ut(t){return Object.keys(t).map((function(e){return t[e]}))}function lt(t){var e=function(t){return t.to,t.from,t.config,t.native,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.impl,t.inject,t.delay,t.attach,t.destroyed,t.interpolateTo,t.autoStart,t.ref,i(t,["to","from","config","native","onStart","onRest","onFrame","children","reset","reverse","force","immediate","impl","inject","delay","attach","destroyed","interpolateTo","autoStart","ref"])}(t),n=Object.keys(t).reduce((function(n,r){var i;return void 0!==e[r]?n:s({},n,((i={})[r]=t[r],i))}),{});return s({to:e},n)}function ct(t,e){var n,r=e[0],i=e[1];return s({},t,((n={})[r]=new(Array.isArray(i)?rt:nt)(i),n))}function ht(t){var e=t.from,n=t.to,r=t.native,i=Object.entries(s({},e,n));return r?i.reduce(ct,{}):s({},e,n)}function ft(t,e){return e&&("function"==typeof e?e(t):"object"==typeof e&&(e.current=t)),t}var dt=function(t){return"auto"===t};var pt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","Ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}pt=Object.keys(pt).reduce((function(t,e){return mt.forEach((function(n){return t[function(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}(n,e)]=t[e]})),t}),pt);var vt={};A((function(t){return new z(t)})),T("div"),w((function(t){var e=t.output.map((function(t){return t.replace(Q,K)})).map((function(t){return t.replace(tt,K)})),n=e[0].match(J).map((function(){return[]}));e.forEach((function(t){t.match(J).forEach((function(t,e){return n[e].push(+t)}))}));var r=e[0].match(J).map((function(e,r){return L.create(s({},t,{output:n[r]}))}));return function(t){var n=0;return e[0].replace(J,(function(){return r[n++](t)})).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(function(t,e,n,r,i){return"rgba("+Math.round(e)+", "+Math.round(n)+", "+Math.round(r)+", "+i+")"}))}})),b(R),x((function(t,e){var n=t.from,r=t.to,i=t.children;if(ut(r).some(dt)||ut(n).some(dt)){var o=i(ht(t));if(o){Array.isArray(o)&&(o={type:"div",props:{children:o}});var a=o.props.style;return u.createElement(o.type,s({key:o.key?o.key:void 0},o.props,{style:s({},a,{position:"absolute",visibility:"hidden"}),ref:function(i){if(i){var o,a,u=l.findDOMNode(i),c=getComputedStyle(u);if("border-box"===c.boxSizing)o=u.offsetWidth,a=u.offsetHeight;else{var h=parseFloat(c.paddingLeft||0)+parseFloat(c.paddingRight||0),f=parseFloat(c.paddingTop||0)+parseFloat(c.paddingBottom||0),d=parseFloat(c.borderLeftWidth||0)+parseFloat(c.borderRightWidth||0),p=parseFloat(c.borderTopWidth||0)+parseFloat(c.borderBottomWidth||0);o=u.offsetWidth-h-d,a=u.offsetHeight-f-p}var m=function(t,e){return function(n,r){var i,o=r[0],a=r[1];return s({},n,((i={})[o]="auto"===a?~o.indexOf("height")?e:t:a,i))}}(o,a);e(s({},t,{from:Object.entries(n).reduce(m,n),to:Object.entries(r).reduce(m,r)}))}}}))}}})),y((function(t,e){if(!t.nodeType||void 0===t.setAttribute)return!1;var n=e.style,r=e.children,o=e.scrollTop,a=e.scrollLeft,s=i(e,["style","children","scrollTop","scrollLeft"]);for(var u in void 0!==o&&(t.scrollTop=o),void 0!==a&&(t.scrollLeft=a),void 0!==r&&(t.textContent=r),n)if(n.hasOwnProperty(u)){var l=0===u.indexOf("--"),c=gt(u,n[u],l);"float"===u&&(u="cssFloat"),l?t.style.setProperty(u,c):t.style[u]=c}for(var h in s){var f=vt[h]||(vt[h]=h.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()})));void 0!==t.getAttribute(f)&&t.setAttribute(f,s[h])}}),(function(t){return t}));var _t=!1,yt=new Set,bt=function t(){var e=g(),n=yt,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}for(var a=o,s=!0,u=!0,l=0;l<a.configs.length;l++){for(var c=a.configs[l],h=void 0,f=void 0,p=0;p<c.animatedValues.length;p++){var m=c.animatedValues[p];if(!m.done){var v=c.fromValues[p],_=c.toValues[p],y=m.lastPosition,b=_ instanceof E,x=Array.isArray(c.initialVelocity)?c.initialVelocity[p]:c.initialVelocity;if(b&&(_=_.getValue()),c.immediate||!b&&!c.decay&&v===_)m.updateValue(_),m.done=!0;else if(c.delay&&e-a.startTime<c.delay)s=!1;else if(u=!1,"string"!=typeof v&&"string"!=typeof _){if(void 0!==c.duration)y=v+c.easing((e-a.startTime-c.delay)/c.duration)*(_-v),h=e>=a.startTime+c.delay+c.duration;else if(c.decay)y=v+x/(1-.998)*(1-Math.exp(-(1-.998)*(e-a.startTime))),(h=Math.abs(m.lastPosition-y)<.1)&&(_=y);else{f=void 0!==m.lastTime?m.lastTime:e,x=void 0!==m.lastVelocity?m.lastVelocity:c.initialVelocity,e>f+64&&(f=e);for(var w=Math.floor(e-f),T=0;T<w;++T){y+=1*(x+=1*((-c.tension*(y-_)+-c.friction*x)/c.mass)/1e3)/1e3}var A=!(!c.clamp||0===c.tension)&&(v<_?y>_:y<_),S=Math.abs(x)<=c.precision,k=0===c.tension||Math.abs(_-y)<=c.precision;h=A||S&&k,m.lastVelocity=x,m.lastTime=e}b&&!c.toValues[p].done&&(h=!1),h?(m.value!==_&&(y=_),m.done=!0):s=!1,m.updateValue(y),m.lastPosition=y}else m.updateValue(_),m.done=!0}}!a.props.onFrame&&a.props.native||(a.animatedProps[c.name]=c.interpolation.getValue())}!a.props.onFrame&&a.props.native||(!a.props.native&&a.onUpdate&&a.onUpdate(),a.props.onFrame&&a.props.onFrame(a.animatedProps)),s&&(yt.delete(a),a.debouncedOnEnd({finished:!0,noChange:u}))}yt.size?d(t):_t=!1},xt=function(t){yt.has(t)&&yt.delete(t)},wt=function(){function t(t,e){var n=this;void 0===e&&(e={native:!0,interpolateTo:!0,autoStart:!0}),this.getValues=function(){return n.props.native?n.interpolations:n.animatedProps},this.dependents=new Set,this.isActive=!1,this.hasChanged=!1,this.props={},this.merged={},this.animations={},this.interpolations={},this.animatedProps={},this.configs=[],this.frame=void 0,this.startTime=void 0,this.lastTime=void 0,this.update(s({},t,e))}var e=t.prototype;return e.update=function(t){var e=this;this.props=s({},this.props,t);var n=this.props.interpolateTo?lt(this.props):this.props,r=n.from,i=void 0===r?{}:r,o=n.to,a=void 0===o?{}:o,u=n.config,l=void 0===u?{}:u,c=n.delay,h=void 0===c?0:c,d=n.reverse,p=n.attach,m=n.reset,g=n.immediate,v=n.autoStart,_=n.ref;if(d){var y=[a,i];i=y[0],a=y[1]}this.hasChanged=!1;var b=p&&p(this),x=m?{}:this.merged;if(this.merged=s({},i,x,a),this.animations=Object.entries(this.merged).reduce((function(t,n,r){var o,a,u,c=n[0],d=n[1],p=!m&&t[c]||{},v="number"==typeof d,_="string"==typeof d&&!d.startsWith("#")&&!/\d/.test(d)&&!f[d],y=!v&&!_&&Array.isArray(d),x=void 0!==i[c]?i[c]:d,w=v||y?d:_?d:1,T=st(l,c);if(b&&(w=b.animations[c].parent),void 0===T.decay&&at(p.changes,d))return t;if(e.hasChanged=!0,v||_)a=u=p.parent||new nt(x);else if(y)a=u=p.parent||new rt(x);else{var A=p.interpolation&&p.interpolation.calc(p.parent.value);p.parent?(a=p.parent).setValue(0,!1):a=new nt(0);var S={output:[void 0!==A?A:x,d]};p.interpolation?(u=p.interpolation,p.interpolation.updateConfig(S)):u=a.interpolate(S)}st(g,c)&&a.setValue(d,!1);var E=ot(a.getPayload());return E.forEach((function(t){return t.prepare(e)})),s({},t,((o={})[c]=s({},p,{name:c,parent:a,interpolation:u,animatedValues:E,changes:d,fromValues:ot(a.getValue()),toValues:ot(b?w.getPayload():w),immediate:st(g,c),delay:it(T.delay,h||0),initialVelocity:it(T.velocity,0),clamp:it(T.clamp,!1),precision:it(T.precision,.01),tension:it(T.tension,170),friction:it(T.friction,26),mass:it(T.mass,1),duration:T.duration,easing:it(T.easing,(function(t){return t})),decay:T.decay}),o))}),this.animations),this.hasChanged)for(var w in this.configs=ut(this.animations),this.animatedProps={},this.interpolations={},this.animations)this.interpolations[w]=this.animations[w].interpolation,this.animatedProps[w]=this.animations[w].interpolation.getValue();for(var T=arguments.length,A=new Array(T>1?T-1:0),S=1;S<T;S++)A[S-1]=arguments[S];_||!v&&!A.length||this.start.apply(this,A);var E=A[0],k=A[1];return this.onEnd="function"==typeof E&&E,this.onUpdate=k,this.getValues()},e.start=function(t,e){var n,r=this;return this.startTime=g(),this.isActive&&this.stop(),this.isActive=!0,this.onEnd="function"==typeof t&&t,this.onUpdate=e,this.props.onStart&&this.props.onStart(),n=this,yt.has(n)||(yt.add(n),_t||d(bt),_t=!0),new Promise((function(t){return r.resolve=t}))},e.stop=function(t){void 0===t&&(t=!1),t&&ut(this.animations).forEach((function(t){return t.changes=void 0})),this.debouncedOnEnd({finished:t})},e.destroy=function(){xt(this),this.props={},this.merged={},this.animations={},this.interpolations={},this.animatedProps={},this.configs=[]},e.debouncedOnEnd=function(t){xt(this),this.isActive=!1;var e=this.onEnd;this.onEnd=null,e&&e(t),this.resolve&&this.resolve(),this.resolve=null},t}(),Tt=function(t){function e(e,n){var r;return r=t.call(this)||this,e.style&&(e=s({},e,{style:_(e.style)})),r.payload=e,r.update=n,r.attach(),r}return o(e,t),e}(P);function At(t){var e=function(e){function n(t){var n;return(n=e.call(this)||this).callback=function(){n.node&&(!1===h.fn(n.node,n.propsAnimated.getAnimatedValue(),a(n))&&n.forceUpdate())},n.attachProps(t),n}o(n,e);var r=n.prototype;return r.componentWillUnmount=function(){this.propsAnimated&&this.propsAnimated.detach()},r.setNativeProps=function(t){!1===h.fn(this.node,t,this)&&this.forceUpdate()},r.attachProps=function(t){t.forwardRef;var e=i(t,["forwardRef"]),n=this.propsAnimated;this.propsAnimated=new Tt(e,this.callback),n&&n.detach()},r.shouldComponentUpdate=function(t){var e=t.style,n=i(t,["style"]),r=this.props,o=r.style;return(!at(i(r,["style"]),n)||!at(o,e))&&(this.attachProps(t),!0)},r.render=function(){var e=this,n=this.propsAnimated.getValue(),r=(n.scrollTop,n.scrollLeft,i(n,["scrollTop","scrollLeft"]));return u.createElement(t,s({},r,{ref:function(t){return e.node=ft(t,e.props.forwardRef)}}))},n}(u.Component);return u.forwardRef((function(t,n){return u.createElement(e,s({},t,{forwardRef:n}))}))}var St={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Et=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).state={lastProps:{from:{},to:{}},propsChanged:!1,internal:!1},e.controller=new wt(null,null),e.didUpdate=!1,e.didInject=!1,e.finished=!0,e.start=function(){e.finished=!1;var t=e.mounted;e.controller.start((function(n){return e.finish(s({},n,{wasMounted:t}))}),e.update)},e.stop=function(){return e.controller.stop(!0)},e.update=function(){return e.mounted&&e.setState({internal:!0})},e.finish=function(t){var n=t.finished,r=t.noChange,i=t.wasMounted;e.finished=!0,e.mounted&&n&&(!e.props.onRest||!i&&r||e.props.onRest(e.controller.merged),e.mounted&&e.didInject&&(e.afterInject=ht(e.props),e.setState({internal:!0})),e.mounted&&(e.didInject||e.props.after)&&e.setState({internal:!0}),e.didInject=!1)},e}o(e,t);var n=e.prototype;return n.componentDidMount=function(){this.componentDidUpdate(),this.mounted=!0},n.componentWillUnmount=function(){this.mounted=!1,this.stop()},e.getDerivedStateFromProps=function(t,e){var n=e.internal,r=e.lastProps,i=t.from,o=t.to,a=t.reset,s=t.force;return{propsChanged:!at(o,r.to)||!at(i,r.from)||a&&!n||s&&!n,lastProps:t,internal:!1}},n.render=function(){var t=this,e=this.props.children,n=this.state.propsChanged;if(this.props.inject&&n&&!this.injectProps){var r=this.props.inject(this.props,(function(e){t.injectProps=e,t.setState({internal:!0})}));if(r)return r}(this.injectProps||n)&&(this.didInject=!1,this.injectProps?(this.controller.update(this.injectProps),this.didInject=!0):n&&this.controller.update(this.props),this.didUpdate=!0,this.afterInject=void 0,this.injectProps=void 0);var i=s({},this.controller.getValues(),this.afterInject);return this.finished&&(i=s({},i,this.props.after)),Object.keys(i).length?e(i):null},n.componentDidUpdate=function(){this.didUpdate&&this.start(),this.didUpdate=!1},e}(u.Component);Et.defaultProps={from:{},to:{},config:St.default,native:!1,immediate:!1,reset:!1,force:!1,inject:c};var kt=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).first=!0,e.instances=new Set,e.hook=function(t,n,r,i){return e.instances.add(t),(i?n===r-1:0===n)?void 0:Array.from(e.instances)[i?n+1:n-1]},e}o(e,t);var n=e.prototype;return n.render=function(){var t=this,e=this.props,n=e.items,r=e.children,o=e.from,a=void 0===o?{}:o,l=e.initial,c=e.reverse,h=e.keys,f=e.delay,d=e.onRest,p=i(e,["items","children","from","initial","reverse","keys","delay","onRest"]),m=ot(n);return ot(m).map((function(e,n){return u.createElement(Et,s({onRest:0===n?d:null,key:"function"==typeof h?h(e):ot(h)[n],from:t.first&&void 0!==l?l||{}:a},p,{delay:0===n&&f||void 0,attach:function(e){return t.hook(e,n,m.length,c)},children:function(t){var i=r(e,n);return i?i(t):null}}))}))},n.componentDidUpdate=function(t){this.first=!1,t.items!==this.props.items&&this.instances.clear()},e}(u.PureComponent);kt.defaultProps={keys:function(t){return t}};var Mt=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).guid=0,e.state={props:{},resolve:function(){return null},last:!0,index:0},e.next=function(t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=0),e.running=!0,new Promise((function(i){e.mounted&&e.setState((function(e){return{props:t,resolve:i,last:n,index:r}}),(function(){return e.running=!1}))}))},e}o(e,t);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.componentDidUpdate({})},n.componentWillUnmount=function(){this.mounted=!1},n.componentDidUpdate=function(t){var e=this,n=this.props,r=n.states,i=n.filter,o=n.state;(t.state!==this.props.state||this.props.reset&&!this.running||!at(r[o],t.states[t.state]))&&r&&o&&r[o]&&function(){var t=++e.guid,n=r[o];if(n)if(Array.isArray(n))for(var a=Promise.resolve(),s=function(r){var o=r,s=n[o],u=o===n.length-1;a=a.then((function(){return t===e.guid&&e.next(i(s),u,o)}))},u=0;u<n.length;u++)s(u);else if("function"==typeof n){var l=0;n((function(n,r){return void 0===r&&(r=!1),t===e.guid&&e.next(i(n),r,l++)}),(function(){return d((function(){return e.instance&&e.instance.stop()}))}),e.props)}else e.next(i(r[o]))}()},n.render=function(){var t=this,e=this.state,n=e.props,r=e.resolve,o=e.last,a=e.index;if(!n||0===Object.keys(n).length)return null;var l=this.props,c=(l.state,l.filter,l.states,l.config),h=l.primitive,f=l.onRest,d=l.forwardRef,p=i(l,["state","filter","states","config","primitive","onRest","forwardRef"]);return Array.isArray(c)&&(c=c[a]),u.createElement(h,s({ref:function(e){return t.instance=ft(e,d)},config:c},p,n,{onRest:function(t){r(t),f&&o&&f(t)}}))},e}(u.PureComponent);Mt.defaultProps={state:"__default"};var Ot=u.forwardRef((function(t,e){return u.createElement(Mt,s({},t,{forwardRef:e}))}));Ot.create=function(t){return function(e,n){var r;return void 0===n&&(n=function(t){return t}),("function"==typeof e||Array.isArray(e))&&((r={}).__default=e,e=r),function(r){return u.createElement(Mt,s({primitive:t,states:e,filter:n},r))}}},Ot.Spring=function(t){return Ot.create(Et)(t,lt)},Ot.Trail=function(t){return Ot.create(kt)(t,lt)};var Pt=0,zt=function(t){var e=t.items,n=t.keys,r=i(t,["items","keys"]);return e=ot(void 0!==e?e:null),n="function"==typeof n?e.map(n):ot(n),s({items:e,keys:n.map((function(t){return String(t)}))},r)},Rt=function(t){o(n,t);var e=n.prototype;function n(e){var n;return(n=t.call(this,e)||this).destroyItem=function(t,e,r){return function(i){var o=n.props,a=o.onRest,s=o.onDestroyed;n.mounted&&(s&&s(t),n.setState((function(t){return{deleted:t.deleted.filter((function(t){return t.key!==e}))}})),a&&a(t,r,i))}},n.state={first:!0,transitions:[],current:{},deleted:[],prevProps:e},n}return e.componentDidMount=function(){this.mounted=!0},e.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,e){var n=e.first,r=e.prevProps,o=i(e,["first","prevProps"]),a=zt(t),u=a.items,l=a.keys,c=a.initial,h=a.from,f=a.enter,d=a.leave,p=a.update,m=a.trail,g=void 0===m?0:m,v=a.unique,_=a.config,y=zt(r),b=y.keys,x=y.items,w=s({},o.current),T=[].concat(o.deleted),A=Object.keys(w),S=new Set(A),E=new Set(l),k=l.filter((function(t){return!S.has(t)})),M=o.transitions.filter((function(t){return!t.destroyed&&!E.has(t.originalKey)})).map((function(t){return t.originalKey})),O=l.filter((function(t){return S.has(t)})),P=0;k.forEach((function(t){v&&T.find((function(e){return e.originalKey===t}))&&(T=T.filter((function(e){return e.originalKey!==t})));var e=l.indexOf(t),r=u[e];w[t]={state:"enter",originalKey:t,key:v?String(t):Pt++,item:r,trail:P+=g,config:st(_,r,"enter"),from:st(n&&void 0!==c?c||{}:h,r),to:st(f,r)}})),M.forEach((function(t){var e=b.indexOf(t),n=x[e];T.push(s({},w[t],{state:"leave",destroyed:!0,left:b[Math.max(0,e-1)],right:b[Math.min(b.length,e+1)],trail:P+=g,config:st(_,n,"leave"),to:st(d,n)})),delete w[t]})),O.forEach((function(t){var e=l.indexOf(t),n=u[e];w[t]=s({},w[t],{item:n,state:"update",trail:P+=g,config:st(_,n,"update"),to:st(p,n)})}));var z=l.map((function(t){return w[t]}));return T.forEach((function(t){var e,n=t.left,r=t.right,o=i(t,["left","right"]);-1!==(e=z.findIndex((function(t){return t.originalKey===n})))&&(e+=1),-1===e&&(e=z.findIndex((function(t){return t.originalKey===r}))),-1===e&&(e=T.findIndex((function(t){return t.originalKey===n}))),-1===e&&(e=T.findIndex((function(t){return t.originalKey===r}))),e=Math.max(0,e),z=[].concat(z.slice(0,e),[o],z.slice(e))})),{first:n&&0===k.length,transitions:z,current:w,deleted:T,prevProps:t}},e.render=function(){var t=this,e=this.props,n=(e.initial,e.from,e.enter,e.leave,e.update,e.onDestroyed,e.keys,e.items,e.onFrame),r=e.onRest,o=e.onStart,a=(e.trail,e.config,e.children),l=(e.unique,e.reset),c=i(e,["initial","from","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","trail","config","children","unique","reset"]);return this.state.transitions.map((function(e,i){var h,f=e.state,d=e.key,p=e.item,m=e.from,g=e.to,v=e.trail,_=e.config,y=e.destroyed;return u.createElement(Ot,s({reset:l&&"enter"===f,primitive:Et,state:f,filter:lt,states:(h={},h[f]=g,h),key:d,onRest:y?t.destroyItem(p,d,f):r&&function(t){return r(p,f,t)},onStart:o&&function(){return o(p,f)},onFrame:n&&function(t){return n(p,f,t)},delay:v,config:_},c,{from:m,children:function(t){var e=a(p,f,i);return e?e(t):null}}))}))},n}(u.PureComponent);Rt.defaultProps={keys:function(t){return t},unique:!1,reset:!1};var Lt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].reduce((function(t,e){return t[e]=At(e),t}),At);e.Spring=Et,e.Keyframes=Ot,e.Transition=Rt,e.Trail=kt,e.Controller=wt,e.config=St,e.animated=Lt,e.interpolate=function(t,e,n){return t&&new et(t,e,n)},e.Globals=S},i2N1:function(t,e,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},iL1L:function(t,e,n){"use strict";n("HAE/");var r=n("284h"),i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("pVnL")),a=i(n("q1tI")),s=(i(n("17x9")),r(n("xCns"))),u=n("6lFR"),l=n("pI4o");function c(t){var e=t.disabled,n=t.className,r=t.children,i=a.default.useRef(null),c=a.default.useRef(e);return a.default.useEffect((function(){var t;c.current=e,t=i.current,l.mediumEffect.useMedium((function(e){!c.current&&t&&(e.focusInside(t)||e.moveFocusInside(t,null))}))}),[e]),a.default.createElement("div",(0,o.default)({},(0,u.inlineProp)(s.FOCUS_AUTO,!e),{ref:i,className:n}),r)}c.propTypes={},c.defaultProps={disabled:!1,className:void 0};var h=c;e.default=h},jqX0:function(t,e,n){var r=n("XKFU"),i=n("jtBr");r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},jtBr:function(t,e,n){"use strict";var r=n("eeVq"),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},"k+1r":function(t,e,n){var r=n("QkVE");t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},kbyB:function(t,e,n){"use strict";n("HAE/");var r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"FocusLockUI",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"AutoFocusInside",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"MoveFocusInside",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"FreeFocusInside",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"InFocusGuard",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var i=r(n("tUSV")),o=r(n("PtNZ")),a=r(n("iL1L")),s=r(n("oTvd")),u=r(n("nwrK")),l=i.default;e.default=l},kekF:function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},knhD:function(t,e,n){var r=n("XKFU");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},l0Rn:function(t,e,n){"use strict";var r=n("RYi7"),i=n("vhPU");t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},lQqw:function(t,e,n){var r=n("MMmD");t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},lSCD:function(t,e,n){var r=n("NykK"),i=n("GoyQ");t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},ljhN:function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},"lm/5":function(t,e,n){var r=n("fmRc"),i=n("wF/u");t.exports=function(t,e,n,o){var a=n.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var l=n[a];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var c=(l=n[a])[0],h=t[c],f=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var d=new r;if(o)var p=o(h,f,c,t,e,d);if(!(void 0===p?i(f,h,3,o,d):p))return!1}}return!0}},ls82:function(t,e,n){n("rGqo"),n("yt8O"),n("a1Th"),n("h7Nl"),n("VRzm"),n("Btvt"),n("/SS/"),n("f3/d"),n("8+KV"),n("hHhE"),n("rE2o"),n("ioFf");var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n,r){var i=e&&e.prototype instanceof c?e:c,o=Object.create(i.prototype),a=new w(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=y(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=s;var l={};function c(){}function h(){}function f(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,m=p&&p(p(T([])));m&&m!==e&&n.call(m,i)&&(d=m);var g=f.prototype=c.prototype=Object.create(d);function v(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var e;this._invoke=function(r,i){function o(){return new Promise((function(e,o){!function e(r,i,o,a){var s=u(t[r],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}(r,i,e,o)}))}return e=e?e.then(o,o):o()}}function y(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,y(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=g.constructor=f,f.constructor=h,f[a]=h.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},v(_.prototype),_.prototype[o]=function(){return this},t.AsyncIterator=_,t.async=function(e,n,r,i){var o=new _(s(e,n,r,i));return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},v(g),g[a]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},lvtm:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},m0LI:function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},mGWK:function(t,e,n){"use strict";var r=n("XKFU"),i=n("aCFj"),o=n("RYi7"),a=n("ne8i"),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n("LyE8")(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},mc0g:function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},mdPL:function(t,e,n){(function(t){var r=n("WFqU"),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s}).call(this,n("YuTi")(t))},mura:function(t,e,n){var r=n("0/R4"),i=n("Z6vF").onFreeze;n("Xtr8")("preventExtensions",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},mwIZ:function(t,e,n){var r=n("ZWtO");t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},n8A4:function(t,e,n){"use strict";n.r(e);var r=function(){return new i};function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){a(o,t,this.t),a(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function a(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}n("CyHz");var s=Math.PI,u=s/2,l=s/4,c=2*s,h=180/s,f=s/180,d=Math.abs,p=Math.atan,m=Math.atan2,g=Math.cos,v=Math.ceil,_=Math.exp,y=(Math.floor,Math.log),b=Math.pow,x=Math.sin,w=Math.sign||function(t){return t>0?1:t<0?-1:0},T=Math.sqrt,A=Math.tan;function S(t){return t>1?0:t<-1?s:Math.acos(t)}function E(t){return t>1?u:t<-1?-u:Math.asin(t)}function k(t){return(t=x(t/2))*t}function M(){}function O(t,e){t&&z.hasOwnProperty(t.type)&&z[t.type](t,e)}var P={Feature:function(t,e){O(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)O(n[r].geometry,e)}},z={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){R(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)R(n[r],e,0)},Polygon:function(t,e){L(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)L(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)O(n[r],e)}};function R(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function L(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)R(t[n],e,1);e.polygonEnd()}var C,j,I,N,D,F=function(t,e){t&&P.hasOwnProperty(t.type)?P[t.type](t,e):O(t,e)},B=r(),U=r(),G={point:M,lineStart:M,lineEnd:M,polygonStart:function(){B.reset(),G.lineStart=V,G.lineEnd=Z},polygonEnd:function(){var t=+B;U.add(t<0?c+t:t),this.lineStart=this.lineEnd=this.point=M},sphere:function(){U.add(c)}};function V(){G.point=W}function Z(){q(C,j)}function W(t,e){G.point=q,C=t,j=e,I=t*=f,N=g(e=(e*=f)/2+l),D=x(e)}function q(t,e){var n=(t*=f)-I,r=n>=0?1:-1,i=r*n,o=g(e=(e*=f)/2+l),a=x(e),s=D*a,u=N*o+s*g(i),c=s*r*x(i);B.add(m(c,u)),I=t,N=o,D=a}var H=function(t){return U.reset(),F(t,G),2*U};n("Vd3H");function Y(t){return[m(t[1],t[0]),E(t[2])]}function X(t){var e=t[0],n=t[1],r=g(n);return[r*g(e),r*x(e),x(n)]}function $(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function K(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function J(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Q(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function tt(t){var e=T(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var et,nt,rt,it,ot,at,st,ut,lt,ct,ht=r(),ft={point:dt,lineStart:mt,lineEnd:gt,polygonStart:function(){ft.point=vt,ft.lineStart=_t,ft.lineEnd=yt,ht.reset(),G.polygonStart()},polygonEnd:function(){G.polygonEnd(),ft.point=dt,ft.lineStart=mt,ft.lineEnd=gt,B<0?(et=-(rt=180),nt=-(it=90)):ht>1e-6?it=90:ht<-1e-6&&(nt=-90),ct[0]=et,ct[1]=rt},sphere:function(){et=-(rt=180),nt=-(it=90)}};function dt(t,e){lt.push(ct=[et=t,rt=t]),e<nt&&(nt=e),e>it&&(it=e)}function pt(t,e){var n=X([t*f,e*f]);if(ut){var r=K(ut,n),i=K([r[1],-r[0],0],r);tt(i),i=Y(i);var o,a=t-ot,s=a>0?1:-1,u=i[0]*h*s,l=d(a)>180;l^(s*ot<u&&u<s*t)?(o=i[1]*h)>it&&(it=o):l^(s*ot<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*h)<nt&&(nt=o):(e<nt&&(nt=e),e>it&&(it=e)),l?t<ot?bt(et,t)>bt(et,rt)&&(rt=t):bt(t,rt)>bt(et,rt)&&(et=t):rt>=et?(t<et&&(et=t),t>rt&&(rt=t)):t>ot?bt(et,t)>bt(et,rt)&&(rt=t):bt(t,rt)>bt(et,rt)&&(et=t)}else lt.push(ct=[et=t,rt=t]);e<nt&&(nt=e),e>it&&(it=e),ut=n,ot=t}function mt(){ft.point=pt}function gt(){ct[0]=et,ct[1]=rt,ft.point=dt,ut=null}function vt(t,e){if(ut){var n=t-ot;ht.add(d(n)>180?n+(n>0?360:-360):n)}else at=t,st=e;G.point(t,e),pt(t,e)}function _t(){G.lineStart()}function yt(){vt(at,st),G.lineEnd(),d(ht)>1e-6&&(et=-(rt=180)),ct[0]=et,ct[1]=rt,ut=null}function bt(t,e){return(e-=t)<0?e+360:e}function xt(t,e){return t[0]-e[0]}function wt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Tt,At,St,Et,kt,Mt,Ot,Pt,zt,Rt,Lt,Ct,jt,It,Nt,Dt,Ft=function(t){var e,n,r,i,o,a,s;if(it=rt=-(et=nt=1/0),lt=[],F(t,ft),n=lt.length){for(lt.sort(xt),e=1,o=[r=lt[0]];e<n;++e)wt(r,(i=lt[e])[0])||wt(r,i[1])?(bt(r[0],i[1])>bt(r[0],r[1])&&(r[1]=i[1]),bt(i[0],r[1])>bt(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=bt(r[1],i[0]))>a&&(a=s,et=i[0],rt=r[1])}return lt=ct=null,et===1/0||nt===1/0?[[NaN,NaN],[NaN,NaN]]:[[et,nt],[rt,it]]},Bt={sphere:M,point:Ut,lineStart:Vt,lineEnd:qt,polygonStart:function(){Bt.lineStart=Ht,Bt.lineEnd=Yt},polygonEnd:function(){Bt.lineStart=Vt,Bt.lineEnd=qt}};function Ut(t,e){t*=f;var n=g(e*=f);Gt(n*g(t),n*x(t),x(e))}function Gt(t,e,n){++Tt,St+=(t-St)/Tt,Et+=(e-Et)/Tt,kt+=(n-kt)/Tt}function Vt(){Bt.point=Zt}function Zt(t,e){t*=f;var n=g(e*=f);It=n*g(t),Nt=n*x(t),Dt=x(e),Bt.point=Wt,Gt(It,Nt,Dt)}function Wt(t,e){t*=f;var n=g(e*=f),r=n*g(t),i=n*x(t),o=x(e),a=m(T((a=Nt*o-Dt*i)*a+(a=Dt*r-It*o)*a+(a=It*i-Nt*r)*a),It*r+Nt*i+Dt*o);At+=a,Mt+=a*(It+(It=r)),Ot+=a*(Nt+(Nt=i)),Pt+=a*(Dt+(Dt=o)),Gt(It,Nt,Dt)}function qt(){Bt.point=Ut}function Ht(){Bt.point=Xt}function Yt(){$t(Ct,jt),Bt.point=Ut}function Xt(t,e){Ct=t,jt=e,t*=f,e*=f,Bt.point=$t;var n=g(e);It=n*g(t),Nt=n*x(t),Dt=x(e),Gt(It,Nt,Dt)}function $t(t,e){t*=f;var n=g(e*=f),r=n*g(t),i=n*x(t),o=x(e),a=Nt*o-Dt*i,s=Dt*r-It*o,u=It*i-Nt*r,l=T(a*a+s*s+u*u),c=E(l),h=l&&-c/l;zt+=h*a,Rt+=h*s,Lt+=h*u,At+=c,Mt+=c*(It+(It=r)),Ot+=c*(Nt+(Nt=i)),Pt+=c*(Dt+(Dt=o)),Gt(It,Nt,Dt)}var Kt=function(t){Tt=At=St=Et=kt=Mt=Ot=Pt=zt=Rt=Lt=0,F(t,Bt);var e=zt,n=Rt,r=Lt,i=e*e+n*n+r*r;return i<1e-12&&(e=Mt,n=Ot,r=Pt,At<1e-6&&(e=St,n=Et,r=kt),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[m(n,e)*h,E(r/T(i))*h]},Jt=function(t){return function(){return t}},Qt=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function te(t,e){return[d(t)>s?t+Math.round(-t/c)*c:t,e]}function ee(t,e,n){return(t%=c)?e||n?Qt(re(t),ie(e,n)):re(t):e||n?ie(e,n):te}function ne(t){return function(e,n){return[(e+=t)>s?e-c:e<-s?e+c:e,n]}}function re(t){var e=ne(t);return e.invert=ne(-t),e}function ie(t,e){var n=g(t),r=x(t),i=g(e),o=x(e);function a(t,e){var a=g(e),s=g(t)*a,u=x(t)*a,l=x(e),c=l*n+s*r;return[m(u*i-c*o,s*n-l*r),E(c*i+u*o)]}return a.invert=function(t,e){var a=g(e),s=g(t)*a,u=x(t)*a,l=x(e),c=l*i-u*o;return[m(u*i+l*o,s*n+c*r),E(c*n-s*r)]},a}te.invert=te;var oe=function(t){function e(e){return(e=t(e[0]*f,e[1]*f))[0]*=h,e[1]*=h,e}return t=ee(t[0]*f,t[1]*f,t.length>2?t[2]*f:0),e.invert=function(e){return(e=t.invert(e[0]*f,e[1]*f))[0]*=h,e[1]*=h,e},e};function ae(t,e,n,r,i,o){if(n){var a=g(e),s=x(e),u=r*n;null==i?(i=e+r*c,o=e-u/2):(i=se(a,i),o=se(a,o),(r>0?i<o:i>o)&&(i+=r*c));for(var l,h=i;r>0?h>o:h<o;h-=u)l=Y([a,-s*g(h),-s*x(h)]),t.point(l[0],l[1])}}function se(t,e){(e=X(e))[0]-=t,tt(e);var n=S(-e[1]);return((-e[2]<0?-n:n)+c-1e-6)%c}var ue=function(){var t,e,n=Jt([0,0]),r=Jt(90),i=Jt(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=h,n[1]*=h}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*f,u=i.apply(this,arguments)*f;return t=[],e=ee(-a[0]*f,-a[1]*f,0).invert,ae(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:Jt([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:Jt(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:Jt(+t),a):i},a},le=(n("0l/t"),function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:M,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}),ce=(n("8+KV"),function(t,e){return d(t[0]-e[0])<1e-6&&d(t[1]-e[1])<1e-6});function he(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var fe=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(ce(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new he(r,t,null,!0)),u.push(n.o=new he(r,null,n,!1)),s.push(n=new he(a,t,null,!1)),u.push(n.o=new he(a,null,n,!0))}})),s.length){for(u.sort(e),de(s),de(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}};function de(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var pe=r();function me(t){return d(t[0])<=s?t[0]:w(t[0])*((d(t[0])+s)%c-s)}var ge=function(t,e){var n=me(e),r=e[1],i=x(r),o=[x(n),-g(n),0],a=0,h=0;pe.reset(),1===i?r=u+1e-6:-1===i&&(r=-u-1e-6);for(var f=0,d=t.length;f<d;++f)if(v=(p=t[f]).length)for(var p,v,_=p[v-1],y=me(_),b=_[1]/2+l,w=x(b),T=g(b),A=0;A<v;++A,y=k,w=O,T=P,_=S){var S=p[A],k=me(S),M=S[1]/2+l,O=x(M),P=g(M),z=k-y,R=z>=0?1:-1,L=R*z,C=L>s,j=w*O;if(pe.add(m(j*R*x(L),T*P+j*g(L))),a+=C?z+R*c:z,C^y>=n^k>=n){var I=K(X(_),X(S));tt(I);var N=K(o,I);tt(N);var D=(C^z>=0?-1:1)*E(N[2]);(r>D||r===D&&(I[0]||I[1]))&&(h+=C^z>=0?1:-1)}}return(a<-1e-6||a<1e-6&&pe<-1e-6)^1&h},ve=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var _e,ye;1===(_e=ve).length&&(ye=_e,_e=function(t,e){return ve(ye(t),e)});n("LK8F"),n("bWfx");var be=Array.prototype,xe=(be.slice,be.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var we=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var Te=function(t,e,n,r){return function(i){var o,a,s,u=e(i),l=le(),c=e(l),h=!1,f={point:d,lineStart:m,lineEnd:g,polygonStart:function(){f.point=v,f.lineStart=_,f.lineEnd=y,a=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=g,a=we(a);var t=ge(o,r);a.length?(h||(i.polygonStart(),h=!0),fe(a,Se,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function m(){f.point=p,u.lineStart()}function g(){f.point=d,u.lineEnd()}function v(t,e){s.push([t,e]),c.point(t,e)}function _(){c.lineStart(),s=[]}function y(){v(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),f=l.result(),d=f.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(Ae))}return f}};function Ae(t){return t.length>1}function Se(t,e){return((t=t.x)[0]<0?t[1]-u-1e-6:u-t[1])-((e=e.x)[0]<0?e[1]-u-1e-6:u-e[1])}var Ee=Te((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var l=o>0?s:-s,c=d(o-n);d(c-s)<1e-6?(t.point(n,r=(r+a)/2>0?u:-u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(l,r),t.point(o,r),e=0):i!==l&&c>=s&&(d(n-i)<1e-6&&(n-=1e-6*i),d(o-l)<1e-6&&(o-=1e-6*l),r=function(t,e,n,r){var i,o,a=x(t-n);return d(a)>1e-6?p((x(e)*(o=g(r))*x(n)-x(r)*(i=g(e))*x(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(l,r),e=0),t.point(n=o,r=a),i=l},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*u,r.point(-s,i),r.point(0,i),r.point(s,i),r.point(s,0),r.point(s,-i),r.point(0,-i),r.point(-s,-i),r.point(-s,0),r.point(-s,i);else if(d(t[0]-e[0])>1e-6){var o=t[0]<e[0]?s:-s;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-s,-u]);var ke=function(t){var e=g(t),n=6*f,r=e>0,i=d(e)>1e-6;function o(t,n){return g(t)*g(n)>e}function a(t,n,r){var i=[1,0,0],o=K(X(t),X(n)),a=$(o,o),u=o[0],l=a-u*u;if(!l)return!r&&t;var c=e*a/l,h=-e*u/l,f=K(i,o),p=Q(i,c);J(p,Q(o,h));var m=f,g=$(p,m),v=$(m,m),_=g*g-v*($(p,p)-1);if(!(_<0)){var y=T(_),b=Q(m,(-g-y)/v);if(J(b,p),b=Y(b),!r)return b;var x,w=t[0],A=n[0],S=t[1],E=n[1];A<w&&(x=w,w=A,A=x);var k=A-w,M=d(k-s)<1e-6;if(!M&&E<S&&(x=S,S=E,E=x),M||k<1e-6?M?S+E>0^b[1]<(d(b[0]-w)<1e-6?S:E):S<=b[1]&&b[1]<=E:k>s^(w<=b[0]&&b[0]<=A)){var O=Q(m,(-g+y)/v);return J(O,p),[b,Y(O)]}}}function u(e,n){var i=r?t:s-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Te(o,(function(t){var e,n,l,c,h;return{lineStart:function(){c=l=!1,h=1},point:function(f,d){var p,m=[f,d],g=o(f,d),v=r?g?0:u(f,d):g?u(f+(f<0?s:-s),d):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(p=a(e,m))||ce(e,p)||ce(m,p))&&(m[0]+=1e-6,m[1]+=1e-6,g=o(m[0],m[1])),g!==l)h=0,g?(t.lineStart(),p=a(m,e),t.point(p[0],p[1])):(p=a(e,m),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^g){var _;v&n||!(_=a(m,e,!0))||(h=0,r?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!g||e&&ce(e,m)||t.point(m[0],m[1]),e=m,l=g,n=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return h|(c&&l)<<1}}}),(function(e,r,i,o){ae(o,t,n,i,e,r)}),r?[0,-t]:[-s,t-s])};function Me(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return d(r[0]-t)<1e-6?i>0?0:3:d(r[0]-n)<1e-6?i>0?2:1:d(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,h,f,d,p,m,g,v,_,y=a,b=le(),x={point:w,lineStart:function(){x.point=T,l&&l.push(c=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(T(h,f),d&&g&&b.rejoin(),u.push(b.result()));x.point=w,g&&y.lineEnd()},polygonStart:function(){y=b,u=[],l=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,h=s[0],f=h[0],d=h[1];u<c;++u)o=f,a=d,h=s[u],f=h[0],d=h[1],a<=r?d>r&&(f-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(f-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=_&&e,i=(u=we(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&fe(u,s,e,o,a),a.polygonEnd());y=a,u=l=c=null}};function w(t,e){i(t,e)&&y.point(t,e)}function T(o,a){var s=i(o,a);if(l&&c.push([o,a]),v)h=o,f=a,d=s,v=!1,s&&(y.lineStart(),y.point(o,a));else if(s&&g)y.point(o,a);else{var u=[p=Math.max(-1e9,Math.min(1e9,p)),m=Math.max(-1e9,Math.min(1e9,m))],b=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}}(u,b,t,e,n,r)?s&&(y.lineStart(),y.point(o,a),_=!1):(g||(y.lineStart(),y.point(u[0],u[1])),y.point(b[0],b[1]),s||y.lineEnd(),_=!1)}p=o,m=a,g=s}return x}}var Oe,Pe,ze,Re=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Me(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},Le=r(),Ce={sphere:M,point:M,lineStart:function(){Ce.point=Ie,Ce.lineEnd=je},lineEnd:M,polygonStart:M,polygonEnd:M};function je(){Ce.point=Ce.lineEnd=M}function Ie(t,e){Oe=t*=f,Pe=x(e*=f),ze=g(e),Ce.point=Ne}function Ne(t,e){t*=f;var n=x(e*=f),r=g(e),i=d(t-Oe),o=g(i),a=r*x(i),s=ze*n-Pe*r*o,u=Pe*n+ze*r*o;Le.add(m(T(a*a+s*s),u)),Oe=t,Pe=n,ze=r}var De=function(t){return Le.reset(),F(t,Ce),+Le},Fe=[null,null],Be={type:"LineString",coordinates:Fe},Ue=function(t,e){return Fe[0]=t,Fe[1]=e,De(Be)},Ge={Feature:function(t,e){return Ze(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Ze(n[r].geometry,e))return!0;return!1}},Ve={Sphere:function(){return!0},Point:function(t,e){return We(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(We(n[r],e))return!0;return!1},LineString:function(t,e){return qe(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(qe(n[r],e))return!0;return!1},Polygon:function(t,e){return He(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(He(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Ze(n[r],e))return!0;return!1}};function Ze(t,e){return!(!t||!Ve.hasOwnProperty(t.type))&&Ve[t.type](t,e)}function We(t,e){return 0===Ue(t,e)}function qe(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Ue(t[o],e)))return!0;if(o>0&&(i=Ue(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<1e-12*i)return!0;n=r}return!1}function He(t,e){return!!ge(t.map(Ye),Xe(e))}function Ye(t){return(t=t.map(Xe)).pop(),t}function Xe(t){return[t[0]*f,t[1]*f]}var $e=function(t,e){return(t&&Ge.hasOwnProperty(t.type)?Ge[t.type]:Ze)(t,e)};function Ke(t,e,n){var r=xe(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Je(t,e,n){var r=xe(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Qe(){var t,e,n,r,i,o,a,s,u,l,c,h,f=10,p=f,m=90,g=360,_=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return xe(v(r/m)*m,n,m).map(c).concat(xe(v(s/g)*g,a,g).map(h)).concat(xe(v(e/f)*f,t,f).filter((function(t){return d(t%m)>1e-6})).map(u)).concat(xe(v(o/p)*p,i,p).filter((function(t){return d(t%g)>1e-6})).map(l))}return y.lines=function(){return b().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(h(a).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),y.precision(_)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),y.precision(_)):[[e,o],[t,i]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(m=+t[0],g=+t[1],y):[m,g]},y.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],y):[f,p]},y.precision=function(f){return arguments.length?(_=+f,u=Ke(o,i,90),l=Je(e,t,_),c=Ke(s,a,90),h=Je(r,n,_),y):_},y.extentMajor([[-180,1e-6-90],[180,90-1e-6]]).extentMinor([[-180,-80-1e-6],[180,80+1e-6]])}function tn(){return Qe()()}var en,nn,rn,on,an=function(t,e){var n=t[0]*f,r=t[1]*f,i=e[0]*f,o=e[1]*f,a=g(r),s=x(r),u=g(o),l=x(o),c=a*g(n),d=a*x(n),p=u*g(i),v=u*x(i),_=2*E(T(k(o-r)+a*u*k(i-n))),y=x(_),b=_?function(t){var e=x(t*=_)/y,n=x(_-t)/y,r=n*c+e*p,i=n*d+e*v,o=n*s+e*l;return[m(i,r)*h,m(o,T(r*r+i*i))*h]}:function(){return[n*h,r*h]};return b.distance=_,b},sn=function(t){return t},un=r(),ln=r(),cn={point:M,lineStart:M,lineEnd:M,polygonStart:function(){cn.lineStart=hn,cn.lineEnd=pn},polygonEnd:function(){cn.lineStart=cn.lineEnd=cn.point=M,un.add(d(ln)),ln.reset()},result:function(){var t=un/2;return un.reset(),t}};function hn(){cn.point=fn}function fn(t,e){cn.point=dn,en=rn=t,nn=on=e}function dn(t,e){ln.add(on*t-rn*e),rn=t,on=e}function pn(){dn(en,nn)}var mn=cn,gn=1/0,vn=gn,_n=-gn,yn=_n;var bn,xn,wn,Tn,An={point:function(t,e){t<gn&&(gn=t);t>_n&&(_n=t);e<vn&&(vn=e);e>yn&&(yn=e)},lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M,result:function(){var t=[[gn,vn],[_n,yn]];return _n=yn=-(vn=gn=1/0),t}},Sn=0,En=0,kn=0,Mn=0,On=0,Pn=0,zn=0,Rn=0,Ln=0,Cn={point:jn,lineStart:In,lineEnd:Fn,polygonStart:function(){Cn.lineStart=Bn,Cn.lineEnd=Un},polygonEnd:function(){Cn.point=jn,Cn.lineStart=In,Cn.lineEnd=Fn},result:function(){var t=Ln?[zn/Ln,Rn/Ln]:Pn?[Mn/Pn,On/Pn]:kn?[Sn/kn,En/kn]:[NaN,NaN];return Sn=En=kn=Mn=On=Pn=zn=Rn=Ln=0,t}};function jn(t,e){Sn+=t,En+=e,++kn}function In(){Cn.point=Nn}function Nn(t,e){Cn.point=Dn,jn(wn=t,Tn=e)}function Dn(t,e){var n=t-wn,r=e-Tn,i=T(n*n+r*r);Mn+=i*(wn+t)/2,On+=i*(Tn+e)/2,Pn+=i,jn(wn=t,Tn=e)}function Fn(){Cn.point=jn}function Bn(){Cn.point=Gn}function Un(){Vn(bn,xn)}function Gn(t,e){Cn.point=Vn,jn(bn=wn=t,xn=Tn=e)}function Vn(t,e){var n=t-wn,r=e-Tn,i=T(n*n+r*r);Mn+=i*(wn+t)/2,On+=i*(Tn+e)/2,Pn+=i,zn+=(i=Tn*t-wn*e)*(wn+t),Rn+=i*(Tn+e),Ln+=3*i,jn(wn=t,Tn=e)}var Zn=Cn;function Wn(t){this._context=t}Wn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,c)}},result:M};var qn,Hn,Yn,Xn,$n,Kn=r(),Jn={point:M,lineStart:function(){Jn.point=Qn},lineEnd:function(){qn&&tr(Hn,Yn),Jn.point=M},polygonStart:function(){qn=!0},polygonEnd:function(){qn=null},result:function(){var t=+Kn;return Kn.reset(),t}};function Qn(t,e){Jn.point=tr,Hn=Xn=t,Yn=$n=e}function tr(t,e){Xn-=t,$n-=e,Kn.add(T(Xn*Xn+$n*$n)),Xn=t,$n=e}var er=Jn;function nr(){this._string=[]}function rr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}nr.prototype={_radius:4.5,_circle:rr(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=rr(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var ir=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),F(t,n(r))),r.result()}return o.area=function(t){return F(t,n(mn)),mn.result()},o.measure=function(t){return F(t,n(er)),er.result()},o.bounds=function(t){return F(t,n(An)),An.result()},o.centroid=function(t){return F(t,n(Zn)),Zn.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,sn):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new nr):new Wn(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},or=function(t){return{stream:ar(t)}};function ar(t){return function(e){var n=new sr;for(var r in t)n[r]=t[r];return n.stream=e,n}}function sr(){}function ur(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),F(n,t.stream(An)),e(An.result()),null!=r&&t.clipExtent(r),t}function lr(t,e,n){return ur(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function cr(t,e,n){return lr(t,[[0,0],e],n)}function hr(t,e,n){return ur(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function fr(t,e,n){return ur(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}sr.prototype={constructor:sr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var dr=g(30*f),pr=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,h,f,p,g,v,_){var y=l-r,b=c-i,x=y*y+b*b;if(x>4*e&&v--){var w=a+f,A=s+p,S=u+g,k=T(w*w+A*A+S*S),M=E(S/=k),O=d(d(S)-1)<1e-6||d(o-h)<1e-6?(o+h)/2:m(A,w),P=t(O,M),z=P[0],R=P[1],L=z-r,C=R-i,j=b*L-y*C;(j*j/x>e||d((y*L+b*C)/x-.5)>.3||a*f+s*p+u*g<dr)&&(n(r,i,o,a,s,u,z,R,O,w/=k,A/=k,S,v,_),_.point(z,R),n(z,R,O,w,A,S,l,c,h,f,p,g,v,_))}}return function(e){var r,i,o,a,s,u,l,c,h,f,d,p,m={point:g,lineStart:v,lineEnd:y,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){c=NaN,m.point=_,e.lineStart()}function _(r,i){var o=X([r,i]),a=t(r,i);n(c,h,l,f,d,p,c=a[0],h=a[1],l=r,f=o[0],d=o[1],p=o[2],16,e),e.point(c,h)}function y(){m.point=g,e.lineEnd()}function b(){v(),m.point=x,m.lineEnd=w}function x(t,e){_(r=t,e),i=c,o=h,a=f,s=d,u=p,m.point=_}function w(){n(c,h,l,f,d,p,i,o,r,a,s,u,16,e),m.lineEnd=y,y()}return m}}(t,e):function(t){return ar({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var mr=ar({point:function(t,e){this.stream.point(t*f,e*f)}});function gr(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r}function vr(t,e,n,r){var i=g(r),o=x(r),a=i*t,s=o*t,u=i/t,l=o/t,c=(o*n-i*e)/t,h=(o*e+i*n)/t;function f(t,r){return[a*t-s*r+e,n-s*t-a*r]}return f.invert=function(t,e){return[u*t-l*e+c,h-l*t-u*e]},f}function _r(t){return yr((function(){return t}))()}function yr(t){var e,n,r,i,o,a,s,u,l,c,d=150,p=480,m=250,g=0,v=0,_=0,y=0,b=0,x=0,w=null,A=Ee,S=null,E=sn,k=.5;function M(t){return u(t[0]*f,t[1]*f)}function O(t){return(t=u.invert(t[0],t[1]))&&[t[0]*h,t[1]*h]}function P(){var t=vr(d,0,0,x).apply(null,e(g,v)),r=(x?vr:gr)(d,p-t[0],m-t[1],x);return n=ee(_,y,b),s=Qt(e,r),u=Qt(n,s),a=pr(s,k),z()}function z(){return l=c=null,M}return M.stream=function(t){return l&&c===t?l:l=mr(function(t){return ar({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(A(a(E(c=t)))))},M.preclip=function(t){return arguments.length?(A=t,w=void 0,z()):A},M.postclip=function(t){return arguments.length?(E=t,S=r=i=o=null,z()):E},M.clipAngle=function(t){return arguments.length?(A=+t?ke(w=t*f):(w=null,Ee),z()):w*h},M.clipExtent=function(t){return arguments.length?(E=null==t?(S=r=i=o=null,sn):Me(S=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),z()):null==S?null:[[S,r],[i,o]]},M.scale=function(t){return arguments.length?(d=+t,P()):d},M.translate=function(t){return arguments.length?(p=+t[0],m=+t[1],P()):[p,m]},M.center=function(t){return arguments.length?(g=t[0]%360*f,v=t[1]%360*f,P()):[g*h,v*h]},M.rotate=function(t){return arguments.length?(_=t[0]%360*f,y=t[1]%360*f,b=t.length>2?t[2]%360*f:0,P()):[_*h,y*h,b*h]},M.angle=function(t){return arguments.length?(x=t%360*f,P()):x*h},M.precision=function(t){return arguments.length?(a=pr(s,k=t*t),z()):T(k)},M.fitExtent=function(t,e){return lr(M,t,e)},M.fitSize=function(t,e){return cr(M,t,e)},M.fitWidth=function(t,e){return hr(M,t,e)},M.fitHeight=function(t,e){return fr(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&O,P()}}function br(t){var e=0,n=s/3,r=yr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*f,n=t[1]*f):[e*h,n*h]},i}function xr(t,e){var n=x(t),r=(n+x(e))/2;if(d(r)<1e-6)return function(t){var e=g(t);function n(t,n){return[t*e,x(n)/e]}return n.invert=function(t,n){return[t/e,E(n*e)]},n}(t);var i=1+n*(2*r-n),o=T(i)/r;function a(t,e){var n=T(i-2*r*x(e))/r;return[n*x(t*=r),o-n*g(t)]}return a.invert=function(t,e){var n=o-e;return[m(t,d(n))/r*w(n),E((i-(t*t+n*n)*r*r)/(2*r))]},a}var wr=function(){return br(xr).scale(155.424).center([0,33.6442])},Tr=function(){return wr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var Ar=function(){var t,e,n,r,i,o,a=Tr(),s=wr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=wr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(l),r=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+1e-6,c+.12*e+1e-6],[o-.214*e-1e-6,c+.234*e-1e-6]]).stream(l),i=u.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+1e-6,c+.166*e+1e-6],[o-.115*e-1e-6,c+.234*e-1e-6]]).stream(l),h()},c.fitExtent=function(t,e){return lr(c,t,e)},c.fitSize=function(t,e){return cr(c,t,e)},c.fitWidth=function(t,e){return hr(c,t,e)},c.fitHeight=function(t,e){return fr(c,t,e)},c.scale(1070)};function Sr(t){return function(e,n){var r=g(e),i=g(n),o=t(r*i);return[o*i*x(e),o*x(n)]}}function Er(t){return function(e,n){var r=T(e*e+n*n),i=t(r),o=x(i),a=g(i);return[m(e*o,r*a),E(r&&n*o/r)]}}var kr=Sr((function(t){return T(2/(1+t))}));kr.invert=Er((function(t){return 2*E(t/2)}));var Mr=function(){return _r(kr).scale(124.75).clipAngle(179.999)},Or=Sr((function(t){return(t=S(t))&&t/x(t)}));Or.invert=Er((function(t){return t}));var Pr=function(){return _r(Or).scale(79.4188).clipAngle(179.999)};function zr(t,e){return[t,y(A((u+e)/2))]}zr.invert=function(t,e){return[t,2*p(_(e))-u]};var Rr=function(){return Lr(zr).scale(961/c)};function Lr(t){var e,n,r,i=_r(t),o=i.center,a=i.scale,u=i.translate,l=i.clipExtent,c=null;function h(){var o=s*a(),u=i(oe(i.rotate()).invert([0,0]));return l(null==c?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===zr?[[Math.max(u[0]-o,c),e],[Math.min(u[0]+o,n),r]]:[[c,Math.max(u[1]-o,e)],[n,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),h()):a()},i.translate=function(t){return arguments.length?(u(t),h()):u()},i.center=function(t){return arguments.length?(o(t),h()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),h()):null==c?null:[[c,e],[n,r]]},h()}function Cr(t){return A((u+t)/2)}function jr(t,e){var n=g(t),r=t===e?x(t):y(n/g(e))/y(Cr(e)/Cr(t)),i=n*b(Cr(t),r)/r;if(!r)return zr;function o(t,e){i>0?e<1e-6-u&&(e=1e-6-u):e>u-1e-6&&(e=u-1e-6);var n=i/b(Cr(e),r);return[n*x(r*t),i-n*g(r*t)]}return o.invert=function(t,e){var n=i-e,o=w(r)*T(t*t+n*n);return[m(t,d(n))/r*w(n),2*p(b(i/o,1/r))-u]},o}var Ir=function(){return br(jr).scale(109.5).parallels([30,30])};function Nr(t,e){return[t,e]}Nr.invert=Nr;var Dr=function(){return _r(Nr).scale(152.63)};function Fr(t,e){var n=g(t),r=t===e?x(t):(n-g(e))/(e-t),i=n/r+t;if(d(r)<1e-6)return Nr;function o(t,e){var n=i-e,o=r*t;return[n*x(o),i-n*g(o)]}return o.invert=function(t,e){var n=i-e;return[m(t,d(n))/r*w(n),i-w(r)*T(t*t+n*n)]},o}var Br=function(){return br(Fr).scale(131.154).center([0,13.9389])},Ur=1.340264,Gr=-.081106,Vr=893e-6,Zr=.003796,Wr=T(3)/2;function qr(t,e){var n=E(Wr*x(e)),r=n*n,i=r*r*r;return[t*g(n)/(Wr*(Ur+3*Gr*r+i*(7*Vr+9*Zr*r))),n*(Ur+Gr*r+i*(Vr+Zr*r))]}qr.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Ur+Gr*i+o*(Vr+Zr*i))-e)/(Ur+3*Gr*i+o*(7*Vr+9*Zr*i)))*r)*i*i,!(d(n)<1e-12));++a);return[Wr*t*(Ur+3*Gr*i+o*(7*Vr+9*Zr*i))/g(r),E(x(r)/Wr)]};var Hr=function(){return _r(qr).scale(177.158)};function Yr(t,e){var n=g(e),r=g(t)*n;return[n*x(t)/r,x(e)/r]}Yr.invert=Er(p);var Xr=function(){return _r(Yr).scale(144.049).clipAngle(60)};function $r(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?sn:ar({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}var Kr=function(){var t,e,n,r,i,o,a=1,s=0,u=0,l=1,c=1,h=sn,f=null,d=sn;function p(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=h(d(i=t))},postclip:function(r){return arguments.length?(d=r,f=t=e=n=null,p()):d},clipExtent:function(r){return arguments.length?(d=null==r?(f=t=e=n=null,sn):Me(f=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),p()):null==f?null:[[f,t],[e,n]]},scale:function(t){return arguments.length?(h=$r((a=+t)*l,a*c,s,u),p()):a},translate:function(t){return arguments.length?(h=$r(a*l,a*c,s=+t[0],u=+t[1]),p()):[s,u]},reflectX:function(t){return arguments.length?(h=$r(a*(l=t?-1:1),a*c,s,u),p()):l<0},reflectY:function(t){return arguments.length?(h=$r(a*l,a*(c=t?-1:1),s,u),p()):c<0},fitExtent:function(t,e){return lr(o,t,e)},fitSize:function(t,e){return cr(o,t,e)},fitWidth:function(t,e){return hr(o,t,e)},fitHeight:function(t,e){return fr(o,t,e)}}};function Jr(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Jr.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(d(n)>1e-6&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var Qr=function(){return _r(Jr).scale(175.295)};function ti(t,e){return[g(e)*x(t),x(e)]}ti.invert=Er(E);var ei=function(){return _r(ti).scale(249.5).clipAngle(90+1e-6)};function ni(t,e){var n=g(e),r=1+g(t)*n;return[n*x(t)/r,x(e)/r]}ni.invert=Er((function(t){return 2*p(t)}));var ri=function(){return _r(ni).scale(250).clipAngle(142)};function ii(t,e){return[y(A((u+e)/2)),-t]}ii.invert=function(t,e){return[-e,2*p(_(t))-u]};var oi=function(){var t=Lr(ii),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};n.d(e,"geoArea",(function(){return H})),n.d(e,"geoBounds",(function(){return Ft})),n.d(e,"geoCentroid",(function(){return Kt})),n.d(e,"geoCircle",(function(){return ue})),n.d(e,"geoClipAntimeridian",(function(){return Ee})),n.d(e,"geoClipCircle",(function(){return ke})),n.d(e,"geoClipExtent",(function(){return Re})),n.d(e,"geoClipRectangle",(function(){return Me})),n.d(e,"geoContains",(function(){return $e})),n.d(e,"geoDistance",(function(){return Ue})),n.d(e,"geoGraticule",(function(){return Qe})),n.d(e,"geoGraticule10",(function(){return tn})),n.d(e,"geoInterpolate",(function(){return an})),n.d(e,"geoLength",(function(){return De})),n.d(e,"geoPath",(function(){return ir})),n.d(e,"geoAlbers",(function(){return Tr})),n.d(e,"geoAlbersUsa",(function(){return Ar})),n.d(e,"geoAzimuthalEqualArea",(function(){return Mr})),n.d(e,"geoAzimuthalEqualAreaRaw",(function(){return kr})),n.d(e,"geoAzimuthalEquidistant",(function(){return Pr})),n.d(e,"geoAzimuthalEquidistantRaw",(function(){return Or})),n.d(e,"geoConicConformal",(function(){return Ir})),n.d(e,"geoConicConformalRaw",(function(){return jr})),n.d(e,"geoConicEqualArea",(function(){return wr})),n.d(e,"geoConicEqualAreaRaw",(function(){return xr})),n.d(e,"geoConicEquidistant",(function(){return Br})),n.d(e,"geoConicEquidistantRaw",(function(){return Fr})),n.d(e,"geoEqualEarth",(function(){return Hr})),n.d(e,"geoEqualEarthRaw",(function(){return qr})),n.d(e,"geoEquirectangular",(function(){return Dr})),n.d(e,"geoEquirectangularRaw",(function(){return Nr})),n.d(e,"geoGnomonic",(function(){return Xr})),n.d(e,"geoGnomonicRaw",(function(){return Yr})),n.d(e,"geoIdentity",(function(){return Kr})),n.d(e,"geoProjection",(function(){return _r})),n.d(e,"geoProjectionMutator",(function(){return yr})),n.d(e,"geoMercator",(function(){return Rr})),n.d(e,"geoMercatorRaw",(function(){return zr})),n.d(e,"geoNaturalEarth1",(function(){return Qr})),n.d(e,"geoNaturalEarth1Raw",(function(){return Jr})),n.d(e,"geoOrthographic",(function(){return ei})),n.d(e,"geoOrthographicRaw",(function(){return ti})),n.d(e,"geoStereographic",(function(){return ri})),n.d(e,"geoStereographicRaw",(function(){return ni})),n.d(e,"geoTransverseMercator",(function(){return oi})),n.d(e,"geoTransverseMercatorRaw",(function(){return ii})),n.d(e,"geoRotation",(function(){return oe})),n.d(e,"geoStream",(function(){return F})),n.d(e,"geoTransform",(function(){return or}))},nCnK:function(t,e,n){n("7DDg")("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},nmnc:function(t,e,n){var r=n("Kz5y").Symbol;t.exports=r},nwrK:function(t,e,n){"use strict";n("HAE/");var r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.hiddenGuard=void 0;var i=r(n("q1tI")),o=(r(n("17x9")),{width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"});e.hiddenGuard=o;var a=function(t){var e=t.children;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:o}),e,e&&i.default.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:o}))};a.propTypes={},a.defaultProps={children:null};var s=a;e.default=s},nzyx:function(t,e,n){var r=n("XKFU"),i=n("LVwc");r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},o0o1:function(t,e,n){t.exports=n("ls82")},oMRN:function(t,e){t.exports=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}},oTvd:function(t,e,n){"use strict";n("HAE/");var r=n("284h"),i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("pVnL")),a=i(n("q1tI")),s=(i(n("17x9")),r(n("xCns"))),u=n("6lFR"),l=function(t){var e=t.children,n=t.className;return a.default.createElement("div",(0,o.default)({},(0,u.inlineProp)(s.FOCUS_ALLOW,!0),{className:n}),e)};l.propTypes={},l.defaultProps={className:void 0};var c=l;e.default=c},onlc:function(t,e,n){n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V");var r=n("t1N5");function i(t){var e=function(){for(var t={},e=Object.keys(r),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),a=o.length,s=0;s<a;s++){var u=o[s],l=e[u];-1===l.distance&&(l.distance=e[i].distance+1,l.parent=i,n.unshift(u))}return e}function o(t,e){return function(n){return e(t(n))}}function a(t,e){for(var n=[e[t].parent,t],i=r[e[t].parent][t],a=e[t].parent;e[a].parent;)n.unshift(e[a].parent),i=o(r[e[a].parent][a],i),a=e[a].parent;return i.conversion=n,i}t.exports=function(t){for(var e=i(t),n={},r=Object.keys(e),o=r.length,s=0;s<o;s++){var u=r[s];null!==e[u].parent&&(n[u]=a(u,e))}return n}},or5M:function(t,e,n){var r=n("1hJj"),i=n("QoRX"),o=n("xYSL");t.exports=function(t,e,n,a,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(t);if(f&&u.get(e))return f==e;var d=-1,p=!0,m=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++d<c;){var g=t[d],v=e[d];if(a)var _=l?a(v,g,d,e,t,u):a(g,v,d,t,e,u);if(void 0!==_){if(_)continue;p=!1;break}if(m){if(!i(e,(function(t,e){if(!o(m,e)&&(g===t||s(g,t,n,a,u)))return m.push(e)}))){p=!1;break}}else if(g!==v&&!s(g,v,n,a,u)){p=!1;break}}return u.delete(t),u.delete(e),p}},ozPf:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0MCA0OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+TG9nby9MaWdodDwvdGl0bGU+PGcgaWQ9IkxvZ28vTGlnaHQiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgaWQ9IkxvZ28vRGFyayIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCA1KSI+PGcgaWQ9IkxvZ28vRGFyay1Db3B5Ij48cGF0aCBkPSJNMzEuNTQyIDcuMDUzYy0uNzcyLS45LS43OTUtMS45NCAwLTIuNzcyLjc3MS0uNzg2IDEuNzctLjgwOCAyLjcyNiAwbC0yLjcyNiAyLjc3MnpNMTguOTggMTkuODM1Yy0uNzczLS45MDEtLjc5Ni0xLjk2MyAwLTIuNzc0Ljc3Mi0uNzg1IDEuNzcyLS44MDggMi43NDggMGwtMi43NDggMi43NzR6bTEwLjA0LS4yM2wyLjgxNy0yLjg2Ni0zLjA0Mi0zLjA5OGMtMi40NzYtMi41Mi0xLjc1LTMuODU5LTEuMTgtNC40MzcuMzYyLS4zNy43MjYtLjY0Ny45NzctLjc4NmE3LjE0IDcuMTQgMCAwIDAgMS4zNjIgMS44NzJjMi45NSAzLjAyOCA2LjE3OCAyLjYxIDguNjU0LjA3MSAxLjQ3Ny0xLjUwNCAyLjE4Mi0yLjg5IDIuMzYyLTMuNTg0bC0yLjQzLTEuMzYzYy0uMjk0LjY0Ni0uOTc3IDEuNzU3LTEuNzQ3IDIuNTQyLTEuMzQxIDEuMzg2LTIuNjE1IDEuMzg2LTMuNDc2LjY3bDUuMDY4LTUuMTMxLS42MzYtLjY0N2MtMi45OC0zLjA1LTUuNzQ2LTMuMjEzLTguMjQ3LS42Ny0xLjY1NyAxLjY4Ni0xLjg4NSAzLjc2Ny0xLjE1OSA1LjY2MkwyNi40OCA1LjU5OWMtLjE4MS4wNy0uNTIyLjM0Ni0uODYzLjY5My0uOTc3IDEuMDE3LTEuMjA0IDIuNTg4LS45NTMgMy42MjhsLTEuMjUyLTEuMDg1LTIuNDc0IDIuNTE5IDMuNDA1IDMuNDY3Yy0yLjcwMi0yLjI2NS01LjEzMy0yLjE1LTcuMzguMTM4LTIuMjcyIDIuMzEtMi4xMzYgNS4xMzItLjI1IDcuNDg3bC0uMzE5LS4zMjJjLTIuMDIxLTIuMDU4LTMuOTc0LTIuNDk5LTUuOTA2LS41MS0xLjEzNiAxLjEzMy0xLjMxNyAyLjI0Mi0xLjIwNCAzLjIzN2wtNC43Ny00LjgzMi0yLjc3NCAyLjgyIDkuMjIxIDkuNDA4aDUuNjM1bC0zLjg4NC0zLjk1M2MtMS4zNjMtMS4zNjQtMS43NzItMi4zMTEtLjkzMi0zLjE2Ni42MTMtLjY0NyAxLjMxOC0uNjI1IDIuMTguMjUzbDQuNjggNC43ODUgMi44MTctMi44NjUtMy40OTgtMy41NTljMi43NyAyLjMzNSA1Ljc5MiAxLjc1OCA4LjA4Ny0uNiAxLjIwNS0xLjIwMSAxLjg2Mi0yLjMxMiAyLjE4Mi0zLjA3NEwyNS43NSAxOC42NmMtLjM2My42NDYtLjkwOCAxLjQ1NS0xLjQ5OCAyLjA4LTEuMzY0IDEuMzg1LTIuNjM1IDEuMzg1LTMuNDk3LjY2OGw1LjAyLTUuMTA3IDMuMjQ2IDMuMzA0eiIgaWQ9IkZpbGwtNSIgZmlsbD0iIzNmNDU0ZCIvPjxwYXRoIGlkPSJGaWxsLTciIGZpbGw9IiMwMEFGQUEiIGQ9Ik0wIDMyLjE5NGw1LjY1NCA1Ljc1NCA1LjY1NS01Ljc1NHoiLz48L2c+PC9nPjwvZz48L3N2Zz4K"},pI4o:function(t,e,n){"use strict";n("HAE/"),Object.defineProperty(e,"__esModule",{value:!0}),e.mediumSidecar=e.mediumEffect=e.mediumBlur=e.mediumFocus=void 0;var r=n("7RsB"),i=(0,r.createMedium)({},(function(t){return{target:t.target,currentTarget:t.currentTarget}}));e.mediumFocus=i;var o=(0,r.createMedium)();e.mediumBlur=o;var a=(0,r.createMedium)();e.mediumEffect=a;var s=(0,r.createSidecarMedium)({async:!0});e.mediumSidecar=s},pSRY:function(t,e,n){var r=n("QkVE");t.exports=function(t){return r(this,t).has(t)}},"pp/T":function(t,e,n){var r=n("XKFU");r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},qZTm:function(t,e,n){var r=n("fR/l"),i=n("MvSz"),o=n("7GkX");t.exports=function(t){return r(t,o,i)}},r1bV:function(t,e,n){n("7DDg")("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},rEGp:function(t,e,n){n("8+KV"),t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},rePB:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},sEf8:function(t,e){t.exports=function(t){return function(e){return t(e)}}},sFw1:function(t,e,n){n("7DDg")("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},seXi:function(t,e,n){var r=n("qZTm"),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in e:i.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var p=!0;s.set(t,e),s.set(e,t);for(var m=u;++h<c;){var g=t[f=l[h]],v=e[f];if(o)var _=u?o(v,g,f,e,t,s):o(g,v,f,t,e,s);if(!(void 0===_?g===v||a(g,v,n,o,s):_)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return s.delete(t),s.delete(e),p}},shjB:function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},t1N5:function(t,e,n){n("KKXr"),n("bWfx"),n("SRfc"),n("a1Th"),n("h7Nl"),n("Btvt"),n("HAE/");var r=n("i2N1"),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var u=a[s].channels,l=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:u}),Object.defineProperty(a[s],"labels",{value:l})}a.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return s===a?e=0:r===s?e=(i-o)/u:i===s?e=2+(o-r)/u:o===s&&(e=4+(r-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(a+s)/2,[e,100*(s===a?0:n<=.5?u/(s+a):u/(2-s-a)),100*n]},a.rgb.hsv=function(t){var e,n,r,i,o,a=t[0]/255,s=t[1]/255,u=t[2]/255,l=Math.max(a,s,u),c=l-Math.min(a,s,u),h=function(t){return(l-t)/6/c+.5};return 0===c?i=o=0:(o=c/l,e=h(a),n=h(s),r=h(u),a===l?i=r-n:s===l?i=1/3+e-r:u===l&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},a.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[a.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},a.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var e=i[t];if(e)return e;var n,o,a,s=1/0;for(var u in r)if(r.hasOwnProperty(u)){var l=r[u],c=(o=t,a=l,Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)+Math.pow(o[2]-a[2],2));c<s&&(s=c,n=u)}return n},a.keyword.rgb=function(t){return r[t]},a.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.hsl.rgb=function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return[o=255*u,o,o];e=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0&&r++,r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[l]=255*o;return i},a.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[e,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},a.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(t){var e,n,r,i=t[0],o=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(e=(2-o)*s)<=1?e:2-e)||0),100*(r/=2)]},a.hwb.rgb=function(t){var e,n,r,i,o,a,s,u=t[0]/360,l=t[1]/100,c=t[2]/100,h=l+c;switch(h>1&&(l/=h,c/=h),r=6*u-(e=Math.floor(6*u)),0!=(1&e)&&(r=1-r),i=l+r*((n=1-c)-l),e){default:case 6:case 0:o=n,a=i,s=l;break;case 1:o=i,a=n,s=l;break;case 2:o=l,a=n,s=i;break;case 3:o=l,a=i,s=n;break;case 4:o=i,a=l,s=n;break;case 5:o=n,a=l,s=i}return[255*o,255*a,255*s]},a.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},a.xyz.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,e=(e=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var o=Math.pow(n,3),a=Math.pow(e,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},a.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},a.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],i=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===i&&(o+=60),o},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return e=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},a.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},a.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],a=e%1*6,s=a%1,u=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},a.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},a.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},a.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},a.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},tMB7:function(t,e,n){var r=n("y1pI");t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},tUSV:function(t,e,n){"use strict";n("VRzm"),n("Btvt"),n("HAE/");var r=n("284h"),i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("pVnL")),a=i(n("lSNA")),s=i(n("MVZn")),u=i(n("cDf5")),l=i(n("J4zp")),c=r(n("q1tI")),h=(n("17x9"),r(n("xCns"))),f=n("6q8l"),d=n("nwrK"),p=n("pI4o"),m=[],g=c.default.forwardRef((function(t,e){var n,r=(0,c.useState)(),i=(0,l.default)(r,2),g=i[0],v=i[1],_=(0,c.useRef)(),y=(0,c.useRef)(!1),b=(0,c.useRef)(null),x=t.children,w=t.disabled,T=t.noFocusGuards,A=t.persistentFocus,S=t.autoFocus,E=(t.allowTextSelection,t.group),k=t.className,M=t.whiteList,O=t.shards,P=void 0===O?m:O,z=t.as,R=void 0===z?"div":z,L=t.lockProps,C=void 0===L?{}:L,j=t.sideCar,I=t.returnFocus,N=t.onActivation,D=t.onDeactivation,F=(0,c.useState)({}),B=(0,l.default)(F,1)[0],U=(0,c.useCallback)((function(){b.current=b.current||document&&document.activeElement,_.current&&N&&N(_.current),y.current=!0}),[N]),G=(0,c.useCallback)((function(){y.current=!1,D&&D(_.current)}),[D]),V=(0,c.useCallback)((function(t){var e=b.current;if(Boolean(I)&&e&&e.focus){var n="object"===(0,u.default)(I)?I:void 0;b.current=null,t?Promise.resolve().then((function(){return e.focus(n)})):e.focus(n)}}),[I]),Z=(0,c.useCallback)((function(t){y.current&&p.mediumFocus.useMedium(t)}),[]),W=p.mediumBlur.useMedium,q=(0,c.useCallback)((function(t){_.current!==t&&(_.current=t,v(t))}),[]);var H=(0,s.default)((n={},(0,a.default)(n,h.FOCUS_DISABLED,w&&"disabled"),(0,a.default)(n,h.FOCUS_GROUP,E),n),C),Y=!0!==T,X=Y&&"tail"!==T,$=(0,f.useMergeRefs)([e,q]);return c.default.createElement(c.default.Fragment,null,Y&&[c.default.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:w?-1:0,style:d.hiddenGuard}),c.default.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:w?-1:1,style:d.hiddenGuard})],!w&&c.default.createElement(j,{id:B,sideCar:p.mediumSidecar,observed:g,disabled:w,persistentFocus:A,autoFocus:S,whiteList:M,shards:P,onActivation:U,onDeactivation:G,returnFocus:V}),c.default.createElement(R,(0,o.default)({ref:$},H,{className:k,onBlur:W,onFocus:Z}),x),X&&c.default.createElement("div",{"data-focus-guard":!0,tabIndex:w?-1:0,style:d.hiddenGuard}))}));g.propTypes={},g.defaultProps={children:void 0,disabled:!1,returnFocus:!1,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var v=g;e.default=v},tadb:function(t,e,n){var r=n("Cwc5")(n("Kz5y"),"DataView");t.exports=r},tbcB:function(t,e,n){"use strict";n.r(e);n("V+eJ"),n("bWfx"),n("f3/d");var r=n("dI71"),i=n("rePB"),o=n("q1tI"),a=n.n(o);e.default=function(t,e){return function(n){var s,u=[];function l(){s=t(u.map((function(t){return t.props}))),e(s)}var c=function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t),e.peek=function(){return s};var i=e.prototype;return i.componentDidMount=function(){u.push(this),l()},i.componentDidUpdate=function(){l()},i.componentWillUnmount=function(){var t=u.indexOf(this);u.splice(t,1),l()},i.render=function(){return a.a.createElement(n,this.props)},e}(o.PureComponent);return Object(i.a)(c,"displayName","SideEffect("+function(t){return t.displayName||t.name||"Component"}(n)+")"),c}}},tuSo:function(t,e,n){n("7DDg")("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},u8Dt:function(t,e,n){var r=n("YESw"),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},uPr3:function(t,e,n){n("f3/d"),n("LK8F"),t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},upKx:function(t,e,n){"use strict";var r=n("S/j/"),i=n("d/Gc"),o=n("ne8i");t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?a:i(l,a))-u,a-s),h=1;for(u<s&&s<u+c&&(h=-1,u+=c-1,s+=c-1);c-- >0;)u in n?n[s]=n[u]:delete n[s],s+=h,u+=h;return n}},"ut/Y":function(t,e,n){var r=n("ZCpW"),i=n("GDhZ"),o=n("zZ0H"),a=n("Z0cm"),s=n("+c4W");t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},uxXc:function(t,e,n){n("HAE/"),n("8+KV"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V");var r=n("t1N5"),i=n("onlc"),o={};Object.keys(r).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});var e=i(t);Object.keys(e).forEach((function(n){var r=e[n];o[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),o[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),t.exports=o},"wF/u":function(t,e,n){var r=n("e5cp"),i=n("ExA7");t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},wJg7:function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},wTVA:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},wkBT:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},"x0D+":function(t,e,n){var r,i,o;n("0l/t"),n("8+KV"),n("dZ+Y"),n("HAE/"),n("XfO3"),n("HEwt"),n("LK8F"),i=[e],void 0===(o="function"==typeof(r=function(t){"use strict";function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(t,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var r={get passive(){n=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}var i="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),o=[],a=!1,s=-1,u=void 0,l=void 0,c=function(t){return o.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},h=function(t){var e=t||window.event;return!!c(e.target)||1<e.touches.length||(e.preventDefault&&e.preventDefault(),!1)},f=function(){setTimeout((function(){void 0!==l&&(document.body.style.paddingRight=l,l=void 0),void 0!==u&&(document.body.style.overflow=u,u=void 0)}))};t.disableBodyScroll=function(t,r){if(i){if(!t)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(t&&!o.some((function(e){return e.targetElement===t}))){var f={targetElement:t,options:r||{}};o=[].concat(e(o),[f]),t.ontouchstart=function(t){1===t.targetTouches.length&&(s=t.targetTouches[0].clientY)},t.ontouchmove=function(e){var n,r,i,o;1===e.targetTouches.length&&(r=t,o=(n=e).targetTouches[0].clientY-s,!c(n.target)&&(r&&0===r.scrollTop&&0<o?h(n):(i=r)&&i.scrollHeight-i.scrollTop<=i.clientHeight&&o<0?h(n):n.stopPropagation()))},a||(document.addEventListener("touchmove",h,n?{passive:!1}:void 0),a=!0)}}else{p=r,setTimeout((function(){if(void 0===l){var t=!!p&&!0===p.reserveScrollBarGap,e=window.innerWidth-document.documentElement.clientWidth;t&&0<e&&(l=document.body.style.paddingRight,document.body.style.paddingRight=e+"px")}void 0===u&&(u=document.body.style.overflow,document.body.style.overflow="hidden")}));var d={targetElement:t,options:r||{}};o=[].concat(e(o),[d])}var p},t.clearAllBodyScrollLocks=function(){i?(o.forEach((function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null})),a&&(document.removeEventListener("touchmove",h,n?{passive:!1}:void 0),a=!1),o=[],s=-1):(f(),o=[])},t.enableBodyScroll=function(t){if(i){if(!t)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");t.ontouchstart=null,t.ontouchmove=null,o=o.filter((function(e){return e.targetElement!==t})),a&&0===o.length&&(document.removeEventListener("touchmove",h,n?{passive:!1}:void 0),a=!1)}else(o=o.filter((function(e){return e.targetElement!==t}))).length||f()}})?r.apply(e,i):r)||(t.exports=o)},x8ZO:function(t,e,n){var r=n("XKFU"),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},xCns:function(t,e,n){"use strict";n.r(e),n.d(e,"FOCUS_GROUP",(function(){return r})),n.d(e,"FOCUS_DISABLED",(function(){return i})),n.d(e,"FOCUS_ALLOW",(function(){return o})),n.d(e,"FOCUS_AUTO",(function(){return a}));var r="data-focus-lock",i="data-focus-lock-disabled",o="data-no-focus-lock",a="data-autofocus-inside"},"xF/b":function(t,e,n){"use strict";var r=n("EWmC"),i=n("0/R4"),o=n("ne8i"),a=n("m0Pp"),s=n("K0xU")("isConcatSpreadable");t.exports=function t(e,n,u,l,c,h,f,d){for(var p,m,g=c,v=0,_=!!f&&a(f,d,3);v<l;){if(v in u){if(p=_?_(u[v],v,n):u[v],m=!1,i(p)&&(m=void 0!==(m=p[s])?!!m:r(p)),m&&h>0)g=t(e,n,p,o(p.length),g,h-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=p}g++}v++}return g}},xYSL:function(t,e){t.exports=function(t,e){return t.has(e)}},xfY5:function(t,e,n){"use strict";var r=n("dyZX"),i=n("aagx"),o=n("LZWt"),a=n("Xbzi"),s=n("apmT"),u=n("eeVq"),l=n("kJMx").f,c=n("EemH").f,h=n("hswa").f,f=n("qncB").trim,d=r.Number,p=d,m=d.prototype,g="Number"==o(n("Kuth")(m)),v="trim"in String.prototype,_=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=v?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),l=0,c=u.length;l<c;l++)if((a=u.charCodeAt(l))<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?u((function(){m.valueOf.call(n)})):"Number"!=o(n))?a(new p(_(e)),n,d):_(e)};for(var y,b=n("nh4g")?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;b.length>x;x++)i(p,y=b[x])&&!i(d,y)&&h(d,y,c(p,y));d.prototype=m,m.constructor=d,n("KroJ")(r,"Number",d)}},xpiv:function(t,e,n){var r=n("XKFU");r(r.S,"Reflect",{ownKeys:n("mQtv")})},y1pI:function(t,e,n){var r=n("ljhN");t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},yGk4:function(t,e,n){var r=n("Cwc5")(n("Kz5y"),"Set");t.exports=r},"ylu/":function(t,e,n){"use strict";n.r(e);var r={attach:function(){},detach:function(){}},i=(n("bWfx"),n("rGqo"),n("yt8O"),n("Btvt"),n("XfO3"),n("9AAn"),n("DNiP"),n("0l/t"),n("8+KV"),n("V+eJ"),n("Vd3H"),n("LK8F"),function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}),o=function(t){return Array.isArray(t)?t:[t]},a=function(t,e){var n=t.tabIndex-e.tabIndex,r=t.index-e.index;if(n){if(!t.tabIndex)return 1;if(!e.tabIndex)return-1}return n||r},s=function(t,e,n){return i(t).map((function(t,e){return{node:t,index:e,tabIndex:n&&-1===t.tabIndex?(t.dataset||{}).focusGuard?0:-1:t.tabIndex}})).filter((function(t){return!e||t.tabIndex>=0})).sort(a)},u=["button:enabled:not([readonly])","select:enabled:not([readonly])","textarea:enabled:not([readonly])","input:enabled:not([readonly])","a[href]","area[href]","iframe","object","embed","[tabindex]","[contenteditable]","[autofocus]"],l=n("xCns"),c=u.join(","),h=c+", [data-focus-guard]",f=function(t,e){return t.reduce((function(t,n){return t.concat(i(n.querySelectorAll(e?h:c)),n.parentNode?i(n.parentNode.querySelectorAll(u.join(","))).filter((function(t){return t===n})):[])}),[])},d=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.push(e),e.parentNode&&t(e.parentNode,n),n},p=function(t,e){for(var n=d(t),r=d(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},m=function(t){return i(t).filter((function(t){return function t(e){return!e||e===document||e.nodeType===Node.DOCUMENT_NODE||!((n=window.getComputedStyle(e,null))&&n.getPropertyValue&&("none"===n.getPropertyValue("display")||"hidden"===n.getPropertyValue("visibility")))&&t(e.parentNode);var n}(t)})).filter((function(t){return function(t){return!(("INPUT"===t.tagName||"BUTTON"===t.tagName)&&("hidden"===t.type||t.disabled))}(t)}))},g=function(t,e){return s(m(f(t,e)),!0,e)},v=function(t){return m((e=t.querySelectorAll("["+l.FOCUS_AUTO+"]"),i(e).map((function(t){return f([t])})).reduce((function(t,e){return t.concat(e)}),[])));var e},_=(n("f3/d"),function(t){return"INPUT"===t.tagName&&"radio"===t.type}),y=function(t){return t[0]&&t.length>1&&_(t[0])&&t[0].name?function(t,e){return e.filter(_).filter((function(e){return e.name===t.name})).filter((function(t){return t.checked}))[0]||t}(t[0],t):t[0]},b=(n("rE2o"),n("ioFf"),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),x=function(t){return o(t).filter(Boolean).reduce((function(t,e){var n=e.getAttribute(l.FOCUS_GROUP);return t.push.apply(t,n?function t(e){for(var n=e.length,r=0;r<n;r+=1)for(var i=function(n){if(r!==n&&e[r].contains(e[n]))return{v:t(e.filter((function(t){return t!==e[n]})))}},o=0;o<n;o+=1){var a=i(o);if("object"===(void 0===a?"undefined":b(a)))return a.v}return e}(i(function t(e){return e.parentNode?t(e.parentNode):e}(e).querySelectorAll("["+l.FOCUS_GROUP+'="'+n+'"]:not(['+l.FOCUS_DISABLED+'="disabled"])'))):[e]),t}),[])},w=function(t){return t.dataset&&t.dataset.focusGuard},T=function(t){return!w(t)},A=function(t,e,n){var r=o(t),i=o(e),a=r[0],s=null;return i.filter(Boolean).forEach((function(t){s=p(s||t,t)||s,n.filter(Boolean).forEach((function(t){var e=p(a,t);e&&(s=!s||e.contains(s)?e:p(e,s))}))})),s},S=function(t){var e=x(t).filter(T),n=A(t,t,e),r=g([n],!0),i=g(e).filter((function(t){var e=t.node;return T(e)})).map((function(t){return t.node}));return r.map((function(t){var e=t.node;return{node:e,index:t.index,lockItem:i.indexOf(e)>=0,guard:w(e)}}))},E=function(t,e){var n=document&&document.activeElement,r=x(t).filter(T),i=A(n||t,t,r),o=g(r).filter((function(t){var e=t.node;return T(e)}));if(o[0]||(o=(a=r,s(m(f(a)),!1)).filter((function(t){var e=t.node;return T(e)})))[0]){var a,u,l,c,h,d=g([i]).map((function(t){return t.node})),p=(u=d,l=o,c=new Map,l.forEach((function(t){return c.set(t.node,t)})),u.map((function(t){return c.get(t)})).filter(Boolean)),_=p.map((function(t){return t.node})),b=function(t,e,n,r,i){var o=t.length,a=t[0],s=t[o-1];if(!(t.indexOf(n)>=0)){var u=e.indexOf(n),l=e.indexOf(r||u),c=t.indexOf(r),h=u-l,f=e.indexOf(a),d=e.indexOf(s);return-1===u||-1===c?t.indexOf(i.length?y(i):y(t)):!h&&c>=0?c:u<=f&&w(n)&&Math.abs(h)>1?0:h&&Math.abs(h)>1?c:u<=f?o-1:u>d?0:h?Math.abs(h)>1?c:(o+c+h)%o:void 0}}(_,d,n,e,_.filter((h=function(t){return t.reduce((function(t,e){return t.concat(v(e))}),[])}(r),function(t){return!!t.autofocus||t.dataset&&!!t.dataset.autofocus||h.indexOf(t)>=0})));return void 0===b?b:p[b]}},k=function(t){return t===document.activeElement},M=function(t){var e=document&&document.activeElement;return!(!e||e.dataset&&e.dataset.focusGuard)&&x(t).reduce((function(t,n){return t||n.contains(e)||function(t){return e=i(t.querySelectorAll("iframe")),n=k,!!e.filter((function(t){return t===n}))[0];var e,n}(n)}),!1)},O=(n("dZ+Y"),function(){return document&&i(document.querySelectorAll("["+l.FOCUS_ALLOW+"]")).some((function(t){return t.contains(document.activeElement)}))}),P=0,z=!1;n.d(e,"tabHook",(function(){return r})),n.d(e,"focusInside",(function(){return M})),n.d(e,"focusIsHidden",(function(){return O})),n.d(e,"focusMerge",(function(){return E})),n.d(e,"getFocusabledIn",(function(){return S})),n.d(e,"constants",(function(){return l})),n.d(e,"getAllAffectedNodes",(function(){return x}));e.default=function(t,e){var n,r=E(t,e);if(!z&&r){if(P>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),z=!0,void setTimeout((function(){z=!1}),1);P++,(n=r.node).focus(),n.contentWindow&&n.contentWindow.focus(),P--}}},zZ0H:function(t,e){t.exports=function(t){return t}},zoYe:function(t,e,n){n("a1Th"),n("h7Nl"),n("Btvt");var r=n("nmnc"),i=n("eUgh"),o=n("Z0cm"),a=n("/9aa"),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}}}]);
//# sourceMappingURL=component---src-pages-index-js-8dae3674a4bae66b5e3a.js.map